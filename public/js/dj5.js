function enterParticipantField(){var e=$("body");e.on("click",".close-participant-id",function(){$(this).closest(".form-label").remove()}),e.off("keyup","#exixtingParticipantInput").on("keyup","#exixtingParticipantInput",function(e){13!==(e.keyCode?e.keyCode:e.which)||e.shiftKey||($("#add_participent_existing_user i.tick").trigger("click"),e.preventDefault())})}function addparticipants(){var e=$(".participant-panel"),t=e.outerHeight();e.css("top",-t),$(".add-participants").click(function(t){if(e.hasClass("opened")){n=e.outerHeight();e.animate({top:-n},300,function(){}),e.removeClass("opened")}else{var n=e.outerHeight();$(".close-expend").trigger("click"),e.animate({top:"45"},300,function(){}),e.addClass("opened")}})}function AddMorePArticipants(){var e='<li class="">';e+='<div class="Add-more-user"><a id="dLabel" data-target="#" href="#" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="true"><i class="icon add-user-drp add-user-icon"></i></a><input type="text" placeholder="Add Participants here" class="form-control" required="required">',e+='<ul class="dropdown-menu filter-drp add-participant-drp" aria-labelledby="dLabel">',e+='<li><a><i class="icon role-icon"></i>By Role</a></li>',e+='<li><a><i class="icon add-user-icon"></i>By Actor</a></li>',e+='<li><a><i class="icon group-icon"></i>By Group</a></li></ul></div>',e+='<div class="right-icon"><i class="icon tick add-more-Users"></i><i class="icon close delete-Users"></i></div></li>';var t=$("body");t.on("click","button.add-Users",function(t){$(this).closest("li").after(e),$(this).closest("li").remove(),"none"==$(".group-pane-wrap").css("display")&&$(".participant-panel").css("height",$(".participant-panel").height())}),t.on("click",".add-more-Users",function(e){if(""==!$(this).closest("li").find("input").val()){var t=$(this).closest("li").find("input").val(),n='<li class=""><div class="user-pic-sm"><img src="'+domainUrlApi+'img/user.png" alt=""><div class="icon green-icon shape"></div></div>';n+='<div class="chat-user-name"><h2>'+t+"</h2></div>",n+='<div class="right-icon"><i class="icon close delete-profile" data-original-title="" title=""></i></div></li>',$(this).closest("li").before(n),$(this).closest("li").find("input").val("");var i=$(window).height()-$(".header-stick-top").outerHeight()-145,a=($(".group-pane-wrap").outerHeight(),$(".participant-panel").outerHeight());a>=i?($(".individual-pane").css("height",$(".participant-panel").outerHeight()-35),$(".nano").nanoScroller(),$("#UserChat .participant-panel").css({"box-shadow":"none","border-bottom":"1px solid #ccc"})):($(".participant-panel").css("height",a+29.5),$(".individual-pane").css("height",$(".individual-pane").outerHeight()+29.5));var s=$(this).closest(".right-icon").siblings(".Add-more-user").offset().top;$(".add-participant-drp").css("top",s+28)}}),t.on("click",".delete-Users",function(e){$(this).closest("li").append().html('<button type="Submit" class="btn btn-style add-Users btn-medium">Add Participants</button>'),$(this).closest("li").remove()}),t.on("click",".delete-profile",function(e){var t=$(".individual-pane .user-listing").eq(1).outerHeight();$(".participant-panel").outerHeight()<=t||($(".participant-panel").css("height",$(".participant-panel").outerHeight()-29.5),$(".individual-pane").css("height",$(".individual-pane").outerHeight()-29.5),$("#UserChat .participant-panel").css({"box-shadow":"0px 2px 25px rgba(0, 0, 0, 0.59)","border-bottom":"0"})),$(this).closest("li").remove()}),t.on("keypress",".Add-more-user input",function(e){13==e.which&&$(".add-more-Users").trigger("click")})}function MinichatWindow(){$(".mini-dialogue-flyout").outerWidth();$(".mini-chat").click(function(e){var t=$(this).attr("id");$("#"+t+".modalFlyout").hasClass("opened")||(e.preventDefault(),!w_popout||w_popout.closed?$("#"+t+".mini-dialogue-flyout").animate({"margin-right":"0"},function(){var e=$(".mini-set-height .all-users-mini li").first().offset().top;$(".mini-set-height .all-users-mini li").first().addClass("fixedStickymini").css("top",e)}).addClass("opened"):w_popout.focus())})}function findUrl(){var e=window.location.pathname;return e=e.split("/"),$.each(e,function(t,n){"minidialog.php"==n&&(e="minidialog")}),e}function chatWidthHeight(){var e=findUrl(),t=$(window).height(),n=$(window).width(),i=($(".ref-lt-pane").height(),$(".header-wrapper").height());combineWinHT=t-i,"minidialog"==e?($(".mini-dialogue-flyout").height(combineWinHT).width(n),$(".mini-overlay-wrapper").height(combineWinHT).width(n),$(".mini-overlay-white-wrapper").height(combineWinHT).width(n),$(".dialogue-wrap").css({"margin-right":"0"})):($(".mini-dialogue-flyout").height(combineWinHT/2.1).width(n/2.2+1),$(".mini-overlay-wrapper").height(combineWinHT/2.1).width(n/2.2+1),$(".mini-overlay-white-wrapper").height(combineWinHT/2.1).width(n/2.2+1));var a=$(".mini-dialogue-flyout").width(),s=$(".mini-dialogue-flyout").height();$(".ref-textarea-HT").height();$(".dialogue-section.ref-min-center-dialogue").height(s);var o=$(".ref-textarea-HT").height()+$(".ref-submit-HT").height();$(".mini-type-textarea").height(o);var r=$(".mini-type-textarea").height();$(".ref-set-height").height(s-($(".ref-min-center-dialogue .right-bar-tab:visible").height()+r));var d={cursorcolor:"#000",cursorborder:"0",cursorborderradius:"0",cursorwidth:"2px",background:"rgba(0,0,0,.15)"};$("#add-text").niceScroll($.extend({},d,{railoffset:{left:90}})),$(".overflow_height").niceScroll(d);$(".ref-set-height").height(),$(".ref-set-height").height(),$(".ref-submit-HT").height();$(".mini_accordion_wrap").height($(".mini-dialogue-flyout").height()-$(".ref-lt-pane").height()),$(".mini_accordion_wrap .nano").height($(".mini_accordion_wrap").height()),$(".ref-user-action-HT").height(s),$(".mini_accordion_wrap .nano").nanoScroller();var l=$(".mini-dialogue-flyout").height(),c=(a=$(".mini-dialogue-flyout").width())/2;$(".mini-participant-panel").width(c).height(l),$(".mini-participant-panel .ref-actors-LT").height(l),$(".loader-actor-box").width(a).height(l),$(".ref-min-left-dialogue").height(l),$(".ref-actors-RT").height(l);$(".mini-participant-panel").width(),$(".ref-actors-RT").width();var h=a-($(".ref-min-left-dialogue").width()+$(".ref-min-right-dialogue").width());$(".ref-min-center-dialogue").width(h-4),$(".mini-type-textarea").width(h-4);var u=$(".mini-dialogue-flyout").width(),p=$(".mini-dialogue-flyout").height();$(".modalMiniDialogue").width(u).height(p);var f=$(".mini-dialogue-flyout").height();$(".mini-dialogue-flyout .reply-list-wrap").height(f).niceScroll(d)}function miniDialogue(){var e=0;setTimeout(function(){$(".mini-set-height .all-users-mini li").length&&(e=$(".mini-set-height .all-users-mini li").first().position().top)},700),$(".mini-set-height").on("update",function(t,n){setTimeout(function(){if($(".mini-set-height .all-users li").click(function(e){$(".mini-set-height .all-users li").removeClass("fixedStickymini active"),$(this).addClass("active")}),$(".mini-set-height .all-users li").hasClass("active")){if($(".mini-set-height .all-users li.active").position().top<=0)return $(".mini-set-height .all-users li.active").addClass("fixedStickymini"),$(".fixedStickymini").css("top",e),!1;$(".mini-set-height .all-users li.active").hasClass("fixedStickymini")&&("up"===n.direction&&0===n.position||n.position<=testLength&&setTimeout(function(){$(".mini-set-height .all-users li.active").removeClass("fixedStickymini")},500)),$(".mini-set-height .all-users li.active").parent().css("padding-top",0)}},20)}),$(".mini-set-height .all-users-mini li").click(function(){$(".mini-set-height .all-users-mini li").removeClass("active"),$(this).addClass("active"),$(".right-bar-tab.ref_add_right_tab").css("display","block")&&$(".mini-type-textarea").css("border-top","none"),$(".mini-type-textarea").css("display","block")?$(".mini-type-textarea").css("border-top","1px solid #dbdbdb"):$(".mini-type-textarea").css("border-top","none"),$(".right-bar-tab.ref_add_right_tab").hide(),$(".new_li_structure").click(function(){$(".right-bar-tab.ref_add_right_tab").css("display","block")&&$(".mini-type-textarea .expand-collapse-box").hasClass("append-top")&&$(".mini-type-textarea").css("border-top","none")})}),objChatfn&&chatWidthHeight();var t=$(".mini-dialogue-flyout").height(),n=$(".mini-dialogue-flyout").width()/2;$(".mini-dialogue-flyout .user-section-strip").width();$(".mini-participant-panel").width(n).height(t),$(".ref-min-left-dialogue").height(t),$(".ref-actors-RT").height(t);var i=$(".mini-participant-panel").width(),a=($(".ref-actors-LT").width(),$(".ref-actors-RT").width(),$(".ref-actorDialogue").width());$(".loader-actor-box").width(a),$(".mini-dialogue-flyout .icon-reply").click(function(){$(".ref-actorDialogue").animate({"margin-right":"0"},300,function(){$(this).show()})}),$(".mini-dialogue-flyout .close-actor-dialogue").click(function(){$(".mini-dialogue-flyout .ref-actorDialogue").animate({"margin-right":-(a+40)},300,function(){$(this).hide()}),$(".mini-overlay-white-wrapper").addClass("hide")});$(".ref-set-height").height(),$(".ref-set-height").height(),$(".ref-submit-HT").height();var s=$(".ref-textarea-HT").height(),o=$(".mini-dialogue-flyout").height();$("body").on("click",".mini-dialogue-flyout .expanded-box",function(){var e=$(".ref-min-center-dialogue .right-bar-tab:visible").outerHeight();if($("#add-text").focus(),$(this).addClass("append-top").removeClass("expanded-box"),$(".mini-type-textarea").css("border-top","none"),$(".mini-dialogue-flyout .ref-set-height").height(0),"block"==$(".right-bar-tab.ref_add_right_tab").css("display")){t=(e=$(".right-bar-tab.ref_add_right_tab").height())-$(".right-bar-tab").height();$(".mini-type-textarea").css("margin-top",t+"px").keypress(function(){$(".mini-type-textarea").css("margin-top","0px")})}else if("block"==$(".right-bar-tab.collapsed_dialogue").css("display")){var t=(e=$(".right-bar-tab.collapsed_dialogue").height())-$(".right-bar-tab").height();$(".mini-type-textarea").css("margin-top",t+"px").keypress(function(){$(".mini-type-textarea").css("margin-top","0px")})}else $(".mini-type-textarea").css("margin-top","0px");var n=o-e-2;$(".mini-type-textarea").height(n),$(".ref-textarea-HT").height(n-$(".ref-submit-HT").height()),$(".expand-collapse-box").removeClass("expanded-box").addClass("close-expend").attr("data-original-title","Collapse")}),$("body").on("click",".mini-dialogue-flyout .append-top",function(){$("#add-text").focus(),$(this).removeClass("append-top").addClass("expanded-box"),$(".mini-type-textarea").height("67px"),$(".expand-collapse-box").removeClass("close-expend").addClass("expanded-box"),$(".mini-dialogue-flyout .ref-set-height").height($(".mini-dialogue-flyout").height()-($(".right-bar-tab").height()+$(".mini-type-textarea").height())),setTimeout(function(){$(".mini-dialogue-flyout .ref-set-height.nano").nanoScroller(),$(".mini-dialogue-flyout .ref-set-height.nano").nanoScroller({scroll:"bottom"})},500),$(".mini-type-textarea").css("border-top","1px solid #dbdbdb"),$(".expand-collapse-box").attr("data-original-title","Expand"),$(".ref-textarea-HT").height(s),$(".mini-type-textarea").css("margin-top","0px"),$(".mini-type-textarea .expand-collapse-box").removeClass("append-top")?($(".mini-type-textarea").css("margin-top","0px"),$("body").on("click",".angle-collapse-up",function(){$(".right-bar-tab.collapsed_dialogue").show(),$(".mini-type-textarea").css("margin-top","0px"),$("#add-text").focus()})):$(".mini-type-textarea").css("margin-top","0px")}),$("body").on("click",".mini-dialogue-flyout .expand-collapse-box",function(){if($(".mini-type-textarea .expand-collapse-box").hasClass("append-top")){$(this).attr("data-original-title","Collapse");var e=$(".mini-type-textarea").height();$("#add-text").height(e-20)}else $(this).attr("data-original-title","Expand"),$("#add-text").height("67px")}),$("body").on("click",".windowClose",function(){window.close(),$(".windowClose",window.opener.document).removeClass("windowClose").addClass("imranClose")}),$(".create-sibling .close").click(function(){$("input.form-control").val("")}),$(".ref-create-dialogue").click(function(){if($(".part_id_block").remove(),$(".course-new-drop .course_info").focus(),$(".user-section-strip .save-chat-mini").removeClass("hide"),$(".right-bar-tab.ref_add_right_tab i").removeClass("angle-rotate-down"),$(".dropMenuCourse").html("New"),$(".ref-min-center-dialogue .right-bar-tab.default-view-tab").hide(),$(".right-bar-tab.ref_add_right_tab").show(),$(".ref_top_chat_box .nano .nano-pane").css("display","none"),$(".collapsed_dialogue.new_view_wrapper").hide(),$(".new_untitled_wrap").find(".dropMenuCourse").html("New"),$(".ref_top_head_box").css("display","block"),$(".ref_top_head_box .existing_user_titlefield").css("display","none"),$(".new_untitled_wrap").find(".new_user_titlefield").show(),0==$(".ref_add_new_title_bar").length){$("#accordion").find(".panel-heading").removeClass("panel_active"),$("#accordion").find(".dialog-accordion .online_users").removeClass("selected");var e=addNewForm();$("#accordion").prepend(e),$(".mini_accordion_wrap .panel:nth-child(2) .dialog-accordion").removeClass("in"),$(".mini_accordion_wrap .panel:nth-child(2) .base-container i").hasClass("fa-angle-down")&&$(".mini_accordion_wrap .panel:nth-child(2) .base-container i").removeClass("fa-angle-down").addClass("fa-angle-up"),$(".new_untitled_wrap .new_col_add_wrap .course-new-drop .user-name-data").html(userEmail),$(".add_nw_course_form .user-search").data("id","").val(""),getUserList(setUserID),searchCourseByTitle()}if($("input.course_info").focus(),$(".right-bar-tab.ref_add_right_tab").css("display","block")&&$(".mini-type-textarea .expand-collapse-box").hasClass("append-top")&&($(".mini-type-textarea").css("border-top","none"),"block"==$(".right-bar-tab.ref_add_right_tab").css("display"))){rightTabHght=$(".right-bar-tab.ref_add_right_tab").height();var t=rightTabHght-$(".right-bar-tab").height();$(".mini-type-textarea").css("margin-top",t+"px").keypress(function(){$(".mini-type-textarea").css("margin-top","0px")})}var n=$(".mini-dialogue-flyout").height()-$(".ref-min-center-dialogue .right-bar-tab").last(":visible").outerHeight();$(".expand-collapse-box").hasClass("append-top")&&$(".mini-type-textarea").css({height:n,"border-top":"none"}),$(".mini-type-textarea .animate-div").addClass("manage-opacity"),$(".tab-pane .ref-set-height").addClass("hide"),$(".mini-dialogue-flyout .mini-type-textarea .append-top").length&&$(".mini-dialogue-flyout .expand-collapse-box:visible").trigger("click")})}function addNewForm(){return'<div class="panel ref_add_new_title_bar existign_user_view_toggle ">                      <div class="panel-heading panel_active ">                          <div class="panel-title">                              <a role="button" class="base-container clearfix" data-toggle="collapse" data-parent="#accordion" href="#collapse-accordion-0" aria-expanded="true" aria-controls="collapse-accordion-0">                                  <div class="user-pic-sm">                                      <img src="'+domainUrlApi+'img/course-big.svg" alt="">                                  </div>                                   <div class="base-title">                                      <span class="mini-course-title truncate-course">Undefined</span>                                       <span class="mini-course-participant truncate-course" data-id="">'+setUsername+'</span>                                     </div>                                   <i class="fa fa-angle-down right"></i>                              </a>                          </div>                      </div>                      <div id="collapse-accordion-0" class="panel-collapse dialog-accordion collapse in" role="tabpanel" aria-labelledby="heading-accordion-0" aria-expanded="true">                          <div class="panel-body">                              <ul id="dialog-container">                                    <li class="online_users new selected" id="" data-id="">                                      <div class="mini-course-dialogue-box clearfix">                                          <div class="user-pic-sm">                                              <img src="'+domainUrlApi+'img/dialogue-big.png" alt="">                                          </div>                                           <div class="mini-course-dialogue-info left">                                              <span class="mini-course-dialogue-title dialog-title ">Undefined</span>                                               <span class="mini-course-dialogue-desc truncate-desc user-node-id" data-id="">'+setUsername+'</span>                                             </div>                                          <div class="mini-course-dialogue-date right">                                          </div>                                      </div>                                  </li>                              </ul>                          </div>                      </div>                  </div>'}function addActors(){var e=$("body");e.on("click",".add-participants-list",function(e){var t=$("#add_participant_new_user input").val(),n=$("#add_participant_new_user input").data("id");if($(".new_untitled_wrap").find(".course_req").addClass("hide"),$(".new_untitled_wrap .course_info").removeClass("required_border"),"New"==$(".new_untitled_wrap").find(".dropMenuCourse").text())i=$(".new_untitled_wrap .course-new-drop").find(".course_info").val().trim();else var i=$(".new_untitled_wrap .existing_user_titlefield").find(".course_info").data("id");if(""==i||void 0==i)return $(".new_untitled_wrap").find(".course_req").removeClass("hide"),$(".new_untitled_wrap .course_info").addClass("required_border"),!1;if(void 0!==n&&""!=n&&""!=t){var a="<div class='form-label part_id_block new_user_list dilaog_actor_list' data-id ='"+n+"'  ><span class='ref_span_left'><i class='icon admin-user'></i> </span><span class='user-name-data'>"+t+"</span><input type='hidden' class='user-name-val' value='"+t.split("(")[0]+"'><span class='ui_close_icon_block close-participant-id'><i class='icon close'></i></span></div>";$(this).closest(".email_input_field_ui").siblings(".participant_scroll_height_ui").append(a),$("#add_participant_new_user input").val(""),$("#add_participant_new_user input").data("id","");$(".first-div-min-participant").data("id");var s="";$(".participant_scroll_height_ui .new_user_list").each(function(){s+=$(this).data("id")+","});var o=$(".participant_scroll_height_ui .new_user_list .user-name-val").val().trim(),r=setUserID+","+s.replace(/,+$/,""),d=setUsername+", "+o;saveNewCourse(r,d,l=0),actorResize(),$(".second-div-mini-participant .nano").nanoScroller(),$(".second-div-mini-participant .nano").nanoScroller({scroll:"bottom"}),$(".ref-append-user-list").find("input").data("id","")}else{var r=setUserID,d=setUsername,l="1";saveNewCourse(r,d,l)}e.stopPropagation()}),e.on("click",".delete-participants",function(e){var t=$(".first-div-min-participant").data("id"),n=$(this).closest("li").data("id"),i=$(this).closest("li").find(".expanded-content").text();if($(this).closest("li").hasClass("old_actor_list"))var a="old",s="addInFile";else var a="new",s="addInFile";$(this).closest("li").remove(),0==$(".dilaog_actor_list").length&&$(".no-paticipant").css("display","block").text("No participants added."),removeUserFromFile(t,n,i,s,a);var o=$(".add-participant-js").height();if(o>$(".add-participant-js .user-listing li").height()*$(".add-participant-js .user-listing li").length){var r=o-$(".add-participant-js .user-listing li").height();$(".add-participant-js").height(r),$(".second-div-mini-participant .nano").nanoScroller({destroy:!0}),$(".add-participant-js").removeClass("siblingfixed"),$(".add-participant-js .nano-content").css("right","-17px")}}),e.on("keypress",".ref-append-user-list input",function(e){13==e.which&&$(".add-participants-list").trigger("click"),e.stopPropagation()}),e.on("keypress","#add_participant_new_user input",function(e){13==e.which&&$(".add-participants-list").trigger("click"),e.stopPropagation()})}function actorResize(){var e=$(".mini-participant-panel").height()-($(".first-div-min-participant").height()+$(".second-div-mini-participant .partcipant-head").height()+$(".create-sibling").height());if(!$(".add-participant-js").hasClass("siblingfixed")){$(".add-participant-js .user-listing li").length,$(".add-participant-js .user-listing li").height();$(".add-participant-js").height(e-50)}e<=$(".create-sibling").height()+$(".add-participant-js .user-listing li").height()&&($(".second-div-mini-participant .nano").nanoScroller(),$(".second-div-mini-participant .nano").nanoScroller({scroll:"bottom"}),$(".add-participant-js").addClass("siblingfixed")),$(".add-participant-js").height()>=$(".add-participant-js .user-listing li").height()*$(".add-participant-js .user-listing li").length&&$(".second-div-mini-participant .nano").nanoScroller({})}function renameTitleMiniDialogue(){$("body").tooltip({selector:'[data-toggle="tooltip"]'}),$(".rename-title-mini .rename-edit-cover-box").click(function(e){$(this).addClass("hide"),$(".rename-title-mini .dialog-tilte-node-id, .rename-title-mini .title-icon").addClass("hide"),$(".edit-rename-title-mini").removeClass("hide"),$(".edit-dialogue-span-box .edit-dialog-random-title").select(),$(".mini_arrow_up.angle-collapse-up").addClass("abc"),e.stopPropagation()}),$(".edit-rename-title-mini i").click(function(e){$(".rename-title-mini .rename-edit-cover-box").removeClass("hide"),$(".edit-rename-title-mini").addClass("hide"),$(".mini_arrow_up.angle-collapse-up").removeClass("abc"),$(".rename-title-mini .dialog-tilte-node-id, .rename-title-mini .title-icon").removeClass("hide"),e.stopPropagation()})}function ipadContextMenu(){}function resizeToMinimum(e,t){var e=e>w_popout.outerWidth?e:w_popout.outerWidth,t=t>w_popout.outerHeight?t:w_popout.outerHeight;w_popout.outerWidth<screen.width&&w_popout.resizeTo(e,t)}function miniDialogueResizeShrink(){$(".pu_plugin_mini_dialogue.opened").resizable({handles:"n, w, nw",resize:function(e,t){var n=$(window).height(),i=$(window).width(),a=$(".mini-dialogue-flyout").width(),s=a-($(".mini-dialogue-flyout .tabing-section").width()+$(".ref-min-right-dialogue").width()),o=$(".mini-type-textarea").height(),r=$(".right-bar-tab").height(),d=$(".first-div-min-participant").height(),l=$(".mini-dialogue-flyout").height(),c=$(".pu_plugin_mini_dialogue .search-existing-course").width(),h=$(".pu_plugin_mini_dialogue .autosuggest_dropdown_width").width(),u=$(".ref-actorDialogue").width(),p=$(".mini-dialogue-flyout").width(),f=$(".mini-dialogue-flyout").height();$(".ref-min-center-dialogue .right-bar-tab").height(),$(".people-section .ref-lt-pane").height(),$(".people-section .tab_box").height();$(".mini_accordion_wrap").height($(".mini-dialogue-flyout").height()-$(".ref-lt-pane").height()),$(".mini_accordion_wrap .nano").height($(".mini_accordion_wrap").height()),$(".modalMiniDialogue").width(p).height(f),$(".ref-min-center-dialogue, .mini-type-textarea").width(s-3),$(".mini-dialogue-flyout .tabing-section , .mini-dialogue-flyout .ref-min-left-dialogue, .mini-dialogue-flyout .ref-actorDialogue, .mini-dialogue-flyout .ref-actors-RT, .mini-dialogue-flyout .ref-actors-LT, .pu_plugin_mini_dialogue .loader-actor-box").height(l),$(".mini-dialogue-flyout .reply-list-wrap").height(l),$(".mini-dialogue-flyout .ref-set-height").height(l-(o+r)),$(".mini-dialogue-flyout .second-div-mini-participant .add-participant-js").height(l-d),$(".mini-overlay-wrapper, .mini-overlay-white-wrapper").width(a),$(".pu_plugin_mini_dialogue .loader-actor-box").width(u),$(".mini-overlay-wrapper, .mini-overlay-white-wrapper").height(l),$(".expand-collapse-box").hasClass("append-top")&&(refMinRightTabHghtAppend=$(".ref-min-center-dialogue .right-bar-tab:visible").height(),totalMiniTextHghtAppend=f-refMinRightTabHghtAppend,$(".mini-type-textarea, .ref-textarea-HT").height(totalMiniTextHghtAppend-1),$("#add-text").height("100%")),$("body").on("click",".expanded-box",function(){refMinRightTabHght1=$(".ref-min-center-dialogue .right-bar-tab:visible").height(),totalMiniTextHght=f-refMinRightTabHght1,$(".mini-type-textarea, .ref-textarea-HT").height(totalMiniTextHght-1),$("#add-text").height("100%")}),$(".pu_plugin_mini_dialogue.opened").resizable("option","maxWidth",i-5).resizable("option","maxHeight",n-5).resizable("option","minWidth",640).resizable("option","minHeight",300),$(".pu_plugin_mini_dialogue .addAutoCompleteBox .autocomplete-suggestions").width(c),$(".pu_plugin_mini_dialogue .email_input_field_ui .autocomplete-suggestions").width(h),$(".pu_plugin_mini_dialogue .addAutoCompleteBox .autocomplete-suggestions, .pu_plugin_mini_dialogue .email_input_field_ui .autocomplete-suggestions, .pu_plugin_mini_dialogue .add_participant_user .autocomplete-suggestions").hide();var v=$(".create-sibling").width();$(".pu_plugin_mini_dialogue.mini-dialogue-flyout .create-sibling .Add-more-participants .autocomplete-suggestions").width(v-10),$(".pu_plugin_mini_dialogue.opened").width()>=1010?($(".tabing-section, .right-dialogue-panel").width(a/4),$(".ref-min-center-dialogue, .mini-type-textarea").width(3*a/4-62),$(".ref-min-right-dialogue").css("width","60px")):($(".tabing-section, .right-dialogue-panel").css("width","230px"),$(".tabing-section, .right-dialogue-panel").width(!1)&&($(".ref-min-right-dialogue").css("width","60px"),$(".ref-min-center-dialogue, .mini-type-textarea").width(a-291)));var m=a/2;$(".mini-dialogue-flyout .user-section-strip").width();$(".mini-participant-panel.ref-actorDialogue").width(m)}})}function MinichatWindow(){$(".mini-dialogue-flyout").outerWidth();$(".mini-chat").click(function(e){var t=$(this).attr("id");$("#"+t+".modalFlyout").hasClass("opened")||(e.preventDefault(),!w_popout||w_popout.closed?$("#"+t+".mini-dialogue-flyout").animate({"margin-right":"0"},function(){var e=$(".mini-set-height .all-users-mini li").first().offset().top;$(".mini-set-height .all-users-mini li").first().addClass("fixedStickymini").css("top",e)}).addClass("opened"):w_popout.focus())})}function miniActiveCollapse(){$("body").on("click",".mini-accordion-wrap .panel",function(){var e=$(".mini-accordion-wrap .base-container i");e.hasClass("fa-angle-up")&&e.removeClass("fa-angle-up").addClass("fa-angle-down")})}function tmsavePhase(){NProgress.start();$.post(domainUrl+"process/saveTimeLine",{data:$("#timeline_form").serialize()},responceEventStatus,"html")}function expandCollapseGroup(){var e;$("body").on("click",".icon-group-expand",function(){e=$("table.process-meter").width(),$(this).addClass("icon-group-collapse").removeClass("icon-group-expand"),$("tr").each(function(){$(this).children(".group-Expand").prevUntil(".group-collapse").addClass("hide")});var t=0;$(".process-meter tr.row-0").children(".group-collapse").nextAll("td:visible").each(function(e,n){t+=parseInt($(n).width())}),$("table.process-meter").css("width",t),$(".fixed-top-header").css("left",364)}),$("body").on("click",".icon-group-collapse",function(){$(this).addClass("icon-group-expand").removeClass("icon-group-collapse"),$("table.process-meter").css("width",e),$("tr").each(function(){$(this).children(".group-Expand").prevUntil(".group-collapse").removeClass("hide")}),$(".fixed-top-header").css("left",365)})}function removeNodeXpane(){var e=$(".content-wrapper-new").width()/2;$("#div-node-x-property").removeClass("active"),$(".content-wrapper-new").find(".dashSlider.active").css("width",e)}function responsemeterThreePane(e,t){$(".threePaneWrapper").html(e)}function IsJsonString(e){try{JSON.parse(e)}catch(e){return!1}return!0}function fetchClasses(){function e(n,i){var a=Object.keys(n.instances[0].property)[0],s=n.instances[0].property[a],o=n.node_id;if(void 0==i?$("#canvasNodeList ul:first").append("<li class='noMap classField' data-classID='"+o+"'><span class='mappingNode' contenteditable='false'>"+n.caption+"</span></li>"):$("#canvasNodeList ul:first").append("<li class='noMap classField subClass' data-classID='"+o+"'><span class='mappingNode' contenteditable='false'>"+n.caption+"</span></li>"),$("#canvasNodeList ul li:last").append("<ul><li class='noMap propertiesField'><span class='mappingNode' contenteditable='false'>"+s.caption+"</span></li></ul>"),-1!=Object.keys(s).indexOf("child")&&t(s.child,$("#canvasNodeList ul li ul li:last")),$("#canvasNodeList").show(),void 0!=n.childsArray){var r=Object.keys(n.childsArray);if(r.length>0)for(var d=0;d<r.length;d++)e(n.childsArray[d],"subClass")}}function t(e,n){for(var i=n,a=Object.keys(e),s=0;s<a.length;s++){var o=e[a[s]];if(void 0==o.child){i.append("<li class='normal'><span class='mappingNode' contenteditable='false'>"+o.caption+"</span></li>");var r=[];i.find("li:last").parents().each(function(){if(void 0!=$(this).attr("class")){var e=$(this).attr("class");if(-1!=e.indexOf("classField"))return r.push($(this).attr("data-classID")+"~$~"),!1;-1!=e.indexOf("headField")&&r.push($(this).find("span:first").text())}}),r=r.reverse();for(var d="",l=0;l<r.length;l++)1==l||0==l?d+=r[l]:d=d+">"+r[l];1==r.length?$("#canvasNodeList ul li:last span").attr("data-source",d+$("#canvasNodeList ul li:last span").text()):$("#canvasNodeList ul li:last span").attr("data-source",d+">"+$("#canvasNodeList ul li:last span").text())}else i.append("<li class='noMap headField'><span class='mappingNode' contenteditable='false'>"+o.caption+"</span></li>");if(-1!=Object.keys(o).indexOf("child")){i.find("li:last").append("<ul></ul>");var c=i.find("li:last ul");t(o.child,c)}}}$.ajax({url:domainUrl+"puidata/page_plugin/code.php?action=getClassList"}).done(function(e){if(IsJsonString(e))var t=$.parseJSON(e);else t=e;$("#selClassDropdown").empty();for(var n=0;n<=t.length-1;n++)0==n&&$("#selClassDropdown").append("<option value='select'>-Select Class-</option>"),$("#selClassDropdown").append("<option value='"+t[n].node_class_id+"'>"+t[n].caption+"</option>")}),$("#selClassDropdown").change(function(){if($("#canvasNodeList ul").empty(),"select"==$(this).val())return $("#canvasNodeList").hide(),!1;$.ajax({url:domainUrl+"puidata/page_plugin/code.php?action=getClassPropertyStrVal&classId="+$(this).val()}).done(function(t){e($.parseJSON(t))})})}function canvasColumnResize(e){function t(e){f=r,startX=e.clientX,startY=e.clientY,startWidth=parseInt(document.defaultView.getComputedStyle(f).width,10),startHeight=parseInt(document.defaultView.getComputedStyle(f).height,10),u=e.clientX,p=e.clientY,$("#gthorresizer").addClass("activeMode"),document.documentElement.addEventListener("mousemove",i,!1),document.documentElement.addEventListener("mouseup",s,!1)}function n(e){f=r,v=$(f).closest("table").outerWidth(),startX=e.clientX,startY=e.clientY,startWidth=parseInt(document.defaultView.getComputedStyle(f).width,10),startHeight=parseInt(document.defaultView.getComputedStyle(f).height,10),u=e.clientX,p=e.clientY,$("#gtresizer").addClass("activeMode"),document.documentElement.addEventListener("mousemove",a,!1),document.documentElement.addEventListener("mouseup",o,!1)}function i(e){$(".canvasEDTTable").addClass("unselectable"),canMouseDown=1,l.style.top=e.clientY+"px",c.style.left=e.clientX+"px",e.preventDefault()}function a(e){$(".canvasEDTTable").addClass("unselectable"),canMouseDown=1,d.style.left=e.clientX+"px",c.style.left=e.clientX+"px",e.preventDefault()}function s(e){p=e.clientY+startHeight-p;f.cellIndex;$(f).closest("tr").find("td:first").css("height",p+"px"),canMouseDown=0,$("#gthorresizer").removeClass("activeMode"),$("#gtresizer").removeClass("activeMode"),$(".canvasEDTTable").removeClass("unselectable"),c.style.display="none",document.documentElement.removeEventListener("mousemove",i,!1),document.documentElement.removeEventListener("mouseup",s,!1),undoRedoCanvasMode()}function o(e){u=e.clientX+startWidth-u,p=e.clientY+startWidth-p,u<0&&(u=50);var t=f.cellIndex,n=$(f).closest("table").find("tr:first > td:eq("+t+")"),i=(n.outerWidth(),n.next("td").outerWidth());if(n.css("min-width",u+"px"),n.css("width",u+"px"),0==n.next("td").length){var s=v-(startWidth-u);n.closest("table").outerWidth(s)}else{if(startWidth>u){r=u-startWidth;i+=Math.abs(r)}else{var r=u-startWidth;i-=Math.abs(r)}n.next("td").css("min-width",i+"px"),n.next("td").css("width",i+"px")}d.style.left=f.offsetLeft+f.offsetWidth-5+"px",canMouseDown=0,$("#gtresizer").removeClass("activeMode"),$("#gthorresizer").removeClass("activeMode"),$(".canvasEDTTable").removeClass("unselectable"),c.style.display="none",document.documentElement.removeEventListener("mousemove",a,!1),document.documentElement.removeEventListener("mouseup",o,!1);var l=$(f).closest("table").closest("td").outerWidth(),h=$(f).next("td").width(),g=$(f).next("td").find("table").outerWidth(),b=$(f).width(),C=$(f).find("table").outerWidth();null==l&&(l="756"),$(f).closest("table").outerWidth()>l?($("#edtInnerCanvasView").html(m),bootbox.alert("Invalid Resizing")):h<g?($("#edtInnerCanvasView").html(m),bootbox.alert("Invalid Resizing")):b<C?($("#edtInnerCanvasView").html(m),bootbox.alert("Invalid Resizing")):undoRedoCanvasMode()}var r=e[0],d=(document.getElementById("gridViewHead"),document.createElement("div"));d.id="gtresizer";var l=document.createElement("div");l.id="gthorresizer";var c=document.createElement("div");c.id="gridLine";var h=document.getElementById("gtresizer");null==h?(document.getElementById("edtInnerCanvasView").appendChild(d),document.getElementById("edtInnerCanvasView").appendChild(l),document.getElementById("edtInnerCanvasView").appendChild(c)):(d=h,l=document.getElementById("gthorresizer"),c=document.getElementById("gridLine")),d.removeEventListener("mousedown",n,!1),l.removeEventListener("mousedown",t,!1);var u=0,p=0,f=r,v=0;d.style.left=$(r).offset().left+r.offsetWidth-5+"px",d.style.top=$(r).offset().top+"px",d.style.height=r.offsetHeight+"px",l.style.left=$(r).offset().left+"px",l.style.top=$(r).offset().top+r.offsetHeight-5+"px",l.style.width=r.offsetWidth+"px",c.style.top=$(r).offset().top+r.offsetHeight+"px";var m=$.trim($("#edtInnerCanvasView").html());d.onmousedown=n,l.onmousedown=t}function rangeInitializeCanvas(){rangy.init();var e=rangy.modules.ClassApplier||rangy.modules.CssClassApplier;rangy.supported&&e&&e.supported&&(canvasBoldApplier=rangy.createClassApplier("canvasBold"),canvasUnderlineApplier=rangy.createClassApplier("canvasUnderline"),canvasItalicApplier=rangy.createClassApplier("canvasItalic"),canvasFontFamilyApplier=rangy.createClassApplier("fontFamily",{elementProperties:{style:{"font-family":"inherit"}}}),canvasFontFamilySizeApplier=rangy.createClassApplier("fontSize",{elementProperties:{style:{"font-size":"inherit"}}}),canvasFontFamilyColorApplier=rangy.createClassApplier("fontColor",{elementProperties:{style:{color:"inherit"}}}),canvasFontFamilyBGColorApplier=rangy.createClassApplier("fontBGColor",{elementProperties:{style:{"background-color":"inherit"}}}))}function undoRedoCanvasMode(){currentUndoRedoStateCanvas=null;var e=$("#edtInnerCanvasView");$.trim(e.html())!=statusUndoRedoCanvas[statusUndoRedoCanvas.length-1]&&(statusUndoRedoCanvas.push($.trim(e.html())),statusUndoRedoCanvas.length>undoRedoLengthCanvas&&statusUndoRedoCanvas.shift())}function pasteCanvasHtmlAtCaret(e){var t,n;if(window.getSelection){if(t=window.getSelection(),0==$(t.anchorNode).closest(".canvasEDTTable").length)return bootbox.alert("Please place your cursor at valid location"),!1;if(t.getRangeAt&&t.rangeCount){(n=t.getRangeAt(0)).deleteContents();var i=document.createElement("div");i.innerHTML=e;for(var a,s,o=document.createDocumentFragment();a=i.firstChild;)s=o.appendChild(a);n.insertNode(o),s&&((n=n.cloneRange()).setStartAfter(s),n.collapse(!0),t.removeAllRanges(),t.addRange(n))}}else document.selection&&"Control"!=document.selection.type&&document.selection.createRange().pasteHTML(e)}function insertAtCaret(e,t){var n=e[0];if(n){var i=n.scrollTop,a=0,s=n.selectionStart||"0"==n.selectionStart?"ff":!!document.selection&&"ie";if("ie"==s){n.focus();var o=document.selection.createRange();o.moveStart("character",-n.value.length),a=o.text.length}else"ff"==s&&(a=n.selectionStart);var r=n.value.substring(0,a),d=n.value.substring(a,n.value.length);if(n.value=r+t+d,a+=t.length,"ie"==s){n.focus();var l=document.selection.createRange();l.moveStart("character",-n.value.length),l.moveStart("character",a),l.moveEnd("character",0),l.select()}else"ff"==s&&(n.selectionStart=a,n.selectionEnd=a,n.focus());n.scrollTop=i}}function loaderCanvas(e,t,n){if(e){"undefined"===e.length&&(e=[e]);for(var i=e.length,a=0;a<e.length;a++)t(e,a,function(e,t){0==--i&&n(e)})}}function loadCImage(e,t,n){$("#edtInnerCanvasView .dragCanvasContainer:last").index();pdfImg={};var i=function(a){a.target.removeEventListener("load",i),pdfImg[t]={target:a.target.src,height:a.target.height},n(e,t)},a=new Image;a.addEventListener("load",i,!1),a.src=e[t]}function firstresponceCreateOperation(e,t){displayLoader();var n="",i=$("input[type='radio'][name='sub_op2']:checked");i.length>0&&(n=i.val());var a=$(this).closest("td"),s=$(a).closest("tr"),o=($(s).closest("table"),Array()),r=0,d=$(".center-div .fixed-left-column .domain-count").length,l=$(".center-div .fixed-left-column .role-count").length,c=0;c=$(".center-div .fixed-left-column .row-0").find(".add-sub-more-operation").length,$(e).each(function(){$(this);$("tbody tr",$(this)).each(function(e,t){var n=$(this).attr("class");$(this).find("td").each(function(t,i){o[r]=e+"@"+t+"@"+n+"@"+$(this).attr("class")+"@"+$(this).html(),r++})})}),$.post(domainUrl+"grid/subOperationSegment",{data:o,Op2:n,domaincount:d,rolecount:l,suboperationCount:c},responceCreateOperation,"HTML")}function firstLogicresponceCreateOperation(e,t){displayLoader();var n="",i=$("input[type='radio'][name='sub_op2']:checked");i.length>0&&(n=i.val());var a=$(this).closest("td"),s=$(a).closest("tr"),o=($(s).closest("table"),Array()),r=0,d=$(".center-div .fixed-left-column .domain-count").length,l=$(".center-div .fixed-left-column .role-count").length;$(e).each(function(){$(this);$("tbody tr",$(this)).each(function(e,t){var n=$(this).attr("class");$(this).find("td").each(function(t,i){o[r]=e+"@"+t+"@"+n+"@"+$(this).attr("class")+"@"+$(this).html(),r++})})}),$.post(domainUrl+"grid/subLogicOperationSegment",{data:o,Op2:n,domaincount:d,rolecount:l},responceCreateOperation,"HTML")}function responceCreateOperation(e,t){$(".center-div").html(e);var n=0;$(".center-div table").find("tr:first td").each(function(){n>0&&$(this).find(".top-col").html(n),n++});var i=0,a=0;$(".center-div table.fixed-left-column").find("tr").each(function(){a++,$(this).find("td:first").each(function(){0!=i&&$(this).html(i),i++})}),Operationmargecell(),$(".center-div tr").find(".destructure").closest("td").next().prevAll("td.collapse").find(".destructure").closest("td").addClass("border-light-bottom border-light-top"),setColRowClass(),$(".dropdown-menu").removeClass("show"),$("i.active").hide(),$("i").removeClass("active"),removeSelection(),isAutonumberDisplay=!$(".show-auto-number").hasClass("hide-gridNumber"),$(".creation-node").parent(".event.creation-bg").addClass("event-bg"),$(".creation-node").parent(".event.creation-bg").prev("td.creation-bg").addClass("border-light-top"),$(".center-div").scrollTop(0),$(".center-div .blankRow").each(function(){var e=$(".center-div .fixed-left-column .row-0").find(".add-sub-more-operation").index();$(this).find("td").each(function(t){t!=e&&t!=parseInt(e)+1||$(this).addClass("blankRowTd")})}),removeInteractiobborder(),runAlgorithmOfAutoNumbering(),$("#course-path-number").hasClass("On")&&($(".fixed-left-column").find(".border-green, .bg-green, .border-bottom-green").removeClass("border-green bg-green border-bottom-green"),$(".table-count:first").addClass("activeNum"),$(".activeNum").closest("td").addClass("border-green bg-green border-bottom-green"),$(".fixed-left-column [class*=parent_]").removeClass("show_number_grey"),$(".fixed-left-column [class*=parent_]").not(":first").nextAll().addClass("show_number_grey"))}function addLogicOperationSegment(e,t,n,i,a,s,o,r){displayLoader();var d=Array(),l=0,c=0;c=$(".center-div .fixed-left-column").find(".event-before:last").parent().index()>0?1:0,$(".center-div table.fixed-left-column").each(function(){$(this);$("tbody tr",$(this)).each(function(e,t){var n=$(this).attr("class");$(this).find("td").each(function(t,i){d[l]=e+"@"+t+"@"+n+"@"+$(this).attr("class")+"@"+$(this).html(),l++})})});var h=0;h=$(".center-div .fixed-left-column .row-0 .col-"+t).nextAll("td.add-sub-more-operation").length,$.post(domainUrl+"grid/addLogicOperationSegment",{data:d,currentRow:e,currentColumn:t,type:n,roleNo:i,NonSquential:a,currentLength:o,domaincount:s,lastColumn:r,suboperationCount:h,eventCount:c},responceAddOperationSegment,"HTML")}function addOperationSegment(e,t,n,i,a,s,o,r){displayLoader();var d=Array(),l=0,c=0;c=$(".center-div .fixed-left-column").find(".event-before:last").parent().index()>0?1:0,$(".center-div table.fixed-left-column").each(function(){$(this);$("tbody tr",$(this)).each(function(e,t){var n=$(this).attr("class");$(this).find("td").each(function(t,i){d[l]=e+"@"+t+"@"+n+"@"+$(this).attr("class")+"@"+$(this).html(),l++})})});var h=0;h=$(".center-div .fixed-left-column .row-0").find(".add-sub-more-operation").length,$.post(domainUrl+"grid/addOperationSegment",{data:d,currentRow:e,currentColumn:t,type:n,roleNo:i,NonSquential:a,domaincount:s,currentLength:o,blankRow:r,domaincount:s,suboperationCount:h,eventStatusCol:c},responceAddOperationSegment,"HTML")}function responceAddOperationSegment(e,t){$(".center-div").html(e);var n=0;$(".center-div table").find("tr:first td").each(function(){n>0&&$(this).find(".top-col").html(n),n++});var i=0,a=0;$(".center-div table.fixed-left-column").find("tr").each(function(){a++,$(this).find("td:first").each(function(){0!=i&&$(this).html(i),i++})}),Operationmargecell(),$(".center-div tr").find(".destructure").closest("td").next().prevAll("td.collapse").find(".destructure").closest("td").addClass("border-light-bottom border-light-top"),$(".center-div tr").find(".col-text").closest("td").last().next().prevAll("td.collapse.event").addClass("border-right"),setColRowClass(),isAutonumberDisplay=!$(".show-auto-number").hasClass("hide-gridNumber"),$(".center-div table.fixed-left-column").find("tr").last().prevAll("tr").children("td").hasClass("border-bottom")&&$(".center-div table.fixed-left-column").find("tr").last().prevAll("tr").children("td").removeClass("border-bottom"),removeInteractiobborder(),runAlgorithmOfAutoNumbering(),setTableWidth()}function moveSegment(e,t,n){displayLoader();var i=Array(),a=0,s="",o=0,r=0,d=Array(),l="",c=0;$(".center-div table").each(function(){$(this);$("tbody tr",$(this)).each(function(e,t){var n=$(this).attr("class");$(this).find("td").each(function(t,o){if(1==e&&c++,2==e&&1==t){var r=$(this).attr("class");s=$.grep(r.split(" "),function(e,t){return 0===e.indexOf("parent_")}).join()}i[a]=e+"@"+t+"@"+n+"@"+$(this).attr("class")+"@"+$(this).html(),a++})})});var h=$(".center-div ."+s).length,u=$(".center-div .parent_"+e+"_"+t).length;if("UP"==n){o=parseInt(e)-1,d=$(".center-div .cell_"+o+"_"+t).attr("class").split(/\s+/);for(var p=0;p<d.length;++p)"par"===d[p].substr(0,3)&&(l=d[p]);r=$(".center-div ."+l).length}else o=parseInt(u)+parseInt(e),r=$(".center-div .parent_"+o+"_"+t).length;var f=0;0==(f=""!=(f=$(".center-div .parent_"+e+"_"+t).next("td").next("td").find(".operation-text").length)?f:0)?$.post(domainUrl+"grid/moveSegment",{data:i,currentRow:e,currentColumn:t,noofRows:h,checkoperation:f,type:n,parentLength:u,PreMoveRow:r,lastClmIndx:c},responceAddSegment,"HTML"):$.post(domainUrl+"grid/moveSegment",{data:i,currentRow:e,currentColumn:t,noofRows:h,checkoperation:f,type:n,parentLength:u,PreMoveRow:r,lastClmIndx:c},responceAddOperationSegment,"HTML")}function moveAssoSegment(e,t,n){displayLoader();var i=Array(),a=0,s="",o=0,r=0,d=Array(),l="",c=0;$(".center-div table").each(function(){$(this);$("tbody tr",$(this)).each(function(e,t){var n=$(this).attr("class");$(this).find("td").each(function(t,o){if(1==e&&c++,2==e&&1==t){var r=$(this).attr("class");s=$.grep(r.split(" "),function(e,t){return 0===e.indexOf("parent_")}).join()}i[a]=e+"@"+t+"@"+n+"@"+$(this).attr("class")+"@"+$(this).html(),a++})})});var h=$(".center-div ."+s).length,u=$(".center-div .parent_"+e+"_"+t).length;if("UP"==n){o=parseInt(e)-1,d=$(".center-div .cell_"+o+"_"+t).attr("class").split(/\s+/);for(var p=0;p<d.length;++p)"par"===d[p].substr(0,3)&&(l=d[p]);r=$(".center-div ."+l).length}else o=parseInt(u)+parseInt(e),r=$(".center-div .parent_"+o+"_"+t).length;var f=$(".center-div .fixed-left-column .Process").length;pushactorCol=[],$(".center-div table.fixed-left-column .add-role-segment").each(function(){pushactorCol.push($(this).closest("td").index())}),$.post(domainUrl+"associations/moveSegment",{data:i,currentRow:e,currentColumn:t,noofRows:h,type:n,parentLength:u,PreMoveRow:r,lastClmIndx:c,NoOfProcess:f,pushactorCol:pushactorCol},responceAddOperationSegment,"HTML")}function addAssociationSegment(e,t,n,i,a){displayLoader();var s=Array(),o=0,r="";$(".center-div table.fixed-left-column").each(function(){$(this);$("tbody tr",$(this)).each(function(e,t){var n=$(this).attr("class");$(this).find("td").each(function(t,i){if(2==e&&1==t){var a=$(this).attr("class");r=$.grep(a.split(" "),function(e,t){return 0===e.indexOf("parent_")}).join()}s[o]=e+"@"+t+"@"+n+"@"+$(this).attr("class")+"@"+$(this).html(),o++})})});var d=$(".center-div ."+r).length;0==(a=""!=a?a:0)?$.post(domainUrl+"associations/addSegment",{data:s,currentRow:e,currentColumn:t,noofRows:d,checkrole:a,type:n},associationResponceCreatePhase,"HTML"):$.post(domainUrl+"associations/addSegment",{data:s,currentRow:e,currentColumn:t,noofRows:d,checkrole:a,type:n,roleNo:i},associationResponceCreatePhase,"HTML")}function addSegment(e,t,n,i,a,s,o){displayLoader();var r=Array(),d=0,l="";$(".center-div table.fixed-left-column").each(function(){$(this);$("tbody tr",$(this)).each(function(e,t){var n=$(this).attr("class");$(this).find("td").each(function(t,i){if(2==e&&1==t){var a=$(this).attr("class");l=$.grep(a.split(" "),function(e,t){return 0===e.indexOf("parent_")}).join()}r[d]=e+"@"+t+"@"+n+"@"+$(this).attr("class")+"@"+$(this).html(),d++})})});var c=0;c=$(".center-div .fixed-left-column").find(".event-before:last").parent().index()>0?1:0;var h=Array(),u=$(".center-div ."+l).length,p=0,f=0;p=$(".center-div .parent_"+e+"_"+t).next("td").next("td").find(".operation-text").length;$(".center-div .parent_"+e+"_"+t).next("td").next("td").find(".operation-text").attr("class");$($(".center-div .parent_"+e+"_"+t).next("td").next("td").find(".operation-text")).each(function(e){1==$(this).parents("tr").prev("tr").hasClass("blankRow")&&h.push(e)}),f=$(".center-div .fixed-left-column .row-0").find(".add-sub-more-operation").length,p=""!=p?p:0;var v=[],m=[];$(".center-div .seq").each(function(){v.push($(this).find(".operation-delete").parents("tr").index()+parseInt(2)),m.push($(this).find(".operation-delete").parents("td").index())}),0==p?$.post(domainUrl+"grid/addSegment",{data:r,currentRow:e,currentColumn:t,noofRows:u,checkoperation:p,type:n,currentLength:s,domaincount:o,suboperationCount:f,indexRow:v,indexCol:m,eventCount:c},responceAddSegment,"HTML"):$.post(domainUrl+"grid/addSegment",{data:r,currentRow:e,currentColumn:t,noofRows:u,checkoperation:p,type:n,roleNo:i,nonSequence:a,currentLength:s,domaincount:o,indexRow:v,indexCol:m,suboperationCount:f,eventCount:c},responceAddOperationSegment,"HTML")}function responceAddSegment(e,t){$(".center-div").html(e);var n=0;$(".center-div table").find("tr:first td").each(function(){n>0&&$(this).find(".top-col").html(n),n++});var i=0,a=0;$(".center-div table.fixed-left-column").find("tr").each(function(){a++,$(this).find("td:first").each(function(){0!=i&&$(this).html(i),i++})}),margecell(),$(".center-div tr").find(".destructure").closest("td").next().prevAll("td.collapse").find(".destructure").closest("td").addClass("border-light-bottom border-light-top"),$(".center-div tr").find(".col-text").closest("td").last().next().prevAll("td.collapse.event").addClass("border-right"),setColRowClass(),isAutonumberDisplay=!$(".show-auto-number").hasClass("hide-gridNumber"),$("tr").last().prevAll("tr").children("td").hasClass("border-bottom")&&$("tr").last().prevAll("tr").children("td").removeClass("border-bottom"),removeInteractiobborder(),runAlgorithmOfAutoNumbering(),$(".phase-segment").removeClass("active show")}function createEventStatus(e,t,n){displayLoader(),$("#EventStatusModal").modal("show");var a=[];$.each($("input[name='event_status[]']:checked"),function(){a.push($(this).val())});var s="";$.each($("input[name='eventstatus']:checked"),function(){s=$(this).val()}),$_this=$(this);var o="",r=["before","after","completion","desctructor"];$(this).closest(".dropdown-menu").removeClass("show");var d=$(this).closest("td"),l=$(d).parent("tr"),c=($(l).parent(),e);myRow=n;var h=$(".center-div .fixed-top-header").find(".row_1").find(".sys-icon").parent().parent().index(),u=($(".center-div .fixed-left-column").find(".check-role").eq(0).parents("td").index(),$(".center-div .parent_"+myRow+"_"+c).length),p=0,f=0;p=$(".center-div .fixed-left-column").find(".event-before:last").parent().index(),f=$(".center-div .fixed-left-column").find(".row_"+myRow).find(".col-"+p).children("div").hasClass("event-before");var v=!1,m=parseInt(myRow)+parseInt(u);for(i=parseInt(myRow);i<=parseInt(m);i++)$(".center-div .fixed-left-column").find(".row_"+i).find(".col-"+p).children("div").hasClass("event-before")&&(v=$(".center-div .fixed-left-column").find(".row_"+i).find(".col-"+p).children("div").hasClass("event-before"));if(-1==p&&0==v?(f=0,o=0):(f=1,o=0),a.length>1)2==a.length?(hideLoader(),$(".lodding").hide(),"after"==a[0]&&"completion"==a[1]?-1!=p&&1==v?deleteAfterCopmletionStatus(myRow,c,a,u,p,o,f,v,h,g):addAfterCopmletion(myRow,c,a,u,o,f,v):"after"==a[0]&&"destructor"==a[1]?-1!=p&&1==v?deleteAD(myRow,c,a,u,p,o,f,v,h,g):addAfterDestructure(myRow,c,a,u,o,f,v):"completion"==a[0]&&"destructor"==a[1]?-1!=p&&1==v?deleteCD(myRow,c,a,u,p,o,f,v,h,g):addCopmletionDestructure(myRow,c,a,u,o,f,v):-1!=p&&1==v?deleteALL(myRow,c,a,u,p,o,f,v,h,g):addMultipleEvent(myRow,c,a,u,o,f,v)):-1!=p&&1==v?deleteALL(myRow,c,a,u,p,o,f,v,h,g):addMultipleEvent(myRow,c,a,u,o,f,v);else{var g=getMatch(r,a);"before"==g?-1!=p&&1==v?deleteStatusEvent(myRow,c,g,u,p,o,f,v,h,g):addEventStatus(myRow,c,g,u,o,f,v):"after"==g?-1!=p&&1==v?deleteAfterStatus(myRow,c,g,u,p,o,f,v,h,g):addAfterEventStatus(myRow,c,g,u,o,f,v):"completion"==g?-1!=p&&1==v?deleteCompletionStatus(myRow,c,g,u,p,o,f,v,h,g):addAfterCompletionEventStatus(myRow,c,g,u,o,f,v):-1!=p&&1==v?deleteDestrutorStatus(myRow,c,g,u,p,o,f,v,h,g):addAfterDestructiveEventStatus(myRow,c,g,u,o,f,v)}}function CDCreateEventStatus(e,t){displayLoader();var n=0,i=[],a=[],s=Array(),o=0,r=($(".center-div .fixed-left-column .domain-count").length,$(".center-div .fixed-left-column .role-count").length,[]);$.each($("input[name='event_status[]']:checked"),function(){r.push($(this).val())}),$(e).each(function(){$(this);$("tbody tr",$(this)).each(function(e,t){var i=$(this).attr("class");$(this).find("td").each(function(t,a){s[o]=e+"@"+t+"@"+i+"@"+$(this).attr("class")+"@"+$(this).html(),o++,n++})})}),$(".center-div .blankRow").each(function(){a.push($(this).index())}),$(".center-div .fixed-left-column tr.seq").each(function(e,t){i.push($(this).index())});var d=$(".center-div .blankRow").length,l=$(".center-div .row_0").find(".event-count").length;$.post(domainUrl+"grid/addCopmletionDestructure",{data:s,myCol:"",myRow:"",checkBlankRows:d,nonSequence:a,logicsN:i,currentLength:3,type:r,eventCount:l,preNoSegment:n,sessionVal:0,exitscol:1},responceCreateOperation,"HTML")}function AllCreateEventStatus(e,t){displayLoader();var n=0,i=[],a=[],s=Array(),o=0,r=($(".center-div .fixed-left-column .domain-count").length,$(".center-div .fixed-left-column .role-count").length,[]);$.each($("input[name='event_status[]']:checked"),function(){r.push($(this).val())}),$(e).each(function(){$(this);$("tbody tr",$(this)).each(function(e,t){var i=$(this).attr("class");$(this).find("td").each(function(t,a){s[o]=e+"@"+t+"@"+i+"@"+$(this).attr("class")+"@"+$(this).html(),o++,n++})})}),$(".center-div .blankRow").each(function(){a.push($(this).index())}),$(".center-div .fixed-left-column tr.seq").each(function(e,t){i.push($(this).index())});var d=$(".center-div .blankRow").length,l=$(".center-div .row_0").find(".event-count").length;$.post(domainUrl+"grid/addMultipleEvent",{data:s,myCol:"",myRow:"",checkBlankRows:d,nonSequence:a,logicsN:i,currentLength:3,type:r,eventCount:l,preNoSegment:n,sessionVal:0,exitscol:1},responceCreateOperation,"HTML")}function ADCreateEventStatus(e,t){displayLoader();var n=0,i=[],a=[],s=Array(),o=0,r=($(".center-div .fixed-left-column .domain-count").length,$(".center-div .fixed-left-column .role-count").length,[]);$.each($("input[name='event_status[]']:checked"),function(){r.push($(this).val())}),$(e).each(function(){$(this);$("tbody tr",$(this)).each(function(e,t){var i=$(this).attr("class");$(this).find("td").each(function(t,a){s[o]=e+"@"+t+"@"+i+"@"+$(this).attr("class")+"@"+$(this).html(),o++,n++})})}),$(".center-div .blankRow").each(function(){a.push($(this).index())}),$(".center-div .fixed-left-column tr.seq").each(function(e,t){i.push($(this).index())});var d=$(".center-div .blankRow").length,l=$(".center-div .row_0").find(".event-count").length;$.post(domainUrl+"grid/addAfterDestructure",{data:s,myCol:"",myRow:"",checkBlankRows:d,nonSequence:a,logicsN:i,currentLength:3,type:r,eventCount:l,preNoSegment:n,sessionVal:0,exitscol:1},responceCreateOperation,"HTML")}function AfterComletionCreateEventStatus(e,t){displayLoader();var n=0,i=[],a=[],s=Array(),o=0,r=($(".center-div .fixed-left-column .domain-count").length,$(".center-div .fixed-left-column .role-count").length,[]);$.each($("input[name='event_status[]']:checked"),function(){r.push($(this).val())}),$(e).each(function(){$(this);$("tbody tr",$(this)).each(function(e,t){var i=$(this).attr("class");$(this).find("td").each(function(t,a){s[o]=e+"@"+t+"@"+i+"@"+$(this).attr("class")+"@"+$(this).html(),o++,n++})})}),$(".center-div .blankRow").each(function(){a.push($(this).index())}),$(".center-div .fixed-left-column tr.seq").each(function(e,t){i.push($(this).index())});var d=$(".center-div .blankRow").length,l=$(".center-div .row_0").find(".event-count").length;$.post(domainUrl+"grid/addAfterCopmletion",{data:s,myCol:"",myRow:"",checkBlankRows:d,nonSequence:a,logicsN:i,currentLength:3,type:r,eventCount:l,preNoSegment:n,sessionVal:0,exitscol:1},responceCreateOperation,"HTML")}function DestructorCreateEventStatus(e,t){displayLoader();var n=0,i=[],a=[],s=Array(),o=0,r=($(".center-div .fixed-left-column .domain-count").length,$(".center-div .fixed-left-column .role-count").length,[]);$.each($("input[name='event_status[]']:checked"),function(){r.push($(this).val())}),$(e).each(function(){$(this);$("tbody tr",$(this)).each(function(e,t){var i=$(this).attr("class");$(this).find("td").each(function(t,a){s[o]=e+"@"+t+"@"+i+"@"+$(this).attr("class")+"@"+$(this).html(),o++,n++})})}),$(".center-div .blankRow").each(function(){a.push($(this).index())}),$(".center-div .fixed-left-column tr.seq").each(function(e,t){i.push($(this).index())});var d=$(".center-div .blankRow").length,l=$(".center-div .row_0").find(".event-count").length;$.post(domainUrl+"grid/addAfterDestructiveEventStatus",{data:s,myCol:"",myRow:"",checkBlankRows:d,nonSequence:a,logicsN:i,currentLength:3,type:r,eventCount:l,preNoSegment:n,sessionVal:0,exitscol:1},responceCreateOperation,"HTML")}function CompletionCreateEventStatus(e,t){displayLoader();var n=0,i=[],a=[],s=Array(),o=0,r=($(".center-div .fixed-left-column .domain-count").length,$(".center-div .fixed-left-column .role-count").length,[]);$.each($("input[name='event_status[]']:checked"),function(){r.push($(this).val())}),$(e).each(function(){$(this);$("tbody tr",$(this)).each(function(e,t){var i=$(this).attr("class");$(this).find("td").each(function(t,a){s[o]=e+"@"+t+"@"+i+"@"+$(this).attr("class")+"@"+$(this).html(),o++,n++})})}),$(".center-div .blankRow").each(function(){a.push($(this).index())}),$(".center-div .fixed-left-column tr.seq").each(function(e,t){i.push($(this).index())});var d=$(".center-div .blankRow").length,l=$(".center-div .row_0").find(".event-count").length;$.post(domainUrl+"grid/addAfterCompletionEventStatus",{data:s,myCol:"",myRow:"",checkBlankRows:d,nonSequence:a,logicsN:i,currentLength:3,type:r,eventCount:l,preNoSegment:n,sessionVal:0,exitscol:1},responceCreateOperation,"HTML")}function AfterCreateEventStatus(e,t){displayLoader();var n=0,i=[],a=[],s=Array(),o=0,r=($(".center-div .fixed-left-column .domain-count").length,$(".center-div .fixed-left-column .role-count").length,[]);$.each($("input[name='event_status[]']:checked"),function(){r.push($(this).val())}),$(e).each(function(){$(this);$("tbody tr",$(this)).each(function(e,t){var i=$(this).attr("class");$(this).find("td").each(function(t,a){s[o]=e+"@"+t+"@"+i+"@"+$(this).attr("class")+"@"+$(this).html(),o++,n++})})}),$(".center-div .blankRow").each(function(){a.push($(this).index())}),$(".center-div .fixed-left-column tr.seq").each(function(e,t){i.push($(this).index())});var d=$(".center-div .blankRow").length,l=$(".center-div .row_0").find(".event-count").length;$.post(domainUrl+"grid/addAfterEventStatus",{data:s,myCol:"",myRow:"",checkBlankRows:d,nonSequence:a,logicsN:i,currentLength:3,type:r,eventCount:l,preNoSegment:n,sessionVal:0,exitscol:1},responceCreateOperation,"HTML")}function FirstCreateEventStatus(e,t){displayLoader();var n=0,i=[],a=[],s=Array(),o=0,r=($(".center-div .fixed-left-column .domain-count").length,$(".center-div .fixed-left-column .role-count").length,[]);$.each($("input[name='event_status[]']:checked"),function(){r.push($(this).val())}),$(e).each(function(){$(this);$("tbody tr",$(this)).each(function(e,t){var i=$(this).attr("class");$(this).find("td").each(function(t,a){s[o]=e+"@"+t+"@"+i+"@"+$(this).attr("class")+"@"+$(this).html(),o++,n++})})}),$(".center-div .blankRow").each(function(){a.push($(this).index())}),$(".center-div .fixed-left-column tr.seq").each(function(e,t){i.push($(this).index())});var d=$(".center-div .blankRow").length,l=$(".center-div .row_0").find(".event-count").length;$.post(domainUrl+"grid/addEventStatus",{data:s,myCol:"",myRow:"",checkBlankRows:d,nonSequence:a,logicsN:i,currentLength:3,type:r,eventCount:l,preNoSegment:n,sessionVal:0,exitscol:1},responceCreateOperation,"HTML")}function deleteStatusEvent(e,t,n,i,a,s,o,r,d,l){var c,h,u=0,p=parseInt(e)+parseInt(i);for(c=e;c<p;c++)for(h=1;h<=d;h++)$(".center-div .cell_"+c+"_"+h).closest("tr").remove();var f=$(".center-div .fixed-left-column .role-count").length;NoOfRole=parseInt(f);var v=$(".center-div .fixed-left-column .domain-count").length,m=0;m=$(".center-div .fixed-left-column .row-0").find(".add-sub-more-operation").length,displayLoader();var g=[];$(".center-div table.fixed-left-column").each(function(){$(this);var e=0;$("tbody tr",$(this)).each(function(t,n){var i=$(this).attr("class");$(this).find("td").each(function(n,a){2==t&&1==n&&u++,g[e]=t+"@"+n+"@"+i+"@"+$(this).attr("class")+"@"+$(this).html(),e++})})}),$.post(domainUrl+"grid/deleteEventStatus",{data:g,myRow:e,myCol:t,roleNo:NoOfRole,domaincount:v,currentLength:i,domaincount:v,suboperationCount:m,lastcol:a},FirstCreateEventStatus,"HTML")}function deleteAfterStatus(e,t,n,i,a,s,o,r,d,l){var c,h,u=0,p=parseInt(e)+parseInt(i)-1;for(c=e;c<=p;c++)for(h=1;h<=d;h++)$(".center-div .cell_"+c+"_"+h).closest("tr").remove();var f=$(".center-div .fixed-left-column .role-count").length;NoOfRole=parseInt(f);var v=$(".center-div .fixed-left-column .domain-count").length,m=0;m=$(".center-div .fixed-left-column .row-0").find(".add-sub-more-operation").length,displayLoader();var g=[];$(".center-div table.fixed-left-column").each(function(){$(this);var e=0;$("tbody tr",$(this)).each(function(t,n){var i=$(this).attr("class");$(this).find("td").each(function(n,a){2==t&&1==n&&u++,g[e]=t+"@"+n+"@"+i+"@"+$(this).attr("class")+"@"+$(this).html(),e++})})}),$.post(domainUrl+"grid/deleteEventStatus",{data:g,myRow:e,myCol:t,roleNo:NoOfRole,domaincount:v,currentLength:i,domaincount:v,suboperationCount:m,lastcol:a},AfterCreateEventStatus,"HTML")}function deleteCompletionStatus(e,t,n,i,a,s,o,r,d,l){var c,h,u=0,p=parseInt(e)+parseInt(i)-1;for(c=e;c<=p;c++)for(h=1;h<=d;h++)$(".center-div .cell_"+c+"_"+h).closest("tr").remove();var f=$(".center-div .fixed-left-column .role-count").length;NoOfRole=parseInt(f);var v=$(".center-div .fixed-left-column .domain-count").length,m=0;m=$(".center-div .fixed-left-column .row-0").find(".add-sub-more-operation").length,displayLoader();var g=[];$(".center-div table.fixed-left-column").each(function(){$(this);var e=0;$("tbody tr",$(this)).each(function(t,n){var i=$(this).attr("class");$(this).find("td").each(function(n,a){2==t&&1==n&&u++,g[e]=t+"@"+n+"@"+i+"@"+$(this).attr("class")+"@"+$(this).html(),e++})})}),$.post(domainUrl+"grid/deleteEventStatus",{data:g,myRow:e,myCol:t,roleNo:NoOfRole,domaincount:v,currentLength:i,domaincount:v,suboperationCount:m,lastcol:a},CompletionCreateEventStatus,"HTML")}function deleteDestrutorStatus(e,t,n,i,a,s,o,r,d,l){var c,h,u=parseInt(e)+parseInt(i)-1,p=0;for(c=e;c<=u;c++)for(h=1;h<=d;h++)$(".center-div .cell_"+c+"_"+h).closest("tr").remove();var f=$(".center-div .fixed-left-column .role-count").length;NoOfRole=parseInt(f);var v=$(".center-div .fixed-left-column .domain-count").length,m=0;m=$(".center-div .fixed-left-column .row-0").find(".add-sub-more-operation").length,displayLoader();var g=[];$(".center-div table.fixed-left-column").each(function(){$(this);var e=0;$("tbody tr",$(this)).each(function(t,n){var i=$(this).attr("class");$(this).find("td").each(function(n,a){2==t&&1==n&&p++,g[e]=t+"@"+n+"@"+i+"@"+$(this).attr("class")+"@"+$(this).html(),e++})})}),$.post(domainUrl+"grid/deleteEventStatus",{data:g,myRow:e,myCol:t,roleNo:NoOfRole,domaincount:v,currentLength:i,domaincount:v,suboperationCount:m,lastcol:a},DestructorCreateEventStatus,"HTML")}function deleteEventStatusSelected(e,t,n,i,a,s,o,r,d,l){var c=$(".center-div .fixed-left-column .role-count").length;NoOfRole=parseInt(c);var h=$(".center-div .fixed-left-column .domain-count").length,u=0;u=$(".center-div .fixed-left-column .row-0").find(".add-sub-more-operation").length,displayLoader();var p=[];$(".center-div table.fixed-left-column").each(function(){$(this);var e=0;$("tbody tr",$(this)).each(function(t,n){var i=$(this).attr("class");$(this).find("td").each(function(n,a){2==t&&1==n&&preNoSegment++,p[e]=t+"@"+n+"@"+i+"@"+$(this).attr("class")+"@"+$(this).html(),e++})})}),$.post(domainUrl+"grid/deleteEventStatus",{data:p,myRow:e,myCol:t,roleNo:NoOfRole,domaincount:h,currentLength:i,domaincount:h,suboperationCount:u,lastcol:a},responceCreateOperation,"HTML")}function deleteAfterCopmletionStatus(e,t,n,i,a,s,o,r,d,l){var c,h,u=parseInt(e)+parseInt(i)-1,p=0;for(c=e;c<=u;c++)for(h=1;h<=d;h++)$(".center-div .cell_"+c+"_"+h).closest("tr").remove();var f=$(".center-div .fixed-left-column .role-count").length;NoOfRole=parseInt(f);var v=$(".center-div .fixed-left-column .domain-count").length,m=0;m=$(".center-div .fixed-left-column .row-0").find(".add-sub-more-operation").length,displayLoader();var g=[];$(".center-div table.fixed-left-column").each(function(){$(this);var e=0;$("tbody tr",$(this)).each(function(t,n){var i=$(this).attr("class");$(this).find("td").each(function(n,a){2==t&&1==n&&p++,g[e]=t+"@"+n+"@"+i+"@"+$(this).attr("class")+"@"+$(this).html(),e++})})}),$.post(domainUrl+"grid/deleteEventStatus",{data:g,myRow:e,myCol:t,roleNo:NoOfRole,domaincount:v,currentLength:i,domaincount:v,suboperationCount:m,lastcol:a},AfterComletionCreateEventStatus,"HTML")}function deleteESOS(e,t,n,i,a,s,o,r,d,l,c){var d=$(".center-div .fixed-left-column .role-count").length;NoOfRole=parseInt(d);var r=$(".center-div .fixed-left-column .domain-count").length,i=0;i=$(".center-div .fixed-left-column .row-0").find(".add-sub-more-operation").length;var h=Array(),u=0;$(".center-div table.fixed-left-column").each(function(){$(this);$("tbody tr",$(this)).each(function(e,t){var n=$(this).attr("class");$(this).find("td").each(function(t,i){h[u]=e+"@"+t+"@"+n+"@"+$(this).attr("class")+"@"+$(this).html(),u++})})}),"logic"==l?$.post(domainUrl+"grid/deleteEvent",{data:h,myCol:t,myRow:e,opLength:n,logicsN:a,nonSequence:s,opSelect:o,domaincount:r,rolecount:d,opIndexNo:c,suboperationCount:i},ADaddOperation,"HTML"):$.post(domainUrl+"grid/deleteEvent",{data:h,myCol:t,myRow:e,opLength:n,logicsN:a,nonSequence:s,opSelect:o,domaincount:r,rolecount:d,opIndexNo:c,suboperationCount:i},ADSimpleOperation,"HTML")}function ADaddOperation(e,t){displayLoader();var n=0,i=[],a=[],s=Array(),o=0,r=($(".center-div .fixed-left-column .domain-count").length,$(".center-div .fixed-left-column .role-count").length,[]);$.each($("input[name='event_status[]']:checked"),function(){r.push($(this).val())}),$(e).each(function(){$(this);$("tbody tr",$(this)).each(function(e,t){var i=$(this).attr("class");$(this).find("td").each(function(t,a){s[o]=e+"@"+t+"@"+i+"@"+$(this).attr("class")+"@"+$(this).html(),o++,n++})})}),$(".center-div .blankRow").each(function(){a.push($(this).index())}),$(".center-div .fixed-left-column tr.seq").each(function(e,t){i.push($(this).index())});var d=$(".center-div .blankRow").length,l=$(".center-div .row_0").find(".event-count").length;$.post(domainUrl+"grid/addOperation",{data:s,myCol:"",myRow:"",checkBlankRows:d,nonSequence:a,logicsN:i,currentLength:3,type:r,eventCount:l,preNoSegment:n,sessionVal:0,exitscol:1},SOaddSubOperation,"HTML")}function SOaddSubOperation(e,t){displayLoader();var n=0,i=[],a=[],s=Array(),o=0,r=($(".center-div .fixed-left-column .domain-count").length,$(".center-div .fixed-left-column .role-count").length,[]);$.each($("input[name='event_status[]']:checked"),function(){r.push($(this).val())}),$(e).each(function(){$(this);$("tbody tr",$(this)).each(function(e,t){var i=$(this).attr("class");$(this).find("td").each(function(t,a){s[o]=e+"@"+t+"@"+i+"@"+$(this).attr("class")+"@"+$(this).html(),o++,n++})})}),$(".center-div .blankRow").each(function(){a.push($(this).index())}),$(".center-div .fixed-left-column tr.seq").each(function(e,t){i.push($(this).index())});var d=$(".center-div .blankRow").length,l=$(".center-div .row_0").find(".event-count").length;$.post(domainUrl+"grid/addSubOperation",{data:s,myCol:"",myRow:"",checkBlankRows:d,nonSequence:a,logicsN:i,currentLength:3,type:r,eventCount:l,preNoSegment:n,sessionVal:0,exitscol:1},firstLogicresponceCreateOperation,"HTML")}function ADSimpleOperation(e,t){displayLoader();var n=0,i=[],a=[],s=Array(),o=0,r=($(".center-div .fixed-left-column .domain-count").length,$(".center-div .fixed-left-column .role-count").length,[]);$.each($("input[name='event_status[]']:checked"),function(){r.push($(this).val())}),$(e).each(function(){$(this);$("tbody tr",$(this)).each(function(e,t){var i=$(this).attr("class");$(this).find("td").each(function(t,a){s[o]=e+"@"+t+"@"+i+"@"+$(this).attr("class")+"@"+$(this).html(),o++,n++})})}),$(".center-div .blankRow").each(function(){a.push($(this).index())}),$(".center-div .fixed-left-column tr.seq").each(function(e,t){i.push($(this).index())});var d=$(".center-div .blankRow").length,l=$(".center-div .row_0").find(".event-count").length;$.post(domainUrl+"grid/addOperation",{data:s,myCol:"",myRow:"",checkBlankRows:d,nonSequence:a,logicsN:i,currentLength:3,type:r,eventCount:l,preNoSegment:n,sessionVal:0,exitscol:1},SOSimpleaddSubOperation,"HTML")}function SOSimpleaddSubOperation(e,t){displayLoader();var n=0,i=[],a=[],s=Array(),o=0,r=($(".center-div .fixed-left-column .domain-count").length,$(".center-div .fixed-left-column .role-count").length,[]);$.each($("input[name='event_status[]']:checked"),function(){r.push($(this).val())}),$(e).each(function(){$(this);$("tbody tr",$(this)).each(function(e,t){var i=$(this).attr("class");$(this).find("td").each(function(t,a){s[o]=e+"@"+t+"@"+i+"@"+$(this).attr("class")+"@"+$(this).html(),o++,n++})})}),$(".center-div .blankRow").each(function(){a.push($(this).index())}),$(".center-div .fixed-left-column tr.seq").each(function(e,t){i.push($(this).index())});var d=$(".center-div .blankRow").length,l=$(".center-div .row_0").find(".event-count").length;$.post(domainUrl+"grid/addSubOperation",{data:s,myCol:"",myRow:"",checkBlankRows:d,nonSequence:a,logicsN:i,currentLength:3,type:r,eventCount:l,preNoSegment:n,sessionVal:0,exitscol:1},firstresponceCreateOperation,"HTML")}function deleteAD(e,t,n,i,a,s,o,r,d,l){var c,h,u=parseInt(e)+parseInt(i)-1,p=$(".center-div .fixed-left-column tr").length,f=parseInt(p)-1,v=0;for(c=e;c<=u;c++)for(h=1;h<=d;h++)$(".center-div .cell_"+c+"_"+h).closest("tr").remove();var m=$(".center-div .fixed-left-column .role-count").length;NoOfRole=parseInt(m);var g=$(".center-div .fixed-left-column .domain-count").length,b=0;b=$(".center-div .fixed-left-column .row-0").find(".add-sub-more-operation").length,displayLoader();var C=[];$(".center-div table.fixed-left-column").each(function(){$(this);var e=0;$("tbody tr",$(this)).each(function(t,n){var i=$(this).attr("class");$(this).find("td").each(function(n,a){2==t&&1==n&&v++,C[e]=t+"@"+n+"@"+i+"@"+$(this).attr("class")+"@"+$(this).html(),e++})})}),$.post(domainUrl+"grid/deleteEventStatus",{data:C,myRow:e,myCol:t,roleNo:NoOfRole,lastRow:f,domaincount:g,currentLength:i,domaincount:g,suboperationCount:b,lastcol:a},ADCreateEventStatus,"HTML")}function deleteCD(e,t,n,i,a,s,o,r,d,l){var c,h,u=parseInt(e)+parseInt(i)-1,p=$(".center-div .fixed-left-column tr").length,f=parseInt(p)-1,v=0;for(c=e;c<=u;c++)for(h=1;h<=d;h++)$(".center-div .cell_"+c+"_"+h).closest("tr").remove();var m=$(".center-div .fixed-left-column .role-count").length;NoOfRole=parseInt(m);var g=$(".center-div .fixed-left-column .domain-count").length,b=0;b=$(".center-div .fixed-left-column .row-0").find(".add-sub-more-operation").length,displayLoader();var C=[];$(".center-div table.fixed-left-column").each(function(){$(this);var e=0;$("tbody tr",$(this)).each(function(t,n){var i=$(this).attr("class");$(this).find("td").each(function(n,a){2==t&&1==n&&v++,C[e]=t+"@"+n+"@"+i+"@"+$(this).attr("class")+"@"+$(this).html(),e++})})}),$.post(domainUrl+"grid/deleteEventStatus",{data:C,myRow:e,myCol:t,noOfEvent:n,lastRow:f,roleNo:NoOfRole,domaincount:g,currentLength:i,domaincount:g,suboperationCount:b,lastcol:a},CDCreateEventStatus,"HTML")}function deleteALL(e,t,n,i,a,s,o,r,d,l){var c,h,u=parseInt(e)+parseInt(i)-1,p=$(".center-div .fixed-left-column tr").length,f=parseInt(p)-1,v=0;for(c=e;c<=u;c++)for(h=1;h<=d;h++)$(".center-div .cell_"+c+"_"+h).closest("tr").remove();var m=$(".center-div .fixed-left-column .role-count").length;NoOfRole=parseInt(m);var g=$(".center-div .fixed-left-column .domain-count").length,b=0;b=$(".center-div .fixed-left-column .row-0").find(".add-sub-more-operation").length,displayLoader();var C=[];$(".center-div table.fixed-left-column").each(function(){$(this);var e=0;$("tbody tr",$(this)).each(function(t,n){var i=$(this).attr("class");$(this).find("td").each(function(n,a){2==t&&1==n&&v++,C[e]=t+"@"+n+"@"+i+"@"+$(this).attr("class")+"@"+$(this).html(),e++})})}),$.post(domainUrl+"grid/deleteEventStatus",{data:C,myRow:e,myCol:t,noOfEvent:n,lastRow:f,roleNo:NoOfRole,domaincount:g,currentLength:i,domaincount:g,suboperationCount:b,lastcol:a},AllCreateEventStatus,"HTML")}function addCopmletionDestructure(e,t,n,i,a,s,o){displayLoader();var r=Array(),d=0,l=[],c=[],h=0;$(".center-div table").each(function(){$(this);$("tbody tr",$(this)).each(function(e,n){var i=$(this).attr("class");$(this).find("td").each(function(n,a){r[d]=e+"@"+n+"@"+i+"@"+$(this).attr("class")+"@"+$(this).html(),d++,e>=2&&t==n&&(str=$(this).text(),h++)})})}),$(".center-div .blankRow").each(function(){l.push($(this).index())}),$(".center-div .fixed-left-column tr.seq").each(function(e,t){c.push($(this).index())});var u=$(".center-div .blankRow").length,p=$(".center-div .row_0").find(".event-count").length;$.post(domainUrl+"grid/addCopmletionDestructure",{data:r,myCol:t,myRow:e,checkBlankRows:u,nonSequence:l,logicsN:c,currentLength:i,type:n,eventCount:p,preNoSegment:h,sessionVal:a,exitscol:s},responceCreateOperation,"HTML")}function addAfterDestructure(e,t,n,i,a,s,o){displayLoader();var r=Array(),d=0,l=[],c=[],h=0;$(".center-div table").each(function(){$(this);$("tbody tr",$(this)).each(function(e,n){var i=$(this).attr("class");$(this).find("td").each(function(n,a){r[d]=e+"@"+n+"@"+i+"@"+$(this).attr("class")+"@"+$(this).html(),d++,e>=2&&t==n&&(str=$(this).text(),h++)})})}),$(".center-div .blankRow").each(function(){l.push($(this).index())}),$(".center-div .fixed-left-column tr.seq").each(function(e,t){c.push($(this).index())});var u=$(".center-div .blankRow").length,p=$(".center-div .row_0").find(".event-count").length;$.post(domainUrl+"grid/addAfterDestructure",{data:r,myCol:t,myRow:e,checkBlankRows:u,nonSequence:l,logicsN:c,currentLength:i,type:n,eventCount:p,preNoSegment:h,sessionVal:a,exitscol:s},responceCreateOperation,"HTML")}function addAfterCopmletion(e,t,n,i,a,s,o){displayLoader();var r=Array(),d=0,l=[],c=[],h=0;$(".center-div table").each(function(){$(this);$("tbody tr",$(this)).each(function(e,n){var i=$(this).attr("class");$(this).find("td").each(function(n,a){r[d]=e+"@"+n+"@"+i+"@"+$(this).attr("class")+"@"+$(this).html(),d++,e>=2&&t==n&&(str=$(this).text(),h++)})})}),$(".center-div .blankRow").each(function(){l.push($(this).index())}),$(".center-div .fixed-left-column tr.seq").each(function(e,t){c.push($(this).index())});var u=$(".center-div .blankRow").length,p=$(".center-div .row_0").find(".event-count").length;$.post(domainUrl+"grid/addAfterCopmletion",{data:r,myCol:t,myRow:e,checkBlankRows:u,nonSequence:l,logicsN:c,currentLength:i,type:n,eventCount:p,preNoSegment:h,sessionVal:a,exitscol:s},responceCreateOperation,"HTML")}function addEventStatus(e,t,n,i,a,s,o){displayLoader();var r=Array(),d=0,l=[],c=[],h=0;$(".center-div table").each(function(){$(this);$("tbody tr",$(this)).each(function(e,n){var i=$(this).attr("class");$(this).find("td").each(function(n,a){r[d]=e+"@"+n+"@"+i+"@"+$(this).attr("class")+"@"+$(this).html(),d++,e>=2&&t==n&&(str=$(this).text(),h++)})})}),$(".center-div .blankRow").each(function(){l.push($(this).index())}),$(".center-div .fixed-left-column tr.seq").each(function(e,t){c.push($(this).index())});var u=$(".center-div .blankRow").length,p=$(".center-div .row_0").find(".event-count").length;$.post(domainUrl+"grid/addEventStatus",{data:r,myCol:t,myRow:e,checkBlankRows:u,nonSequence:l,logicsN:c,currentLength:i,type:n,eventCount:p,preNoSegment:h,sessionVal:a,exitscol:s},responceCreateOperation,"HTML")}function addAfterEventStatus(e,t,n,i,a,s,o){displayLoader();var r=Array(),d=0,l=[],c=[],h=0;$(".center-div table").each(function(){$(this);$("tbody tr",$(this)).each(function(e,n){var i=$(this).attr("class");$(this).find("td").each(function(n,a){r[d]=e+"@"+n+"@"+i+"@"+$(this).attr("class")+"@"+$(this).html(),d++,e>=2&&t==n&&(str=$(this).text(),h++)})})}),$(".center-div .blankRow").each(function(){l.push($(this).index())}),$(".center-div .fixed-left-column tr.seq").each(function(e,t){c.push($(this).index())});var u=$(".center-div .blankRow").length,p=$(".center-div .row_0").find(".event-count").length;$.post(domainUrl+"grid/addAfterEventStatus",{data:r,myCol:t,myRow:e,checkBlankRows:u,nonSequence:l,logicsN:c,currentLength:i,type:n,eventCount:p,preNoSegment:h,sessionVal:a,exitscol:s},responceCreateOperation,"HTML")}function addAfterCompletionEventStatus(e,t,n,i,a,s,o){displayLoader();var r=Array(),d=0,l=[],c=[],h=0;$(".center-div table").each(function(){$(this);$("tbody tr",$(this)).each(function(e,n){var i=$(this).attr("class");$(this).find("td").each(function(n,a){r[d]=e+"@"+n+"@"+i+"@"+$(this).attr("class")+"@"+$(this).html(),d++,e>=2&&t==n&&(str=$(this).text(),h++)})})}),$(".center-div .blankRow").each(function(){l.push($(this).index())}),$(".center-div .fixed-left-column tr.seq").each(function(e,t){c.push($(this).index())});var u=$(".center-div .blankRow").length,p=$(".center-div .row_0").find(".event-count").length;$.post(domainUrl+"grid/addAfterCompletionEventStatus",{data:r,myCol:t,myRow:e,checkBlankRows:u,nonSequence:l,logicsN:c,currentLength:i,type:n,eventCount:p,preNoSegment:h,sessionVal:a,exitscol:s},responceCreateOperation,"HTML")}function addAfterDestructiveEventStatus(e,t,n,i,a,s,o){displayLoader();var r=Array(),d=0,l=[],c=[],h=0;$(".center-div table").each(function(){$(this);$("tbody tr",$(this)).each(function(e,n){var i=$(this).attr("class");$(this).find("td").each(function(n,a){r[d]=e+"@"+n+"@"+i+"@"+$(this).attr("class")+"@"+$(this).html(),d++,e>=2&&t==n&&(str=$(this).text(),h++)})})}),$(".center-div .blankRow").each(function(){l.push($(this).index())}),$(".center-div .fixed-left-column tr.seq").each(function(e,t){c.push($(this).index())});var u=$(".center-div .blankRow").length,p=$(".center-div .row_0").find(".event-count").length;$.post(domainUrl+"grid/addAfterDestructiveEventStatus",{data:r,myCol:t,myRow:e,checkBlankRows:u,nonSequence:l,logicsN:c,currentLength:i,type:n,eventCount:p,preNoSegment:h,sessionVal:a,exitscol:s},responceCreateOperation,"HTML")}function addMultipleEvent(e,t,n,i,a,s){displayLoader();var o=Array(),r=0,d=[],l=[],c=0;$(".center-div table").each(function(){$(this);$("tbody tr",$(this)).each(function(e,t){var n=$(this).attr("class");$(this).find("td").each(function(t,i){o[r]=e+"@"+t+"@"+n+"@"+$(this).attr("class")+"@"+$(this).html(),r++,c++})})}),$(".center-div .blankRow").each(function(){d.push($(this).index())}),$(".center-div .fixed-left-column tr.seq").each(function(e,t){l.push($(this).index())});var h=$(".center-div .blankRow").length,u=$(".center-div .row_0").find(".event-count").length;$.post(domainUrl+"grid/addMultipleEvent",{data:o,myCol:t,myRow:e,checkBlankRows:h,nonSequence:d,logicsN:l,currentLength:i,type:n,eventCount:u,preNoSegment:c,sessionVal:a,exitscol:s},responceCreateOperation,"HTML")}function createSubOperation(e,t,n,i){displayLoader();var a="",s="",o=$("input[type='radio'][name='sub_op1']:checked");o.length>0&&(a=o.val());var r=$("input[type='radio'][name='sub_op2']:checked");r.length>0&&(s=r.val()),$("#SubOperationpoup").modal("show");var d=$(this).closest("td"),l=$(d).closest("tr"),c=($(l).closest("table"),e),h=n,u=Array(),t=0,p=0,f=[],v=[],m=$(".center-div .fixed-left-column .domain-count").length,g=$(".center-div .fixed-left-column .role-count").length,b=$(".center-div .fixed-left-column").find(".event-before").length,C=$(".center-div .fixed-left-column tr").length;parseInt(C);$(".center-div table").each(function(){$(this);$("tbody tr",$(this)).each(function(e,n){var i=$(this).attr("class");$(this).find("td").each(function(n,a){u[p]=e+"@"+n+"@"+i+"@"+$(this).attr("class")+"@"+$(this).html(),p++,e>=2&&c==n&&(str=$(this).text(),str.toLowerCase().indexOf("add segment")>0&&t++)})})}),$(".center-div .blankRow").each(function(){f.push($(this).index())}),$(".center-div .fixed-left-column tr.seq").each(function(e,t){v.push($(this).index())});$(".center-div .fixed-left-column").find(".check-add-status:last").parent().index();var w=$(".center-div .fixed-left-column").find(".e-before:last").parent().index(),x=0;x=$(".center-div .fixed-left-column .row-0 .col-"+c).nextAll("td.add-sub-more-operation").length;var y=$(".center-div .blankRow").length;if("seq_logic_2"==s||"non_seq_logic_2"==s){var _=$(".center-div .row-0 .col-"+c).next().next().hasClass("add-sub-more-operation"),T=Array();if(b>0){$(".center-div").find(".col-"+w).remove();I=[];$(".center-div .fixed-left-column tr").each(function(e,t){var n=parseInt($(t).find(".check-add-status").parent().parent().index());n>0&&I.push(parseInt(n))}),$(".center-div .col-"+c).prev("td").nextAll("td").children("span").parent("td").remove(),$(".center-div .col-"+c).prev("td").nextAll("td").children("div").parent("td").remove();var k=0,S=0;$(".center-div .fixed-left-column tr").each(function(e,t){++k>=3&&($(this).find("td").each(function(e,t){$(this).find(".custom-node").length>0&&S++}),0==S?$(this).remove():S=0)}),$(".center-div").find(".col-"+w).remove();N="";(r=$("input[type='radio'][name='sub_op2']:checked")).length>0&&(N=r.val());L="logic";deleteESOS(h,c,I.length,x,v,f,N,m,g,L,i)}else _?($(".center-div table.fixed-left-column").each(function(){$(this);var e=0;$("tbody tr",$(this)).each(function(n,i){var a=$(this).attr("class");$(this).find("td").each(function(i,s){2==n&&1==i&&t++,T[e]=n+"@"+i+"@"+a+"@"+$(this).attr("class")+"@"+$(this).html(),e++})})}),displayLoader(),$.post(domainUrl+"grid/addSubOperationMultiple",{data:T,myCol:c,myRow:h,suboperationCount:x},firstLogicresponceCreateOperation,"HTML")):$.post(domainUrl+"grid/addSubOperation",{data:u,myCol:e,myRow:n,Op1:a,Op2:s,preNoSegment:t,noOfSegment:0,checkBlankRows:y,nonSequence:f,domaincount:m,rolecount:g,logicsN:v},firstLogicresponceCreateOperation,"HTML")}else if(b>0){$(".center-div").find(".col-"+w).remove();var I=[];$(".center-div .fixed-left-column tr").each(function(e,t){var n=parseInt($(t).find(".check-add-status").parent().parent().index());n>0&&I.push(parseInt(n))}),$(".center-div .col-"+c).prev("td").nextAll("td").children("span").parent("td").remove(),$(".center-div .col-"+c).prev("td").nextAll("td").children("div").parent("td").remove();var k=0,S=0;$(".center-div .fixed-left-column tr").each(function(e,t){++k>=3&&($(this).find("td").each(function(e,t){$(this).find(".custom-node").length>0&&S++}),0==S?$(this).remove():S=0)}),$(".center-div").find(".col-"+w).remove();var N="";(r=$("input[type='radio'][name='sub_op2']:checked")).length>0&&(N=r.val());var L="non-logic";deleteESOS(h,c,I.length,x,v,f,N,m,g,L,i)}else if($(".center-div .row-0 .col-"+c).next().next().hasClass("add-sub-more-operation")){var D=Array();$(".center-div table.fixed-left-column").each(function(){$(this);var e=0;$("tbody tr",$(this)).each(function(n,i){var a=$(this).attr("class");$(this).find("td").each(function(i,s){2==n&&1==i&&t++,D[e]=n+"@"+i+"@"+a+"@"+$(this).attr("class")+"@"+$(this).html(),e++})})}),displayLoader(),$.post(domainUrl+"grid/addSubOperationMultiple",{data:D,myCol:c,myRow:h,suboperationCount:x},firstresponceCreateOperation,"HTML")}else $.post(domainUrl+"grid/addSubOperation",{data:u,myCol:e,myRow:n,Op1:a,Op2:s,preNoSegment:t,noOfSegment:0,checkBlankRows:y,nonSequence:f,domaincount:m,rolecount:g,logicsN:v,suboperationCount:x},firstresponceCreateOperation,"HTML");setTimeout(function(){addCollapseClass()},1e3)}function createPhase(){var e=$("#columnNumber").val(),t=$("#preNoSegment").val(),n=$("#noOfSegment").val(),i=Array(),a=Array(),s=0,o="",r=0;displayLoader(),$(".center-div table.fixed-left-column").each(function(){$(this);$("tbody tr",$(this)).each(function(e,t){var n=$(this).attr("class");$(this).find("td").each(function(t,a){if(1==e&&r++,2==e&&1==t){var d=$(this).attr("class");o=$.grep(d.split(" "),function(e,t){return 0===e.indexOf("parent_")}).join()}i[s]=e+"@"+t+"@"+n+"@"+$(this).attr("class")+"@"+$(this).html(),s++})})});var d=$(".center-div ."+o).length,l=0;if(l=$(".center-div .operation-event").children(".segment-node").parent("td").length,0==(l=""!=l?l:0))$.post(domainUrl+"grid/createPhase",{data:i,myCol:e,preNoSegment:t,noOfSegment:n,noofRows:d,checkoperation:l},responceCreatePhase,"HTML");else{$(".center-div .col-"+e).find(".segment-node").children(".node-white-circle").parent().length;var c=new Array;$(".center-div .col-"+e).find(".col-node-text").each(function(e,t){var n=$(this).closest("td"),i=$(n).closest("tr"),a=($(i).closest("table"),$(n).index()),s=$(i).index(),o=$(".center-div .parent_"+s+"_"+a).next("td").next("td").find(".operation-text").length;c.push(o)}),$(".center-div .col-"+e).next("td").nextAll("td").children("div").parent("td").remove(),$(".center-div .row-0").children(".col-"+e).next("td").nextAll("td").children("span").parent("td").remove();var h=0,u=0;$(".center-div .fixed-left-column tr").each(function(e,t){++h>=3&&($(this).find("td").each(function(e,t){$(this).find(".custom-node").length>0&&u++}),0==u?$(this).remove():u=0)}),$(".center-div table.fixed-left-column").each(function(){$(this);$("tbody tr",$(this)).each(function(e,t){var n=$(this).attr("class");$(this).find("td").each(function(t,i){if(2==e&&1==t){var r=$(this).attr("class");o=$.grep(r.split(" "),function(e,t){return 0===e.indexOf("parent_")}).join()}a[s]=e+"@"+t+"@"+n+"@"+$(this).attr("class")+"@"+$(this).html(),s++})})}),DeleteManifest(),$.post(domainUrl+"grid/createPhase",{data:a,myCol:e,preNoSegment:t,noOfSegment:n,noofRows:d,checkoperation:l},responceCreatePhase,"HTML")}}function addPhase(e,t){var n=e,i=$("#preNoSegment_association").val(),a=$("#noOfSegment_association").val(),s=Array(),o=Array(),r=0,d=0;if((d=""!=(d=$(".center-div .col-"+n).next("td").nextAll("td").find(".addRoleSeries").closest("li").length)?d:0)>0){displayLoader(),$(".center-div .col-"+n).next("td").nextAll("td").children("div").parent("td").remove(),$(".center-div .row-0").children(".col-"+n).next("td").nextAll("td").children("span").parent("td").remove();var l=0,c=0;$(".center-div .fixed-left-column tr").each(function(e,t){++l>=3&&($(this).find("td").each(function(e,t){$(this).find(".custom-node").length>0&&c++}),0==c?$(this).remove():c=0)}),$(".center-div table.fixed-left-column").each(function(){$(this);$("tbody tr",$(this)).each(function(e,t){var n=$(this).attr("class");$(this).find("td").each(function(t,i){o[r]=e+"@"+t+"@"+n+"@"+$(this).attr("class")+"@"+$(this).html(),r++})})}),$.post(domainUrl+"associations/addPhase",{data:o,myCol:n,preNoSegment:i,noOfSegment:a},associationResponceCreatePhase,"HTML")}else displayLoader(),$(".center-div table.fixed-left-column").each(function(){$(this);$("tbody tr",$(this)).each(function(e,t){var n=$(this).attr("class");$(this).find("td").each(function(t,i){s[r]=e+"@"+t+"@"+n+"@"+$(this).attr("class")+"@"+$(this).html(),r++})})}),$.post(domainUrl+"associations/addPhase",{data:s,myCol:n,preNoSegment:i,noOfSegment:a},associationResponceCreatePhase,"HTML")}function associationResponceCreatePhase(e,t){$(".center-div").html(e);var n=0;$(".center-div table").find("tr:first td").each(function(){n>0&&$(this).find(".top-col").html(n),n++});var i=0,a=0;if($(".center-div table.fixed-left-column").find("tr").each(function(){a++,$(this).find("td:first").each(function(){0!=i&&$(this).html(i),i++})}),margecell(),$(".center-div tr").find(".destructure").closest("td").next().prevAll("td.collapse").find(".destructure").closest("td").addClass("border-light-bottom border-light-top"),$(".center-div tr").find(".col-text").closest("td").last().next().prevAll("td.collapse.event").addClass("border-right"),setColRowClass(),$(".dropdown-menu").removeClass("show"),$("i.active").hide(),$("i").removeClass("active"),removeSelection(),0==$("tr").last().children("td").length&&$("tr").last().remove(),isAutonumberDisplay=!$(".show-auto-number").hasClass("hide-gridNumber"),runAlgorithmOfAutoNumbering("associations"),$(".center-div .Role-segment").children(".blank-div").parent("td").addClass("creation-bg"),$(".creation-node").parent(".event.creation-bg").addClass("event-bg"),$(".creation-node").parent(".event.creation-bg").prev("td.event.creation-bg").addClass("border-light-top"),$(".center-div").scrollTop(0),setTableWidth(),$(".phase-segment").removeClass("show"),ActorFlyout(),$("#course-path-number").hasClass("On")&&gridNavigation.changeColor(),$(".schedule-segment-week").length){var s=$(".schedule-segment-week:first").parents("td").index();$("#scheduleCol").val(s),updateTextNumInCol(s,"Segment","schedule-segment-week"),$(".schedule-segment-day").length&&updateTextNumInCol(s+2,"Segment","schedule-segment-day")}correctCssStructured()}function responceCreatePhase(e,t){$(".center-div").html(e);var n=0;$(".center-div table").find("tr:first td").each(function(){n>0&&$(this).find(".top-col").html(n),n++});var i=0,a=0;$(".center-div table.fixed-left-column").find("tr").each(function(){a++,$(this).find("td:first").each(function(){0!=i&&$(this).html(i),i++})}),margecell(),$(".center-div tr").find(".destructure").closest("td").next().prevAll("td.collapse").find(".destructure").closest("td").addClass("border-light-bottom border-light-top"),$(".center-div tr").find(".col-text").closest("td").last().next().prevAll("td.collapse.event").addClass("border-right"),setColRowClass(),$(".dropdown-menu").removeClass("show"),$("i.active").hide(),$("i").removeClass("active"),removeSelection(),0==$("tr").last().children("td").length&&$("tr").last().remove(),isAutonumberDisplay=!$(".show-auto-number").hasClass("hide-gridNumber"),runAlgorithmOfAutoNumbering(),$(".center-div .Role-segment").children(".blank-div").parent("td").addClass("creation-bg"),$(".creation-node").parent(".event.creation-bg").addClass("event-bg"),$(".creation-node").parent(".event.creation-bg").prev("td.event.creation-bg").addClass("border-light-top"),$(".center-div").scrollTop(0),setTableWidth(),$("#course-path-number").hasClass("On")&&($(".fixed-left-column [class*=parent_]").removeClass("show_number_grey"),$(".fixed-left-column [class*=parent_]").not(":first").nextAll().addClass("show_number_grey"))}function getMatch(e,t){for(var n=[],i=0;i<e.length;i++)for(var a=0;a<t.length;a++)e[i]===t[a]&&n.push(e[i]);return n}function getFunctionName(e){return"before"==e?"addEventStatus":"after"==e?"addAfterEventStatus":"completion"==e?"addAfterCompletionEventStatus":"addAfterDestructiveEventStatus"}function responceSubOpearation(e,t){$("#SubOperationpoup").modal("show"),$("#SubOperationpoup").html(e),$(".center-div .add-segment ul").removeClass("show"),$(".center-div").scrollTop(0)}function responceEventStatus(e,t){$("#EventStatusModal").modal("show"),$("#EventStatusModal").html(e),$(".center-div .add-segment ul").removeClass("show"),$(".center-div").scrollTop(0)}function responcePhase(e,t){$("#Seriespoup").modal("show"),$("#Seriespoup").html(e),$(".center-div").scrollTop(0)}function addresponcePhase(e,t){$("#addSeriespoup").html(e),$(".center-div").scrollTop(0)}function addAssoresponcePhase(e,t){$("#associationSeriespoup").html(e),$(".center-div").scrollTop(0)}function responceopenPhase(e,t){$("#openSeriespoup").html(e),$(".center-div").scrollTop(0)}function responceAccountingGridButton(e,t){$(".grid-div").css("display","none"),$(".tab-item:first a").addClass("active");var n="tabIndex_"+(new Date).getTime().toString();selectedGridId=n;var i='<div class="grid-div center-div account-grid fiancial-grid" grid-id ="%gridid%"></div>'.replace("%gridid%",n);$("#center-screen").append(i),$("[grid-id="+n+"]").html(e);var a=0;$(".entr-center-tab ul li a").each(function(e,t){$(this).hasClass("active")&&(a=$(this).parent().attr("tab-index"))}),$(".TabNodePerpective").each(function(e,t){$(this).hasClass("node-selected")&&$(this).attr("tab-data",a)}),financialGrid();var s=$(".center-div #account-table").width();$(".center-div #account-table").css("width",s),hideLoader(),$(".lodding").hide(),setWidthInitialy()}function responceCourseboardButton(e,t){$(".courseboard-section").html(e),jQuery(".courseboard-section").css("opacity","1"),$(".grid-div").hide(),$(".courseboard-section").show();var n=$(document).width(),i=100*(n-450)/n;$("#center-screen").css("width",i+"%"),$("#main").css("height",$("#center-screen").height()-60),$(".nano").nanoScroller({preventPageScrolling:!0}),$(".courseboard_right .tab-content").niceScroll({cursorcolor:"#000",cursorborder:"0",cursorborderradius:"0",cursorwidth:"2px",background:"rgba(0,0,0,.15)"}),$(".dual-panel").niceScroll({cursorcolor:"#000",cursorborder:"0",cursorborderradius:"0",cursorwidth:"2px",background:"rgba(0,0,0,.15)"})}function responceDashboardButton(e,t){$(".dashboard-section").html(e),jQuery(".dashboard-section").css("opacity","1"),$(".grid-div").hide(),$(".dashboard-section").show();var n=$(document).width(),i=100*(n-450)/n;$("#center-screen").css("width",i+"%"),$("#main").css("height",$("#center-screen").height()-60),$(".nano").nanoScroller({preventPageScrolling:!0})}function responceGridButton(e,t){$(".grid-div").css("display","none"),$(".tab-item:first a").addClass("active");var n="tabIndex_"+(new Date).getTime().toString();selectedGridId=n;var i='<div class="grid-div center-div process-grid" grid-id ="%gridid%"></div><input type="hidden" id="hidden-instance_id" value="" /><input type="hidden" id="temp_column_count" value="" /><input type="hidden" id="temp_rows_count" value="" />'.replace("%gridid%",n);$("#center-screen").append(i),$("[grid-id="+n+"]").html(e);var a=$(".center-div").width()/2,s=$("#center-screen").height();$(".right-popup#nodeFlyout").width(a),$(".right-popup#nodeFlyout").height(s);$("#center-screen").width();var o=$("[grid-id="+n+"]").find("td"),r=$(o).parent("tr"),d=$(r).closest("table"),l=($(o).index(),0);$("table").find("tr:first").each(function(){$(this);var e=0;$("body").on("mouseover","td",function(t,n){$(this).children("i.add").addClass("show"),e++}),$("body").on("mouseout","td",function(t,n){$(this).find(".add-colums ul.dropdown-menu").hasClass("show")?$(this).children("i.add").addClass("show"):$(this).children("i.add").removeClass("show"),e++}),l++}),$(this).closest("li").children("ol").find(".custom-node").focus(),$("tr").each(function(){setborder(),$(".row-2").children(".col-3").addClass("transparent"),$(".row-2").children(".col-5").addClass("transparent")}),$(d).find("tr").each(function(){$(this);var e=0;$("body").on("mouseover","td",function(t,n){$("i.segment").hide(),$(this).find("i.segment").show(),e++}),$("body").on("mouseout","td",function(t,n){$(this).find(".add-segment ul.dropdown-menu, .add-status ul.dropdown-menu").hasClass("show")?$(this).find("i.segment").show():$(this).find("i.segment").hide(),e++}),l++;var t=0;$(".entr-center-tab ul li a").each(function(e,n){$(this).hasClass("active")&&(t=$(this).parent().attr("tab-index"))}),$(".TabNodePerpective").each(function(e,n){$(this).hasClass("node-selected")&&$(this).attr("tab-data",t)}),$("body").on("click",".col-node-text input",function(e){$(this).parent(".col-node-text").siblings(".segment-count").show(),e.stopPropagation()})}),setColRowClass(),runAlgorithmOfAutoNumbering(),$("body .center-div .time-col").closest("td").addClass("merge-td"),$(".center-div td.collapse.event").addClass("border-right"),$(".center-div .row-0").children("td").removeClass("border-right")}function responceAssociationGridButton(e,t){$(".grid-div").css("display","none"),$(".tab-item:first a").addClass("active");var n="tabIndex_"+(new Date).getTime().toString();selectedGridId=n;var i='<div class="grid-div center-div association-grid" grid-id ="%gridid%"></div><input type="hidden" id="hidden-instance_id" value="" /><input type="hidden" id="temp_column_count" value="" /><input type="hidden" id="temp_rows_count" value="" />'.replace("%gridid%",n);$("#center-screen").children(".grid-div").length>1&&($("#center-screen").children("#hidden-instance_id").remove(),$("#center-screen").children("#temp_column_count").remove(),$("#center-screen").children("#temp_rows_count").remove(),$("#center-screen").children(".grid-div").remove()),$("#center-screen").append(i),$("[grid-id="+n+"]").html(e);var a=$(".center-div").width()/2,s=$("#center-screen").height();$(".right-popup#nodeFlyout").width(a),$(".right-popup#nodeFlyout").height(s);$("#center-screen").width();var o=$("[grid-id="+n+"]").find("td"),r=$(o).parent("tr"),d=$(r).closest("table"),l=($(o).index(),0);$("table").find("tr:first").each(function(){$(this);var e=0;$("body").on("mouseover","td",function(t,n){$(this).children("i.add").addClass("show"),e++}),$("body").on("mouseout","td",function(t,n){$(this).find(".add-colums ul.dropdown-menu").hasClass("show")?$(this).children("i.add").addClass("show"):$(this).children("i.add").removeClass("show"),e++}),l++}),$(this).closest("li").children("ol").find(".custom-node").focus(),$("tr").each(function(){setborder(),$(".row-2").children(".col-3").addClass("transparent"),$(".row-2").children(".col-5").addClass("transparent")}),$(d).find("tr").each(function(){$(this);var e=0;$("body").on("mouseover","td",function(t,n){$("i.segment").hide(),$(this).find("i.segment").show(),e++}),$("body").on("mouseout","td",function(t,n){$(this).find(".add-segment ul.dropdown-menu, .add-status ul.dropdown-menu").hasClass("show")?$(this).find("i.segment").show():$(this).find("i.segment").hide(),e++}),l++;var t=0;$(".entr-center-tab ul li a").each(function(e,n){$(this).hasClass("active")&&(t=$(this).parent().attr("tab-index"))}),$(".TabNodePerpective").each(function(e,n){$(this).hasClass("node-selected")&&$(this).attr("tab-data",t)}),$("body").on("click",".col-node-text input",function(e){$(this).parent(".col-node-text").siblings(".segment-count").show(),e.stopPropagation()})}),setColRowClass(),runAlgorithmOfAutoNumbering("associations"),$("body .center-div .time-col").closest("td").addClass("merge-td"),$(".center-div td.collapse.event").addClass("border-right"),$(".center-div .row-0").children("td").removeClass("border-right")}function setborder(){$(".center-div tr").last().children("td").addClass("border-bottom")}function margecell(){cellCollapse(),$(".center-div .collapse.event").children(".blank-div").parent("td").addClass("creation-bg"),$(".center-div tr").each(function(){$(this).find(".col-text").closest("td").last().prevAll("td.ExcelTablerow").addClass("merge-td"),$("tr").find(".col-text").closest("td").prevAll("td:nth-child(2)").addClass("border-left"),$(this).find(".creation").last().closest("td").prev("td").addClass("border-light-top"),$(this).find(".creation").closest("td").last().next().prevAll("td.collapse").find(".creation").closest("td").addClass("border-light-bottom"),$(this).find(".col-text").closest("td").last().next().prevAll("td.collapse.event").addClass("border-right")}),$(".center-div .row-3").last().find(".col-text").closest("td").last().next().prevAll("td.ExcelTablerow").addClass("border-bottom"),$(".center-div .blank_row").last().find(".col-text").closest("td").last().next().prevAll("td.ExcelTablerow").addClass("border-bottom"),$(".center-div .blank_row").children("td").removeClass("border-light-top"),$(".center-div .blank_row").last().find(".destructure").closest("td").last().next().prevAll("td.collapse").addClass("border-light-top"),$(".center-div .col-1.border-left").children(".blank-div").addClass("borderDashed")}function cellCollapse(){$("table").each(function(){$(this);var e=$("tbody tr",$(this));e.each(function(t,n){$(this).find("td").each(function(n,i){str=$.trim($(this).text()),1==t&&str.indexOf("Event")>0&&e.each(function(e,t){$(this).find("td").each(function(e,t){n==e&&$(this).attr("class",$(this).attr("class")+" collapse event ")})})})})})}function removeSelection(){$(".center-div td").removeClass("border-top-green border-bottom-green border-green"),$(".center-div td").find(".node-white-circle").removeClass("node-green-circle"),$(".center-div .bg-green").removeClass("bg-green"),$(".center-div .bg-green-border").removeClass("bg-green-border"),$(".center-div .border-top-green").removeClass("border-top-green"),$(".center-div .border-bottom-green").removeClass("border-bottom-green"),$(".center-div .border-bottom-select").removeClass("border-bottom-select")}function setColRowClass(){$(".center-div table.fixed-left-column").each(function(){$(this);$("tbody tr",$(this)).each(function(e,t){RowclassName=$.grep(this.className.split(" "),function(e,t){return 0===e.indexOf("row_")}).join(),$(this).removeClass(RowclassName),$(this).find("td").each(function(e,t){className=$.grep(this.className.split(" "),function(e,t){return 0===e.indexOf("cell_")}).join(),parentName=$.grep(this.className.split(" "),function(e,t){return 0===e.indexOf("parent_")}).join(),$(this).removeClass(className),$(this).removeClass(parentName),$(this).removeClass("fill"),$(this).removeClass("blank")})})}),$(".center-div td").each(function(){var e=$(this).parent().children().index($(this)),t=$(this).parent().parent().children().index($(this).parent()),n=$(this).attr("class"),i=$.grep(n.split(" "),function(e,t){return e.replace(/\bcell_[\d]_[\d].?\b/g,"")}).join(" ");$(this).attr("class",""),$(this).addClass(i);var a=$(this).addClass("cell_"+t+"_"+e);if($(".center-div.association-grid").length,$(a).find(".col-node-text").length>0)$(this).addClass("fill");else{$(this).addClass("blank");var s=$(this).attr("class");if($(this).hasClass("border-light-top")||2==t)blankSegName=$.grep(s.split(" "),function(e,t){return 0===e.indexOf("cell_")}).join(),blankSegName=blankSegName.replace("cell","blankSeg"),$(this).addClass(blankSegName);else{rowColClass=$.grep(s.split(" "),function(e,t){return 0===e.indexOf("cell_")}).join(),rowNum=rowColClass.split("_")[1],colNum=rowColClass.split("_")[2];var o=$(".center-div table.fixed-left-column tbody").find("tr:eq("+(rowNum-1)+") td:eq("+colNum+")").attr("class");if(void 0!==o&&o.indexOf("fill")>-1)$(this).addClass("blankSeg_"+rowNum+"_"+colNum);else for(var r=rowNum;r>=2;r--){var d=$(".center-div table.fixed-left-column tbody").find("tr:eq("+r+") td:eq("+colNum+")").attr("class");if(void 0!==d&&d.indexOf("border-light-top")>-1){blankSegName=$.grep(d.split(" "),function(e,t){return 0===e.indexOf("blankSeg_")}).join(),$(this).addClass(blankSegName);break}}}}}),$(".center-div table.fixed-left-column").each(function(){$(this);var e=$("tbody tr",$(this)),t=0;for(e.each(function(e,n){$(this).find("td").each(function(n,i){1==e&&t++})}),i=1;i<=parseInt(t);i++){var n="";e.each(function(e,t){e>1&&$(this).find("td").each(function(e,t){e==i&&""!=$.trim($(this).html())&&($(this).hasClass("fill")?(n=$.grep(this.className.split(" "),function(e,t){return 0===e.indexOf("cell_")}).join(),n=n.replace("cell","parent"),$(this).addClass(n)):(role=$.grep(this.className.split(" "),function(e,t){return 0===e.indexOf("role")}).join(),system=$.grep(this.className.split(" "),function(e,t){return 0===e.indexOf("system")}).join(),""==role&&""==system&&$(this).addClass(n)))})})}})}function removeSegSelection(){$(".node-white-circle.node-green-circle").removeClass("node-green-circle"),$(".center-div .border-green").removeClass("border-green"),$(".center-div .bg-green").removeClass("bg-green"),$(".center-div .offinator").removeClass("offinator"),$(".center-div .bg-green-border").removeClass("bg-green-border"),$(".center-div .border-top-green").removeClass("border-top-green"),$(".center-div .border-bottom-green").removeClass("border-bottom-green"),$(".center-div .border-bottom-select").removeClass("border-bottom-select"),$(".center-div span.icons").parent().siblings().removeClass("showing"),$(".center-div span.icons").parent().siblings().removeClass("addTableCount")}function Operationmargecell(){cellCollapse(),$(".center-div .collapse.event").children(".blank-div").parent("td").addClass("creation-bg"),$(".center-div .role").children(".blank-div").parent("td").addClass("creation-bg"),$(".center-div .system").children(".blank-div").parent("td").addClass("creation-bg"),$(".center-div tr").each(function(){$(this).find(".col-text").closest("td").last().prevAll("td.ExcelTablerow").addClass("merge-td"),$(".center-div tr").find(".col-text").closest("td").prevAll("td:nth-child(2)").addClass("border-left"),$(this).find(".creation").last().closest("td").prev("td").addClass("border-light-top"),$(".border-light-top").next("td.operation1").addClass("border-light-bottom"),$(this).find(".creation").last().closest("td").nextAll("td").addClass("border-light-top"),$(this).find(".creation").closest("td").last().next().prevAll("td.collapse").find(".creation").closest("td").addClass("border-light-bottom"),$(this).find(".col-text").closest("td").last().next().prevAll("td.collapse.event").addClass("border-right"),$(this).find(".system").last().next().prevAll("td.ExcelTablerow").addClass("merge-td"),$(this).find(".system").find(".creation-node").parent("td").addClass("border-light-top border-light-bottom"),$(this).find(".role").find(".creation-node").parent("td").addClass("border-light-top border-light-bottom"),$(".center-div .system").addClass("border-right")}),$(".center-div .operation-event").removeClass("border-right"),setTimeout(function(){$(".center-div .operation-event.border-bottom").removeClass("border-right")},100),$(".center-div .row-3").last().find(".system").last().next().prevAll("td.ExcelTablerow").addClass("border-bottom"),$(".center-div .row-3").last().find(".col-text").closest("td").last().next().prevAll("td.ExcelTablerow").addClass("border-bottom"),$(".center-div .blank_row").last().find(".col-text").closest("td").last().next().prevAll("td.ExcelTablerow").addClass("border-bottom"),$(".center-div .blank_row").children("td").removeClass("border-light-top"),$(".center-div .blank_row").last().find(".destructure").closest("td").last().next().prevAll("td.collapse").addClass("border-light-top"),$(".center-div .col-1.border-left").children(".blank-div").addClass("borderDashed")}function responceManifestation(e,t){$(".grid-div").css("display","none"),$(".grid-div").each(function(e,t){$(this).removeClass("center-div")}),$(".tab-item:first a").addClass("active");var n="tabIndex_"+(new Date).getTime().toString();selectedGridId=n;var i=(s='<div class="grid-div manifest center-div" grid-id ="%gridid%"></div>').replace("%gridid%",n);$("#center-screen").append(i),$("[grid-id="+n+"]").html(e),1==CheckBuildMode&&(simulateContinue=1,$(".simulate-mode").trigger("click"),CheckBuildMode=0),$("#center-screen").css("height",$(window).height()-52+"px");var a=$("#center-screen").height();$(".center-div").css("height",a-55),parentId=$(".tab-item:first").attr("parent-id"),$("[grid-id="+n+"]").attr("parent-id",parentId),$(".col-node-Actor-Perspective").css({position:"absolute",left:"27px"}),hideLoader(),$(".lodding").hide(),$(".center-div .col-9").addClass("border-right"),setColRowClass(),runAlgorithmOfAutoNumbering(),1==hideNumbering&&($(".table-count").addClass("hide"),$(".show-auto-number").addClass("hide-gridNumber"));var s='<a href="#" class="manifest-tab active"><i class="icon survey"></i><span>Manifest</span></a>';$(".block-head .control-btn-wrap").prepend(s),$(".list-tab").removeClass("active")}function openAddPhase(e,t){$.post(domainUrl+"associations/index",{type:"phase",preNoSegment1:t,columnNumber1:e,confirm:"NO"},addAssoresponcePhase,"HTML"),$("#associationSeriespoup").modal("show")}function openCreatePhase(e,t){$.post(domainUrl+"grid/index",{type:"phase",preNoSegment:t,columnNumber:e,confirm:"NO"},responceopenPhase,"HTML"),$("#openSeriespoup").modal("show")}function displayLoader(){$(".lodding").show()}function hideLoader(){$(".lodding").hide()}function setGridWidth(e){var t=$("#center-screen").width();$("[grid-id="+e+"]").find(".fTHLC-inner-wrapper").css("width",t-120),$("[grid-id="+e+"]").find(".fixed-top-header").css("width",$(".fTHLC-inner-wrapper").width()),$("[grid-id="+e+"]").find(".fTHLC-outer-wrapper").css("width",t-103)}function DeleteManifest(){if($(".center-div").hasClass("manifest-Create")){$(".center-div").removeClass("manifest-Create");var e=$(".center-div").attr("grid-id");$("[parent-id="+e+"]").remove()}}function setTableWidth(){var e=$("#center-screen").width(),t=$(".center-div .fixed-left-column").height(),n=$(".center-div .fTHLC-inner-wrapper").height();$("#center-screen").height();$("#main").css("height",$("#center-screen").height()-31);$(".rightSectionWrap").height(),$(".actionPaneHt").height();if($(".rightSectionWrap, .property-node-search").css("height",$(window).height()-227+"px"),$(".right-tab-node").find(".tab-content").css("height",$(window).height()-200+"px"),$(".center-div.process-grid .blankRow").children("td").addClass("merge-td"),$("#nodeFlyout").hasClass("in")){$(".right-popup").width(),$(".center-div").find(".nodeFlyout").offset().left;var i=$("#center-screen .fixed-top-header").outerWidth()/2,a=$("#center-screen .fTHLC-outer-wrapper").outerWidth()/2,s=$("#center-screen .fTHLC-inner-wrapper").outerWidth()/2;$(".center-div .col-1").hasClass("collapse"),$(".center-div.process-grid .fTHLC-outer-wrapper").css("width",a+100),$(".center-div.process-grid .fTHLC-inner-wrapper").css("width",s-60).scrollLeft(),$(".center-div.process-grid .fixed-top-header").css("width",i-60)}else n-17<t?$(".center-div .col-1").hasClass("collapse")?($(".center-div.process-grid .fixed-top-header").width(e-76),$(".center-div.process-grid tr").last().children("td").css("margin-bottom",19),$(".center-div.process-grid .fTHLC-outer-wrapper").css({width:e}),$(".center-div.process-grid .fTHLC-inner-wrapper").css({width:e-73}),$(".center-div.association-grid .fixed-top-header").width(e-76),$(".center-div.association-grid tr").last().children("td").css("margin-bottom",19),$(".center-div.association-grid .fTHLC-outer-wrapper").css({width:e}),$(".center-div.association-grid .fTHLC-inner-wrapper").css({width:e-73}),$(".center-div.manifest .fTHLC-inner-wrapper").css("width",e-75),$(".center-div.manifest .fTHLC-outer-wrapper").css("width",e)):($(".center-div.process-grid .fixed-top-header").width(e-175),$(".center-div.process-grid tr").last().children("td").css("margin-bottom",19),$(".center-div.process-grid .fTHLC-outer-wrapper").css({width:e}),$(".center-div.process-grid .fTHLC-inner-wrapper").css({width:e-172}),$(".center-div.association-grid .fixed-top-header").width(e-175),$(".center-div.association-grid tr").last().children("td").css("margin-bottom",19),$(".center-div.association-grid .fTHLC-outer-wrapper").css({width:e}),$(".center-div.association-grid .fTHLC-inner-wrapper").css({width:e-172}),$(".center-div.manifest .fTHLC-inner-wrapper").css("width",e-174),$(".center-div.manifest .fTHLC-outer-wrapper").css("width",e)):$(".center-div .col-1").hasClass("collapse")?($(".center-div.process-grid .fixed-top-header").css("width",e-76),$(".center-div.process-grid .fTHLC-outer-wrapper").css("width",e),$(".center-div.process-grid .fTHLC-inner-wrapper").css("width",e-73),$(".center-div.association-grid .fixed-top-header").css("width",e-76),$(".center-div.association-grid .fTHLC-outer-wrapper").css("width",e),$(".center-div.association-grid .fTHLC-inner-wrapper").css("width",e-73),$(".center-div.manifest .fTHLC-inner-wrapper").css("width",e-75),$(".center-div.manifest .fTHLC-outer-wrapper").css("width",e)):($(".center-div.process-grid .fTHLC-inner-wrapper").css("width",e-176),$(".center-div.process-grid .fixed-top-header").css("width",e-176),$(".center-div.process-grid .fTHLC-outer-wrapper").css("width",e),$(".center-div.association-grid .fTHLC-inner-wrapper").css("width",e-176),$(".center-div.association-grid .fixed-top-header").css("width",e-176),$(".center-div.association-grid .fTHLC-outer-wrapper").css("width",e),$(".center-div.manifest .fTHLC-inner-wrapper").css("width",e-174),$(".center-div.manifest .fTHLC-outer-wrapper").css("width",e));$(".center-div .fTHLC-inner-wrapper").niceScroll({cursorcolor:"#000",cursorborder:"0",cursorborderradius:"0",cursorwidth:"2px",background:"rgba(0,0,0,.15)"}),$(".center-div tr").last().children("td").addClass("border-bottom"),$(".center-div").find(".fTHLC-inner-wrapper").first().find("table").first().find("tr").last().children("td").addClass("border-bottom")}function fixCollapseTable(){var e=0;$(".center-div .row-0 th.col-1").nextAll().each(function(t,n){e+=parseInt($(n).width())}),$(".center-div.account-grid table").css("width",e+8),$("body.firefox .center-div.account-grid table").css("width",e+20)}function setWidthInitialy(){$(document).width();var e=$(window).outerWidth()-($(".user-action-wrap").outerWidth()+$(".sidebar_wrap").outerWidth()),t=$(window).height(),n=$(".right-header").height(),i=($(".footer-temp").height(),$("#ControlBar").height());if($("#center-screen").css("width",e+"px"),$("#left-screen").css("height",$(window).height()-52+"px"),$(".node-left-col").css("height",$("#left-screen").height()-52+"px"),$(".breadcrumb-wrap").hasClass("breadcrumb-up")){$breadcrumbWrap=10;r=t-(n+$breadcrumbWrap+i);$("#center-screen").css("height",+r+"px")}else{$breadcrumbWrap=51;r=t-(n+$breadcrumbWrap+i);$("#center-screen").css("height",+r+"px")}var a="",s="";a=($(".breadcrumb-wrap").hasClass("breadcrumb-up"),r),$(".grid-div,.association-grid").css("height",$("#center-screen").height()+"px"),$(".center-div.process-grid .fTHLC-outer-wrapper,.center-div.association-grid .fTHLC-outer-wrapper").css("height",$("#center-screen").height()+3+"px"),$(".center-div.process-grid .fTHLC-inner-wrapper,.center-div.association-grid .fTHLC-inner-wrapper").css("height",a+"px");var o=$("#center-screen").width(),r=$("#center-screen").height();$(".center-div.account-grid").find(".fTHLC-inner-wrapper").css({width:o-200,height:r-167}),$(".center-div.account-grid").find(".fTHLC-outer-wrapper").css({width:o-200,height:r}),$(".center-div.manifest .fTHLC-outer-wrapper").css("height",$("#center-screen").height()+"px"),$(".center-div.manifest .fTHLC-inner-wrapper").css("height",$("#center-screen").height()+"px"),$("#right-screen").css("height",$(window).height()-52+"px"),$(".class-bulider-section-modal #main").css("height",$("#center-screen").height()-31),$(".rightSectionWrap, .property-node-search").css("height",$(window).height()-207+"px"),s=($(".breadcrumb-wrap").hasClass("breadcrumb-up"),$(".fTHLC-inner-wrapper").outerHeight());var d=$(".center-div .fixed-top-header").outerHeight();$(".setnicescroll").height(s-d)}function removeInteractiobborder(){$(".center-div .nodeFlyout").parent("td").css({"border-top":"1px solid #ccc","border-bottom":"1px solid #ccc"}),$(".center-div .new-Role").parent("td").css({"border-top":"0px","border-bottom":"0px"}),$(".center-div .new-Role").parent("td").parent("tr").next("tr").find(".role").css({"border-top":"0px","border-bottom":"0px"}),$(".center-div .new-Domain").parent("td").css({"border-top":"0px","border-bottom":"0px"}),$(".center-div .new-Domain").parent("td").parent("tr").next("tr").find(".domain").css({"border-top":"0px","border-bottom":"0px"}),$(".center-div .creation-node").siblings(".new-Role").parent("td").attr("style","").addClass("disabled-role")}function flyoutHideSetWidth(){var e=$("#center-screen").width(),t=$(".center-div .fixed-left-column").height(),n=$(".center-div .fTHLC-inner-wrapper").height();$("#center-screen").height();n-17<t?$(".center-div .col-1").hasClass("collapse")?($(".center-div .fixed-top-header").width(e-121),$(".center-div tr").last().children("td").css("margin-bottom",19),$(".center-div .fTHLC-outer-wrapper").css({width:e-103}),$(".center-div .fTHLC-inner-wrapper").css({width:e-103})):($(".center-div .fixed-top-header").width(e-195),$(".center-div tr").last().children("td").css("margin-bottom",19),$(".center-div .fTHLC-outer-wrapper").css({width:e-178}),$(".center-div .fTHLC-inner-wrapper").css({width:e-178})):$(".center-div .col-1").hasClass("collapse")?($(".center-div .fTHLC-inner-wrapper").css("width",e-103),$(".center-div .fixed-top-header").css("width",e-105),$(".center-div .fTHLC-outer-wrapper").css("width",e-102)):($(".center-div .fTHLC-inner-wrapper").css("width",e-176),$(".center-div .fixed-top-header").css("width",e-176),$(".center-div .fTHLC-outer-wrapper").css("width",e-176))}function removeClassSave(){$(".center-div .icons").each(function(e,t){if($(this).hasClass("showing")){$(this).removeClass("showing");var n=$(this).siblings("input").attr("name");$(".center-div ."+n).first().removeClass("segment-node-input border-top-green"),$(".center-div ."+n).removeClass("segment-node-input border-green bg-green"),$(".center-div ."+n).last().removeClass("segment-node-input border-bottom-green"),$(".center-div ."+n+".operation1").closest("tr").prev("tr").children("td.operation1").first().removeClass("segment-node-input border-bottom-select"),$(this).closest(".col-text").siblings(".node-white-circle").removeClass("segment-node-input node-green-circle"),$(".show-auto-number").hasClass("hide-gridNumber")||$(this).siblings(".table-count").removeClass("hide"),$(".center-div ."+n).find("i.fa-bars").addClass("segment")}})}function setBreadCrumb(){}function removeTdColClass(){$(".center-div").each(function(){$(this),$("tbody tr",$(this)),$("thead tr",$(this));$(this).find("tr").each(function(){var e=0;$(this).find("td").each(function(t,n){$(".center-div td").removeClass("col-"+e),e++})})})}function setTdColClass(){$(".center-div").each(function(){var e;$(this),$("tbody tr",$(this)),$("thead tr",$(this));$(this).find("tr").each(function(){e=0,$(this).find("td").each(function(t,n){var i=$(this).attr("class"),a=$.grep(i.split(" "),function(e,t){return e.replace(/\bcol-[\d].?\b/g,"")}).join(" ");$(this).attr("class",""),$(this).addClass(a+" col-"+e),e++})})})}function showStatusDrp(){$("body").on("click",".add-staus",function(){$(this).siblings(".add-col-wrap").children("ul").addClass("show")})}function setNodePosition(){if($("#left-screen .node-content").css({"margin-left":0,"padding-left":0}),$("#left-screen .node-content").hasClass("node-selected")){var e=$("#left-screen .node-content.node-selected").offset().left;$("#left-screen .node-content.node-selected").css({"margin-left":-e,"padding-left":e})}}function setliwidth(){$('.left-manu-bar [role="menuitem"]').each(function(e,t){$(this).css({"margin-left":0,"padding-left":0});var n=212-$(this).width();$(this).css({"margin-left":-n,"padding-left":n})})}function saveAssociationProcess(){var e=parseInt($(".center-div").find("table.fixed-left-column tr").eq(0).find("td").length)-2;if(void 0!=$(".production_title:eq(1)").val())t=$(".production_title:eq(1)").val();else var t=$(".production_title").val();var n=parseInt($(".center-div").find("table.fixed-left-column tr").length)-1,i=parseInt(n)-1;course=[];for(var a=[],s="",o="",r="",d="",l="",c="",h="",u=0,p="",f="",v=parseInt(e)*parseInt(i),m=$("table.fixed-left-column tr"),g=1;g<=e;g++){""==(s=$(".center-div .fixed-top-header tr.row-1 td.col-"+parseInt(g)).find("span.col-head-title").text())&&""==$("#hidden-instance_id").val()&&(s=$("table.fixed-left-column tr.row-1 td.col-"+parseInt(g)).first().find("span.col-head-title").text()),o=g;var b=[];if(1==g)segment_start_column=2,segment_end_column=n,b[0]={seg_title:"",segment_temp_update:l,seg_type:"",seg_start:segment_start_column,seg_end:segment_end_column,seg_active:"false",seg_complete:"false"},a.push({title:s,type:"Phase",column_sequence:o,series_active:"false",series_complete:"false",segmentData:b});else for(var C=0,w=0,x=0,y=0,_=-1,T=0,k=1,S=2;S<=n;S++){var I=$(m).eq(S).children("td").eq(g).is(".border-green, .bg-green")?"true":"false";if($("#course-path-number").hasClass("On"))N=$(m).eq(S).children("td").eq(g).hasClass("show_number_grey")?"false":"true";else var N="false";if("true"==I&&(T=1,$(m).eq(S).children("td").eq(g).find("span.table-count.activeNum").length)){if(cellNum=$.grep($(m).eq(S).children("td").eq(g).attr("class").split(" "),function(e,t){return 0===e.indexOf("cell_")}).join(),cellNumArr=cellNum.split("_"),selectedRowNum=cellNumArr[1],c=g,".Event"===$.trim(s)){f=g-1;for(C=2;C<=selectedRowNum;C++)$(m).eq(C).children("td").eq(g).each(function(){$(this).find("span.table-count").length&&u++})}else f=g,u="#";p=S-1;for(var L=[],C=2;C<=n;C++)$(m).eq(C).children("td").eq(f).each(function(){allParentClassName=$.grep($(this).attr("class").split(" "),function(e,t){return 0===e.indexOf("parent_")}).join(),-1==L.indexOf(allParentClassName)&&""!=allParentClassName.trim()&&L.push(allParentClassName)});parentClassName=$.grep($(m).eq(S).children("td").eq(f).attr("class").split(" "),function(e,t){return 0===e.indexOf("parent_")}).join(),c=f,h=L.indexOf(parentClassName)+1}if("false"==N&&(k=0),".Event"===$.trim(s))$(m).eq(S).children("td").eq(g).find("span").hasClass("creation")?(C=S,d="Creation",l=$(m).eq(S).children("td").eq(g).find("input.custom-node-hidden").val(),r="",segment_start_column=S,segment_end_column=S,C++,b[w]={seg_title:d,segment_temp_update:l,seg_type:r,seg_start:segment_start_column,seg_end:segment_end_column,seg_active:I,seg_complete:N}):$(m).eq(S).children("td").eq(g).find("span").hasClass("destructure")?(d="Destruction",r="",segment_start_column=S,segment_end_column=S,y=x+1,w=++x,b[y]={seg_title:d,segment_temp_update:l,seg_type:r,seg_start:segment_start_column,seg_end:segment_end_column,seg_active:I,seg_complete:N},w++,x++,y++):(x=parseInt(y)+1,w=parseInt(y)+2,d="",l=$(m).eq(S).children("td").eq(g).find("input.custom-node-hidden").val(),r="",segment_start_column=C,segment_end_column=S,b[x]={seg_title:d,segment_temp_update:l,seg_type:r,seg_start:segment_start_column,seg_end:segment_end_column,seg_active:I,seg_complete:N});else if($(m).eq(S).children("td").eq(g).hasClass("process-series"))++_,d=$(m).eq(S).children("td").eq(g).hasClass("fill")?$(m).eq(S).find("td").eq(g).find("span.custom-node").text():"",l=$(m).eq(S).children("td").eq(g).find("input.custom-node-hidden").val(),r="",segment_start_column=S,segment_end_column=S,b[_]={seg_title:d,segment_temp_update:l,seg_type:r,seg_start:segment_start_column,seg_end:segment_end_column,seg_active:I,seg_complete:N};else{var D=$(m).eq(S).children("td").eq(g).attr("class"),A=$.grep(D.split(" "),function(e,t){return 0===e.indexOf("parent_")}).join();if($(m).eq(S).children("td").eq(g).hasClass("cell_"+S+"_"+g)==$(m).eq(S).children("td").eq(g).hasClass("parent_"+S+"_"+g)){x=S,++_,d=$(m).eq(S).find("td").eq(g).find("input.custom-node").length?$(m).eq(S).find("td").eq(g).find("input.custom-node").attr("colValue"):$(m).eq(S).find("td").eq(g).find("span.custom-node").text(),l=$(m).eq(S).find("td").eq(g).find("input.custom-node-hidden").val(),r="",segment_start_column=S,segment_end_column=S;var R=d,M=l;b[_]={seg_title:d,segment_temp_update:l,seg_type:r,seg_start:segment_start_column,seg_end:segment_end_column,seg_active:I,seg_complete:N}}else if(""==A&&$(m).eq(S).children("td").eq(g).hasClass("cell_"+S+"_"+g)==$(m).eq(S).children("td").eq(g).hasClass("blankSeg_"+S+"_"+g)){x=S,++_,d="",r="",segment_start_column=S,segment_end_column=S;R=d;b[_]={seg_title:d,seg_type:r,seg_start:segment_start_column,seg_end:segment_end_column,seg_active:I,seg_complete:N}}else d=R,l=M,r="",segment_start_column=x,segment_end_column=S,b[_]={seg_title:d,segment_temp_update:l,seg_type:r,seg_start:segment_start_column,seg_end:segment_end_column,seg_active:I,seg_complete:N}}S==n&&a.push({title:s,type:"Phase",column_sequence:o,series_active:1==T?"true":"false",series_complete:1==k?"true":"false",segmentData:b})}}course.push({course_template:"course_template",course_title:"course_title",course_description:"course_description",course_objectives:"course_objectives",productionData:{production_title:t,production_type:$("#ControlBar").find(".left-side-heading").html(),production_description:"",production_rows:i,production_columns:e,production_cells:v,production_series:c,production_segment:h,production_event:u,production_period:p,seriesData:a}})}function saveAssociationProcessProperty(e){NProgress.start(),saveAssociationProcess();var t=JSON.stringify(course),n=$("#hidden-instance_id").val();$("div.center-div td.ExcelTablerow, td.ExcelTableFormationCol").removeClass("border-top-green border-green bg-green border-right-green border-bottom-green border-bottom-select"),$("div.center-div td.ExcelTablerow, td.ExcelTableFormationCol").find(".node-green-circle, .dark-gray").removeClass("node-green-circle dark-gray"),$.post(domainUrl+"associations/saveAssociationInstanceData",{course_class_id:domain_course_class_id,production_class_id:domain_production_class_id,series_class_id:domain_series_class_id,segment_class_id:domain_segment_class_id,propertyJson:t,saveType:e,node_instance_id:n},responseSaveAssociationProcessProperty,"HTML")}function responseSaveAssociationProcessProperty(e,t){res=JSON.parse(e),$(".main-title-wrap").children("#temp_node_span").remove(),$(".main-title-wrap").children("#temp_node_span").html(""),$("#ControlBar").find(".left-side-heading").after('<span class="nodeIdCount" id="temp_node_span"><span>( '+res.node_id+' )</span><span class="colon">:</span><span class="refCourseTitle"><span class="refCourseTitleEdit"><input type="text" value="" name="productiontitle" class="production_title form-control input-field" placeholder="Undefined"><i class="icon tick"></i></span><span class="refCourseTitleView hide"><label>Undefined</label><i class="icon sm-edit"></i></span></span></span>'),$("input.custom-node").each(function(){var e=$.trim($(this).attr("colValue")),t='<span class="editable-field">'+$.trim(e)+"</span>";$(this).replaceWith(t)}),$("#temp_column_count").attr("value",parseInt(res.columns)),$("#temp_rows_count").attr("value",parseInt(res.trrows)),disablePlusIcon(),showAssociationProcessRightMenuInViewMode(res.node_instance_id,res.savetypestatus),NProgress.done()}function showAssociationProcessRightMenuInViewMode(e,t){$("#hidden-instance_id").attr("value",parseInt(e)),$("#association_action_menu .user-roles").css("display","none"),"D"==$.trim(t)?($("#association_action_menu .edit-association").removeClass("inactiveLink").css("display","block"),$("#association_action_menu .instance-view").removeClass("inactiveLink").css("display","block")):($("#association_action_menu .edit-association").addClass("inactiveLink").css("display","block"),$("#association_action_menu .instance-view").removeClass("inactiveLink").css("display","block"))}function showDefaultView(){bootbox.confirm("Are you sure you want to cancel?",function(e){if(e){var t=parseInt($("#hidden-instance_id").val());t>0?(NProgress.start(),displayLoader(),$.post(domainUrl+"associations/composeClassStructure",{node_class_id:domain_production_class_id,node_instance_id:t},gridInstanceResponse,"html")):($(".center-div").remove(),$("#ControlBar").css("display","none")),$("input.custom-node").each(function(){var e=$.trim($(this).attr("colValue")),t='<span class="editable-field">'+$.trim(e)+"</span>";$(this).replaceWith(t)}),$(".production_title").attr("readonly",!0),showMenuInViewMode(t),$("#association_action_menu").hide()}})}function saveGridNav(){saveAssociationProcessProperty("P")}function openSheduleBuilder(){$("body").on("click",".col-head",function(e){$(this).toggleClass("openthreepane"),$(this).hasClass("openthreepane")?$("#scheduleBuilder").animate({right:"0"},300,function(){$("#scheduleBuilder").addClass("in"),$(".nano").nanoScroller()}):$("#scheduleBuilder").animate({right:"-100%"},300,function(){$("#scheduleBuilder").removeClass("in"),$(".col-head.openthreepane").removeClass("openthreepane")}),threepaneSlide(),e.stopPropagation()}),$("body").on("click",".closeSheduleBuilder",function(e){$("#scheduleBuilder").animate({right:"-100%"},300,function(){$("#scheduleBuilder").removeClass("in"),$(".col-head.openthreepane").removeClass("openthreepane")})})}function calculateBalance(){$("tbody tr td :input:text").not(".calculate-amount, .calculate-amount-hidden, .share-percentage-debit, .share-percentage-credit, .custom-node").attr("value",""),calFlag=0,$("input:checkbox[name=chkDebit]:checked").each(function(e,t){if(currentCol=$(t).closest("td"),currentRow=$(t).closest("tr"),currentColIndex=currentCol.index(),selectedOption=currentCol.prev("td").find(".calculate-option option:selected").val(),"Fixed"==selectedOption?inputAmount=currentCol.prev("td").find("input.calculate-amount:visible").val():currentCol.prev("td").find("input.calculate-amount-hidden").length>0?inputAmount=currentCol.prev("td").find("input.calculate-amount-hidden:last").val():inputAmount="",debitPercentage=currentRow.next("tr").find("td.cell-"+currentColIndex).find("input.share-percentage-debit:visible").val(),""!=selectedOption&&""!=inputAmount&&""!=debitPercentage){calFlag=1,shareDebit=inputAmount*debitPercentage/100,currentRow.next("tr").next("tr").find("td.cell-"+currentColIndex).find("input.share-debit:visible").attr("value",shareDebit.toFixed(2)),currentRow.next("tr").next("tr").next("tr").find("td.cell-"+currentColIndex).find("input.distribution-debit:visible").attr("value",shareDebit.toFixed(2));var n=0;$(currentRow).find("input:checkbox[name=chkCredit]:checked").each(function(e,t){if(creditIndex=$(t).closest("td").index(),(n+=parseFloat(currentRow.next("tr").find("td.cell-"+creditIndex).find("input.share-percentage-credit:visible").val()))>100&&0==$.trim(parseInt($("#hidden-popup").val()))){var i=$(currentRow).find("div.account-title.fee-title").text();return bootbox.alert("Sum of Credit should not be more than 100 for "+i,function(){$("#hidden-popup").attr("value",0)}),$("#hidden-popup").attr("value",1),!1}}),$(currentRow).find("input:checkbox[name=chkCredit]:checked").each(function(e,t){creditColIndex=$(t).closest("td").index(),creditPercentage=currentRow.next("tr").find("td.cell-"+creditColIndex).find("input.share-percentage-credit:visible").val(),n<=100&&""!=creditPercentage&&(shareCredit=inputAmount*creditPercentage/100,currentRow.next("tr").next("tr").find("td.cell-"+creditColIndex).find("input.share-credit:visible").attr("value",shareCredit.toFixed(2)),currentRow.next("tr").next("tr").next("tr").find("td.cell-"+creditColIndex).find("input.distribution-credit:visible").attr("value",shareCredit.toFixed(2)))})}}),1==calFlag&&($("tbody tr.row-group").find("td input:checkbox[name=chkDebit]:checked").each(function(e,t){var n=$(t).closest("td"),i=($(t).closest("tr"),n.index()),a=0;$("tbody tr.row-share").each(function(e,t){var n=$(t).find("td.cell-"+i+" :input.share-debit:visible").val();void 0!==n?(a=parseFloat(n)+parseFloat(a),isNaN(a)||$(t).next("tr").next("tr.row-balance").find("td.cell-"+i+" :input.total-debit").attr("value",a.toFixed(2))):0!=a&&(isNaN(a)||$(t).next("tr").next("tr.row-balance").find("td.cell-"+i+" :input.total-debit").attr("value",a.toFixed(2)))})}),$("tbody tr.row-group").find("td input:checkbox[name=chkCredit]:checked").each(function(e,t){var n=$(t).closest("td"),i=($(t).closest("tr"),n.index()),a=0;$("tbody tr.row-share").each(function(e,t){var n=$(t).find("td.cell-"+i+" :input.share-credit:visible").val();void 0!==n?(a=parseFloat(n)+parseFloat(a),isNaN(a)||$(t).next("tr").next("tr.row-balance").find("td.cell-"+i+" :input.total-credit").attr("value",a.toFixed(2))):0!=a&&$(t).next("tr").next("tr.row-balance").find("td.cell-"+i+" :input.total-credit").attr("value",a.toFixed(2))})}),$("tbody tr.row-balance").each(function(e,t){var n=0,i=0;$(t).find("input.total-balance").each(function(e,t){var a=$(t).closest("td").prev("td").find("input.total-credit").val(),s=$(t).closest("td").prev("td").prev("td").find("input.total-debit").val();void 0===s||""==s?s=0:n=parseFloat(n)+parseFloat(s),void 0===a||""==a?a=0:i=parseFloat(i)+parseFloat(a);var o=parseFloat(s)-parseFloat(a);isNaN(o)?$(t).attr("value",""):$(t).attr("value",o)});var a=parseFloat(n)-parseFloat(i);isNaN(n)||$(t).find("input.final-total-debit").attr("value",n.toFixed(2)),isNaN(i)||$(t).find("input.final-total-credit").attr("value",i.toFixed(2)),isNaN(a)||$(t).find("input.final-total-balance").attr("value",a.toFixed(2));var s=0;$(t).prev("tr.row-distribution").find("input.distribution-debit:visible").each(function(e,t){var n=$(t).val();void 0===n||""==n?n=0:s=parseFloat(s)+parseFloat(n)});var o=0;$(t).prev("tr.row-distribution").find("input.distribution-credit:visible").each(function(e,t){var n=$(t).val();void 0===n||""==n?n=0:o=parseFloat(o)+parseFloat(n)});var r=parseFloat(s)-parseFloat(o);isNaN(s)||$(t).prev("tr.row-distribution").find("input.final-distribution-debit").attr("value",s.toFixed(2)),isNaN(o)||$(t).prev("tr.row-distribution").find("input.final-distribution-credit").attr("value",o.toFixed(2)),isNaN(r)||$(t).prev("tr.row-distribution").find("input.final-distribution-balance").attr("value",r.toFixed(2))}))}function makeEditableYellow(){$('.account-grid input[type="text"]').each(function(e,t){$(t).is("[readonly]")||($(t).addClass("highlighted"),$(t).parents(".account-node").addClass("highlighted"))}),$(".account-grid input[type=checkbox]:not(:disabled)").each(function(e,t){$(t).parent().addClass("highlighted")})}function financialGrid(){function e(e){e.is("input:checkbox[name=chkDebit]:checked")?e.closest("td").siblings("td").find($("input:checkbox[name=chkDebit]")).attr("disabled",!0).closest("div.account-node").removeClass("highlighted"):e.closest("td").siblings("td").find($("input:checkbox[name=chkDebit]")).attr("disabled",!1).closest("div.account-node").addClass("highlighted")}$(".center-div.account-grid table#account-table").fixedTblHdrLftCol({scroll:{leftCol:{fixedSpan:2}}}),$(".center-div .fTHLC-inner-wrapper").scrollLeft(1),setTopPosition(),$("th li.delete-li").on("click",function(){var e;$(this).hasClass("delete-domain")?e="Domain":$(this).hasClass("delete-node")&&(e="Node");var t=$(this).closest("th"),n=t.data("section").split("-");bootbox.confirm({title:"Alert",message:"Are you sure you want to Delete this "+e+"?",buttons:{cancel:{label:"Cancel",className:"btn-default"},confirm:{label:"Delete",className:"btn-primary"}},callback:function(s){if(s){if(displayLoader(),!t.hasClass("show")){hideDrodownMenu();var o=0;$(".add-segment ul.dropdown-menu").removeClass("show"),$("i.segment").removeClass("show");var r=t.attr("data-section");if("Domain"==e)undefinedSellerBuyerLength=0,undefinedSellerBuyerLength=$(".center-div .account-head-title.seller-buyer-section").length,sellerNodeLength=$(".center-div .account-head-title."+r+".sellerSection-node").length,buyerNodeLength=$(".center-div .account-head-title."+r+".buyerSection-node").length,authorityNodeLength=$(".center-div .account-head-title."+r+".authoritySection-node").length,sellerNodeLengthLoop=0,buyerNodeLengthLoop=0,authorityNodeLengthLoop=0,$(".center-div [data-section="+r+"]").each(function(e,t){sectionColIndex=$(t).index(),sectionColIndex!=o&&r==i&&("undefinedSellerBuyerSection"==n[0]?undefinedSellerBuyerLength>1?($(".center-div .cell-"+sectionColIndex).addClass("deleted-column"),$(".center-div .cell-"+sectionColIndex).prev(".acntSecCol").addClass("deleted-column")):(nodeSection1=$(".center-div .row-2").find(".cell-"+sectionColIndex).data("section").split("-"),"sellerSection"==nodeSection1[0]&&(sellerNodeLength>1?++sellerNodeLengthLoop<6?($(".center-div .cell-"+sectionColIndex).prev(".acntSecCol").removeClass("HideSection"),$(".center-div .cell-"+sectionColIndex).addClass("HideSection"),$(".center-div .cell-"+sectionColIndex).find("input[type=checkbox]:checked:not(:disabled)").prop("checked",!1).trigger("change",["Trigger"])):($(".center-div .cell-"+sectionColIndex).addClass("deleted-column"),$(".center-div .cell-"+sectionColIndex).prev(".acntSecCol").addClass("deleted-column")):($(".center-div .cell-"+sectionColIndex).prev(".acntSecCol").removeClass("HideSection"),$(".center-div .cell-"+sectionColIndex).addClass("HideSection"),$(".center-div .cell-"+sectionColIndex).find("input[type=checkbox]:checked:not(:disabled)").prop("checked",!1).trigger("change",["Trigger"]))),"buyerSection"==nodeSection1[0]&&(buyerNodeLength>1?++buyerNodeLengthLoop<6?($(".center-div .cell-"+sectionColIndex).prev(".acntSecCol").removeClass("HideSection"),$(".center-div .cell-"+sectionColIndex).addClass("HideSection"),$(".center-div .cell-"+sectionColIndex).find("input[type=checkbox]:checked:not(:disabled)").prop("checked",!1).trigger("change",["Trigger"])):($(".center-div .cell-"+sectionColIndex).addClass("deleted-column"),$(".center-div .cell-"+sectionColIndex).prev(".acntSecCol").addClass("deleted-column")):($(".center-div .cell-"+sectionColIndex).prev(".acntSecCol").removeClass("HideSection"),$(".center-div .cell-"+sectionColIndex).addClass("HideSection"),$(".center-div .cell-"+sectionColIndex).find("input[type=checkbox]:checked:not(:disabled)").prop("checked",!1).trigger("change",["Trigger"])))):"indiaSection"==n[0]?authorityNodeLength>1?++authorityNodeLengthLoop<6?($(".center-div .cell-"+sectionColIndex).prev(".acntSecCol").removeClass("HideSection"),$(".center-div .cell-"+sectionColIndex).addClass("HideSection"),$(".center-div .cell-"+sectionColIndex).find("input[type=checkbox]:checked:not(:disabled)").prop("checked",!1).trigger("change",["Trigger"])):($(".center-div .cell-"+sectionColIndex).addClass("deleted-column"),$(".center-div .cell-"+sectionColIndex).prev(".acntSecCol").addClass("deleted-column")):($(".center-div .cell-"+sectionColIndex).prev(".acntSecCol").removeClass("HideSection"),$(".center-div .cell-"+sectionColIndex).addClass("HideSection"),$(".center-div .cell-"+sectionColIndex).find("input[type=checkbox]:checked:not(:disabled)").prop("checked",!1).trigger("change",["Trigger"])):($(".center-div .cell-"+sectionColIndex).addClass("deleted-column"),$(".center-div .cell-"+sectionColIndex).prev(".acntSecCol").addClass("deleted-column"))),o=sectionColIndex,i=r,lastSubSectionName="sub"+r,a=!1});else{var d=r.split("-")[0]+"-node",l=$(t).index(),c=$(".center-div .row-1").find(".cell-"+l).data("section"),h=c.split("-");nodeLength=$(".center-div .account-head-title."+c+"."+d).length,accountNodeTitle1='<div class="col-head"></div>',accountNodeTitle2='<div class="col-head"></div>',indexLoop=0,totalLoop=$(".center-div [data-section="+r+"]").length,$(".center-div [data-section="+r+"]").each(function(e,t){indexLoop++,sectionColIndex=$(t).index(),sectionColIndex!=o&&r==i&&("undefinedSellerBuyerSection"==h[0]&&nodeLength>1?(2==indexLoop&&(accountNodeTitle1=$(".center-div .row-1").find("th.cell-"+sectionColIndex).prev(".acntSecCol").html(),accountNodeTitle2=$(".center-div .row-1").find("th.cell-"+sectionColIndex).html()),indexLoop==totalLoop&&($(".center-div .row-1").find("th.cell-"+sectionColIndex).next("th").data("section")==c&&$(".center-div .row-1").find("th.cell-"+sectionColIndex).next("th").html(accountNodeTitle1),$(".center-div .row-1").find("th.cell-"+sectionColIndex).next("th").next("th").data("section")==c&&$(".center-div .row-1").find("th.cell-"+sectionColIndex).next("th").next("th").html(accountNodeTitle2)),$(".center-div .cell-"+sectionColIndex).addClass("deleted-column"),$(".center-div .cell-"+sectionColIndex).prev(".acntSecCol").addClass("deleted-column")):nodeLength>1?(2==indexLoop&&(accountNodeTitle1=$(".center-div .row-1").find("th.cell-"+sectionColIndex).prev(".acntSecCol").html(),accountNodeTitle2=$(".center-div .row-1").find("th.cell-"+sectionColIndex).html()),indexLoop==totalLoop&&($(".center-div .row-1").find("th.cell-"+sectionColIndex).next("th").data("section")==c&&$(".center-div .row-1").find("th.cell-"+sectionColIndex).next("th").html(accountNodeTitle1),$(".center-div .row-1").find("th.cell-"+sectionColIndex).next("th").next("th").data("section")==c&&$(".center-div .row-1").find("th.cell-"+sectionColIndex).next("th").next("th").html(accountNodeTitle2)),$(".center-div .cell-"+sectionColIndex).prev(".acntSecCol").addClass("deleted-column"),$(".center-div .cell-"+sectionColIndex).addClass("deleted-column")):($(".center-div .cell-"+sectionColIndex).prev(".acntSecCol").removeClass("HideSection"),$(".center-div .cell-"+sectionColIndex).addClass("HideSection"),$(".center-div .cell-"+sectionColIndex).find("input[type=checkbox]:checked:not(:disabled)").prop("checked",!1).trigger("change",["Trigger"]))),o=sectionColIndex,i=r,lastSubSectionName="sub"+r,a=!1})}$(".center-div .deleted-column").remove(),removeAccountCellClass(),setAccountCellClass(),manageDomainIcon(),InitallySetWidth=!1,AcountTableWidth(),hideLoader()}}else hideDrodownMenu();calculateBalance()}})}),$('input[type="checkbox"]').on("change",function(t,n){var i=$(this),a=$(this).val(),s=$.grep($(i.closest("td")).attr("class").split(" "),function(e,t){return 0===e.indexOf("cell-")}).join();if(s=$.trim(s),i.is(":checked")){if("debit"==a)if(i.closest("td").next("td").find("input[type=checkbox]").is(":checked")){o=$.grep($(i.closest("td").next("td")).attr("class").split(" "),function(e,t){return 0===e.indexOf("cell-")}).join();if(""!=i.closest("tr").nextUntil(".row-group").find("."+o).find('input[type="text"]:not([readonly="readonly"])').val())bootbox.confirm({title:"Warning",message:"Unset will Reset current value",buttons:{cancel:{label:"Cancel",className:"btn-default"},confirm:{label:"Proceed Anyway",className:"btn-primary"}},callback:function(t){if(t){i.closest("td").next("td").find("input[type=checkbox]").attr("checked",!1),i.closest("tr").nextUntil(".row-group").find("."+o).addClass("creation-bg").find("div.account-node:not(.total)").hide().find("input").addClass("hide").attr("value",""),e(i),i.closest("td").prev("td").removeClass("creation-bg").find("div.account-node").show().find("select,input").removeClass("hide");var n=i.closest("td").prev("td").index();i.closest("td").prev("td").closest("tr").next("tr").children("td.cell-"+n).addClass("custom-border"),i.closest("tr").nextUntil(".row-group").find("."+s).removeClass("creation-bg").find("div.account-node").show().find("input").removeClass("hide")}else i.attr("checked",!1)}});else{e(i),i.closest("td").prev("td").removeClass("creation-bg").find("div.account-node").show().find("select,input").removeClass("hide");d=i.closest("td").prev("td").index();i.closest("td").prev("td").closest("tr").next("tr").children("td.cell-"+d).addClass("custom-border"),i.closest("tr").nextUntil(".row-group").find("."+s).removeClass("creation-bg").find("div.account-node").show().find("input").removeClass("hide"),i.closest("td").next("td").find("input[type=checkbox]").attr("checked",!1),i.closest("td").prev("td").find(".calculate-amount").val(""),i.closest("td").prev("td").find(".calculate-amount").attr("value"," "),i.closest("tr").next("tr.row-share-percentage").find(".share-percentage-debit").attr("value","100");var o=$.grep($(i.closest("td").next("td")).attr("class").split(" "),function(e,t){return 0===e.indexOf("cell-")}).join();i.closest("tr").nextUntil(".row-group").find("."+o).addClass("creation-bg").find("div.account-node:not(.total)").hide().find("input").addClass("hide").attr("value","")}}else{e(i),i.closest("td").prev("td").removeClass("creation-bg").find("div.account-node").show().find("select,input").removeClass("hide");d=i.closest("td").prev("td").index();i.closest("td").prev("td").closest("tr").next("tr").children("td.cell-"+d).addClass("custom-border"),i.closest("tr").nextUntil(".row-group").find("."+s).removeClass("creation-bg").find("div.account-node").show().find("input").removeClass("hide")}else if("credit"==a){var r=$.grep($(i.closest("td").prev("td")).attr("class").split(" "),function(e,t){return 0===e.indexOf("cell-")}).join();if(i.closest("td").prev("td").find("input[type=checkbox]").is(":checked"))if(""!=i.closest("tr").nextUntil(".row-group").find("."+r).find('input[type="text"]:not([readonly="readonly"])').val())bootbox.confirm({title:"Warning",message:"Uncheck will Reset current value",buttons:{cancel:{label:"Cancel",className:"btn-default"},confirm:{label:"Proceed Anyway",className:"btn-primary"}},callback:function(t){if(t){i.closest("td").prev("td").find("input[type=checkbox]").attr("checked",!1),i.closest("td").prev("td").prev("td").addClass("creation-bg").find("div.account-node:not(.total)").hide().find("input").addClass("hide").attr("value",""),i.closest("tr").nextUntil(".row-group").find("."+r).addClass("creation-bg").find("div.account-node:not(.total)").hide().find("input").addClass("hide").attr("value",""),e(i),i.closest("tr").nextUntil(".row-group").find("."+s).removeClass("creation-bg").find("div.account-node").show().find("input").removeClass("hide");var n=i.closest("td").prev("td").prev("td").index();i.closest("td").prev("td").closest("tr").next("tr").children("td.cell-"+n).removeClass("custom-border"),calculateBalance()}else i.attr("checked",!1)}});else{i.closest("td").prev("td").find("input[type=checkbox]").attr("checked",!1),i.closest("td").prev("td").prev("td").addClass("creation-bg").find("div.account-node:not(.total)").hide().find("input").addClass("hide").attr("value",""),i.closest("tr").nextUntil(".row-group").find("."+r).addClass("creation-bg").find("div.account-node:not(.total)").hide().find("input").addClass("hide").attr("value",""),e(i),i.closest("tr").nextUntil(".row-group").find("."+s).removeClass("creation-bg").find("div.account-node").show().find("input").removeClass("hide");d=i.closest("td").prev("td").prev("td").index();i.closest("td").prev("td").closest("tr").next("tr").children("td.cell-"+d).removeClass("custom-border")}else{i.closest("tr").nextUntil(".row-group").find("."+s).removeClass("creation-bg").find("div.account-node").show().find("input").removeClass("hide");d=i.closest("td").prev("td").prev("td").index();i.closest("td").prev("td").closest("tr").next("tr").children("td.cell-"+d).removeClass("custom-border")}}}else if(""!=i.closest("tr").nextUntil(".row-group").find("."+s).find('input[type="text"]:not([readonly="readonly"])').val()&&"Trigger"!=n)bootbox.confirm({title:"Warning",message:"Uncheck will Reset current value",buttons:{cancel:{label:"Cancel",className:"btn-default"},confirm:{label:"Proceed Anyway",className:"btn-primary"}},callback:function(t){if(t){if("debit"==a){e(i),i.closest("td").prev("td").addClass("creation-bg").find("div.account-node").hide().find("select,input").addClass("hide").attr("value","");n=i.closest("td").prev("td").index();i.closest("td").prev("td").closest("tr").next("tr").children("td.cell-"+n).removeClass("custom-border"),i.closest("tr").nextUntil(".row-group").find("."+s).addClass("creation-bg").find("div.account-node:not(.total)").hide(),i.closest("tr").nextUntil(".row-group").find("."+s).find("input").addClass("hide").attr("value","")}else if("credit"==a){i.closest("tr").nextUntil(".row-group").find("."+s).addClass("creation-bg").find("div.account-node:not(.total)").hide(),i.closest("tr").nextUntil(".row-group").find("."+s).find("input").addClass("hide").attr("value","");var n=i.closest("td").prev("td").prev("td").index();i.closest("td").prev("td").closest("tr").next("tr").children("td.cell-"+n).removeClass("custom-border")}calculateBalance()}else i.attr("checked",!0)}});else if("debit"==a){e(i),i.closest("td").prev("td").addClass("creation-bg").find("div.account-node").hide().find("select,input").addClass("hide").attr("value","");d=i.closest("td").prev("td").index();i.closest("td").prev("td").closest("tr").next("tr").children("td.cell-"+d).removeClass("custom-border"),i.closest("tr").nextUntil(".row-group").find("."+s).addClass("creation-bg").find("div.account-node:not(.total)").hide().find("input").addClass("hide").attr("value","")}else if("credit"==a){i.closest("tr").nextUntil(".row-group").find("."+s).addClass("creation-bg").find("div.account-node:not(.total)").hide().find("input").addClass("hide").attr("value","");var d=i.closest("td").prev("td").prev("td").index();i.closest("td").prev("td").closest("tr").next("tr").children("td.cell-"+d).removeClass("custom-border")}}),$('input[type="text"]').on("blur",function(){if("Percentage"==$.trim($(this).siblings(".calculate-option").val())){var e=$(this).siblings(".selected-amount-hidden").val()*$.trim($(this).val())/100;$(this).siblings(".calculate-amount-hidden").attr("value",""),$(this).siblings(".calculate-amount-hidden").attr("value",e)}""!=$.trim($(this).val())&&$(this).attr("value",$(this).val()),calculateBalance()}),$('input[type="checkbox"]').on("change",function(){$(this).is(":checked")?$(this).attr("checked",!0):$(this).attr("checked",!1)}),$("select").on("change",function(){$(this).find("option[value="+$(this).val()+"]").attr("selected","selected"),"Percentage"==$(this).val()?($(this).siblings(".calculate-amount").attr("value",""),$(this).siblings("i.add").show().addClass("addDisabled"),$(this).siblings("input").removeClass("full-width")):($(this).siblings(".calculate-amount").attr("value",""),$(this).siblings("i.add").hide().removeClass("addDisabled"),$(this).siblings("input").addClass("full-width"),$(this).find("input.calculate-amount-hidden").remove()),calculateBalance()}),$(".add-domain-node").on("click",function(){var e=$(this),t=$(this).data("node");displayLoader();var n=e.closest("th"),i=$(n).closest("tr"),a=($(i).closest("table"),$(n).index()),s=$(i).index(),o=($.grep($(n).attr("class").split(" "),function(e,t){return 0===e.indexOf("cell-")}).join(),Array()),r=Array(),d=0,l=0;$(".center-div.account-grid table#account-table").each(function(){$(this);var e=$("thead tr",$(this)),t=$("tbody tr",$(this));e.each(function(e,t){var n=$(t).attr("class");$(t).find("th").each(function(t,i){o[d]=e+"@"+t+"@"+n+"@"+$(i).attr("class")+"@"+$(i).html()+"@"+$(i).data("section"),d++})}),t.each(function(e,t){var n=$(t).attr("class"),i=$(t).find("input:checkbox[name=chkDebit]:checked").length;$(t).find("td").each(function(t,a){r[l]=e+"@"+t+"@"+n+"@"+$(a).attr("class")+"@"+$(a).html()+"@"+i,l++})})}),"Seller-Buyer"==t?$.post(domainUrl+"accounts/addSellerBuyer",{datathead:o,datatbody:r,myCol:a,myRow:s},accountResponseAddSeller,"HTML"):$.post(domainUrl+"accounts/addSeller",{datathead:o,datatbody:r,myCol:a,myRow:s,nodeType:t},accountResponseAddSeller,"HTML")}),$(".add-node").on("click",function(){var e=$(this),t=$(this).data("node");displayLoader();var n=e.closest("th"),i=$(n).closest("tr"),a=($(i).closest("table"),$(n).index()),s=$(i).index(),o=($.grep($(n).attr("class").split(" "),function(e,t){return 0===e.indexOf("cell-")}).join(),Array()),r=Array(),d=0,l=0;$(".center-div.account-grid table#account-table").each(function(){$(this);var e=$("thead tr",$(this)),t=$("tbody tr",$(this));e.each(function(e,t){var n=$(t).attr("class");$(t).find("th").each(function(t,i){o[d]=e+"@"+t+"@"+n+"@"+$(i).attr("class")+"@"+$(i).html()+"@"+$(i).data("section"),d++})}),t.each(function(e,t){var n=$(t).attr("class"),i=$(t).find("input:checkbox[name=chkDebit]:checked").length;$(t).find("td").each(function(t,a){r[l]=e+"@"+t+"@"+n+"@"+$(a).attr("class")+"@"+$(a).html()+"@"+i,l++})})}),$.post(domainUrl+"accounts/addNode",{datathead:o,datatbody:r,myCol:a,myRow:s,nodeType:t},accountResponseAddSeller,"HTML")}),$(".center-div.account-grid").find("#account-table").find("tr").last().children("td").addClass("border-bottom"),addCellClass(),$(".center-div.account-grid").find("#account-table").find("tr").each(function(){$(this).children("td").last().addClass("border-right"),$(this).children("th").last().addClass("border-right"),$(this).children("td:nth-child(2)").addClass("border-left"),$(this).children("th:nth-child(2)").addClass("border-left")});var t=$("#center-screen").width(),n=$("#center-screen").height();$(".center-div.account-grid").find(".fTHLC-inner-wrapper").css({width:t-200,height:n-167}),$(".center-div.account-grid").find(".fTHLC-outer-wrapper").css({width:t-200,height:n}),setAccountCellClass(),$("body").off("click",".center-div .col-highlight"),$("body").on("click",".center-div .col-highlight",function(e){hideDrodownMenu(),$(".row-selected").removeClass("row-selected");var t=$(this).parent("th").index(),n=($(".cell-"+t),$("td.cell-"+t)),i=$(".row-4").children("th.cell-"+t);$(this).parent().hasClass("select-byparent")?($("td,th").removeClass("bg-green border-left-green border-bottom-green border-top-green"),$("td,th").find(".node-white-circle").removeClass("node-green-circle"),$(n).addClass("bg-green border-left-green"),$(i).addClass("bg-green border-left-green border-top-green"),$(n).next("td").hasClass("HideSection")?($(n).next().next("td").addClass("border-left-green"),$(i).next().next("th").addClass("border-left-green")):($(n).next("td").addClass("border-left-green"),$(i).next("th").addClass("border-left-green")),$("td.border-bottom.cell-"+t).addClass("border-bottom-green"),$(n).find(".node-white-circle").addClass("node-green-circle"),$(this).parent().removeClass("select-byparent")):$(this).parent("th").hasClass("bg-green")?($("td,th").removeClass("bg-green border-left-green border-bottom-green border-top-green"),$("td,th").find(".node-white-circle").removeClass("node-green-circle"),$(n).removeClass("bg-green border-left-green"),$(i).removeClass("bg-green border-left-green border-top-green"),$(n).next("td").hasClass("HideSection")?($(n).next().next("td").removeClass("border-left-green"),$(i).next().next("th").removeClass("border-left-green")):($(n).next("td").removeClass("border-left-green"),$(i).next("th").removeClass("border-left-green")),$(this).children("td.border-bottom.cell-"+t).removeClass("border-bottom-green"),$(n).find(".node-white-circle").removeClass("node-green-circle"),$(i).next("th").removeClass("border-left-green")):($("td,th").removeClass("bg-green border-left-green border-bottom-green border-top-green"),$("td,th").find(".node-white-circle").removeClass("node-green-circle"),$(n).addClass("bg-green border-left-green"),$(i).addClass("bg-green border-left-green border-top-green"),$(n).next("td").hasClass("HideSection")?($(n).next().next("td").addClass("border-left-green"),$(i).next().next("th").addClass("border-left-green")):($(n).next("td").addClass("border-left-green"),$(i).next("th").addClass("border-left-green")),$("td.border-bottom.cell-"+t).addClass("border-bottom-green"),$(n).find(".node-white-circle").addClass("node-green-circle")),e.stopPropagation()}),$("body").on("click",".center-div .account-node",function(e){hideDrodownMenu(),$(".row-selected").removeClass("row-selected"),$("td,th").removeClass("bg-green border-left-green border-bottom-green border-top-green"),$("td,th").find(".node-white-circle").removeClass("node-green-circle");var t=$(this).parent("td").index();$(this).parent("td.cell-"+t).addClass("bg-green border-left-green border-top-green"),$(this).parent("td.cell-"+t).next().hasClass("HideSection")?$(this).parent("td.cell-"+t).next().next("td").addClass("border-left-green"):$(this).parent("td.cell-"+t).next("td").addClass("border-left-green"),$(this).parent("td.cell-"+t).find(".node-white-circle").addClass("node-green-circle"),$(this).parent("td.cell-"+t).parent("tr").next("tr").children("td.cell-"+t).addClass("border-top-green"),e.stopPropagation()}),$(".fiancial-grid").find("table").eq(1).find("tr").eq(1).addClass("row-1").prev("tr").nextAll("tr").each(function(){$("tr").each(function(){$(this).children("th").eq(1).addClass("cell-1")})});var i="suboperationSection",a="false";$(".center-div.account-grid .row-1 th").click(function(e){if(!$(this).find(".dropdown-menu").hasClass("show")){hideDrodownMenu(),$(".row-selected").removeClass("row-selected");var t=0;$(".add-segment ul.dropdown-menu").removeClass("show"),$("i.segment").removeClass("show");var n=$(this).attr("data-section"),s=[];$(".center-div [data-section="+n+"]").each(function(e,t){sectionColIndex=$(t).index(),s.push(sectionColIndex)});var o=s.length,r=s[0],d=s[o-1];$(".center-div [data-section="+n+"]").each(function(e,s){sectionColIndex=$(s).index(),sectionColIndex!=t&&($(s).hasClass("bg-green")?($(".center-div .cell-"+sectionColIndex).removeClass("bg-green border-left-green border-top-green border-bottom-green select-byparent"),$(".center-div .cell-"+sectionColIndex).next().hasClass("HideSection")?$(".center-div .cell-"+sectionColIndex).next().next().removeClass("border-left-green"):$(".center-div .cell-"+sectionColIndex).next().removeClass("border-left-green"),$(".center-div .cell-"+sectionColIndex).find(".node-white-circle").removeClass("node-green-circle")):n!=i?($(".center-div.account-grid td, .center-div.account-grid th").removeClass("bg-green border-left-green border-top-green border-bottom-green select-byparent"),$(".center-div.account-grid td, .center-div.account-grid th").find(".node-white-circle").removeClass("node-green-circle"),sectionColIndex==r?($(".center-div .cell-"+sectionColIndex).addClass("bg-green"),$(".center-div .cell-"+sectionColIndex).slice(2).addClass("select-byparent"),1!=sectionColIndex&&$(".center-div .cell-"+sectionColIndex).addClass("border-left-green"),$(".center-div .cell-"+sectionColIndex).find(".node-white-circle").addClass("node-green-circle")):sectionColIndex==d?($(".center-div .cell-"+sectionColIndex).addClass("bg-green"),$(".center-div .cell-"+sectionColIndex).slice(2).addClass("select-byparent"),$(".center-div .cell-"+sectionColIndex).next().hasClass("HideSection")?$(".center-div .cell-"+sectionColIndex).next().next().addClass("border-left-green"):$(".center-div .cell-"+sectionColIndex).next().addClass("border-left-green"),$(".center-div .cell-"+sectionColIndex).find(".node-white-circle").addClass("node-green-circle")):($(".center-div .cell-"+r).hasClass("HideSection")&&$(".center-div .cell-"+r).next().addClass("border-left-green"),$(".center-div .cell-"+sectionColIndex).addClass("bg-green"),$(".center-div .cell-"+sectionColIndex).slice(2).addClass("select-byparent"),$(".center-div .cell-"+sectionColIndex).find(".node-white-circle").addClass("node-green-circle"))):sectionColIndex==r?($(".center-div.account-grid td, .center-div.account-grid th").removeClass("bg-green border-left-green border-top-green border-bottom-green select-byparent"),$(".center-div.account-grid td, .center-div.account-grid th").find(".node-white-circle").removeClass("node-green-circle"),$(".center-div .cell-"+sectionColIndex).addClass("bg-green"),$(".center-div .cell-"+sectionColIndex).slice(2).addClass("select-byparent"),1!=sectionColIndex&&$(".center-div .cell-"+sectionColIndex).addClass("border-left-green"),$(".center-div .cell-"+sectionColIndex).find(".node-white-circle").addClass("node-green-circle")):sectionColIndex==d?($(".center-div .cell-"+sectionColIndex).addClass("bg-green"),$(".center-div .cell-"+sectionColIndex).slice(2).addClass("select-byparent"),$(".center-div .cell-"+sectionColIndex).next().hasClass("HideSection")?$(".center-div .cell-"+sectionColIndex).next().next().addClass("border-left-green"):$(".center-div .cell-"+sectionColIndex).next().addClass("border-left-green"),$(".center-div .cell-"+sectionColIndex).find(".node-white-circle").addClass("node-green-circle")):($(".center-div .cell-"+r).hasClass("HideSection")&&$(".center-div .cell-"+r).next().addClass("border-left-green"),$(".center-div .cell-"+sectionColIndex).addClass("bg-green"),$(".center-div .cell-"+sectionColIndex).slice(2).addClass("select-byparent"),$(".center-div .cell-"+sectionColIndex).find(".node-white-circle").addClass("node-green-circle"))),t=sectionColIndex,i=n,lastSubSectionName="sub"+n,a=!1})}e.stopPropagation()}),$(".center-div.account-grid .row-2 th").click(function(e){if(!$(this).find(".dropdown-menu").hasClass("show")){hideDrodownMenu(),$(".row-selected").removeClass("row-selected");var t=0;$(".add-segment ul.dropdown-menu").removeClass("show"),$("i.segment").removeClass("show");var n=$(this).attr("data-section"),s=[];$(".center-div [data-section="+n+"]").each(function(e,t){sectionColIndex=$(t).index(),s.push(sectionColIndex)});var o=s.length,r=s[0],d=s[o-1];$(this).hasClass("select-byparent")?$(".center-div [data-section="+n+"]").each(function(e,s){sectionColIndex=$(s).index(),sectionColIndex!=t&&(n!=i?($(".center-div.account-grid td, .center-div.account-grid th").removeClass("bg-green border-left-green border-top-green border-bottom-green select-byparent"),$(".center-div.account-grid td, .center-div.account-grid th").find(".node-white-circle").removeClass("node-green-circle"),sectionColIndex==r?($(".center-div .cell-"+sectionColIndex).slice(2).addClass("bg-green"),$(".center-div .cell-"+sectionColIndex).slice(3).addClass("select-byparent"),$(".center-div .cell-"+sectionColIndex).slice(2).addClass("border-left-green"),$(".center-div .cell-"+sectionColIndex).slice(2).find(".node-white-circle").addClass("node-green-circle")):sectionColIndex==d?($(".center-div .cell-"+sectionColIndex).slice(2).addClass("bg-green"),$(".center-div .cell-"+sectionColIndex).slice(3).addClass("select-byparent"),$(".center-div .cell-"+sectionColIndex).next().hasClass("HideSection")?$(".center-div .cell-"+sectionColIndex).next().next().slice(2).addClass("border-left-green"):$(".center-div .cell-"+sectionColIndex).next().slice(2).addClass("border-left-green"),$(".center-div .cell-"+sectionColIndex).slice(2).find(".node-white-circle").addClass("node-green-circle")):($(".center-div .cell-"+r).hasClass("HideSection")&&$(".center-div .cell-"+r).next().slice(2).addClass("border-left-green"),$(".center-div .cell-"+sectionColIndex).slice(2).addClass("bg-green"),$(".center-div .cell-"+sectionColIndex).slice(3).addClass("select-byparent"),$(".center-div .cell-"+sectionColIndex).slice(2).find(".node-white-circle").addClass("node-green-circle"))):sectionColIndex==r?($(".center-div.account-grid td, .center-div.account-grid th").removeClass("bg-green border-left-green border-top-green border-bottom-green select-byparent"),$(".center-div.account-grid td, .center-div.account-grid th").find(".node-white-circle").removeClass("node-green-circle"),$(".center-div .cell-"+sectionColIndex).slice(2).addClass("bg-green"),$(".center-div .cell-"+sectionColIndex).slice(3).addClass("select-byparent"),$(".center-div .cell-"+sectionColIndex).slice(2).addClass("border-left-green"),$(".center-div .cell-"+sectionColIndex).slice(2).find(".node-white-circle").addClass("node-green-circle")):sectionColIndex==d?($(".center-div .cell-"+sectionColIndex).slice(2).addClass("bg-green"),$(".center-div .cell-"+sectionColIndex).slice(3).addClass("select-byparent"),$(".center-div .cell-"+sectionColIndex).next().hasClass("HideSection")?$(".center-div .cell-"+sectionColIndex).next().next().slice(2).addClass("border-left-green"):$(".center-div .cell-"+sectionColIndex).next().slice(2).addClass("border-left-green"),$(".center-div .cell-"+sectionColIndex).slice(2).find(".node-white-circle").addClass("node-green-circle")):($(".center-div .cell-"+r).hasClass("HideSection")&&$(".center-div .cell-"+r).next().slice(2).addClass("border-left-green"),$(".center-div .cell-"+sectionColIndex).slice(2).addClass("bg-green"),$(".center-div .cell-"+sectionColIndex).slice(3).addClass("select-byparent"),$(".center-div .cell-"+sectionColIndex).slice(2).find(".node-white-circle").addClass("node-green-circle"))),t=sectionColIndex,i=n,lastSubSectionName="sub"+n,a=!1}):$(".center-div [data-section="+n+"]").each(function(e,s){sectionColIndex=$(s).index(),sectionColIndex!=t&&($(s).hasClass("bg-green")?($(".center-div .cell-"+sectionColIndex).removeClass("bg-green border-left-green border-top-green border-bottom-green select-byparent"),$(".center-div .cell-"+sectionColIndex).next().hasClass("HideSection")?$(".center-div .cell-"+sectionColIndex).next().next().slice(2).removeClass("border-left-green"):$(".center-div .cell-"+sectionColIndex).next().slice(2).removeClass("border-left-green"),$(".center-div .cell-"+sectionColIndex).find(".node-white-circle").removeClass("node-green-circle")):n!=i?($(".center-div.account-grid td, .center-div.account-grid th").removeClass("bg-green border-left-green border-top-green border-bottom-green select-byparent"),$(".center-div.account-grid td, .center-div.account-grid th").find(".node-white-circle").removeClass("node-green-circle"),sectionColIndex==r?($(".center-div .cell-"+sectionColIndex).slice(2).addClass("bg-green"),$(".center-div .cell-"+sectionColIndex).slice(3).addClass("select-byparent"),$(".center-div .cell-"+sectionColIndex).slice(2).addClass("border-left-green"),$(".center-div .cell-"+sectionColIndex).slice(2).find(".node-white-circle").addClass("node-green-circle")):sectionColIndex==d?($(".center-div .cell-"+sectionColIndex).slice(2).addClass("bg-green"),$(".center-div .cell-"+sectionColIndex).slice(3).addClass("select-byparent"),$(".center-div .cell-"+sectionColIndex).next().hasClass("HideSection")?$(".center-div .cell-"+sectionColIndex).next().next().slice(2).addClass("border-left-green"):$(".center-div .cell-"+sectionColIndex).next().slice(2).addClass("border-left-green"),$(".center-div .cell-"+sectionColIndex).slice(2).find(".node-white-circle").addClass("node-green-circle")):($(".center-div .cell-"+r).hasClass("HideSection")&&$(".center-div .cell-"+r).next().slice(2).addClass("border-left-green"),$(".center-div .cell-"+sectionColIndex).slice(2).addClass("bg-green"),$(".center-div .cell-"+sectionColIndex).slice(3).addClass("select-byparent"),$(".center-div .cell-"+sectionColIndex).slice(2).find(".node-white-circle").addClass("node-green-circle"))):sectionColIndex==r?($(".center-div.account-grid td, .center-div.account-grid th").removeClass("bg-green border-left-green border-top-green border-bottom-green select-byparent"),$(".center-div.account-grid td, .center-div.account-grid th").find(".node-white-circle").removeClass("node-green-circle"),$(".center-div .cell-"+sectionColIndex).slice(2).addClass("bg-green"),$(".center-div .cell-"+sectionColIndex).slice(3).addClass("select-byparent"),$(".center-div .cell-"+sectionColIndex).slice(2).addClass("border-left-green"),$(".center-div .cell-"+sectionColIndex).slice(2).find(".node-white-circle").addClass("node-green-circle")):sectionColIndex==d?($(".center-div .cell-"+sectionColIndex).slice(2).addClass("bg-green"),$(".center-div .cell-"+sectionColIndex).slice(3).addClass("select-byparent"),$(".center-div .cell-"+sectionColIndex).next().hasClass("HideSection")?$(".center-div .cell-"+sectionColIndex).next().next().slice(2).addClass("border-left-green"):$(".center-div .cell-"+sectionColIndex).next().slice(2).addClass("border-left-green"),$(".center-div .cell-"+sectionColIndex).slice(2).find(".node-white-circle").addClass("node-green-circle")):($(".center-div .cell-"+r).hasClass("HideSection")&&$(".center-div .cell-"+r).next().slice(2).addClass("border-left-green"),$(".center-div .cell-"+sectionColIndex).slice(2).addClass("bg-green"),$(".center-div .cell-"+sectionColIndex).slice(3).addClass("select-byparent"),$(".center-div .cell-"+sectionColIndex).slice(2).find(".node-white-circle").addClass("node-green-circle"))),t=sectionColIndex,i=n,lastSubSectionName="sub"+n,a=!1})}}),$(".center-div.account-grid .row-3 th").click(function(e){hideDrodownMenu(),$(".row-selected").removeClass("row-selected");var t=0;$(".add-segment ul.dropdown-menu").removeClass("show"),$("i.segment").removeClass("show");var n=$(this).attr("data-section"),s=[];$(".center-div [data-section="+n+"]").each(function(e,t){sectionColIndex=$(t).index(),s.push(sectionColIndex)});var o=s.length,r=s[0],d=s[o-1];$(this).hasClass("select-byparent")?$(".center-div [data-section="+n+"]").each(function(e,s){sectionColIndex=$(s).index(),sectionColIndex!=t&&(n!=i?($(".center-div.account-grid td, .center-div.account-grid th").removeClass("bg-green border-left-green border-top-green border-bottom-green select-byparent"),$(".center-div.account-grid td, .center-div.account-grid th").find(".node-white-circle").removeClass("node-green-circle"),sectionColIndex==r?($(".center-div .cell-"+sectionColIndex).slice(3).addClass("bg-green "),$(".center-div .cell-"+sectionColIndex).slice(4).addClass("select-byparent"),$(".center-div .cell-"+sectionColIndex).slice(3).addClass("border-left-green"),$(".center-div .cell-"+sectionColIndex).slice(3).find(".node-white-circle").addClass("node-green-circle")):sectionColIndex==d?($(".center-div .cell-"+sectionColIndex).slice(3).addClass("bg-green "),$(".center-div .cell-"+sectionColIndex).slice(4).addClass("select-byparent"),$(".center-div .cell-"+sectionColIndex).next().hasClass("HideSection")?$(".center-div .cell-"+sectionColIndex).next().next().slice(3).addClass("border-left-green"):$(".center-div .cell-"+sectionColIndex).next().slice(3).addClass("border-left-green"),$(".center-div .cell-"+sectionColIndex).slice(3).find(".node-white-circle").addClass("node-green-circle")):($(".center-div .cell-"+r).hasClass("HideSection")&&$(".center-div .cell-"+r).next().slice(3).addClass("border-left-green"),$(".center-div .cell-"+sectionColIndex).slice(3).addClass("bg-green"),$(".center-div .cell-"+sectionColIndex).slice(4).addClass("select-byparent"),$(".center-div .cell-"+sectionColIndex).slice(3).find(".node-white-circle").addClass("node-green-circle"))):sectionColIndex==r?($(".center-div.account-grid td, .center-div.account-grid th").removeClass("bg-green border-left-green border-top-green border-bottom-green select-byparent"),$(".center-div.account-grid td, .center-div.account-grid th").find(".node-white-circle").removeClass("node-green-circle"),$(".center-div .cell-"+sectionColIndex).slice(3).addClass("bg-green"),$(".center-div .cell-"+sectionColIndex).slice(4).addClass("select-byparent"),$(".center-div .cell-"+sectionColIndex).slice(3).addClass("border-left-green"),$(".center-div .cell-"+sectionColIndex).slice(3).find(".node-white-circle").addClass("node-green-circle")):sectionColIndex==d?($(".center-div .cell-"+sectionColIndex).slice(3).addClass("bg-green"),$(".center-div .cell-"+sectionColIndex).slice(4).addClass("select-byparent"),$(".center-div .cell-"+sectionColIndex).next().hasClass("HideSection")?$(".center-div .cell-"+sectionColIndex).next().next().slice(3).addClass("border-left-green"):$(".center-div .cell-"+sectionColIndex).next().slice(3).addClass("border-left-green"),$(".center-div .cell-"+sectionColIndex).slice(3).find(".node-white-circle").addClass("node-green-circle")):($(".center-div .cell-"+r).hasClass("HideSection")&&$(".center-div .cell-"+r).next().slice(3).addClass("border-left-green"),$(".center-div .cell-"+sectionColIndex).slice(3).addClass("bg-green"),$(".center-div .cell-"+sectionColIndex).slice(4).addClass("select-byparent"),$(".center-div .cell-"+sectionColIndex).slice(3).find(".node-white-circle").addClass("node-green-circle"))),t=sectionColIndex,i=n,lastSubSectionName="sub"+n,a=!1}):$(this).find(".dropdown-menu").hasClass("show")||$(".center-div [data-section="+n+"]").each(function(e,s){sectionColIndex=$(s).index(),sectionColIndex!=t&&($(s).hasClass("bg-green")?($(".center-div .cell-"+sectionColIndex).removeClass("bg-green border-left-green border-top-green border-bottom-green select-byparent"),$(".center-div .cell-"+sectionColIndex).next().hasClass("HideSection")?$(".center-div .cell-"+sectionColIndex).next().next().slice(3).removeClass("border-left-green"):$(".center-div .cell-"+sectionColIndex).next().slice(3).removeClass("border-left-green"),$(".center-div .cell-"+sectionColIndex).find(".node-white-circle").removeClass("node-green-circle")):n!=i?($(".center-div.account-grid td, .center-div.account-grid th").removeClass("bg-green border-left-green border-top-green border-bottom-green select-byparent"),$(".center-div.account-grid td, .center-div.account-grid th").find(".node-white-circle").removeClass("node-green-circle"),sectionColIndex==r?($(".center-div .cell-"+sectionColIndex).slice(3).addClass("bg-green "),$(".center-div .cell-"+sectionColIndex).slice(4).addClass("select-byparent"),$(".center-div .cell-"+sectionColIndex).slice(3).addClass("border-left-green"),$(".center-div .cell-"+sectionColIndex).slice(3).find(".node-white-circle").addClass("node-green-circle")):sectionColIndex==d?($(".center-div .cell-"+sectionColIndex).slice(3).addClass("bg-green "),$(".center-div .cell-"+sectionColIndex).slice(4).addClass("select-byparent"),$(".center-div .cell-"+sectionColIndex).next().hasClass("HideSection")?$(".center-div .cell-"+sectionColIndex).next().next().slice(3).addClass("border-left-green"):$(".center-div .cell-"+sectionColIndex).next().slice(3).addClass("border-left-green"),$(".center-div .cell-"+sectionColIndex).slice(3).find(".node-white-circle").addClass("node-green-circle")):($(".center-div .cell-"+r).hasClass("HideSection")&&$(".center-div .cell-"+r).next().slice(3).addClass("border-left-green"),$(".center-div .cell-"+sectionColIndex).slice(3).addClass("bg-green"),$(".center-div .cell-"+sectionColIndex).slice(4).addClass("select-byparent"),$(".center-div .cell-"+sectionColIndex).slice(3).find(".node-white-circle").addClass("node-green-circle"))):sectionColIndex==r?($(".center-div.account-grid td, .center-div.account-grid th").removeClass("bg-green border-left-green border-top-green border-bottom-green select-byparent"),$(".center-div.account-grid td, .center-div.account-grid th").find(".node-white-circle").removeClass("node-green-circle"),$(".center-div .cell-"+sectionColIndex).slice(3).addClass("bg-green"),$(".center-div .cell-"+sectionColIndex).slice(4).addClass("select-byparent"),$(".center-div .cell-"+sectionColIndex).slice(3).addClass("border-left-green"),$(".center-div .cell-"+sectionColIndex).slice(3).find(".node-white-circle").addClass("node-green-circle")):sectionColIndex==d?($(".center-div .cell-"+sectionColIndex).slice(3).addClass("bg-green"),$(".center-div .cell-"+sectionColIndex).slice(4).addClass("select-byparent"),$(".center-div .cell-"+sectionColIndex).next().hasClass("HideSection")?$(".center-div .cell-"+sectionColIndex).next().next().slice(3).addClass("border-left-green"):$(".center-div .cell-"+sectionColIndex).next().slice(3).addClass("border-left-green"),$(".center-div .cell-"+sectionColIndex).slice(3).find(".node-white-circle").addClass("node-green-circle")):($(".center-div .cell-"+r).hasClass("HideSection")&&$(".center-div .cell-"+r).next().slice(3).addClass("border-left-green"),$(".center-div .cell-"+sectionColIndex).slice(3).addClass("bg-green"),$(".center-div .cell-"+sectionColIndex).slice(4).addClass("select-byparent"),$(".center-div .cell-"+sectionColIndex).slice(3).find(".node-white-circle").addClass("node-green-circle"))),t=sectionColIndex,i=n,lastSubSectionName="sub"+n,a=!1}),e.stopPropagation()}),$("body .center-div  td.cell-1").click(function(e){if(!$(this).find(".dropdown-menu").hasClass("show")){hideDrodownMenu(),$(".add-col-wrap").children("ul").removeClass("show"),$("td,th").removeClass("bg-green border-left-green border-bottom-green border-top-green select-byparent"),$(".cell-0").removeClass("border-top-green"),$("td").removeClass("bg-green border-green border-bottom-green"),$(".node-white-circle.node-green-circle").removeClass("node-green-circle");var t=$(this);$(t).hasClass("row-selected")?($(this).removeClass("row-selected"),$(this).nextAll("td").removeClass("row-selected"),$(this).parent("tr").prev("tr").children("td.border-light-bottom").removeClass("row-green-border"),$(this).parent("tr").next("tr").children("td").removeClass("border-top-green"),$(".cell-0").removeClass("border-top-green"),$(this).parent("tr").next("tr").children("td.col-1").css({"border-top":"0"})):($("td").removeClass("row-selected"),$(".account-head-node .icons.showing").removeClass("showing"),$("td").find(".segment").removeClass("HideSegment"),$(this).find(".icons")&&$(this).find(".account-head-node input").trigger("focus"),$(this).addClass("row-selected"),$("td").parent("tr").prev("tr").children("td.border-light-bottom").removeClass("row-green-border"),$(this).parent("tr").next("tr").children("td").addClass("border-top-green"),$(".cell-0").removeClass("border-top-green"),$("td").parent("tr").next("tr").children("td.col-1").css({"border-top":"0"}),$(this).nextAll("td").addClass("row-selected"),$(this).parent("tr").prev("tr").children("td.border-light-bottom").addClass("row-green-border"),$(this).parent("tr").next("tr").children("td").addClass("border-top-green"),$(".cell-0").removeClass("border-top-green"),$(this).parent("tr").next("tr").children("td.col-1").css({"border-top":"1px solid #349644"}),$(".row-selected").find(".node-white-circle").addClass("node-green-circle"),e.stopPropagation())}}),$(".center-div table th").mouseover(function(e,t){var n=$(this).data("section");$("[data-section="+n+"]").find("i.add").addClass("show")}),$(".center-div table th").mouseout(function(e,t){var n=$(this).data("section");$(this).find(".add-colums ul.dropdown-menu").hasClass("show")?$("[data-section="+n+"]").find("i.add").addClass("show active"):$("[data-section="+n+"]").find("i.add").removeClass("show")}),$(".center-div table td, .center-div table th").mouseover(function(e,t){$(this).find("i.segment").addClass("show")}),$(".center-div table td, .center-div table th").mouseout(function(e,t){$(this).find(".add-segment ul.dropdown-menu").hasClass("show")?$(this).find("i.segment").addClass("show"):$(this).find("i.segment").removeClass("show")}),$(".fTHLC-inner-wrapper").scroll(function(){hideDrodownMenu()}),$(".center-div #account-table .segment").click(function(e){$("td").removeClass("row-selected"),$("td,th").removeClass("bg-green border-left-green border-bottom-green border-top-green"),$("td,th").find(".node-white-circle").removeClass("node-green-circle"),$("td").parent("tr").prev("tr").children("td.border-light-bottom").removeClass("row-green-border"),$("td").parent("tr").next("tr").children("td.col-1").css({"border-top":"0"});var t=$(this).offset().left,n=$(this).offset().top;$(".add-segment .dropdown-menu").css({left:t,top:n+15});var n=$(this).offset().top,i=$(this).offset().left,t=0,a=$(this).closest("td").find(".add-segment ul.dropdown-menu, .add-status ul.dropdown-menu").height();t=i>980?i-145:i,setTop=n>450?n-a-15:n,$(".add-segment ul.dropdown-menu").css({left:t,top:setTop+15}),$("#nodeFlyout").modal("hide"),setTableWidth(),removeSelection(),$(".add-colums").children(".dropdown-menu").removeClass("show"),$(this).closest("td").find(".add-segment ul.dropdown-menu").hasClass("show")?($(this).addClass("active"),$(this).closest("td").find(".add-segment ul.dropdown-menu").removeClass("show")):($(".add-segment ul.dropdown-menu").removeClass("show"),$(this).addClass("active"),$(this).closest("td").find(".add-segment ul.dropdown-menu").addClass("show")),e.stopPropagation()}),$(".center-div #account-table .add").click(function(e){e.preventDefault(),$("td").removeClass("row-selected"),$("td,th").removeClass("bg-green border-left-green border-bottom-green border-top-green"),$("td,th").find(".node-white-circle").removeClass("node-green-circle"),removeSelection();var t=$(this).closest("td, th"),n=$(t).parent("tr"),i=($(n).parent(),$(t).index()),a=$(this).offset().left,s=$(this).offset().top;$(".add-colums").children(".dropdown-menu").css({left:a,top:s+16});$(this).siblings(".add-colums").children("ul").hasClass("show")?($("i.add").removeClass("show show-icon active"),$(".add-colums").children("ul").removeClass("show")):($("i.add").removeClass("show show-icon active"),$(this).find("i.add").addClass("show-icon active"),$(".add-colums").children(".dropdown-menu").removeClass("show"),$(this).siblings(".add-colums").children("ul").addClass("show"),$(this).siblings(".add-segment .dropdown-menu").removeClass("show"),$(".add-colums").children(".show-"+i).find(".delete-series").removeClass("disabled"),$(".add-colums").children(".show-"+i).find(".delete-series a").removeClass("disabled")),$(".add-segment .dropdown-menu").removeClass("show"),e.stopPropagation()}),$(".fiancial-grid .col-head").dblclick(function(e){return e.stopPropagation(),e.preventDefault(),!1}),addborderinSections(),ExpandAcoountCol(),AcountTableWidth(),makeEditableYellow(),$(".center-div .fTHLC-inner-wrapper").niceScroll({cursorcolor:"#000",cursorborder:"0",cursorborderradius:"0",cursorwidth:"2px",background:"rgba(0,0,0,.15)"})}function manageDomainIcon(){$(".row-1 th").each(function(e,t){var n=$(t).data("section");$(".row-1 th[data-section='"+n+"']").find(".fa.fa-plus.add").length>1?($(".row-1 th[data-section='"+n+"']").find("p.col-head").remove(),$(".row-1 th[data-section='"+n+"']").find(".fa.fa-plus.add").not(":last").closest("div.col-head").after('<p class="col-head"></p>').hide(),$(".row-1 th[data-section='"+n+"']").find(".fa.fa-plus.add").last().closest("div.col-head:hidden").show()):($(".row-1 th[data-section='"+n+"']").find(".fa.fa-plus.add").last().closest("div.col-head:hidden").show(),$(".row-1 th[data-section='"+n+"']").find("p.col-head").remove())})}function hideDrodownMenu(){$("body .add-colums ul.dropdown-menu").removeClass("show"),$("body .add-segment ul.dropdown-menu").removeClass("show"),$("body i.add").removeClass("show"),$("body i.segment").removeClass("show")}function addCellClass(){$(".center-div table#account-table").each(function(){var e=0;$(this).find("tr").each(function(){$(".center-div tr").removeClass("row-"+e),$(this).addClass("row-"+e),$(this).find(".left-col").text(e),e++})})}function removeRowClass(){$(".center-div table#account-table").each(function(){var e=0;$(this).find("tr").each(function(){$(".center-div tr").removeClass("row-"+e),e++})})}function AcountTableWidth(){var e=$(".center-div #account-table tbody").height()/2.5;$(".center-div tbody td.acntSecCol, .account-plus").hover(function(t){var n=$(this).index();$(".center-div td.cell-"+n).addClass("grayAccountBG"),$(".center-div td.cell-"+n).hasClass("grayAccountBG")&&($(".center-div .grayAccountBG").first().append('<i class="account-plus"></i>'),$(".center-div i.account-plus").css("top",e))},function(){$(".center-div td").removeClass("grayAccountBG"),$(".center-div i.account-plus").remove()});var t=0,n=0;$(".center-div #account-table tr.row-4").find("th").each(function(e,i){$(this).hasClass("HideSection")||(n++,e>2&&(t+=parseInt($(i).outerWidth())))}),1==InitallySetWidth?($(".chrome .center-div.account-grid #account-table").css("width",t-n),$(".firefox .center-div.account-grid #account-table").css("width",t-3)):($(".chrome .center-div.account-grid #account-table").css("width",t-n),$(".firefox .center-div.account-grid #account-table").css("width",t-3),InitallySetWidth=!0),0==$(".center-div .fTHLC-inner-wrapper").scrollLeft()?$(".center-div .fTHLC-inner-wrapper").scrollLeft(2):$(".center-div .fTHLC-inner-wrapper").scrollLeft(0)}function ExpandAcoountCol(){$(".center-div td.acntSecCol").click(function(){if(EnableAddButton(),freezedSection(),$(this).hasClass("balancecol"));else{var e=$(".fTHLC-inner-wrapper").scrollLeft(),t=(e+=5)-10;$(".center-div .fTHLC-inner-wrapper").scrollLeft(e);var n=$(".center-div #account-table").width(),i=$(this).index();$(".center-div .cell-"+i).addClass("HideSection");var a=$(".center-div .cell-"+i).nextUntil(".acntSecCol"),s=$(this).nextUntil(".acntSecCol"),o=0;$(s).each(function(e,t){o+=parseInt($(t).outerWidth());var i=n+o-150;$(".center-div.account-grid table").css("width",i),$(".center-div.account-grid table tr").css("width",i)});var r=$(".center-div thead .cell-"+i).nextUntil(".acntSecCol");$(r).each(function(e,t){var n=$(t).css("top"),i=parseInt(n)+1;$(this).css("top",i)}),$(a).each(function(e,t){$(this).removeClass("HideSection")}),setTopPosition()}$(".center-div .fTHLC-inner-wrapper").scrollLeft(t),removeAccountCellClass(),setAccountCellClass(),$("th,td").removeClass("account-left-group"),addborderinSections(),InitallySetWidth=!1,AcountTableWidth()})}function setAccountCellClass(){$(".center-div table#account-table").each(function(){$(this);var e=$("tbody tr",$(this)),t=$("thead tr",$(this));e.each(function(e,t){var n=0;$(this).find("td").each(function(e,t){$(this).addClass("cell-"+n),n++})}),t.each(function(e,t){var n=0,i=0;$(this).find("th").each(function(e,t){$(this).addClass("cell-"+n),$(t).hasClass("HideSection")||($(t).find(".top-col").text(i),i++),n++})})}),$('[data-section="operationSection"]').addClass("cell-1"),$(".center-div .fTHLC-inner-corner tr:first").addClass("row-0").find("th").eq(1).addClass("cell-1")}function removeAccountCellClass(){$(".center-div table#account-table").each(function(){$(this);var e=$("tbody tr",$(this)),t=$("thead tr",$(this));e.each(function(e,t){$(this).find("td").each(function(e,t){$(".center-div td").removeClass(function(e,t){return(t.match(/\bcell-\S+/g)||[]).join(" ")})})}),t.each(function(e,t){$(this).find("th").each(function(e,t){$(".center-div th").removeClass(function(e,t){return(t.match(/\bcell-\S+/g)||[]).join(" ")})})})})}function accountResponseAddSeller(e){$(".account-grid").html(e),financialGrid(),setTopPosition(),removeAccountCellClass(),setAccountCellClass(),addFeesClassTrTd(),manageDomainIcon(),hideLoader(),InitallySetWidth=!1,AcountTableWidth(),setWidthInitialy(),setTableWidth(),makeEditableYellow()}function addFeesClassTrTd(){$(".center-div table#account-table").find(".account-title.fee-title").each(function(){var e=$(this).text();if(""!=e){var t=$.trim(e).split(" "),n="";$.each(t,function(e){n+=t[e]+"-"}),n=n.substring(0,n.length-1).toLowerCase(),$(this).closest("tr").addClass(n).nextUntil(".row-group").addClass(n)}})}function setTopPosition(){$(".account-grid table tr").eq(0).find("th").css("top",0),$(".account-grid table tr").eq(1).find("th").css("top",23),$(".account-grid table tr").eq(2).find("th").css("top",46),$(".account-grid table tr").eq(3).find("th").css("top",69),$(".account-grid table tr").eq(4).find("th").css("top",92),$(".fTHLC-outer-corner table tr").eq(0).find("th").css("top",0),$(".fTHLC-outer-corner table tr").eq(1).find("th").css("top",23),$(".fTHLC-outer-corner table tr").eq(2).find("th").css("top",46),$(".fTHLC-outer-corner table tr").eq(3).find("th").css("top",69),$(".fTHLC-outer-corner table tr").eq(4).find("th").css("top",92)}function addborderinSections(){var e=[];$(".center-div .row-2 th").each(function(t,n){var i=$(this).attr("data-section");i!=$(this).next().attr("data-section")&&e.push(i)});$(e).length;for(i=1;i<=8;i++){n=[];$("[data-section="+e[i]+"]").each(function(e,t){n.push($(t).index())});a=n[n.length-1];$(".cell-"+a).next().hasClass("HideSection")?$(".cell-"+a).next().next().addClass("account-left-group"):$(".cell-"+a).next().addClass("account-left-group")}var t=[];$(".center-div .row-2 th").each(function(e,n){var i=$(this).attr("data-section");i!=$(this).next().attr("data-section")&&t.push(i)});$(t).length;for(i=1;i<=8;i++){var n=[];$("[data-section="+t[i]+"]").each(function(e,t){n.push($(t).index())});var a=n[n.length-1];$(".cell-"+a).next().hasClass("HideSection")?$(".cell-"+a).next().next().addClass("account-left-group"):$(".cell-"+a).next().addClass("account-left-group")}}function addfreezedClass(){$(".center-div.account-grid #account-table td").each(function(e,t){$(this).find("input").hasClass("popout")&&!$(this).find("input.popout").hasClass("hide")||($(this).addClass("freezedTd"),$(".center-div.account-grid .cell-0, .center-div.account-grid .cell-1").removeClass("freezedTd"))})}function EnableAddButton(){$(".center-div.account-grid #account-table td").each(function(e,t){$(this).children().hasClass("account-node")&&(1==$(this).find("select").siblings("input").val()?$(this).siblings("i.add").addClass("addDisabled").removeClass("active"):$(this).siblings("i.add").removeClass("addDisabled").addClass("active"))}),$(".center-div.account-grid #account-table .account-node input").on("keyup",function(e){""!=$.trim($(this).val())&&$.isNumeric($(this).val())?$(this).siblings("i.add").removeClass("addDisabled").addClass("active"):$(this).siblings("i.add").addClass("addDisabled").removeClass("active")})}function freezedSection(){$("div.account-node i.add").on("click",function(){$(this).siblings("select").find("option[value="+$(this).val()+"]").attr("selected","selected"),"Percentage"==$(this).siblings("select").val()?($(this).addClass("selected-value"),$(this).closest("tr").prevUntil("tbody").addClass("freeze").find("input.share-debit, input.share-credit, input.distribution-debit, input.distribution-credit, input.total-debit, input.total-credit, input.total-balance, input.final-distribution-debit, input.final-distribution-credit, input.final-distribution-balance, input.final-total-debit, input.final-total-credit, input.final-total-balance").addClass("popout"),$(this).closest("tr").prevUntil("tbody").find("input, select").not(".share-debit, .share-credit, .distribution-debit, .distribution-credit, .total-debit, .total-credit, .total-balance, .final-distribution-debit, .final-distribution-credit, .final-distribution-balance, .final-total-debit, .final-total-credit, .final-total-balance").addClass("freeze"),addfreezedClass()):($(this).removeClass("selected-value"),$(this).siblings(".calculate-amount-hidden").remove(),$(this).closest("tr").prevUntil("tbody").removeClass("freeze").find("input.share-debit, input.share-credit, input.distribution-debit, input.distribution-credit, input.total-debit, input.total-credit, input.total-balance, input.final-distribution-debit, input.final-distribution-credit, input.final-distribution-balance, input.final-total-debit, input.final-total-credit, input.final-total-balance").removeClass("popout"),$(this).closest("tr").prevUntil("tbody").find("input, select").not(".share-debit, .share-credit, .distribution-debit, .distribution-credit, .total-debit, .total-credit, .total-balance, .final-distribution-debit, .final-distribution-credit, .final-distribution-balance, .final-total-debit, .final-total-credit, .final-total-balance").removeClass("freeze"))}),$("td").on("click",function(){$(this).hasClass("freezedTd")||$(".freezedTd").removeClass("freezedTd")})}function tabPositions(){$(".tabber li").each(function(){var e=0;if($(this).removeAttr("style"),void 0!==$(this).closest("ol").closest("li").attr("id")){$(this).attr("parent",$(this).closest("ol").closest("li").attr("id"));var t=$(this).closest("ol").closest("li").attr("position");e=parseInt(t)+1,$(this).attr("position",e)}else $(this).removeAttr("parent"),$(this).attr("position",e);0!==$(this).has("ol li").length?$(this).find(".node-left .node-circle").removeClass("node-white-circle").removeClass("node-white-circle-expanded").addClass("node-white-circle-expanded"):$(this).find(".node-left .node-circle").removeClass("node-white-circle").removeClass("node-white-circle-expanded").addClass("node-white-circle")})}function textareaIncreaseHeight(e){var e=e||"runTab";jQuery.each(jQuery("."+e),function(){var e=this.offsetHeight-this.clientHeight,t=function(t){jQuery(t).css("height",t.scrollHeight+e)};jQuery(this).on("paste",function(){var e=this;jQuery(this).is("textarea")&&setTimeout(function(){t(e)},100)}),jQuery(this).on("keypress",function(){var e=this;jQuery(this).is("textarea")&&t(e)}),jQuery(this).on("keyup",function(e){var n=this,i=e.keyCode?e.keyCode:e.which;8!==i&&46!==i||($(this).height(22),t(n))})})}function calculatePlusIcons(){var e=$(".tabber").find("ol:last").parents("ol:not(.tabber)").length;for(e=parseInt(e)-1,$(".addplus").children().not(".number_print").remove(),i=0;i<=e;i++)$(".addplus").append("<span><i class='fa fa-plus'></i></span>")}function sendClassJson(){classBuilder=[],$(".first_prop_hard li").each(function(){var e=$(this).attr("id"),t=$(this).find(".runTab").val(),n=$(this).find(".hidden-node-x").val(),i=$(this).find(".hidden-node-y").val(),a=$(this).find(".hidden-node-y-instance-property-node-id").val(),s=$(this).attr("parent");void 0==s&&(s="none"),classBuilder.push({id:e,text:t,nodex:n,nodey:i,instance:a,parent:s})})}function rightMenuDropDown(){var e=$("#right_aContextMenubar");$("body").on("contextmenu","#pui_calendar div",function(t){return e.css({display:"block",left:t.pageX,top:t.pageY}),!1}),$("body").on("update",".set-height-tab",function(){$("#right_aContextMenubar").hide()}),e.on("click","a",function(){$("#right_aContextMenubar").hide()}),$("body").click(function(){$("#right_aContextMenubar").hide()})}function setDynamicallyEvents(){var e=$(".display-wrapper").outerWidth()+60;$("#NewEventFlyout.rightFlyout").css({width:e+"px","margin-right":"-"+e+"px"});$("#NewEventFlyout .event-form-section").height();var t=$(window).height()-$("header").outerHeight()-44-51;$(".course-inner-wrap").css("height",t)}function numberDateCalculation(e,t){var n=new Date(e);n.setDate(n.getDate()+t);var i=n.getDate();return n.getMonth()+1+"/"+i+"/"+n.getFullYear()}function parseDate(e){var t=e.split("/");return new Date(t[2],t[0]-1,t[1])}function daydiff(e,t){return Math.round((t-e)/864e5)}function checkCalendarSelectedDates(){$("#pui_calendar div").each(function(e,t){if(""!=firstElementDate){var n=$(this).attr("data-date"),i=$(this).attr("data-month")-1,a=$(this).attr("data-year"),s=new Date(a,i,n);s>=firstElementDate&&s<=lastElementDate&&$(this).addClass("selected")}})}function calculateSpecificTimeEndDate(e){var t=parseInt($(".specific-hour").val());isNaN(t)&&(t=0);var n=$(".specific-startdate").val()+" "+$(".specific-starttime").val(),i=moment(n).add(t,"hours").format("MM/DD/YYYY h:mm A"),a=i.substr(0,i.indexOf(" ")),s=i.substr(i.indexOf(" ")+1),o=s.substr(0,s.indexOf(":")),r=s.substr(s.indexOf(":")+1);o.length<2&&(s="0"+o+":"+r),$(".specific-enddate").datepicker("option","minDate",$(".specific-startdate").val()),$(".specific-enddate").datepicker().datepicker("setDate",a),$(".specific-endtime").val(s),1==e&&($(".newevent-startdate").datepicker("option","minDate","0"),$(".newevent-startdate").datepicker("setDate",$(".specific-startdate").val()),t<24?($(".newevent-enddate").datepicker("option","minDate",$(".newevent-startdate").val()),$(".newevent-enddate").datepicker("setDate",$(".specific-enddate").val()),setDays(!1)):($(".daysNumber").val(parseInt(t/24)),calculateAllDayEndDate(!1)))}function setHours(e){var t=$(".specific-startdate").val()+" "+$(".specific-starttime").val(),n=$(".specific-enddate").val()+" "+$(".specific-endtime").val(),i=moment(n,"MM/DD/YYYY h:mm A").diff(moment(t,"MM/DD/YYYY h:mm A")),a=moment.duration(i),s=Math.floor(a.asHours());if($(".specific-hour").val(s),1==e){var o=parseInt($(".specific-hour").val());isNaN(o)&&(o=0),$(".newevent-startdate").datepicker("option","minDate","0"),$(".newevent-startdate").datepicker("setDate",$(".specific-startdate").val()),o<24?($(".newevent-enddate").datepicker("option","minDate",$(".newevent-startdate").val()),$(".newevent-enddate").datepicker("setDate",$(".specific-enddate").val()),setDays(!1)):($(".daysNumber").val(parseInt(o/24)),calculateAllDayEndDate(!1))}}function calculateAllDayEndDate(e){var t=parseInt($(".daysNumber").val());isNaN(t)&&(t=1);var n=numberDateCalculation($(".newevent-startdate").val(),t-1);$(".newevent-enddate").datepicker("option","minDate",$(".newevent-startdate").val()),$(".newevent-enddate").datepicker("setDate",n),firstElementDate=new Date($(".newevent-startdate").val()),lastElementDate=new Date($(".newevent-enddate").val()),$("#pui_calendar div").removeClass("selected"),checkCalendarSelectedDates(),1==e&&($(".specific-startdate").datepicker().datepicker("setDate",$(".newevent-startdate").val()),$(".specific-starttime").val("12:00 AM"),$(".specific-hour").val(24*t),calculateSpecificTimeEndDate(!1))}function setDays(e){var t=daydiff(parseDate($(".newevent-startdate").val()),parseDate($(".newevent-enddate").val()));if($(".daysNumber").val(t+1),firstElementDate=new Date($(".newevent-startdate").val()),lastElementDate=new Date($(".newevent-enddate").val()),$("#pui_calendar div").removeClass("selected"),checkCalendarSelectedDates(),1==e){var n=numberDateCalculation($(".newevent-enddate").val(),1);$(".specific-enddate").datepicker().datepicker("setDate",n),$(".specific-endtime").val("12:00 AM"),setHours(!1)}}function updateMessage(e){$(".ref-min-center-dialogue .rename-title-mini .dialog-tilte-node-id").removeClass("hide"),$(".ref-min-center-dialogue .rename-title-mini .title-icon").removeClass("hide"),$(".ref-min-center-dialogue .rename-title-mini .rename-edit-cover-box").removeClass("hide"),$(".default-view-tab").find(".angle-collapse-up").removeClass("hide"),$(".collapsed_dialogue.new_view_wrapper").hide(),$(".ref_add_right_tab .ref_top_head_box").hide(),$(".rename-title-mini").removeClass("hide"),$(".edit-rename-title-mini").addClass("hide"),$(".mini_arrow_up.angle-collapse-up").removeClass("abc"),$(".new_untitled_wrap .course-new-drop").find(".course_req").addClass("hide"),$(".ref_add_right_tab .course-new-drop .course_info").removeClass("required_border"),$(".message").val(""),$(e).removeClass("notification-color");var t=$(e).attr("id");t!=$("#chatWindows .chat_wrapper.active").data("id")||($("[data-id="+t+"]").addClass("active"),$("[data-id="+t+"]").css("display","block"),$(".chat_wrapper:not(.active)").css("display","none")),$("#chatWindows").css("display","block"),getStatement(t),changeDialogueTitle($(e)),$(".chat_wrapper.active .chatters").text(),$(".chat_wrapper.active .chatters").attr("data-chatter",t),$(e).parent().css("font-weight","normal"),$(".ref_top_head_box").css("display","none"),$(".ref_top_chat_box .nano .nano-pane").css("display","block");$(".chat_wrapper.active .message_box")}function openChatWebsocket(){var e=socketUrl;websocket=new WebSocket(e),websocket.onopen=function(e){$(".loginWindow").css("display","none"),$(".mainContainer .user_box").css("display","block");var t={username:setUsername,userid:setUserID};websocket.send(JSON.stringify(t))},websocket.onmessage=function(e){var t=JSON.parse(e.data),n=t.type,i=t.message,a=t.name,s=t.username,o=t.userid,r=t.sender_full_name,d=t.attachment,l=(t.time,t.messageTo),c=t.timestamp_seconds,h=t.date_time,u=t.action,p=t.attachmentName,f=t.fileTempName,v=t.fileSizeByte,m=t.user_node,g=t.course_id,b=t.node_instance_propertyid,C=t.random_id;if("group"==n&&"Statement"!=d){var w=i.split(".");if("docx"==w[1]||"doc"==w[1])x="doc.png";else if("zip"==w[1])x="zip.png";else if("pdf"==w[1])x="pdf.png";else if("xlsx"==w[1])x="xls.png";else if("csv"==w[1])x="csv.png";else if("exe"==w[1])x="exe.png";else if("psd"==w[1])x="psd.png";else if("txt"==w[1])x="notepad.png";else var x="default.png"}if("image"==d&&"updatePropertyId"!=u&&(i="<a href='"+domainUrlApi+"attachments/"+l+"/"+i+"' target='_blank' class='anchor-box "+f+"'><img src='"+domainUrlApi+"attachments/"+l+"/thumbs/"+i+"' class='atch-img-border'/><span class='img-overlay-wrap'></span></a>"),"attachment"==d&&"updatePropertyId"!=u&&(i="<a href='"+domainUrlApi+"attachments/"+l+"/"+i+"' target='_blank' class='downloadFile truncate-attachments atch-img-border  "+f+"'><img src='"+domainUrlApi+"img/icons/"+x+"' />"+p+"<span class='fileSized'>"+v+"</span></a>"),"group"==n){var y=(m+=",").split(",");if(-1!=$.inArray(setUserID,y)){if(a==setUserID)_=setUsername;else var _=r;if(void 0==$("[data-id="+l+"]").attr("data-id"))if("addActor"==u||"removeActor"==u||"updateDialogTitle"==u){k="true";getAllCourse(setUserID,k,l,a,h,i,c,_,u),$("ul#dialog-container").find("[id="+l+"]").addClass("notification-color")}else{"deleteMessage"!=u&&($("[data-id="+g+"]").closest(".panel").prependTo("#accordion"),$("[data-id="+g+"]").addClass("notification-color")),$("ul#dialog-container").find("[id="+l+"] .notif_count_box").removeClass("hide");var T=parseInt($("ul#dialog-container").find("[id="+l+"] .notification-count").text());$("ul#dialog-container").find("[id="+l+"] .notification-count").text(T+parseInt(1))}else if("addActor"==u||"removeActor"==u||"updateDialogTitle"==u){var k="true";getAllCourse(setUserID,k,l,a,h,i,c,_,u)}else if("deleteMessage"==u||"editMessage"==u){if(b&&"editMessage"==u)$("#add-text").removeClass("edited-statement"),$("#add-text").data("id",""),$(".desc_drop."+b).text(i),$(".desc_drop."+b).addClass("edited-icon");else if("deleteMessage"==u){var S='<p class="rmv-disabled clearfix" data-instance_id ="'+i+'">This message has been removed.</p>';$("."+i).replaceWith(S)}}else if("updatePropertyId"==u)if(console.log(d),"attachment"==d||"image"==d){var I=i.split("~");$("."+C).data("instance_id",I[0]),$("."+C).addClass(I[0])}else{var N=(I=i.split("~")).length,L=$("."+C).slice(-N),D=0;$(L).each(function(e){$(this).data("instance_id",I[D]),$(this).addClass(I[D]),D++})}else divStructure(l,a,h,i,c,_,u,d,C);"1"==$(".mini-dialogue-flyout.opened").length&&a!=setUserID&&visibilitychange(),$(".chat_wrapper.active .chatters").attr("data-chatter")==l?$("#"+l).removeClass("newmessage"):$("#"+l).addClass("newmessage"),a!=setUserID&&$(".chat_wrapper.active").attr("data-id")!=l&&(clearTimeout(notificationTimeout),$(".chatNotifications").hide(),$(".chatNotifications").html("<div class='msg'><div class=\"user_name\">"+_+'</div> <div class="user_message">'+i+"</div></div>"),$(".chatNotifications").fadeIn("fast"),notificationTimeout=setTimeout(function(){$(".chatNotifications").fadeOut("fast")},3e3))}}if("system"==n){$(".chat_wrapper.active .message_box .connection_notif").remove(),$(".mini-type-textarea .animate-div").removeClass("manage-opacity"),$(".mini-type-textarea .animate-div").find("#add-text").focus(),$("#user_box").empty();R=[];for(var A in s)s.hasOwnProperty(A)&&0!=A&&o[A]!=setUserID&&-1==R.indexOf(o[A])&&(R.push(o[A]),$("#user_box").append('<div class="online_users" id=\''+o[A]+"'><a href='javascript:void(0)'>"+s[A]+"</a></div>"),void 0!=$("#"+o[A]).attr("id")&&($("[data-chatter="+o[A]+"] .chatters").removeClass("offline"),$("[data-chatter="+o[A]+"] .panel").css("display","block")))}if("offline"==n){$("#user_box").empty();var R=[];for(var A in s)s.hasOwnProperty(A)&&0!=A&&o[A]!=setUserID&&-1==R.indexOf(o[A])&&(R.push(o[A]),$("#user_box").append('<div class="online_users" id=\''+o[A]+"'><a href='javascript:void(0)'>"+s[A]+"</a></div>"));var M=$(".chat_wrapper.active .chatters").attr("data-chatter");void 0==$("#"+M).attr("id")&&($(".chat_wrapper.active .chatters").addClass("offline"),$(".chat_wrapper.active .panel").css("display","none"))}},websocket.onerror=function(e){0==$(".chat_wrapper.active .message_box .connection_notif").length&&($(".chat_wrapper.active .message_box .connection_notif").remove(),$(".chat_wrapper.active .message_box").append('<div class="connection_notif error-message-alert"><span class="connect_wrap try_notif"><i class="icon connection_error"></i><span class="notif_title">Trying to Reconnect...</span></span></div>'),$(".mini-type-textarea .animate-div").addClass("manage-opacity"),$(".mini-type-textarea .animate-div.manage-opacity").find("#add-text").blur())},websocket.onclose=function(e){0==$(".chat_wrapper.active .message_box .connection_notif").length&&($(".chat_wrapper.active .message_box .connection_notif").remove(),$(".chat_wrapper.active .message_box").append('<div class="connection_notif error-message-alert"><span class="connect_wrap try_notif"><i class="icon connection_error"></i><span class="notif_title">Trying to Reconnect...</span></span></div>'),$(".mini-type-textarea .animate-div").addClass("manage-opacity"),$(".mini-type-textarea .animate-div.manage-opacity").find("#add-text").blur()),openChatWebsocket()}}function getTime(){var e=new Date;return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()}function getDayVal(){var e=new Date,t=e.getDay(),n=new Array(t);return n[0]="Sun",n[1]="Mon",n[2]="Tue",n[3]="Wed",n[4]="Thu",n[5]="Fri",n[6]="Sat",day=n[e.getDay()]}function divStructure(e,t,n,i,a,s,o,r,d){objChatfn=!1;var l=ConvertToLocalTime(a),c=(getDayVal(),n.split("")),h=$("[data-id="+e+"] .message_box .statement-detail:last");if("image"==r)u="atch-overlay-img common-class "+d;else if("attachment"==r)u="atch-overlay common-class "+d;else var u="desc_drop "+d;if("addActor"==o){var p=i.split(", ");2==p.length?i="<b>"+ucwords(s)+"</b> added <b>"+ucwords(p[1])+"</b>":p.length>2&&(i=i.replace(/, +$/,""),i="<b>"+ucwords(s)+"</b> added <b>"+ucwords(i)+"</b>");v='<li class = "statement-detail bold-msg-title-head" data-id="'+t+'" data-time="'+n+'"><span class="dialogue-title msg-normal-weight">'+i+"</span></li>"}else if("removeActor"==o){if("self"==i)i="<b>"+ucwords(s)+"</b> has left";else var i="<b>"+ucwords(s)+"</b> removed <b>"+ucwords(i)+"</b> from this conversation.";v='<li class = "statement-detail bold-msg-title-head" data-id="'+t+'" data-time="'+n+'"><span class="dialogue-title msg-normal-weight">'+i+"</span></li>"}else if("updateDialogTitle"==o)var f=i,v='<li class = "statement-detail bold-msg-title-head" data-id="'+t+'" data-time="'+n+'"><span class="dialogue-title msg-normal-weight">'+(i="<b>"+ucwords(s)+'</b> renamed the dialogue as <b>"'+f+'"</b>')+"</span></li>";else{var m=(i=(i=i.trim()).replace(/\n+/g,"\n")).split("\n"),g=0,v='<li class = "statement-detail" data-id="'+t+'" data-time="'+n+'"><div class="dialogue-heading-wrap"><div class="dialogue-detail"><div class="dialogue-left-pane"><input type="checkbox"></div><div class="dialogue-right-pane"> <span class="dialogue-title">'+s+'</span><span class="dialogue-date right"><ul><li>'+l+"</li></ul></span>";for(g=0;g<m.length;g++)v+='<p class="'+u+'">'+m[g]+"</p>";v+="</div></div></div></li>"}if($(".chat_wrapper.active .message_box").find(".weekly:last").hasClass("present-day"))if(h.data("id")==t&&h.data("time")==n)if("null"==o)if($("[data-id="+e+"] .message_box .statement-detail:last").hasClass("bold-msg-title-head")){v='<li class = "statement-detail" data-id="'+t+'" data-time="'+n+'"><div class="dialogue-heading-wrap"><div class="dialogue-detail"><div class="dialogue-left-pane"><input type="checkbox"></div><div class="dialogue-right-pane"> <span class="dialogue-title">'+s+'</span><span class="dialogue-date right"><ul><li>'+l+'</li></ul></span><p class="'+u+'">'+i+"</p></div></div></div></li>";$("[data-id="+e+"] .message_box").append(v)}else for(g=0;g<m.length;g++){b='<p class="'+u+'">'+m[g]+"</p>";$("[data-id="+e+"] .message_box .statement-detail:last").find(".dialogue-right-pane").append(b)}else{b=v;$("[data-id="+e+"] .message_box").append(b)}else{b=v;$("[data-id="+e+"] .message_box").append(b)}else{var b='<div class="weekly present-day" id="'+c[0]+'"> <span>Today</span></div>';b+=v,"addActor"==o?1!=p.length&&$("[data-id="+e+"] .message_box").append(b):$("[data-id="+e+"] .message_box").append(b)}$(".online_users.selected").closest(".panel").prependTo("#accordion"),$(".chat_wrapper.active").find(".fileView").html("");var C=$(".chat_wrapper.active").height();$(".ref-min-center-dialogue .nano").nanoScroller({scrollBottom:-C}),$(".tab-role-content .nano").nanoScroller({scroll:"top"}),$("#add-text").focus(),"updateDialogTitle"==o&&$(".mini-overlay-wrapper").addClass("hide"),"null"!=o&&$(".mini-overlay-wrapper").addClass("hide")}function ConvertToLocalTime(e,t){var n=new Date,i=/\b(ACDT|ACST|ACT|ADT|AEDT|AEST|AFT|AKDT|AKST|AMST|AMT|ART|AST|AWDT|AWST|AZOST|AZT|BDT|BIOT|BIT|BOT|BRT|BST|BTT|CAT|CCT|CDT|CEDT|CEST|CET|CHADT|CHAST|CIST|CKT|CLST|CLT|COST|COT|CST|CT|CVT|CXT|CHST|DFT|EAST|EAT|ECT|EDT|EEDT|EEST|EET|EST|FJT|FKST|FKT|GALT|GET|GFT|GILT|GIT|GMT|GST|GYT|HADT|HAEC|HAST|HKT|HMT|HST|ICT|IDT|IRKT|IRST|IST|JST|KRAT|KST|LHST|LINT|MART|MAGT|MDT|MET|MEST|MIT|MSD|MSK|MST|MUT|MYT|NDT|NFT|NPT|NST|NT|NZDT|NZST|OMST|PDT|PETT|PHOT|PKT|PST|RET|SAMT|SAST|SBT|SCT|SGT|SLT|SST|TAHT|THA|UYST|UYT|VET|VLAT|WAT|WEDT|WEST|WET|WST|YAKT|YEKT)\b/gi,a={"UTC+0":"GMT","UTC+1":"CET","UTC+2":"EET","UTC+3":"EEDT","UTC+3.5":"IRST","UTC+4":"MSD","UTC+4.5":"AFT","UTC+5":"PKT","UTC+5.5":"IST","UTC+6":"BST","UTC+6.5":"MST","UTC+7":"THA","UTC+8":"AWST","UTC+9":"AWDT","UTC+9.5":"ACST","UTC+10":"AEST","UTC+10.5":"ACDT","UTC+11":"AEDT","UTC+11.5":"NFT","UTC+12":"NZST","UTC-1":"AZOST","UTC-2":"GST","UTC-3":"BRT","UTC-3.5":"NST","UTC-4":"CLT","UTC-4.5":"VET","UTC-5":"EST","UTC-6":"CST","UTC-7":"MST","UTC-8":"PST","UTC-9":"AKST","UTC-9.5":"MIT","UTC-10":"HST","UTC-11":"SST","UTC-12":"BIT"},s=n.toLocaleString().match(i);if(s)s=s[s.length-1];else{var o=-1*n.getTimezoneOffset()/60;s=a[o="UTC"+(o>=0?"+"+o:o)]}var r=new Date(1e3*e),d=(r.getFullYear(),r.getMonth()),l=(r.getDate(),r.getHours()),c=r.getMinutes(),h=l>=12?"PM":"AM",u=(l=(l%=12)||12)+":"+(c=c<10?"0"+c:c)+" "+h;return d=["Jan","Feb","March","April","May","June","July","Aug","Sep","Oct","Nov","Dec"][d],u}function sendAttachedFile(e){"divEditableCourse"===e?(myDropzoneCourseChat.addFile(fileObj),replaceTextAreaToEditableDiv(".chat-textarea","#chatTextMessage","divEditableCourse")):(myDropzone.addFile(fileObj),replaceTextAreaToEditableDiv("#chatMsgBox","#add-text","divEditableChat"))}function notifyMe(e,t){if("Notification"in window)if("granted"===Notification.permission)new Notification(e);else"denied"!==Notification.permission&&Notification.requestPermission(function(t){if("granted"===t)new Notification(e)});else alert("This browser does not support desktop notification")}function ConvertToLocalTimeZone(e,t){var n=new Date,i=/\b(ACDT|ACST|ACT|ADT|AEDT|AEST|AFT|AKDT|AKST|AMST|AMT|ART|AST|AWDT|AWST|AZOST|AZT|BDT|BIOT|BIT|BOT|BRT|BST|BTT|CAT|CCT|CDT|CEDT|CEST|CET|CHADT|CHAST|CIST|CKT|CLST|CLT|COST|COT|CST|CT|CVT|CXT|CHST|DFT|EAST|EAT|ECT|EDT|EEDT|EEST|EET|EST|FJT|FKST|FKT|GALT|GET|GFT|GILT|GIT|GMT|GST|GYT|HADT|HAEC|HAST|HKT|HMT|HST|ICT|IDT|IRKT|IRST|IST|JST|KRAT|KST|LHST|LINT|MART|MAGT|MDT|MET|MEST|MIT|MSD|MSK|MST|MUT|MYT|NDT|NFT|NPT|NST|NT|NZDT|NZST|OMST|PDT|PETT|PHOT|PKT|PST|RET|SAMT|SAST|SBT|SCT|SGT|SLT|SST|TAHT|THA|UYST|UYT|VET|VLAT|WAT|WEDT|WEST|WET|WST|YAKT|YEKT)\b/gi,a={"UTC+0":"GMT","UTC+1":"CET","UTC+2":"EET","UTC+3":"EEDT","UTC+3.5":"IRST","UTC+4":"MSD","UTC+4.5":"AFT","UTC+5":"PKT","UTC+5.5":"IST","UTC+6":"BST","UTC+6.5":"MST","UTC+7":"THA","UTC+8":"AWST","UTC+9":"AWDT","UTC+9.5":"ACST","UTC+10":"AEST","UTC+10.5":"ACDT","UTC+11":"AEDT","UTC+11.5":"NFT","UTC+12":"NZST","UTC-1":"AZOST","UTC-2":"GST","UTC-3":"BRT","UTC-3.5":"NST","UTC-4":"CLT","UTC-4.5":"VET","UTC-5":"EST","UTC-6":"CST","UTC-7":"MST","UTC-8":"PST","UTC-9":"AKST","UTC-9.5":"MIT","UTC-10":"HST","UTC-11":"SST","UTC-12":"BIT"},s=n.toLocaleString().match(i);if(s)s=s[s.length-1];else{var o=-1*n.getTimezoneOffset()/60;s=a[o="UTC"+(o>=0?"+"+o:o)]}var r=new Date(1e3*e),d=(r.getFullYear(),r.getMonth()),l=(r.getDate(),r.getHours()),c=r.getMinutes(),h=l>=12?"PM":"AM",u=(l=(l%=12)||12)+":"+(c=c<10?"0"+c:c)+" "+h;d=["Jan","Feb","March","April","May","June","July","Aug","Sep","Oct","Nov","Dec"][d];var p=u;void 0!=t&&(document.getElementById(t).innerHTML=p)}function randomNumberFromRange(e,t){return Math.floor(Math.random()*(t-e+1)+e)}!function(e,t){if("function"==typeof define&&define.amd)define(["exports","module"],t);else if("undefined"!=typeof exports&&"undefined"!=typeof module)t(exports,module);else{var n={exports:{}};t(n.exports,n),e.autosize=n.exports}}(this,function(e,t){"use strict";function n(e){function t(t){var i=e.style.width;e.style.width="0px",e.offsetWidth,e.style.width=i,h=t,l&&(e.style.overflowY=t),n()}function n(){var t=window.pageYOffset,n=document.body.scrollTop,i=e.style.height;e.style.height="auto";var a=e.scrollHeight+c;0!==e.scrollHeight?(e.style.height=a+"px",u=e.clientWidth,document.documentElement.scrollTop=t,document.body.scrollTop=n):e.style.height=i}function i(){var i=e.style.height;if(n(),window.getComputedStyle(e,null).height!==e.style.height?"visible"!==h&&t("visible"):"hidden"!==h&&t("hidden"),i!==e.style.height){var a=document.createEvent("Event");a.initEvent("autosize:resized",!0,!1),e.dispatchEvent(a)}}var a=void 0===arguments[1]?{}:arguments[1],o=a.setOverflowX,r=void 0===o||o,d=a.setOverflowY,l=void 0===d||d;if(e&&e.nodeName&&"TEXTAREA"===e.nodeName&&!s.has(e)){var c=null,h=null,u=e.clientWidth,p=function(){e.clientWidth!==u&&i()},$=function(t){window.removeEventListener("resize",p,!1),e.removeEventListener("input",i,!1),e.removeEventListener("keyup",i,!1),e.removeEventListener("autosize:destroy",$,!1),e.removeEventListener("autosize:update",i,!1),s.delete(e),Object.keys(t).forEach(function(n){e.style[n]=t[n]})}.bind(e,{height:e.style.height,resize:e.style.resize,overflowY:e.style.overflowY,overflowX:e.style.overflowX,wordWrap:e.style.wordWrap});e.addEventListener("autosize:destroy",$,!1),"onpropertychange"in e&&"oninput"in e&&e.addEventListener("keyup",i,!1),window.addEventListener("resize",p,!1),e.addEventListener("input",i,!1),e.addEventListener("autosize:update",i,!1),s.add(e),r&&(e.style.overflowX="hidden",e.style.wordWrap="break-word"),function(){var t=window.getComputedStyle(e,null);h=t.overflowY,"vertical"===t.resize?e.style.resize="none":"both"===t.resize&&(e.style.resize="horizontal"),c="content-box"===t.boxSizing?-(parseFloat(t.paddingTop)+parseFloat(t.paddingBottom)):parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth),isNaN(c)&&(c=0),i()}()}}function i(e){if(e&&e.nodeName&&"TEXTAREA"===e.nodeName){var t=document.createEvent("Event");t.initEvent("autosize:destroy",!0,!1),e.dispatchEvent(t)}}function a(e){if(e&&e.nodeName&&"TEXTAREA"===e.nodeName){var t=document.createEvent("Event");t.initEvent("autosize:update",!0,!1),e.dispatchEvent(t)}}var s="function"==typeof Set?new Set:function(){var e=[];return{has:function(t){return Boolean(e.indexOf(t)>-1)},add:function(t){e.push(t)},delete:function(t){e.splice(e.indexOf(t),1)}}}(),o=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?((o=function(e){return e}).destroy=function(e){return e},o.update=function(e){return e}):((o=function(e,t){return e&&Array.prototype.forEach.call(e.length?e:[e],function(e){return n(e,t)}),e}).destroy=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],i),e},o.update=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],a),e}),t.exports=o}),window.puJsFileLoadCounter++,function(e){function t(){this._disabledInputs=[],this.regional=[],this.regional[""]={show24Hours:!1,separator:":",ampmPrefix:" ",ampmNames:["AM","PM"],spinnerTexts:["Now","Previous field","Next field","Increment","Decrement"]},this._defaults={appendText:"",showSeconds:!1,timeSteps:[1,1,1],initialField:0,noSeparatorEntry:!1,useMouseWheel:!0,defaultTime:null,minTime:null,maxTime:null,spinnerImage:"spinnerDefault.png",spinnerSize:[20,20,8],spinnerBigImage:"",spinnerBigSize:[40,40,16],spinnerIncDecOnly:!1,spinnerRepeat:[500,250],beforeShow:null,beforeSetTime:null},e.extend(this._defaults,this.regional[""])}function n(t,n){return"option"==t&&(0==n.length||1==n.length&&"string"==typeof n[0])||e.inArray(t,i)>-1}e.extend(t.prototype,{markerClassName:"hasTimeEntry",propertyName:"timeEntry",_appendClass:"timeEntry_append",_controlClass:"timeEntry_control",_expandClass:"timeEntry_expand",setDefaults:function(t){return e.extend(this._defaults,t||{}),this},_attachPlugin:function(t,n){var i=e(t);if(!i.hasClass(this.markerClassName)){var s={options:e.extend({},this._defaults,n),input:i,_field:0,_selectedHour:0,_selectedMinute:0,_selectedSecond:0};i.data(this.propertyName,s).addClass(this.markerClassName).bind("focus."+this.propertyName,this._doFocus).bind("blur."+this.propertyName,this._doBlur).bind("click."+this.propertyName,this._doClick).bind("keydown."+this.propertyName,this._doKeyDown).bind("keypress."+this.propertyName,this._doKeyPress).bind("paste."+this.propertyName,function(e){setTimeout(function(){a._parseTime(s)},1)}),this._optionPlugin(t,n)}},_optionPlugin:function(t,n,i){var a=(t=e(t)).data(this.propertyName);if(!n||"string"==typeof n&&null==i){s=n;return(n=(a||{}).options)&&s?n[s]:n}if(t.hasClass(this.markerClassName)){if("string"==typeof(n=n||{})){var s=n;(n={})[s]=i}var o=this._extractTime(a);e.extend(a.options,n),a._field=0,o&&this._setTime(a,new Date(0,0,0,o[0],o[1],o[2])),t.next("span."+this._appendClass).remove(),t.parent().find("span."+this._controlClass).remove(),e.fn.mousewheel&&t.unmousewheel();var r=a.options.spinnerImage?e('<span class="'+this._controlClass+'" style="display: inline-block; background: url(\''+a.options.spinnerImage+"') 0 0 no-repeat; width: "+a.options.spinnerSize[0]+"px; height: "+a.options.spinnerSize[1]+'px;"></span>'):null;t.after(a.options.appendText?'<span class="'+this._appendClass+'">'+a.options.appendText+"</span>":"").after(r||""),a.options.useMouseWheel&&e.fn.mousewheel&&t.mousewheel(this._doMouseWheel),r&&r.mousedown(this._handleSpinner).mouseup(this._endSpinner).mouseover(this._expandSpinner).mouseout(this._endSpinner).mousemove(this._describeSpinner)}},_enablePlugin:function(e){this._enableDisable(e,!1)},_disablePlugin:function(e){this._enableDisable(e,!0)},_enableDisable:function(t,n){var i=e.data(t,this.propertyName);i&&(t.disabled=n,t.nextSibling&&"span"==t.nextSibling.nodeName.toLowerCase()&&a._changeSpinner(i,t.nextSibling,n?5:-1),a._disabledInputs=e.map(a._disabledInputs,function(e){return e==t?null:e}),n&&a._disabledInputs.push(t))},_isDisabledPlugin:function(t){return e.inArray(t,this._disabledInputs)>-1},_destroyPlugin:function(t){(t=e(t)).hasClass(this.markerClassName)&&(t.removeClass(this.markerClassName).removeData(this.propertyName).unbind("."+this.propertyName),e.fn.mousewheel&&t.unmousewheel(),this._disabledInputs=e.map(this._disabledInputs,function(e){return e==t[0]?null:e}),t.siblings("."+this._appendClass+",."+this._controlClass).remove())},_setTimePlugin:function(t,n){var i=e.data(t,this.propertyName);i&&(null===n||""===n?i.input.val(""):this._setTime(i,n?"object"==typeof n?new Date(n.getTime()):n:null))},_getTimePlugin:function(t){var n=e.data(t,this.propertyName),i=n?this._extractTime(n):null;return i?new Date(0,0,0,i[0],i[1],i[2]):null},_getOffsetPlugin:function(t){var n=e.data(t,this.propertyName),i=n?this._extractTime(n):null;return i?1e3*(3600*i[0]+60*i[1]+i[2]):0},_doFocus:function(t){var n=t.nodeName&&"input"==t.nodeName.toLowerCase()?t:this;if(a._lastInput==n||a._isDisabledPlugin(n))a._focussed=!1;else{var i=e.data(n,a.propertyName);a._focussed=!0,a._lastInput=n,a._blurredInput=null,e.extend(i.options,e.isFunction(i.options.beforeShow)?i.options.beforeShow.apply(n,[n]):{}),a._parseTime(i),setTimeout(function(){a._showField(i)},10)}},_doBlur:function(e){a._blurredInput=a._lastInput,a._lastInput=null},_doClick:function(t){var n=t.target,i=e.data(n,a.propertyName);if(!a._focussed){var s=i.options.separator.length+2;if(i._field=0,null!=n.selectionStart)for(l=0;l<=Math.max(1,i._secondField,i._ampmField);l++){c=l!=i._ampmField?l*s+2:i._ampmField*s+i.options.ampmPrefix.length+i.options.ampmNames[0].length;if(i._field=l,n.selectionStart<c)break}else if(n.createTextRange)for(var o=e(t.srcElement),r=n.createTextRange(),d=t.clientX+document.documentElement.scrollLeft-(o.offset().left+parseInt(function(e){return{thin:2,medium:4,thick:6}[e]||e}(o.css("border-left-width")),10))-r.offsetLeft,l=0;l<=Math.max(1,i._secondField,i._ampmField);l++){var c=l!=i._ampmField?l*s+2:i._ampmField*s+i.options.ampmPrefix.length+i.options.ampmNames[0].length;if(r.collapse(),r.moveEnd("character",c),i._field=l,d<r.boundingWidth)break}}a._showField(i),a._focussed=!1},_doKeyDown:function(t){if(t.keyCode>=48)return!0;var n=e.data(t.target,a.propertyName);switch(t.keyCode){case 9:return t.shiftKey?a._changeField(n,-1,!0):a._changeField(n,1,!0);case 35:t.ctrlKey?a._setValue(n,""):(n._field=Math.max(1,n._secondField,n._ampmField),a._adjustField(n,0));break;case 36:t.ctrlKey?a._setTime(n):(n._field=0,a._adjustField(n,0));break;case 37:a._changeField(n,-1,!1);break;case 38:a._adjustField(n,1);break;case 39:a._changeField(n,1,!1);break;case 40:a._adjustField(n,-1);break;case 46:a._setValue(n,"");break;default:return!0}return!1},_doKeyPress:function(t){var n=String.fromCharCode(void 0==t.charCode?t.keyCode:t.charCode);if(n<" ")return!0;var i=e.data(t.target,a.propertyName);return a._handleKeyPress(i,n),!1},_doMouseWheel:function(t,n){if(!a._isDisabledPlugin(t.target)){var i=e.data(t.target,a.propertyName);i.input.focus(),i.input.val()||a._parseTime(i),a._adjustField(i,n),t.preventDefault()}},_expandSpinner:function(t){var n=a._getSpinnerTarget(t),i=e.data(a._getInput(n),a.propertyName);if(!a._isDisabledPlugin(i.input[0])&&i.options.spinnerBigImage){i._expanded=!0;var s=e(n).offset(),o=null;e(n).parents().each(function(){var t=e(this);return"relative"!=t.css("position")&&"absolute"!=t.css("position")||(o=t.offset()),!o}),e('<div class="'+a._expandClass+'" style="position: absolute; left: '+(s.left-(i.options.spinnerBigSize[0]-i.options.spinnerSize[0])/2-(o?o.left:0))+"px; top: "+(s.top-(i.options.spinnerBigSize[1]-i.options.spinnerSize[1])/2-(o?o.top:0))+"px; width: "+i.options.spinnerBigSize[0]+"px; height: "+i.options.spinnerBigSize[1]+"px; background: transparent url("+i.options.spinnerBigImage+') no-repeat 0px 0px; z-index: 10;"></div>').mousedown(a._handleSpinner).mouseup(a._endSpinner).mouseout(a._endExpand).mousemove(a._describeSpinner).insertAfter(n)}},_getInput:function(t){return e(t).siblings("."+a.markerClassName)[0]},_describeSpinner:function(t){var n=a._getSpinnerTarget(t),i=e.data(a._getInput(n),a.propertyName);n.title=i.options.spinnerTexts[a._getSpinnerRegion(i,t)]},_handleSpinner:function(t){var n=a._getSpinnerTarget(t),i=a._getInput(n);if(!a._isDisabledPlugin(i)){i==a._blurredInput&&(a._lastInput=i,a._blurredInput=null);var s=e.data(i,a.propertyName);a._doFocus(i);var o=a._getSpinnerRegion(s,t);a._changeSpinner(s,n,o),a._actionSpinner(s,o),a._timer=null,a._handlingSpinner=!0,o>=3&&s.options.spinnerRepeat[0]&&(a._timer=setTimeout(function(){a._repeatSpinner(s,o)},s.options.spinnerRepeat[0]),e(n).one("mouseout",a._releaseSpinner).one("mouseup",a._releaseSpinner))}},_actionSpinner:function(e,t){switch(e.input.val()||a._parseTime(e),t){case 0:this._setTime(e);break;case 1:this._changeField(e,-1,!1);break;case 2:this._changeField(e,1,!1);break;case 3:this._adjustField(e,1);break;case 4:this._adjustField(e,-1)}},_repeatSpinner:function(e,t){a._timer&&(a._lastInput=a._blurredInput,this._actionSpinner(e,t),this._timer=setTimeout(function(){a._repeatSpinner(e,t)},e.options.spinnerRepeat[1]))},_releaseSpinner:function(e){clearTimeout(a._timer),a._timer=null},_endExpand:function(t){a._timer=null;var n=a._getSpinnerTarget(t),i=a._getInput(n),s=e.data(i,a.propertyName);e(n).remove(),s._expanded=!1},_endSpinner:function(t){a._timer=null;var n=a._getSpinnerTarget(t),i=a._getInput(n),s=e.data(i,a.propertyName);a._isDisabledPlugin(i)||a._changeSpinner(s,n,-1),a._handlingSpinner&&(a._lastInput=a._blurredInput),a._lastInput&&a._handlingSpinner&&a._showField(s),a._handlingSpinner=!1},_getSpinnerTarget:function(e){return e.target||e.srcElement},_getSpinnerRegion:function(t,n){var i=this._getSpinnerTarget(n),a=e(i).offset(),s=[document.documentElement.scrollLeft||document.body.scrollLeft,document.documentElement.scrollTop||document.body.scrollTop],o=t.options.spinnerIncDecOnly?99:n.clientX+s[0]-a.left,r=n.clientY+s[1]-a.top,d=t.options[t._expanded?"spinnerBigSize":"spinnerSize"],l=t.options.spinnerIncDecOnly?99:d[0]-1-o,c=d[1]-1-r;if(d[2]>0&&Math.abs(o-l)<=d[2]&&Math.abs(r-c)<=d[2])return 0;var h=Math.min(o,r,l,c);return h==o?1:h==l?2:h==r?3:4},_changeSpinner:function(t,n,i){e(n).css("background-position","-"+(i+1)*t.options[t._expanded?"spinnerBigSize":"spinnerSize"][0]+"px 0px")},_parseTime:function(e){var t=this._extractTime(e);if(t)e._selectedHour=t[0],e._selectedMinute=t[1],e._selectedSecond=t[2];else{var n=this._constrainTime(e);e._selectedHour=n[0],e._selectedMinute=n[1],e._selectedSecond=e.options.showSeconds?n[2]:0}e._secondField=e.options.showSeconds?2:-1,e._ampmField=e.options.show24Hours?-1:e.options.showSeconds?3:2,e._lastChr="",e._field=Math.max(0,Math.min(Math.max(1,e._secondField,e._ampmField),e.options.initialField)),""!=e.input.val()&&this._showTime(e)},_extractTime:function(e,t){var n=(t=t||e.input.val()).split(e.options.separator);if(""==e.options.separator&&""!=t&&(n[0]=t.substring(0,2),n[1]=t.substring(2,4),n[2]=t.substring(4,6)),n.length>=2){var i=!e.options.show24Hours&&t.indexOf(e.options.ampmNames[0])>-1,a=!e.options.show24Hours&&t.indexOf(e.options.ampmNames[1])>-1,s=parseInt(n[0],10);s=isNaN(s)?0:s,s=((i||a)&&12==s?0:s)+(a?12:0);var o=parseInt(n[1],10);o=isNaN(o)?0:o;var r=n.length>=3?parseInt(n[2],10):0;return r=isNaN(r)||!e.options.showSeconds?0:r,this._constrainTime(e,[s,o,r])}return null},_constrainTime:function(e,t){if(!(null!=t)){var n=this._determineTime(e.options.defaultTime,e)||new Date;t=[n.getHours(),n.getMinutes(),n.getSeconds()]}for(var i=!1,a=0;a<e.options.timeSteps.length;a++)i?t[a]=0:e.options.timeSteps[a]>1&&(t[a]=Math.round(t[a]/e.options.timeSteps[a])*e.options.timeSteps[a],i=!0);return t},_showTime:function(e){var t=this._formatNumber(e.options.show24Hours?e._selectedHour:(e._selectedHour+11)%12+1)+e.options.separator+this._formatNumber(e._selectedMinute)+(e.options.showSeconds?e.options.separator+this._formatNumber(e._selectedSecond):"")+(e.options.show24Hours?"":e.options.ampmPrefix+e.options.ampmNames[e._selectedHour<12?0:1]);this._setValue(e,t),this._showField(e)},_showField:function(e){var t=e.input[0];if(!e.input.is(":hidden")&&a._lastInput==t){var n=e.options.separator.length+2,i=e._field!=e._ampmField?e._field*n:e._ampmField*n-e.options.separator.length+e.options.ampmPrefix.length,s=i+(e._field!=e._ampmField?2:e.options.ampmNames[0].length);if(t.setSelectionRange)t.setSelectionRange(i,s);else if(t.createTextRange){var o=t.createTextRange();o.moveStart("character",i),o.moveEnd("character",s-e.input.val().length),o.select()}t.disabled||t.focus()}},_formatNumber:function(e){return(e<10?"0":"")+e},_setValue:function(e,t){t!=e.input.val()&&e.input.val(t).trigger("change")},_changeField:function(e,t,n){var i=""==e.input.val()||e._field==(-1==t?0:Math.max(1,e._secondField,e._ampmField));return i||(e._field+=t),this._showField(e),e._lastChr="",i&&n},_adjustField:function(e,t){""==e.input.val()&&(t=0),this._setTime(e,new Date(0,0,0,e._selectedHour+(0==e._field?t*e.options.timeSteps[0]:0)+(e._field==e._ampmField?12*t:0),e._selectedMinute+(1==e._field?t*e.options.timeSteps[1]:0),e._selectedSecond+(e._field==e._secondField?t*e.options.timeSteps[2]:0)))},_setTime:function(t,n){n=this._determineTime(n,t);var i=this._constrainTime(t,n?[n.getHours(),n.getMinutes(),n.getSeconds()]:null);n=new Date(0,0,0,i[0],i[1],i[2]);var n=this._normaliseTime(n),a=this._normaliseTime(this._determineTime(t.options.minTime,t)),s=this._normaliseTime(this._determineTime(t.options.maxTime,t));n=a&&n<a?a:s&&n>s?s:n,e.isFunction(t.options.beforeSetTime)&&(n=t.options.beforeSetTime.apply(t.input[0],[this._getTimePlugin(t.input[0]),n,a,s])),t._selectedHour=n.getHours(),t._selectedMinute=n.getMinutes(),t._selectedSecond=n.getSeconds(),this._showTime(t)},_determineTime:function(e,t){return e?"string"==typeof e?function(e){var n=a._extractTime(t,e),i=new Date,s=n?n[0]:i.getHours(),o=n?n[1]:i.getMinutes(),r=n?n[2]:i.getSeconds();if(!n)for(var d=/([+-]?[0-9]+)\s*(s|S|m|M|h|H)?/g,l=d.exec(e);l;){switch(l[2]||"s"){case"s":case"S":r+=parseInt(l[1],10);break;case"m":case"M":o+=parseInt(l[1],10);break;case"h":case"H":s+=parseInt(l[1],10)}l=d.exec(e)}return i=new Date(0,0,10,s,o,r,0),/^!/.test(e)&&(i.getDate()>10?i=new Date(0,0,10,23,59,59):i.getDate()<10&&(i=new Date(0,0,10,0,0,0))),i}(e):"number"==typeof e?function(e){var t=new Date;return t.setTime(t.getTime()+1e3*e),t}(e):e:null},_normaliseTime:function(e){return e?(e.setFullYear(1900),e.setMonth(0),e.setDate(0),e):null},_handleKeyPress:function(e,t){if(t==e.options.separator)this._changeField(e,1,!1);else if(t>="0"&&t<="9"){var n=parseInt(t,10),i=parseInt(e._lastChr+t,10),a=0!=e._field?e._selectedHour:e.options.show24Hours?i<24?i:n:(i>=1&&i<=12?i:n>0?n:e._selectedHour)%12+(e._selectedHour>=12?12:0),s=1!=e._field?e._selectedMinute:i<60?i:n,o=e._field!=e._secondField?e._selectedSecond:i<60?i:n,r=this._constrainTime(e,[a,s,o]);this._setTime(e,new Date(0,0,0,r[0],r[1],r[2])),e.options.noSeparatorEntry&&e._lastChr?this._changeField(e,1,!1):e._lastChr=t}else if(!e.options.show24Hours&&((t=t.toLowerCase())==e.options.ampmNames[0].substring(0,1).toLowerCase()&&e._selectedHour>=12||t==e.options.ampmNames[1].substring(0,1).toLowerCase()&&e._selectedHour<12)){var d=e._field;e._field=e._ampmField,this._adjustField(e,1),e._field=d,this._showField(e)}}});var i=["getOffset","getTime","isDisabled"];e.fn.timeEntry=function(t){var i=Array.prototype.slice.call(arguments,1);return n(t,i)?a["_"+t+"Plugin"].apply(a,[this[0]].concat(i)):this.each(function(){if("string"==typeof t){if(!a["_"+t+"Plugin"])throw"Unknown command: "+t;a["_"+t+"Plugin"].apply(a,[this].concat(i))}else{var n=e.fn.metadata?e(this).metadata():{};a._attachPlugin(this,e.extend({},n,t||{}))}})};var a=e.timeEntry=new t}(jQuery),window.puJsFileLoadCounter++;var testLength=0;$("body").on("click",".dialogue_area_action_icon.expand_icon",function(e){var t=$(".ref-min-center-dialogue").attr("style").match(/height: ([0-9]+)px;/)[1]-$(".right-bar-tab").outerHeight(!0)-2;$(".mini-type-textarea").animate({height:t},500),$(".dialogue_area_action_icon").removeClass("expand_icon").addClass("collapse_icon"),$(".dialogue_area_action_icon.collapse_icon").attr("data-original-title","Collpase")}),$("body").on("click",".dialogue_area_action_icon.collapse_icon",function(e){$(".mini-type-textarea").animate({height:69},500),$(".dialogue_area_action_icon").removeClass("collapse_icon").addClass("expand_icon"),$(".dialogue_area_action_icon.expand_icon").attr("data-original-title","Expand")}),$(document).ready(function(){enterParticipantField(),addparticipants(),AddMorePArticipants(),addActors(),MiniDialogueContextMenu(),miniActiveCollapse(),$(".tab_box .nav-tabs li a[href='#by-course']").click(function(){$(this).closest(".tab_box").siblings(".brdrBtm").find(".logo-title").html("<i class='icon icon_by_course'></i>by course")}),$(".tab_box .nav-tabs li a[href='#by-actors']").click(function(){$(this).closest(".tab_box").siblings(".brdrBtm").find(".logo-title").html("<i class='icon icon_by_actor'></i>by actor")}),$(".by_course_users").click(function(e){if($(".ref-min-center-dialogue .right-bar-tab.default-view-tab").show(),$(".expand-collapse-box").hasClass("append-top")){var t=$(".mini-dialogue-flyout").height()-$(".ref-min-center-dialogue .right-bar-tab").outerHeight();$(".mini-type-textarea").css({height:t,"border-top":"none"})}});var e=$("body");e.on("click",".mini-dialogue-flyout .search-expend-mini .search-anchor-mini",function(e){$(this).toggleClass("openup"),$(".ref-min-center-dialogue .right-bar-tab.default-view-tab").show(),$(this).hasClass("openup")?($(".mini-dialogue-flyout .sb-search").find("input").removeClass("hide"),setTimeout(function(){$(".mini-dialogue-flyout .sb-search").stop().animate({right:"0%"},400),0!=$(".ref_add_new_title_bar").length&&($(".ref_add_new_title_bar").remove(),$(".online_users:first").addClass("active"),$(".online_users:first").trigger("click"),$(".ref_add_right_tab").hide())},400),$(".sb-search-input-text").focus()):($(".mini-dialogue-flyout .sb-search").stop().animate({right:"-104%"},400),setTimeout(function(){$(".mini-dialogue-flyout .sb-search").find("input").addClass("hide"),0==$(".ref_add_new_title_bar").length&&($(".ref_add_new_title_bar").show(),$(".online_users:first").addClass("active"),$(".online_users:first").trigger("click"),$(".ref_add_right_tab").hide())},400),$(".mini-dialogue-flyout .sb-search-input-text").val(""),searchDialogDetail(),MiniDialogueContextMenu()),e.stopPropagation()}),e.on("click",".all-users > li",function(e){$(this).removeClass("stickyLi courseStickyLi"),$("#inline-dialogue-wrap .all-users li").css("padding-top","0px");var t=$(this).find(".chat-user-name").text();$(this).siblings("li").removeClass("active fixedSticky stickyLi courseStickyLi"),$(this).addClass("active"),$(".user-name").html(t),$("#view-courses").hasClass("hide")&&($(".edit-rename-title-mini i").trigger("click"),$("#view-courses").removeClass("hide"),$("#add-courses").addClass("hide")),$(this).hasClass("undefined-col")&&($("#view-courses").addClass("hide"),$("#add-courses").removeClass("hide"))}),e.on("click",".fixedinlineDialogue .all-users li",function(e){e.stopPropagation()}),e.on("click",".choose-node-type",function(e){$(".new_untitled_wrap").find(".course_req").addClass("hide"),$(".new_untitled_wrap .course_info").removeClass("required_border"),$(".add_nw_course_form .user-search").data("id","").val(""),$(".new_untitled_wrap .course-new-drop").find(".course_info").val(""),$(".new_untitled_wrap .course-new-drop").find(".dialogue_info").val("")}),e.on("keypress",".Add-more-actor input",function(e){13==e.which&&$(".add-more-Users").trigger("click"),$(".nano").nanoScroller()})});var liClickedPostion=0;$(".mini-set-height .all-users-mini li").off("click"),$(".mini-set-height .all-users-mini li").click(function(e){var t=0;liClickedPostion=$(this).index();for(var n=0;n<=liClickedPostion;n++)t+=$(".mini-set-height .all-users-mini li").eq(n).height();testLength=t-=60,e.stopPropagation()});var w_popout;$(window).resize(function(){enterParticipantField()});var w_popout;$(window).load(function(){if($(".expended-height").css("background","#fff"),"minidialog"==findUrl()){$(".icon.unlock-window").removeClass("unlock-window").addClass("lock-window"),$(".pop-out").removeClass("pop-out").addClass("pop-in"),$(".windowClose").removeClass("hide"),$(".close-mini-dialogue").addClass("hide"),$(".ref-create-dialogue").click(function(){$(".close-mini-dialogue").removeClass("hide"),$(".windowClose").addClass("hide")}),$(".imranClose, .add-participants-list").click(function(){$(".windowClose").removeClass("hide"),$(".close-mini-dialogue").addClass("hide")});var e=$(".pop-up-window");e.hasClass("pop-in")?e.find("span").text("Dock"):e.find("span").text("Undock")}}),function(e){var t=0,n=function(t,n){this.options=n,this.$elementFilestyle=[],this.$element=e(t)};n.prototype={clear:function(){this.$element.val(""),this.$elementFilestyle.find(":text").val(""),this.$elementFilestyle.find(".badge").remove()},destroy:function(){this.$element.removeAttr("style").removeData("filestyle"),this.$elementFilestyle.remove()},disabled:function(e){if(!0===e)this.options.disabled||(this.$element.attr("disabled","true"),this.$elementFilestyle.find("label").attr("disabled","true"),this.options.disabled=!0);else{if(!1!==e)return this.options.disabled;this.options.disabled&&(this.$element.removeAttr("disabled"),this.$elementFilestyle.find("label").removeAttr("disabled"),this.options.disabled=!1)}},buttonBefore:function(e){if(!0===e)this.options.buttonBefore||(this.options.buttonBefore=!0,this.options.input&&(this.$elementFilestyle.remove(),this.constructor(),this.pushNameFiles()));else{if(!1!==e)return this.options.buttonBefore;this.options.buttonBefore&&(this.options.buttonBefore=!1,this.options.input&&(this.$elementFilestyle.remove(),this.constructor(),this.pushNameFiles()))}},icon:function(e){if(!0===e)this.options.icon||(this.options.icon=!0,this.$elementFilestyle.find("label").prepend(this.htmlIcon()));else{if(!1!==e)return this.options.icon;this.options.icon&&(this.options.icon=!1,this.$elementFilestyle.find(".icon-span-filestyle").remove())}},input:function(e){if(!0===e)this.options.input||(this.options.input=!0,this.options.buttonBefore?this.$elementFilestyle.append(this.htmlInput()):this.$elementFilestyle.prepend(this.htmlInput()),this.$elementFilestyle.find(".badge").remove(),this.pushNameFiles(),this.$elementFilestyle.find(".group-span-filestyle").addClass("input-group-btn"));else{if(!1!==e)return this.options.input;if(this.options.input){this.options.input=!1,this.$elementFilestyle.find(":text").remove();var t=this.pushNameFiles();t.length>0&&this.options.badge&&this.$elementFilestyle.find("label").append(' <span class="badge">'+t.length+"</span>"),this.$elementFilestyle.find(".group-span-filestyle").removeClass("input-group-btn")}}},size:function(e){if(void 0===e)return this.options.size;var t=this.$elementFilestyle.find("label"),n=this.$elementFilestyle.find("input");t.removeClass("btn-lg btn-sm"),n.removeClass("input-lg input-sm"),"nr"!=e&&(t.addClass("btn-"+e),n.addClass("input-"+e))},placeholder:function(e){if(void 0===e)return this.options.placeholder;this.options.placeholder=e,this.$elementFilestyle.find("input").attr("placeholder",e)},buttonText:function(e){if(void 0===e)return this.options.buttonText;this.options.buttonText=e,this.$elementFilestyle.find("label .buttonText").html(this.options.buttonText)},buttonName:function(e){if(void 0===e)return this.options.buttonName;this.options.buttonName=e,this.$elementFilestyle.find("label").attr({class:"btn "+this.options.buttonName})},iconName:function(e){if(void 0===e)return this.options.iconName;this.$elementFilestyle.find(".icon-span-filestyle").attr({class:"icon-span-filestyle "+this.options.iconName})},htmlIcon:function(){return this.options.icon?'<span class="icon-span-filestyle '+this.options.iconName+'"></span> ':""},htmlInput:function(){return this.options.input?'<input type="text" class="form-control '+("nr"==this.options.size?"":"input-"+this.options.size)+'" placeholder="'+this.options.placeholder+'" disabled> ':""},pushNameFiles:function(){var e="",t=[];void 0===this.$element[0].files?t[0]={name:this.$element[0]&&this.$element[0].value}:t=this.$element[0].files;for(var n=0;n<t.length;n++)e+=t[n].name.split("\\").pop()+", ";return""!==e?this.$elementFilestyle.find(":text").val(e.replace(/\, $/g,"")):this.$elementFilestyle.find(":text").val(""),t},constructor:function(){var n=this,i="",a=n.$element.attr("id"),s="";""!==a&&a||(a="filestyle-"+t,n.$element.attr({id:a}),t++),s='<span class="group-span-filestyle '+(n.options.input?"input-group-btn":"")+'"><label for="'+a+'" class="btn '+n.options.buttonName+" "+("nr"==n.options.size?"":"btn-"+n.options.size)+'" '+(n.options.disabled?'disabled="true"':"")+">"+n.htmlIcon()+'<span class="buttonText">'+n.options.buttonText+"</span></label></span>",i=n.options.buttonBefore?s+n.htmlInput():n.htmlInput()+s,n.$elementFilestyle=e('<div class="bootstrap-filestyle input-group">'+i+"</div>"),n.$elementFilestyle.find(".group-span-filestyle").attr("tabindex","0").keypress(function(e){if(13===e.keyCode||32===e.charCode)return n.$elementFilestyle.find("label").click(),!1}),n.$element.css({position:"absolute",clip:"rect(0px 0px 0px 0px)"}).attr("tabindex","-1").after(n.$elementFilestyle),n.options.disabled&&n.$element.attr("disabled","true"),n.$element.change(function(){var e=n.pushNameFiles();0==n.options.input&&n.options.badge?0==n.$elementFilestyle.find(".badge").length?n.$elementFilestyle.find("label").append(' <span class="badge">'+e.length+"</span>"):0==e.length?n.$elementFilestyle.find(".badge").remove():n.$elementFilestyle.find(".badge").html(e.length):n.$elementFilestyle.find(".badge").remove()}),window.navigator.userAgent.search(/firefox/i)>-1&&n.$elementFilestyle.find("label").click(function(){return n.$element.click(),!1})}};var i=e.fn.filestyle;e.fn.filestyle=function(t,i){var a="",s=this.each(function(){if("file"===e(this).attr("type")){var s=e(this),o=s.data("filestyle"),r=e.extend({},e.fn.filestyle.defaults,t,"object"==typeof t&&t);o||(s.data("filestyle",o=new n(this,r)),o.constructor()),"string"==typeof t&&(a=o[t](i))}});return void 0!==typeof a?a:s},e.fn.filestyle.defaults={buttonText:"Choose file",iconName:"glyphicon glyphicon-folder-open",buttonName:"btn-default",size:"nr",input:!0,badge:!0,icon:!0,buttonBefore:!1,disabled:!1,placeholder:""},e.fn.filestyle.noConflict=function(){return e.fn.filestyle=i,this},e(function(){e(".filestyle").each(function(){var t=e(this),n={input:"false"!==t.attr("data-input"),icon:"false"!==t.attr("data-icon"),buttonBefore:"true"===t.attr("data-buttonBefore"),disabled:"true"===t.attr("data-disabled"),size:t.attr("data-size"),buttonText:t.attr("data-buttonText"),buttonName:t.attr("data-buttonName"),iconName:t.attr("data-iconName"),badge:"false"!==t.attr("data-badge"),placeholder:t.attr("data-placeholder")};t.filestyle(n)})})}(window.jQuery),window.puJsFileLoadCounter++;var selectedNodeYId=0,threepaneSecondDivClick=!1;$(document).ready(function(){expandCollapseGroup(),$("body").on("click",".dashSlider.active #third-class-div .table-list-view li .node-left",function(){threepaneSecondDivClick=!0,NProgress.start();var e=$(this).siblings(".nodeClass-Y").find("input").attr("id"),t=$(this).siblings(".nodeClass-Y").find("input").attr("value");void 0==t&&(t=$(this).siblings(".sprite-icon").attr("id")),selectedNodeYId=t;var n=$(this).find(".node-input").attr("data-class"),i=($(this).find(".node-input").attr("data-name"),n.split("_")),a=$(this).find(".node-input").find("span").html();if("Node X"==$("#node-x-li a").html());else;$("#tempAction").val();var s="";if(s="class_caption"==$(".node-selected input").attr("id")?$(".node-selected .hidden-node-x").val():$(".node-selected input").val(),$("#div-node-x-property").hasClass("active")){var o="";$(".property-child .node-content").each(function(e,t){$(this).hasClass("node-selected")&&(o=$(this).find("textarea").val())});var r=0;void 0!=$(".thirdPaneActive .node-input").attr("data-class")&&(r=parseInt($(".thirdPaneActive .node-input").attr("data-class").split("_")[1]));var d=$("#third-class-div [id="+r+"]").prop("checked"),l=!1;if($(".instanceRunTab").each(function(){$(this).val().length>0&&(l=!0)}),1==d)if(e!=r){var c=$(".thirdPaneActive").find(".node-input").attr("data-name");if("TAXONOMY"!=c&&"VERSION"!=c&&"NODE RIGHTS"!=c&&"CLASS"!=c||(o=c),""==o)bootbox.alert("Please enter value for the empty Node Y property.");else{if(void 0==$(".property-child .node-content.node-selected input").attr("nodey-value")){var h=parseInt($("#third-class-div [id="+r+"]").val());$(".property-child .node-content.node-selected input").attr("nodey-value",h),$(".property-child .node-content.node-selected input").attr("value",h)}""==$.trim($("#node_instance_id").val())?$("#instance_action_type").attr("value","save"):$("#instance_action_type").attr("value","edit");var u=!1;$(".checkFillInstanceValue").each(function(){""!=$(this).val()&&(u=!0)}),1==u&&($(".thirdPaneActive i").removeClass("exclamation"),$(".thirdPaneActive i").addClass("circle-tick")),$("#icon165").removeClass("exclamation"),$("#icon165").addClass("circle-tick"),""!=$.trim($("#instance_caption").val())&&$.post(domainUrl+"classes/saveInstanceData",{data:$("#instance_structure_form").serialize()},responseSaveInstanceNodeId,"json"),$.post(domainUrl+"classes/checkInstanceData",{node_class_id:i[1],node_id:s,full_class_id:n,selctedlName:a},responsecheckInstanceData,"json")}}else $.post(domainUrl+"classes/checkInstanceData",{node_class_id:i[1],node_id:s,full_class_id:n,selctedlName:a},responsecheckInstanceData,"json");else $.post(domainUrl+"classes/checkInstanceData",{node_class_id:i[1],node_id:s,full_class_id:n,selctedlName:a},responsecheckInstanceData,"json")}else $.post(domainUrl+"classes/checkInstanceData",{node_class_id:i[1],node_id:s,full_class_id:n,selctedlName:a},responsecheckInstanceData,"json")});var e=[];$("body").on("click",".nodeClass-X input",function(){e=$(".node-content.node-selected input").val().split(",");var t=$(this).attr("id");if(1==$(".nodeClass-X input[id="+t+"]").prop("checked"))e.push(t);else for(var n=0;n<e.length;n++)e[n]===t&&e.splice(n,1);$(".node-content.node-selected input").val(""),$(".node-content.node-selected input").val(e),e=[]}),$("body").on("click",".nodeClass-Y input",function(t){e=[],combineVal=[],combineVal=$(".node-content.node-selected input.hidden-node-x").val().split(","),$.each($(".nodeClass-Y input[name='nodeX[]']:checked"),function(){e.push($(this).val())}),$(".node-content.node-selected input.hidden-node-x").attr("NodeY-Value",e);var n=$(this).attr("value"),i=$(this).attr("id"),a=$(".node-selected input.hidden-node-x").val(),s=$(".node-selected input.hidden-node-x").attr("parent");if($.post(domainUrl+"classes/instanceNodeStructure",{parentid:s,node_id:a,node_class_id:i,class_node_id:n},responseinstanceData,"json"),1==$(".nodeClass-Y input[value="+n+"]").prop("checked"))combineVal.push(n);else for(var o=0;o<combineVal.length;o++)combineVal[o]===n&&combineVal.splice(o,1);$(".node-content.node-selected input.hidden-node-x").val(""),$(".node-content.node-selected input.hidden-node-x").val(combineVal),combineVal=[],t.stopPropagation()}),$("body").on("keyup",".instanceRunTab",function(e){if(!$("#third-class-div .thirdPaneActive input").is(":checked")&&$("#third-class-div .thirdPaneActive input").length){var t=[],n=[];void 0!=$(".node-content.node-selected input").attr("NodeY-Value")&&$(".node-content.node-selected input").attr("NodeY-Value").length>1&&(t=$(".node-content.node-selected input").attr("NodeY-Value").split(",")),void 0!=$(".node-content.node-selected input").attr("value")&&$(".node-content.node-selected input").attr("value").length>1&&(n=$(".node-content.node-selected input").attr("value").split(",")),$("#third-class-div .thirdPaneActive input").prop("checked","checked");var i=$("#third-class-div .thirdPaneActive input").val();t.push(i),n.push(i);var a=$("#third-class-div .thirdPaneActive input").attr("id"),s=$(".node-selected input").val(),o=$(".node-selected input").attr("parent");"N"==$("#is_instance").val()&&$.post(domainUrl+"classes/instanceNodeStructure",{parentid:o,node_id:s,node_class_id:a,class_node_id:i},responseinstanceData,"json"),$("#second-class-div .node-selected .hidden-node-x").attr("NodeY-Value",""),$("#second-class-div .node-selected .hidden-node-x").attr("NodeY-Value",t),$("#second-class-div .node-selected .hidden-node-x").attr("value",""),$("#second-class-div .node-selected .hidden-node-x").attr("value",n)}})}),window.puJsFileLoadCounter++,function(e){e.fn.extend({fixedTblHdrLftCol:function(t){function n(e){var t=S;return t||(t=e.outerWidth(!0)-c(e)),t}function i(e){var t=I;return t||(t=e.outerHeight(!0)-d(e)),t}function a(e){return e.find("thead tr").length}function s(t){for(var n=e([]),i=0;i<a(t);i++){for(var s=e([]),o=0;o<k.scroll.leftCol.fixedSpan;o++)s.push(t.find("thead tr:nth-child("+(i+1)+") th:nth-child("+(o+1)+")"));n.push(s)}return n}function o(t){for(var n=e([]),i=0;i<a(t);i++)n.push(t.find("thead tr:nth-child("+(i+1)+") th:first-child"));return n}function r(e,t){return e.find("thead tr:nth-child("+(t+1)+") th")}function d(t){var n=L;return n||(o(t).each(function(){n+=e(this).outerHeight(!0)}),L=n),n}function l(t){for(var n=e([]),i=0;i<k.scroll.leftCol.fixedSpan;i++)n.push(t.find("tbody tr:first-child td:nth-child("+(i+1)+")"));return n}function c(t){var n=N;return n||(l(t).each(function(){n+=e(this).outerWidth(!0)}),N=n),n}function h(t){var n=0;return t.find("tbody tr:first-child td").each(function(){n+=e(this).outerWidth(!0)}),e("body.firefox .center-div table").is("#account-table")?n:e("body.firefox .center-div table").is("#association-table")?n+15:n+1}function u(t){t.wrap(e(document.createElement("div")).attr("id",k.wrapper.outer.idName).addClass(k.wrapper.outer.className).css("width",n(t)).css("height",i(t)).css("position","relative").css("padding-left",c(t)+"px").css("padding-top",d(t)+"px").css("overflow","hidden"))}function p(t){t.wrap(e(document.createElement("div")).attr("id",k.wrapper.inner.idName).addClass(k.wrapper.inner.className).css("overflow-x",k.scroll.headRow.overflow).css("overflow-y",k.scroll.leftCol.overflow).css("width",n(t)).css("height",i(t)))}function $(e){var t=c(e),n=h(e);e.css("border-collapse","collapse").css("width",n-t+"px")}function f(t){var n=0;o(t).each(function(i){var a=0;r(t,i).each(function(t){var i=e(this).outerWidth(!0),s=e(this).outerHeight(!0);a+=i,0==t&&(n+=s),e(this).addClass(k.scroll.headRow.className).css("position","absolute").css("top",n-s+"px").css("left",a-i+"px")})})}function v(t){var n=c(t),i=h(t);t.find("tbody tr").each(function(){e(this).css("width",i-n+"px")})}function m(t){var n=0;l(t).each(function(i){var a=e(this).outerWidth(!0);n+=a,t.find("tbody tr td:nth-child("+(i+1)+")").addClass(k.scroll.leftCol.className).css("position","absolute").css("left",n-a+"px")})}function g(t){t.find("tbody tr").each(function(){for(var t=0,n=0;n<k.scroll.leftCol.fixedSpan;n++){var i=e(this).find("td:nth-child("+(n+1)+")").height();i>t&&(t=i)}e(this).find("td:nth-child("+(k.scroll.leftCol.fixedSpan+1)+")").height(t),e(this).hide().fadeIn(0)})}function b(t){var n=e("<div></div>").attr("id",k.corner.outer.idName).addClass(k.corner.outer.className).css("position","absolute").css("left","0px").css("top","0px").css("margin","0").css("padding","0").css("width",c(t)+"px").css("height",d(t)+"px"),i=e("<table></table>").attr("id",k.corner.inner.idName).addClass(k.corner.inner.className).css("border-collapse","collapse"),a=e("<thead></thead>");s(t).each(function(){var t=e("<tr></tr>");e(this).each(function(){var n=e(this).clone(k.corner.deepClone);e(this).removeAttr("id"),e(this).unbind(),n.appendTo(t)}),t.appendTo(a)}),a.appendTo(i),i.appendTo(n),n.appendTo(t.parent())}function C(t){var n=[];t.find("tbody tr:first").each(function(){e(this).find("td").each(function(){var t=e(this).position();n.push(t.left)})}),t.find("thead tr").each(function(){e(this).find("th").each(function(t){e(this).css("left",n[t]+"px")})})}function w(e){m(e),v(e),f(e),$(e),u(e),p(e),g(e),k.corner.append&&b(e),C(e)}function x(t){t.find("tbody tr").each(function(){for(var t=0;t<k.scroll.leftCol.fixedSpan;t++)e(this).find("td:nth-child("+(t+1)+")").css("top",e(this).find("td:nth-child("+(k.scroll.leftCol.fixedSpan+1)+")").position().top+"px")})}function y(t){t.find("thead tr").each(function(n){n<a(t)&&e(this).find("th").each(function(n){e(this).css("left",t.find("tbody tr:first-child td:nth-child("+(n+1)+")").position().left+"px")})})}function _(e,t){t.scrollTop(e.scrollTop()),t.scrollLeft(e.scrollLeft())}function T(t){var n=k.scroll.syncWith;e.isArray(n)?e.each(n,function(){_(t,e(this.toString()).parent())}):_(t,e(n).parent())}var k=e.extend(!0,{scroll:{height:null,width:null,headRow:{className:"fTHLC-head-row",enabled:!0,overflow:"auto"},leftCol:{className:"fTHLC-left-col",enabled:!0,overflow:"auto",fixedSpan:1},syncWith:null},wrapper:{outer:{idName:null,className:"fTHLC-outer-wrapper"},inner:{idName:null,className:"fTHLC-inner-wrapper"}},corner:{append:!0,deepClone:!1,outer:{idName:null,className:"fTHLC-outer-corner"},inner:{idName:null,className:"fTHLC-inner-corner"}}},t),S=k.scroll.width,I=k.scroll.height,N=null,L=null;return this.each(function(){if("table"!=e(this)[0].tagName.toLowerCase())return!0;w(e(this)),(k.scroll.leftCol.enabled||k.scroll.headRow.enabled)&&e(this).parent().scroll(function(){k.scroll.headRow.enabled&&y(e(this)),k.scroll.leftCol.enabled&&x(e(this)),k.scroll.syncWith&&T(e(this))})})}})}(jQuery),window.puJsFileLoadCounter++,function(e){e.fn.drag=function(t,n,i){var a="string"==typeof t?t:"",s=e.isFunction(t)?t:e.isFunction(n)?n:null;return 0!==a.indexOf("drag")&&(a="drag"+a),i=(t==s?n:i)||{},s?this.bind(a,i,s):this.trigger(a)};var t=e.event,n=t.special,i=n.drag={defaults:{which:1,distance:0,not:":input",handle:null,relative:!1,drop:!0,click:!1},datakey:"dragdata",noBubble:!0,add:function(t){var n=e.data(this,i.datakey),a=t.data||{};n.related+=1,e.each(i.defaults,function(e,t){void 0!==a[e]&&(n[e]=a[e])})},remove:function(){e.data(this,i.datakey).related-=1},setup:function(){if(!e.data(this,i.datakey)){var n=e.extend({related:0},i.defaults);e.data(this,i.datakey,n),t.add(this,"touchstart mousedown",i.init,n),this.attachEvent&&this.attachEvent("ondragstart",i.dontstart)}},teardown:function(){(e.data(this,i.datakey)||{}).related||(e.removeData(this,i.datakey),t.remove(this,"touchstart mousedown",i.init),i.textselect(!0),this.detachEvent&&this.detachEvent("ondragstart",i.dontstart))},init:function(a){if(!i.touched){var s,o=a.data;if(!(0!=a.which&&o.which>0&&a.which!=o.which)&&!e(a.target).is(o.not)&&(!o.handle||e(a.target).closest(o.handle,a.currentTarget).length)&&(i.touched="touchstart"==a.type?this:null,o.propagates=1,o.mousedown=this,o.interactions=[i.interaction(this,o)],o.target=a.target,o.pageX=a.pageX,o.pageY=a.pageY,o.dragging=null,s=i.hijack(a,"draginit",o),o.propagates))return(s=i.flatten(s))&&s.length&&(o.interactions=[],e.each(s,function(){o.interactions.push(i.interaction(this,o))})),o.propagates=o.interactions.length,!1!==o.drop&&n.drop&&n.drop.handler(a,o),i.textselect(!1),i.touched?t.add(i.touched,"touchmove touchend",i.handler,o):t.add(document,"mousemove mouseup",i.handler,o),!(!i.touched||o.live)&&void 0}},interaction:function(t,n){var a=e(t)[n.relative?"position":"offset"]()||{top:0,left:0};return{drag:t,callback:new i.callback,droppable:[],offset:a}},handler:function(a){var s=a.data;switch(a.type){case!s.dragging&&"touchmove":a.preventDefault();case!s.dragging&&"mousemove":if(Math.pow(a.pageX-s.pageX,2)+Math.pow(a.pageY-s.pageY,2)<Math.pow(s.distance,2))break;a.target=s.target,i.hijack(a,"dragstart",s),s.propagates&&(s.dragging=!0);case"touchmove":a.preventDefault();case"mousemove":if(s.dragging){if(i.hijack(a,"drag",s),s.propagates){!1!==s.drop&&n.drop&&n.drop.handler(a,s);break}a.type="mouseup"}case"touchend":case"mouseup":e("#dragMoveImg").css("display","none");var o=e(".customDrop").prev().attr("id");e("#"+o).addClass("active"),e(".customDrop").remove(),e("li.drag-folder").removeClass("moveNotAllowed parentMoveNotAllowed");default:i.touched?t.remove(i.touched,"touchmove touchend",i.handler):t.remove(document,"mousemove mouseup",i.handler),s.dragging&&(!1!==s.drop&&n.drop&&n.drop.handler(a,s),i.hijack(a,"dragend",s)),i.textselect(!0),!1===s.click&&s.dragging&&e.data(s.mousedown,"suppress.click",(new Date).getTime()+5),s.dragging=i.touched=!1}},hijack:function(n,a,s,o,r){if(s){var d,l,c,h={event:n.originalEvent,type:n.type},u=a.indexOf("drop")?"drag":"drop",p=o||0,$=isNaN(o)?s.interactions.length:o;n.type=a,n.originalEvent=null,s.results=[];do{if(l=s.interactions[p]){if("dragend"!==a&&l.cancelled)continue;if(c=i.properties(n,s,l),l.results=[],e(r||l[u]||s.droppable).each(function(o,r){if(c.target=r,n.isPropagationStopped=function(){return!1},!1===(d=r?t.dispatch.call(r,n,c):null)?("drag"==u&&(l.cancelled=!0,s.propagates-=1),"drop"==a&&(l[u][o]=null)):"dropinit"==a&&l.droppable.push(i.element(d)||r),"dragstart"==a&&(l.proxy=e(i.element(d)||l.drag)[0]),l.results.push(d),delete n.result,"dropinit"!==a)return d}),s.results[p]=i.flatten(l.results),"dropinit"==a&&(l.droppable=i.flatten(l.droppable)),"dragstart"!=a||l.cancelled||c.update(),"dragend"==a)if(n.target.closest("li.drag-folder")){var f=n.target.closest("li.drag-folder").id;if(console.log("destinationId",f),"null"!=f&&""!=f&&f!=selectedFolder_arr){if(console.log("selectedFolder_arr",selectedFolder_arr),"snip_123"==f)var v=e("li#"+selectedFolder_arr[0]).get(0).outerHTML;if(""!=selectedFolder_arr){if(e("#FolderList li").removeClass("active"),e("#"+f).addClass("active"),e(selectedFolder_arr).each(function(t,n){var i=e("#"+n).closest(".nested-list").attr("id");e("#"+n).remove(),e("#"+i+" li").length<1&&(e("#"+i).prev().addClass("noChild").removeClass("hasChild"),e("#"+i).closest("li").children(".left-folder-action").html(""))}),e("#"+f+" .folder-action:first").hasClass("noChild")&&(e("#"+f+" .folder-action").removeClass("noChild").addClass("hasChild"),e("#"+f+" .left-folder-action").append('<i class="fa fa-angle-up"></i>')),"snip_123"==f){e("li#"+ParentPositionId).get(0).outerHTML;e("li#"+ParentPositionId).after(v),e("li#"+selectedFolder_arr).addClass("active move-parent-folder"),DragDropFolder();var p=e("#FolderList").find("li").length,m=[];e("#FolderList").find("li").each(function(){var t={id:e(this).attr("id"),seq:p};e(this).attr("folder-sequence",p),p--,m.push(t)}),NProgress.start(),e.post(domainUrl+"documents/moveFolderPosotion",{move_folder:m,source_id:selectedFolder_arr,destination_id:ParentPositionId},responseMovePositionAction,"JSON")}else NProgress.start(),e.post(domainUrl+"documents/moveFolder",{source_id:selectedFolder_arr,destination_id:f},responseMoveFolderAction,"JSON");selectedFolder_arr=[],FolderListarr=[],e("li.drag-folder").removeClass("multiclicked"),n.stopPropagation()}else{var g=!1;e(FolderListarr).each(function(t,n){e("#"+n+".drag-folder").remove(),"Folder"==e("[data-id="+n+"] td").eq(1).find("span").html()&&(g=!0)}),NProgress.start(),e.post(domainUrl+"documents/moveDocumentInForlder",{source_id:FolderListarr,destination_id:f},responseMoveDocumentAction,"JSON"),1==g&&e("#"+f+" .folder-action:first").hasClass("noChild")&&(e("#"+f+" .left-folder-action").append('<i class="fa fa-angle-up"></i>'),e("#"+f+" .folder-action").addClass("hasChild").removeClass("noChild")),FolderListarr=[],selectedFolder_arr=[]}}}else e("li.drag-folder").removeClass("multiclicked parentMoveNotAllowed active"),e("#"+folderListId).addClass("active multiclicked")}}while(++p<$);return n.type=h.type,n.originalEvent=h.event,i.flatten(s.results)}},properties:function(e,t,n){var a=n.callback;return a.drag=n.drag,a.proxy=n.proxy||n.drag,a.startX=t.pageX,a.startY=t.pageY,a.deltaX=e.pageX-t.pageX,a.deltaY=e.pageY-t.pageY,a.originalX=n.offset.left,a.originalY=n.offset.top,a.offsetX=a.originalX+a.deltaX,a.offsetY=a.originalY+a.deltaY,a.drop=i.flatten((n.drop||[]).slice()),a.available=i.flatten((n.droppable||[]).slice()),a},element:function(e){if(e&&(e.jquery||1==e.nodeType))return e},flatten:function(t){return e.map(t,function(t){return t&&t.jquery?e.makeArray(t):t&&t.length?i.flatten(t):t})},textselect:function(t){e(document)[t?"unbind":"bind"]("selectstart",i.dontstart).css("MozUserSelect",t?"":"none"),document.unselectable=t?"off":"on"},dontstart:function(){return!1},callback:function(){}};i.callback.prototype={update:function(){n.drop&&this.available.length&&e.each(this.available,function(e){n.drop.locate(this,e)})}};var a=t.dispatch;t.dispatch=function(t){if(!(e.data(this,"suppress."+t.type)-(new Date).getTime()>0))return a.apply(this,arguments);e.removeData(this,"suppress."+t.type)};var s=t.fixHooks.touchstart=t.fixHooks.touchmove=t.fixHooks.touchend=t.fixHooks.touchcancel={props:"clientX clientY pageX pageY screenX screenY".split(" "),filter:function(t,n){if(n){var i=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0]||null;i&&e.each(s.props,function(e,n){t[n]=i[n]})}return t}};n.draginit=n.dragstart=n.dragend=i}(jQuery),window.puJsFileLoadCounter++,function(){var e=window.ResizeSensor;"undefined"!=typeof module&&void 0!==module.exports&&(e=require("./ResizeSensor"));var t=function(){function n(e){e||(e=document.documentElement);var t=window.getComputedStyle(e,null).fontSize;return parseFloat(t)||16}function i(e,t){var i=t.split(/\d/),a=i[i.length-1];switch(t=parseFloat(t),a){case"px":return t;case"em":return t*n(e);case"rem":return t*n();case"vw":return t*document.documentElement.clientWidth/100;case"vh":return t*document.documentElement.clientHeight/100;case"vmin":case"vmax":var s=document.documentElement.clientWidth/100,o=document.documentElement.clientHeight/100;return t*(0,Math["vmin"===a?"min":"max"])(s,o);default:return t}}function a(e){this.element=e,this.options={};var t,n,a,s,o,r,d,l=0,c=0;this.addOption=function(e){var t=[e.mode,e.property,e.value].join(",");this.options[t]=e};var h=["min-width","min-height","max-width","max-height"];this.call=function(){l=this.element.offsetWidth,c=this.element.offsetHeight,o={};for(t in this.options)this.options.hasOwnProperty(t)&&(n=this.options[t],a=i(this.element,n.value),s="width"==n.property?l:c,d=n.mode+"-"+n.property,r="","min"==n.mode&&s>=a&&(r+=n.value),"max"==n.mode&&s<=a&&(r+=n.value),o[d]||(o[d]=""),r&&-1===(" "+o[d]+" ").indexOf(" "+r+" ")&&(o[d]+=" "+r));for(var e in h)h.hasOwnProperty(e)&&(o[h[e]]?this.element.setAttribute(h[e],o[h[e]].substr(1)):this.element.removeAttribute(h[e]))}}function s(t,n){t.elementQueriesSetupInformation?t.elementQueriesSetupInformation.addOption(n):(t.elementQueriesSetupInformation=new a(t),t.elementQueriesSetupInformation.addOption(n),t.elementQueriesSensor=new e(t,function(){t.elementQueriesSetupInformation.call()})),t.elementQueriesSetupInformation.call(),p&&$.indexOf(t)<0&&$.push(t)}function o(e,t,n,i){void 0===f[t]&&(f[t]={}),void 0===f[t][n]&&(f[t][n]={}),void 0===f[t][n][i]?f[t][n][i]=e:f[t][n][i]+=","+e}function r(){var e;if(document.querySelectorAll&&(e=document.querySelectorAll.bind(document)),e||"undefined"==typeof $$||(e=$$),e||"undefined"==typeof jQuery||(e=jQuery),!e)throw"No document.querySelectorAll, jQuery or Mootools's $$ found.";return e}function d(){var e=r();for(var t in f)if(f.hasOwnProperty(t))for(var n in f[t])if(f[t].hasOwnProperty(n))for(var i in f[t][n])if(f[t][n].hasOwnProperty(i))for(var a=e(f[t][n][i]),o=0,d=a.length;o<d;o++)s(a[o],{mode:t,property:n,value:i})}function l(t){function n(){var e,n=!1;for(e in i)i.hasOwnProperty(e)&&a[e].minWidth&&t.offsetWidth>a[e].minWidth&&(n=e);if(n||(n=o),r!=n)if(d[n])i[r].style.display="none",i[n].style.display="block",r=n;else{var l=new Image;l.onload=function(){i[n].src=s[n],i[r].style.display="none",i[n].style.display="block",d[n]=!0,r=n},l.src=s[n]}else i[n].src=s[n]}var i=[],a=[],s=[],o=0,r=-1,d=[];for(var l in t.children)if(t.children.hasOwnProperty(l)&&t.children[l].tagName&&"img"===t.children[l].tagName.toLowerCase()){i.push(t.children[l]);var c=t.children[l].getAttribute("min-width")||t.children[l].getAttribute("data-min-width"),h=t.children[l].getAttribute("data-src")||t.children[l].getAttribute("url");s.push(h);var u={minWidth:c};a.push(u),c?t.children[l].style.display="none":(o=i.length-1,t.children[l].style.display="block")}r=o,t.resizeSensor=new e(t,n),n(),p&&$.push(t)}function c(){for(var e=r()("[data-responsive-image],[responsive-image]"),t=0,n=e.length;t<n;t++)l(e[t])}function h(e){var t,n;for(e=e.replace(/'/g,'"');null!==(t=v.exec(e));)for(n=t[1]+t[3],attrs=t[2];null!==(attrMatch=m.exec(attrs));)o(n,attrMatch[1],attrMatch[2],attrMatch[3])}function u(e){var t="";if(e)if("string"==typeof e)-1===(e=e.toLowerCase()).indexOf("min-width")&&-1===e.indexOf("max-width")||h(e);else for(var n=0,i=e.length;n<i;n++)1===e[n].type?-1!==(t=e[n].selectorText||e[n].cssText).indexOf("min-height")||-1!==t.indexOf("max-height")?h(t):-1===t.indexOf("min-width")&&-1===t.indexOf("max-width")||h(t):4===e[n].type&&u(e[n].cssRules||e[n].rules)}var p=!1,$=[],f={},v=/,?[\s\t]*([^,\n]*?)((?:\[[\s\t]*?(?:min|max)-(?:width|height)[\s\t]*?[~$\^]?=[\s\t]*?"[^"]*?"[\s\t]*?])+)([^,\n\s\{]*)/gim,m=/\[[\s\t]*?(min|max)-(width|height)[\s\t]*?[~$\^]?=[\s\t]*?"([^"]*?)"[\s\t]*?]/gim,g=!1;this.init=function(e){p=void 0!==e&&e;for(var t=0,n=document.styleSheets.length;t<n;t++)try{u(document.styleSheets[t].cssRules||document.styleSheets[t].rules||document.styleSheets[t].cssText)}catch(e){if("SecurityError"!==e.name)throw e}if(!g){var i=document.createElement("style");i.type="text/css",i.innerHTML="[responsive-image] > img, [data-responsive-image] {overflow: hidden; padding: 0; } [responsive-image] > img, [data-responsive-image] > img { width: 100%;}",document.getElementsByTagName("head")[0].appendChild(i),g=!0}d(),c()},this.update=function(e){this.init(e)},this.detach=function(){if(!this.withTracking)throw"withTracking is not enabled. We can not detach elements since we don not store it.Use ElementQueries.withTracking = true; before domready or call ElementQueryes.update(true).";for(var e;e=$.pop();)t.detach(e);$=[]}};t.update=function(e){t.instance.update(e)},t.detach=function(e){e.elementQueriesSetupInformation?(e.elementQueriesSensor.detach(),delete e.elementQueriesSetupInformation,delete e.elementQueriesSensor):e.resizeSensor&&(e.resizeSensor.detach(),delete e.resizeSensor)},t.withTracking=!1,t.init=function(){t.instance||(t.instance=new t),t.instance.init(t.withTracking)};var n=function(e){if(document.addEventListener)document.addEventListener("DOMContentLoaded",e,!1);else if(/KHTML|WebKit|iCab/i.test(navigator.userAgent))var t=setInterval(function(){/loaded|complete/i.test(document.readyState)&&(e(),clearInterval(t))},10);else window.onload=e};t.listen=function(){n(t.init)},"undefined"!=typeof module&&void 0!==module.exports?module.exports=t:(window.ElementQueries=t,t.listen())}(),window.puJsFileLoadCounter++,window.puJsFileLoadCounter++;var atWhichCol=null,atWhichMappedNode,canMouseDown=0,currentUndoRedoStateCanvas=null,statusUndoRedoCanvas=[],undoRedoLengthCanvas=25,checkControlKeyPressed=!1,multiatWhich=[],whichDynamicField,tempDataHolder,pdfImg={};$(document).ready(function(){"undefined"!=typeof Storage&&void 0!=localStorage.tabledata&&$("#edtInnerCanvasView").html(localStorage.tabledata),$(".dragELM").draggable({cancel:!1,drag:function(e,t){$(this).width($(this).width())},stop:function(e,t){$(this).width($(this).width())}}),rangeInitializeCanvas(),$("html").on("click","*",function(){$("#canvastableContextMenu").css("display","none"),$("#ColorPlatesSectionCanvas").css("display","none"),$("#removeMappedNode").css("display","none"),$(".dragELM").is(".ui-resizable")&&($(".dragELM").resizable("destroy"),$(".dragELM").removeAttr("tabindex"))}),$("body").on("mouseover","#edtInnerCanvasView td",function(e){e.stopPropagation(),0==canMouseDown&&canvasColumnResize($(this))}),$("body").on("paste","#edtInnerCanvasView td",function(e){e.preventDefault();var t=(e.originalEvent||e).clipboardData.getData("text/plain");return void 0!==t&&document.execCommand("insertText",!1,t),!1}),$("body").on("paste","#edtInnerCanvasView .canvasDynamicField",function(e){e.preventDefault();var t=(e.originalEvent||e).clipboardData.getData("text/plain");return void 0!==t&&document.execCommand("insertText",!1,t),!1}),$("body").on("click","#edtInnerCanvasView td",function(e){e.stopPropagation(),tempDataHolder="",$(".dragCanvasContainer").removeClass("active"),$("#canvastableContextMenu").css("display","none"),$("#ColorPlatesSectionCanvas").css("display","none"),$("#removeMappedNode").css("display","none"),1==checkControlKeyPressed?$(this).addClass("selectedTD"):(atWhichCol=$(this),$("#edtInnerCanvasView .selectedTD").removeClass("selectedTD")),$("#edtInnerCanvasView .highlightTable").removeClass("highlightTable"),atWhichCol.closest("table").addClass("highlightTable"),$(".innerCanvasContainer td img").resizable(),$(".innerCanvasContainer td img").resizable("destroy"),$(".innerCanvasContainer td img").css("display","inline-block"),document.execCommand("enableObjectResizing",!1,"false"),document.execCommand("enableInlineTableEditing",!1,"false")}),$("body").on("contextmenu","#edtCanvasView span.mappingNode,#edtCanvasView span.canvasDynamicField, #edtCanvasView .canvasChkBox, #edtCanvasView .canvasRadioBtn, .innerCanvasContainer .canvasCalculationField",function(e){e.stopPropagation(),e.preventDefault(),atWhichMappedNode=$(this),$("#removeMappedNode").css({display:"block",left:"0px",left:e.pageX,top:e.pageY})}),$("body").on("click","#removeMappedNode li a",function(e){e.stopPropagation(),e.preventDefault();var t=atWhichMappedNode.attr("data-source");$(".canvasEDTTable td").find('span[data-source = "'+t+'"]').length<=1&&$("#canvasNodeList").find('span[data-source = "'+t+'"]').parent("li").removeClass("usedNode"),atWhichMappedNode.remove(),$("#removeMappedNode").css("display","none")}),$("body").on("contextmenu","#edtInnerCanvasView td",function(e){e.stopPropagation(),e.preventDefault(),(atWhichCol=$(this)).closest("table").hasClass("canvasEDTTable")?$("#canvastableContextMenu [data-action=deleteTable]").closest("li").addClass("hide"):$("#canvastableContextMenu [data-action=deleteTable]").closest("li").removeClass("hide"),1==atWhichCol.closest(".innerCanvasContainer").find("table").length&&1==atWhichCol.closest(".innerCanvasContainer").find("table tr").length?$("#canvastableContextMenu [data-action=deleteRow]").closest("li").addClass("hide"):$("#canvastableContextMenu [data-action=deleteRow]").closest("li").removeClass("hide"),1==atWhichCol.closest("tr").find("td").length?$("#canvastableContextMenu [data-action=deleteColumn]").closest("li").addClass("hide"):$("#canvastableContextMenu [data-action=deleteColumn]").closest("li").removeClass("hide"),$("#canvastableContextMenu").css({display:"block",left:"0px",left:e.pageX,top:e.pageY}),setCanvasDrpdownPos("#canvastableContextMenu")}),$("body").on("click","#canvastableContextMenu a",function(){var e=$(this).attr("data-action"),t=atWhichCol.index(),n=atWhichCol.closest("table");if("rowAbove"==e){i="<tr>"+(r=atWhichCol.closest("tr")).html()+"</tr>";$(i).insertBefore(r),r.prev().find("td").html("<br/>").attr("contenteditable",!0)}else if("rowBelow"==e){var i="<tr>"+(r=atWhichCol.closest("tr")).html()+"</tr>";$(i).insertAfter(r),r.next().find("td").html("<br/>").attr("contenteditable",!0)}else if("columnLeft"==e){o=(a=n.find("tr:first > td:eq("+t+")").outerWidth())-(s=n.find("tr:first > td:eq("+t+")").width());if(getCurrentTDWidth=a/2,o>=getCurrentTDWidth)return bootbox.alert("Maximum width of table has been reached"),!1;n.find("tr:first > td:eq("+t+")").outerWidth(getCurrentTDWidth),n.find("tr:first > td:eq("+t+")").css("min-width",getCurrentTDWidth+"px"),n.find("tbody:first > tr").each(function(e){if(0==e){n="<td contenteditable='true' style='width:"+getCurrentTDWidth+"px; min-width:"+getCurrentTDWidth+"px'><br/></td>";$(n).insertBefore($(this).find(" > td:eq("+t+")"))}else{var n="<td contenteditable='true'><br/></td>";$(n).insertBefore($(this).find(" > td:eq("+t+")"))}})}else if("columnRight"==e){var a=n.find("tr:first > td:eq("+t+")").outerWidth(),s=n.find("tr:first > td:eq("+t+")").width(),o=a-s;if(getCurrentTDWidth=a/2,o>=getCurrentTDWidth)return bootbox.alert("Maximum width of table has been reached"),!1;n.find("tr:first > td:eq("+t+")").outerWidth(getCurrentTDWidth),n.find("tr:first > td:eq("+t+")").css("min-width",getCurrentTDWidth+"px"),n.find("tbody:first > tr").each(function(e){if(0==e){n="<td contenteditable='true' style='width:"+getCurrentTDWidth+"px; min-width:"+getCurrentTDWidth+"px'><br/></td>";$(n).insertAfter($(this).find(" > td:eq("+t+")"))}else{var n="<td contenteditable='true'><br/></td>";$(n).insertAfter($(this).find(" > td:eq("+t+")"))}})}else if("deleteRow"==e){var r=atWhichCol.closest("tr");1==n.find("tr").length?(n.closest("td").attr("contenteditable",!0).removeClass("nopadding").html("<br/>"),n.remove()):r.remove()}else if("deleteColumn"==e)1==n.find("tr:first td").length?(n.closest("td").attr("contenteditable",!0).removeClass("nopadding").html("<br/>"),n.remove()):n.find("tr").each(function(e){$(this).find("td:eq("+t+")").remove()});else if("emptyColumn"==e)atWhichCol.html("<br/>");else if("deleteTable"==e)n.closest("td").attr("contenteditable",!0).removeClass("nopadding").html("<br/>"),n.remove();else{if("addTable"==e)return $("#setCanvasTableRows").val(1),$("#setCanvasTableColumns").val(1),$("#canvastableProperties").modal({backdrop:"static",keyboard:!1}),checkControlKeyPressed=!1,!1;if("calcStart"==e)pasteCanvasHtmlAtCaret('<span calculation-start="true">'),checkControlKeyPressed=!1;else if("calcEnd"==e){pasteCanvasHtmlAtCaret('<span calculation-end="true">');var d=atWhichCol.html();d=(d=d.replace(/<span calculation-start="true"><\/span>/g,"<span data-calculation='calculation'>")).replace(/<span calculation-end="true"><\/span>/g,"</span>"),atWhichCol.html(d),checkControlKeyPressed=!1}else{if("columnProperties"==e){m=$("#edtInnerCanvasView").attr("class");$("#edtInnerCanvasView").removeAttr("class");var l=parseInt(atWhichCol.css("border-left-width")),c=parseInt(atWhichCol.css("border-right-width")),h=parseInt(atWhichCol.css("border-top-width")),u=parseInt(atWhichCol.css("border-bottom-width")),p=atWhichCol.css("vertical-align"),f=atWhichCol.css("background-color"),v=parseInt(atWhichCol.css("line-height"));return $("#setColumnBorderLeft").val(l),$("#setColumnBorderRight").val(c),$("#setColumnBorderTop").val(h),$("#setColumnBorderBottom").val(u),$("#canvasVAlign").val(p),$("#canvasLineHeight").val(v),"transparent"==f&&(f=""),$("#canvasCellBackground").val(f).css("background-color",f).css("color",f),$("#edtInnerCanvasView").addClass(m),$("#canvastableColumnProperties").modal({backdrop:"static",keyboard:!1}),checkControlKeyPressed=!1,!1}if("rowProperties"==e){var m=$("#edtInnerCanvasView").attr("class");$("#edtInnerCanvasView").removeAttr("class");var g=parseInt(atWhichCol.css("padding-left")),b=parseInt(atWhichCol.css("padding-right")),C=parseInt(atWhichCol.css("padding-top")),w=parseInt(atWhichCol.css("padding-bottom")),f=atWhichCol.closest("tr").css("background-color");return $("#setRowPaddingLeft").val(g),$("#setRowPaddingRight").val(b),$("#setRowPaddingTop").val(C),$("#setRowPaddingBottom").val(w),"transparent"==f&&(f=""),$("#canvasRowBackground").val(f).css("background-color",f).css("color",f),$("#edtInnerCanvasView").addClass(m),$("#canvastableRowProperties").modal({backdrop:"static",keyboard:!1}),checkControlKeyPressed=!1,!1}}}undoRedoCanvasMode()}),$("body").on("click","#canvasTablePropertiesSubmit",function(){var e=$("#setCanvasTableRows").val(),t=$("#setCanvasTableColumns").val(),n="";for(i=0;i<e;i++){var a="";for(x=0;x<t;x++)a+="<td contenteditable='true'><br/></td>";n=n+"<tr>"+a+"</tr>"}var s="<table cellpadding='0' cellspacing='0'>"+n+"</table>";atWhichCol.attr("contenteditable",!1).addClass("nopadding"),atWhichCol.html(s),atWhichCol.find("table td").each(function(){$(this).outerWidth($(this).outerWidth()),$(this).css("min-width",$(this).outerWidth()+"px")}),atWhichCol.find("table").outerWidth(atWhichCol.find("table").outerWidth()),document.execCommand("enableObjectResizing",!1,"false"),document.execCommand("enableInlineTableEditing",!1,"false"),$("#canvastableProperties").modal("hide"),undoRedoCanvasMode()}),$("body").on("click","#canvasColumnPropertiesSubmit",function(){var e=$("#setColumnBorderLeft").val(),t=$("#setColumnBorderRight").val(),n=$("#setColumnBorderTop").val(),i=$("#setColumnBorderBottom").val(),a=$("#canvasVAlign").val(),s=$("#canvasCellBackground").val(),o=$("#canvasLineHeight").val();""==s&&(s="transparent");var r={};r["vertical-align"]=a,r["line-height"]=o+"px",r["border-top"]=0!=n?n+"px solid #000":"none",r["border-right"]=0!=t?t+"px solid #000":"none",r["border-bottom"]=0!=i?i+"px solid #000":"none",r["border-left"]=0!=e?e+"px solid #000":"none",atWhichCol.css(r),atWhichCol.css("cssText",atWhichCol.attr("style")+";background-color:"+s+" !important"),$("#canvastableColumnProperties").modal("hide"),undoRedoCanvasMode()}),$("body").on("click","#canvasRowPropertiesSubmit",function(){var e=$("#setRowPaddingLeft").val(),t=$("#setRowPaddingRight").val(),n=$("#setRowPaddingTop").val(),i=$("#setRowPaddingBottom").val(),a=$("#canvasRowBackground").val();""==a&&(a="transparent"),atWhichCol.closest("tr").css("cssText",atWhichCol.closest("tr").attr("style")+";background-color:"+a+" !important"),atWhichCol.closest("tr").find(">td").each(function(){$(this).css({"padding-top":n+"px","padding-right":t+"px","padding-bottom":i+"px","padding-left":e+"px"})}),$("#canvastableRowProperties").modal("hide"),undoRedoCanvasMode()}),$("body").on("click","#canvasCellBackground, #canvasRowBackground",function(){var e=$(this).offset(),t=$(this);return $("#ColorPlatesSectionCanvas").css("display","block").css({left:e.left,top:e.top+22}),$("#ColorPlatesSectionCanvas td").unbind("click"),$("#ColorPlatesSectionCanvas td").click(function(){var e=$(this).css("background-color");t.val(e).css("background-color",e).css("color",e)}),!1}),$("body").on("keyup","#edtInnerCanvasView td",function(e){e.stopPropagation(),17==(e.keyCode?e.keyCode:e.which)&&(checkControlKeyPressed=!1)}),$("body").on("keydown","#edtInnerCanvasView td",function(e){e.stopPropagation();var t=e.keyCode?e.keyCode:e.which,n=(atWhichCol=$(this)).closest("tr");return 13==t?(document.execCommand("insertHTML",!1,"<br><br>"),!1):(17==t&&(checkControlKeyPressed=!0),e.ctrlKey&&90==t?(e.preventDefault(),$(".doUndoCanvas ").trigger("click"),!1):e.ctrlKey&&89==t?(e.preventDefault(),$(".doRedoCanvas ").trigger("click"),!1):void(e.ctrlKey&&38==t&&!e.shiftKey?$("#canvastableContextMenu [data-action=rowAbove]").trigger("click"):e.ctrlKey&&40==t&&!e.shiftKey?$("#canvastableContextMenu [data-action=rowBelow]").trigger("click"):e.ctrlKey&&39==t&&!e.shiftKey?$("#canvastableContextMenu [data-action=columnRight]").trigger("click"):e.ctrlKey&&37==t&&!e.shiftKey?$("#canvastableContextMenu [data-action=columnLeft]").trigger("click"):e.shiftKey&&38==t&&!e.ctrlKey?0!=n.prev("tr").length&&n.prev("tr").find("td:eq("+atWhichCol.index()+")").focus():e.shiftKey&&40==t&&!e.ctrlKey?0!=n.next("tr").length&&n.next("tr").find("td:eq("+atWhichCol.index()+")").focus():e.shiftKey&&39==t&&!e.ctrlKey?0!=atWhichCol.next("td").length?atWhichCol.next("td").focus():0!=n.next("tr").length&&n.next("tr").find("td:first").focus():e.shiftKey&&37==t&&!e.ctrlKey&&(0!=atWhichCol.prev("td").length?atWhichCol.prev("td").focus():0!=n.prev("tr").length&&n.prev("tr").find("td:last").focus())))}),$("body").on("click","#canvasToolbar .underline",function(){canvasUnderlineApplier.toggleSelection(),undoRedoCanvasMode()}),$("body").on("click","#canvasToolbar .bold",function(){canvasBoldApplier.toggleSelection(),undoRedoCanvasMode()}),$("body").on("click","#canvasToolbar .italic",function(){canvasItalicApplier.toggleSelection(),undoRedoCanvasMode()}),$("body").on("click","#canvasToolbar .leftAlign, #canvasToolbar .rightAlign, #canvasToolbar .centerAlign, #canvasToolbar .justifyAlign",function(){if(null==atWhichCol)return!1;var e=$(this).attr("data-align");atWhichCol.removeClass("canvasLeftALign").removeClass("canvasCenter").removeClass("canvasRightAlign").removeClass("canvasJustify").addClass(e),undoRedoCanvasMode()}),$("body").on("change","#selOrientation",function(){var e=$(this).val();"select"==e?($("#canvasToolbar").css("width","8.3in"),$("#edtCanvasView").width("8.3in").height("11.7in")):"a1"==e?($("#canvasToolbar").css("width","23.4in"),$("#edtCanvasView").width("23.4in").height("33.1in")):"a2"==e?($("#canvasToolbar").css("width","16.5in"),$("#edtCanvasView").width("16.5in").height("23.4in")):"a3"==e?($("#canvasToolbar").css("width","11.7in"),$("#edtCanvasView").width("11.7in").height("16.5in")):"a4"==e&&($("#canvasToolbar").css("width","8.3in"),$("#edtCanvasView").width("8.3in").height("11.7in"))}),$("body").on("change","#selPrintPreview",function(){var e=$(this).val();"screen"==e?($("#edtInnerCanvasView").removeClass("printMode"),$("#edtInnerCanvasView").addClass("screenMode")):"print"==e&&($("#edtInnerCanvasView").addClass("printMode"),$("#edtInnerCanvasView").removeClass("screenMode"))}),$("body").on("change","#fontStyleCanvas",function(){var e=$(this).val(),t="rangyTemp_"+ +new Date;return rangy.createClassApplier(t,!0).applyToSelection(),$("."+t).css({"font-family":e}).removeClass(t),undoRedoCanvasMode(),!1}),$("body").on("change","#fontSizeCanvas",function(){var e=$(this).val(),t="rangyTemp_"+ +new Date;return rangy.createClassApplier(t,!0).applyToSelection(),$("."+t).css({"font-size":e+"px"}).removeClass(t),undoRedoCanvasMode(),!1}),$("body").on("click","#canvasToolbar .canvasColor",function(){var e=$(this).position();return $(".edtdrp").hide(),$("#ColorPlatesSectionCanvas").css("display","block").css({left:e.left+265,top:e.top+102}),$("#ColorPlatesSectionCanvas td").unbind("click"),$("#ColorPlatesSectionCanvas td").click(function(){var e=$(this).css("background-color"),t="rangyTemp_"+ +new Date;rangy.createClassApplier(t,!0).applyToSelection();var n=$("."+t).css("font-size"),i=$("."+t).css("font-family");$("."+t).css("cssText","color:"+e+" !important; font-size:"+n+"; font-family:"+i).removeClass(t)}),undoRedoCanvasMode(),!1}),$("body").on("click","#printCanvasTable",function(){var e=$("#edtInnerCanvasView").attr("class");$("#edtInnerCanvasView").removeClass("screenMode"),$("#edtInnerCanvasView").addClass("printMode"),window.print(),$("#edtInnerCanvasView").removeClass("printMode"),$("#edtInnerCanvasView").addClass(e)}),$("body").on("click","#saveCanvasTable",function(){"undefined"!=typeof Storage&&localStorage.setItem("tabledata",$("#edtInnerCanvasView").html())}),$("body").on("click","#canvasNodeList li",function(){$(this).removeClass("selected")}),$("body").on("dblclick","#canvasNodeList li",function(){$(this).hasClass("noMap")||($("#canvasNodeList li").removeClass("selected"),$(this).addClass("selected"),tempDataHolder="<span class='mappingNode dragELM' contenteditable='false' data-source='"+$(this).find("span").attr("data-source")+"'>"+$(this).text()+"</span>",$(".dragELM").draggable({cancel:!1,drag:function(e,t){$(this).width($(this).width())},stop:function(e,t){$(this).width($(this).width())}}))}),$("body").on("dblclick",".canvasEDTTable td",function(e){if(e.stopPropagation(),"false"==$(this).attr("contenteditable"))return!1;var t=$("#canvasNodeList li.selected").html();if($("#canvasNodeList li.selected").addClass("usedNode").removeClass("selected"),void 0==t)return!1;pasteCanvasHtmlAtCaret(t),undoRedoCanvasMode()}),$("body").on("click","#addNewPageCanvasTable",function(e){"editor"==$("#changeCanvasMode").val()?$("#edtInnerCanvasView").append("<span class='deletePageSpan'><button class='deleteThisPage btn btn-sm btn-black'>Delete Page</button></span><div class='innerCanvasContainer'><table cellpadding='0' cellspacing='0' class='canvasEDTTable' style='height:auto'><tr><td contenteditable='true' style='height:auto'><br/></td></tr></table></div>"):$("#edtInnerCanvasView").append("<span class='deletePageSpan'><button class='deleteThisPage btn btn-sm btn-black'>Delete Page</button></span><div class='innerCanvasContainer noPadding yes-form'><div class='dragCanvasContainer'></div></div>"),undoRedoCanvasMode()}),$("body").on("click",".dragCanvasContainer",function(e){$(".dragCanvasContainer").removeClass("active"),$("#edtInnerCanvasView .highlightTable").removeClass("highlightTable"),atWhichCol=null,$(this).addClass("active"),void 0!=tempDataHolder&&""!=tempDataHolder&&($(this).append(tempDataHolder),$(".dragELM").draggable({cancel:!1,drag:function(e,t){$(this).width($(this).width())},stop:function(e,t){$(this).width($(this).width())}}),$(this).find(".dragELM:last").css({position:"absolute",left:+e.pageX-$(this).offset().left+"px",top:+e.pageY-$(this).offset().top+"px"}),tempDataHolder=""),$("#canvasNodeList .selected").removeClass("selected")}),$("body").on("click",".deleteThisPage",function(e){$(this).parent().next(".innerCanvasContainer").remove(),$(this).parent().remove(),undoRedoCanvasMode()}),$("body").on("keydown",".checkOnlyNum",function(e){-1!==$.inArray(e.keyCode,[46,8,9,27,13,110,190])||65===e.keyCode&&(!0===e.ctrlKey||!0===e.metaKey)||e.keyCode>=35&&e.keyCode<=40||(e.shiftKey||e.keyCode<48||e.keyCode>57)&&(e.keyCode<96||e.keyCode>105)&&e.preventDefault()}),$("body").on("click","#canvasToolbar .doUndoCanvas",function(e){if(statusUndoRedoCanvas.length>0){if(currentUndoRedoStateCanvas<0)return!1;null==currentUndoRedoStateCanvas&&(undoRedoCanvasMode(),currentUndoRedoStateCanvas=statusUndoRedoCanvas.length-1),currentUndoRedoStateCanvas-=1,$("#edtInnerCanvasView").html(statusUndoRedoCanvas[currentUndoRedoStateCanvas])}}),$("body").on("click","#canvasToolbar .doRedoCanvas",function(e){if(statusUndoRedoCanvas.length>0){if(null==currentUndoRedoStateCanvas||currentUndoRedoStateCanvas>=statusUndoRedoCanvas.length-1)return!1;currentUndoRedoStateCanvas+=1,$("#edtInnerCanvasView").html(statusUndoRedoCanvas[currentUndoRedoStateCanvas])}}),$("body").on("change","#uploadCanvasImage",function(e){$(".lodding").show();var t=$(this).prop("files")[0],n=new FormData;n.append("file",t),n.append("type","directUpload");var i=Date.now()+"_"+Math.floor(1e12*Math.random()+1),a=new FileReader;a.onload=function(e){var t="<div class='dummyIMG' id='"+i+"'></div> &nbsp;";null!=atWhichCol&&$("#edtInnerCanvasView .highlightTable").length>0&&atWhichCol.html(t)},a.readAsDataURL(this.files[0]),$.ajax({type:"POST",url:"edt-file-upload.php",data:n,processData:!1,contentType:!1}).success(function(e){if(null!=atWhichCol&&$("#edtInnerCanvasView .highlightTable").length>0)$("#"+i).html("<img src='"+e+"'>").find("img").unwrap(),$("#uploadCanvasImage").val("");else if($(".dragCanvasContainer.active").length>0){var t=new Image;$(t).load(function(){$(".dragCanvasContainer.active").css("cssText","background-image:url('"+e+"') !important").css({"min-height":t.height+"px","list-style-image":"url("+e+")",display:"list-item","list-style-position":"inside"})}),t.src=e,$("#uploadCanvasImage").val(""),$(".lodding").hide()}})}),$("body").on("change","#uploadCanvasPDF",function(e){$(".lodding").show();var t=$(this).prop("files")[0],n=new FormData;n.append("file",t),n.append("type","directUpload");Date.now(),Math.floor(1e12*Math.random()+1);(new FileReader).readAsDataURL(this.files[0]),$.ajax({type:"POST",url:"edt-pdf-file-upload.php",data:n,processData:!1,contentType:!1}).success(function(e){$("#uploadCanvasPDF").val("");var t=e;$.ajax({type:"POST",url:"http://dev.pu.prospus.com/puidata/page_plugin/code.php?action=convertpdftoimgcanvas&appOneFilePath="+encodeURIComponent(t),processData:!1,contentType:!1}).success(function(e){loaderCanvas(JSON.parse(e),loadCImage,function(){for(key in pdfImg){$("#edtInnerCanvasView").append("<span class='deletePageSpan'><button class='deleteThisPage btn btn-sm btn-black'>Delete Page</button></span><div class='innerCanvasContainer noPadding yes-form'><div class='dragCanvasContainer'></div></div>"),$("#edtInnerCanvasView .dragCanvasContainer:last").css("cssText",$("#edtInnerCanvasView .dragCanvasContainer:last").attr("style")+";min-height:"+pdfImg[key].height+"px;background-image: url('"+pdfImg[key].target+"') !important; list-style-image: url('"+pdfImg[key].target+"'); display: list-item; list-style-position: inside; ")}pdfImg={},$(".lodding").hide()})})})}),$("body").on("click",".innerCanvasContainer td img",function(e){$(".innerCanvasContainer td img").resizable({handles:"se"}),e.stopPropagation()}),$("body").on("click","#canvasToolbar .doDynamicField",function(e){if(e.stopPropagation(),$(".dragCanvasContainer.active").length>0)return tempDataHolder=t="<span class='canvasDynamicField dragELM' contenteditable='true'>&nbsp;</span>",!1;if(null==atWhichCol)return!1;if("false"==atWhichCol.attr("contenteditable"))return!1;var t="<span class='canvasDynamicField' contenteditable='false'>&nbsp;</span>";pasteCanvasHtmlAtCaret(t),$("#edtInnerCanvasView .selectedTD").each(function(){$(this).html(t)}),$("#edtInnerCanvasView .selectedTD").removeClass("selectedTD"),undoRedoCanvasMode()}),$("body").on("click","#canvasToolbar .doCalculationField",function(e){if(e.stopPropagation(),$(".dragCanvasContainer.active").length>0)return tempDataHolder=t="<span class='canvasCalculationField dragELM' contenteditable='true' data-calculation='calculation'>&nbsp;</span>",!1;if(null==atWhichCol)return!1;if("false"==atWhichCol.attr("contenteditable"))return!1;var t="<span class='canvasCalculationField' contenteditable='true' data-calculation='calculation'>&nbsp;</span>";pasteCanvasHtmlAtCaret(t),$("#edtInnerCanvasView .selectedTD").each(function(){$(this).html(t)}),$("#edtInnerCanvasView .selectedTD").removeClass("selectedTD")}),$("body").on("click","#canceledtCalculationCanvas",function(e){$(".tempEDTLink").removeClass("tempEDTLink"),$("#edtCalculationPopup").css("display","none")}),$("body").on("click","#saveedtCalculationCanvas",function(e){$(".tempEDTLink").html($("#edtCalculationCanvas").val()),$(".tempEDTLink").width("auto"),$(".tempEDTLink").removeClass("tempEDTLink"),tempDataHolder="",$("#edtCalculationPopup").css("display","none")}),$("body").on("dblclick","#edtCanvasView .canvasCalculationField",function(e){e.stopPropagation();var t=$(this).offset();$(this).addClass("tempEDTLink");var n=$.trim($(this).html());"&nbsp;"==n&&(n=""),$("#edtCalculationCanvas").val(n),$("#edtCalculationPopup").css({display:"block",left:"0px",left:t.left,top:t.top+15})}),$("body").on("dblclick","#edtCalculationCanvas",function(e){var t=$("#canvasNodeList li.selected").html();void 0!=t&&insertAtCaret($(this),t)}),$("body").on("click","#canvasToolbar .doChkBoxField",function(e){if(e.stopPropagation(),$(".dragCanvasContainer.active").length>0)return tempDataHolder=t="<input type='checkbox' class='canvasChkBox dragELM' id='newCanvasCheckBox' value=''>",!1;if(null==atWhichCol)return!1;if("false"==atWhichCol.attr("contenteditable"))return!1;var t="<input type='checkbox' class='canvasChkBox' id='newCanvasCheckBox' value=''> Label";pasteCanvasHtmlAtCaret(t),$("#edtInnerCanvasView .selectedTD").each(function(){$(this).html(t)}),$("#edtInnerCanvasView .selectedTD").removeClass("selectedTD"),$("#newCanvasCheckBox").trigger("dblclick").removeAttr("id")}),$("body").on("click","#canvasToolbar .doRadioBtnField",function(e){if(e.stopPropagation(),$(".dragCanvasContainer.active").length>0)return tempDataHolder=t="<input type='radio' class='canvasRadioBtn dragELM' value=''>",!1;if(null==atWhichCol)return!1;if("false"==atWhichCol.attr("contenteditable"))return!1;var t="<input type='radio' class='canvasRadioBtn' id='newCanvasRadioBtn' value=''> Label";pasteCanvasHtmlAtCaret(t),$("#edtInnerCanvasView .selectedTD").each(function(){$(this).html(t)}),$("#edtInnerCanvasView .selectedTD").removeClass("selectedTD"),$("#newCanvasRadioBtn").trigger("dblclick").removeAttr("id")}),$("body").on("click",".canvasRadioBtn,.canvasChkBox",function(e){e.preventDefault()});var e;$("body").on("dblclick",".canvasRadioBtn,.canvasChkBox",function(t){var n=$("#canvasNodeList li.selected .mappingNode").attr("data-source");if(void 0!=n)return $(this).attr("data-source",n),!1;var i=$(this).prop("name"),a=$(this).val(),s=$(this).prop("checked"),o=$(this).width();s=0==s?0:1,$("#setRadioChkFieldName").val(i),$("#setRadioChkValue").val(a),$("#canvasRadioChkSelecteDropdown").val(s),$("#setRadioChkWidth").val(o),$("#canvasRadioChkProperties").modal({backdrop:"static",keyboard:!1}),checkControlKeyPressed=!1,e=$(this)}),$("body").on("click","#canvasRadioChkSubmit",function(t){var n=$.trim($("#setRadioChkFieldName").val()),i=$.trim($("#setRadioChkValue").val()),a=$.trim($("#canvasRadioChkSelecteDropdown").val()),s=$.trim($("#setRadioChkWidth").val()),o=/^[0-9a-zA-Z]+$/;return""==n?(bootbox.alert("Field Name is required"),!1):n.match(o)?""==i?(bootbox.alert("Value is required"),!1):(a=0!=a,e.prop("name",n).val(i).prop("checked",a).width(s).height(s),void $("#canvasRadioChkProperties").modal("hide")):(bootbox.alert("Field Name should have alpha-numeric characters only"),!1)}),$("body").on("dblclick",".innerCanvasContainer .canvasDynamicField, .innerCanvasContainer .mappingNode",function(e){e.stopPropagation();var t=$(this).width();$("#setDynamicFieldWidth").val(t),$("#setDynamicFontSize").val(parseInt($(this).css("font-size"))),whichDynamicField=$(this),$("#canvasDynamicTextProperties").modal({backdrop:"static",keyboard:!1})}),$("body").on("click","#canvasDynamicFieldSubmit",function(e){var t=$("#setDynamicFieldWidth").val(),n=$("#setDynamicFontSize").val();if(""==t)return bootbox.alert("Width Field is required"),!1;whichDynamicField.hasClass("dragELM")?whichDynamicField.css("cssText",whichDynamicField.attr("style")+";min-width:"+t+"px;width:"+t+"px;font-size:"+n+"px"):(whichDynamicField.removeAttr("style"),whichDynamicField.css({minWidth:t+"px"})),$("#canvasDynamicTextProperties").modal("hide")}),$("body").on("click",".doHyperLinkCanvas",function(e){var t=document.getSelection().anchorNode;if(1==document.getSelection().isCollapsed)return bootbox.alert("Select some text first to make it a hyperlink"),!1;if(3==t.nodeType&&(t=t.parentNode),-1==t.className.indexOf("canvasEDTTable"))for(;-1==t.className.indexOf("canvasEDTTable");)t=t.parentNode;if(-1!=t.className.indexOf("canvasEDTTable")){rangy.createClassApplier("tempEDTLink",!0).applyToSelection(),$("#edtHyperlinkTextCanvas").val("");var n=$(".tempEDTLink").offset();$("#edtHyperlinkPopupCanvas").css({display:"block",left:"0px",left:n.left,top:n.top+15}),$("#edtHyperlinkTextCanvas").focus(),e.preventDefault()}}),$("body").on("click","#saveedtHyperlinkTextCanvas",function(e){var t=$("#edtHyperlinkTextCanvas").val();if(!/^(http[s]?:\/\/){0,1}(www\.){0,1}[a-zA-Z0-9\.\-]+\.[a-zA-Z]{2,5}[\.]{0,1}/.test(t))return bootbox.alert("Enter Valid URL"),!1;$(".tempEDTLink").attr("data-link",t).addClass("edtHyperLink").removeClass("tempEDTLink"),$("#edtHyperlinkPopupCanvas").css("display","none")}),$("body").on("click",".edtHyperLink",function(e){var t=$(this).attr("data-link");$(".selectedHyperLink").removeClass("selectedHyperLink"),$(this).addClass("selectedHyperLink"),$("#edtHyperlinkPreviewTextCanvas").attr("href",t).text(t).attr("data-obj",$(this)),$("#edtHyperlinkPreviewCanvas").css({display:"block",left:"0px",left:e.pageX-10,top:e.pageY+10}),e.stopPropagation()}),$("body").on("click","#removeedtHyperlinkPreviewTextCanvas",function(e){$(".selectedHyperLink")[0].classList.length>2?$(".selectedHyperLink").removeAttr("data-link").removeClass("edtHyperLink"):$(".selectedHyperLink").replaceWith($(".selectedHyperLink").html()),$("#edtHyperlinkPreviewCanvas").css("display","none")}),$("body").on("click","#canceledtHyperlinkTextCanvas",function(e){void 0==$(".tempEDTLink").attr("data-link")?$(".tempEDTLink")[0].classList.length>1?$(".tempEDTLink").removeClass("tempEDTLink"):$(".tempEDTLink").replaceWith($(".tempEDTLink").html()):$(".tempEDTLink").removeClass("tempEDTLink"),$("#edtHyperlinkPopupCanvas").css("display","none")}),$("body").on("keydown",".canvasDynamicField",function(e){if(13==(e.keyCode?e.keyCode:e.which))return!1}),$("body").on("click",".dragELM",function(e){$(".dragELM").removeAttr("tabindex"),$(this).attr("tabindex",0),$(this).focus()}),$("body").on("keydown",".dragELM",function(e){var t=$(this).css("left"),n=$(this).css("top"),i=e.keyCode?e.keyCode:e.which;37==i?(e.preventDefault(),$(this).css("left",parseInt(t)-1+"px")):39==i?(e.preventDefault(),$(this).css("left",parseInt(t)+1+"px")):38==i?(e.preventDefault(),$(this).css("top",parseInt(n)-1+"px")):40==i&&(e.preventDefault(),$(this).css("top",parseInt(n)+1+"px"))}),$("body").on("click",".canvasDynamicField.dragELM, .mappingNode.dragELM",function(e){e.stopPropagation(),$(this).resizable()})}),window.puJsFileLoadCounter++;var isAutonumberDisplay=!0,imageFlag=!1,calculativeWidth=0,midWidth=$("#center-screen").width(),CountFlag=!0,hideNumbering=!0,CheckBuildMode=0,simulateContinue=0,selectedGridId;$(document).ready(function(){function e(e,t,n,i,a,s,o,r,d){displayLoader();var l=Array(),c=0,h=0,u=[],p=[],f=0;f=$(".center-div .fixed-left-column").find(".event-before:last").parent().index()>0?1:0,$(".center-div table").each(function(){$(this);$("tbody tr",$(this)).each(function(e,n){var i=$(this).attr("class");$(this).find("td").each(function(n,a){l[h]=e+"@"+n+"@"+i+"@"+$(this).attr("class")+"@"+$(this).html(),h++,e>=2&&t==n&&(str=$(this).text(),str.toLowerCase().indexOf("add segment")>0&&c++)})})}),$(".center-div .blankRow").each(function(){u.push($(this).index())}),$(".center-div .fixed-left-column tr.seq").each(function(e,t){p.push($(this).index())});var v=[];$(".center-div .fixed-left-column tr").each(function(){if($(this).hasClass("seq")){var e=$(this).find(".domainclass").parents("td").parents("tr").index();"-1"!=e&&v.push(parseInt(e))}});var m=0;m=$(".center-div .fixed-left-column .row-0 .col-"+d).nextAll("td.add-sub-more-operation").length;var g=$(".center-div .blankRow").length;$.post(domainUrl+"grid/addSingleLogicDomain",{data:l,myCol:t,myRow:e,preNoSegment:c,noOfSegment:0,checkBlankRows:g,nonSequence:u,logicsN:p,logicRowNo:v,lastColumn:r,currentCol:d,currentLength:o,roleNo:i,suboperationCount:m,eventCount:f},responceAddOperationSegment,"HTML")}function t(e,t,n,i,a,s,o,r,d){displayLoader();var l=Array(),c=0,h=0,u=[],p=[],f=0;f=$(".center-div .fixed-left-column").find(".event-before:last").parent().index()>0?1:0,$(".center-div table").each(function(){$(this);$("tbody tr",$(this)).each(function(e,n){var i=$(this).attr("class");$(this).find("td").each(function(n,a){l[h]=e+"@"+n+"@"+i+"@"+$(this).attr("class")+"@"+$(this).html(),h++,e>=2&&t==n&&(str=$(this).text(),str.toLowerCase().indexOf("add segment")>0&&c++)})})}),$(".center-div .blankRow").each(function(){u.push($(this).index())}),$(".center-div .fixed-left-column tr.seq").each(function(e,t){p.push($(this).index())});var v=[];$(".center-div .fixed-left-column tr").each(function(){if($(this).hasClass("seq")){var e=$(this).find(".domainclass").parents("td").parents("tr").index();"-1"!=e&&v.push(parseInt(e))}});var m=$(".center-div .blankRow").length,g=0;g=$(".center-div .fixed-left-column .row-0 .col-"+d).nextAll("td.add-sub-more-operation").length,$.post(domainUrl+"grid/addFirstSingleLogicDomain",{data:l,myCol:t,myRow:e,preNoSegment:c,noOfSegment:0,checkBlankRows:m,nonSequence:u,logicsN:p,logicRowNo:v,lastColumn:r,currentCol:d,currentLength:o,roleNo:i,suboperationCount:g,eventCount:f},responceAddOperationSegment,"HTML")}$(".left-manu-bar .dropdown-menu").click(function(e){e.stopPropagation()}),$("body").on("click",".courseboard_left tr",function(){$(".courseboard_left tr").find(".node-circle").removeClass("node-green-circle-expanded").addClass("node-white-circle-expanded"),$(this).find(".node-circle").addClass("node-green-circle-expanded").removeClass("node-white-circle-expanded")}),$(document).on("click",".left-manu-bar #drop3",function(){$("#node-1 > ol > li:nth-child(1) > a").children().addClass("node-green-circle").parent().addClass("activeBG"),$("#fat-menu").hasClass("open")?($(".left-manu-bar #drop3").find("b.fa-angle-down").removeClass("fa-angle-down").addClass("cross-tab fa-times"),$(".left-manu-bar #drop3").prev().addClass("blackIcon")):($(".left-manu-bar #drop3").find("b.cross-tab").removeClass("cross-tab fa-times").addClass("fa-angle-down"),$(".left-manu-bar #drop3").prev().removeClass("blackIcon"))}),$("body").on("click",".system-dropdown",function(){setliwidth(),$("#div_main_menu_item a").on("click",function(){$("#div_main_menu_item a").removeClass("activeBG"),$("#div_main_menu_item a .node-circle").removeClass("node-green-circle node-green-circle-expanded"),$(this).addClass("activeBG"),$(this).find(".node-circle").hasClass("node-white-circle-expanded")?$(this).find(".node-circle").addClass("node-green-circle-expanded"):$(this).find(".node-circle").addClass("node-green-circle")})}),$("body").on("dblclick",".left-manu-bar ol .node-white-circle-expanded",function(e){$(this).closest("li").children("ol").toggle(),$(this).addClass("node-selected")}),$("body").on("mouseover",".center-div .add-col-wrap ul.dropdown-menu li",function(e){e.stopPropagation(),$(this).addClass("current"),$(".node-white-circle-expanded").parent("a").parent("li").removeClass("current")}),$("body").on("mouseout",".center-div .add-col-wrap ul.dropdown-menu li",function(){$(this).removeClass("current")}),$("body").on("click",".entr-left-tab li",function(e){$("#perspectiveDiv").find(".node-left-col").children("li").removeClass("node-selected"),e.stopPropagation}),$("body").on("mouseover","#association-table thead th",function(e,t){$(this).children("i.add").addClass("show")}),$("body").on("click",".check-add-status",function(){var e=$(this).closest("td"),t=$(e).closest("tr"),n=($(t).closest("table"),$(e).index()),i=$(t).index(),a=0;Array();$(".center-div table").each(function(){$(this);$("tbody tr",$(this)).each(function(e,t){$(this).find("td").each(function(t,i){e>=2&&n==t&&(str=$(this).text(),a++)})})}),$.post(domainUrl+"grid/index",{type:"phase",preNoSegment:a,columnNumber:n,myRow:i,confirm:"EventStatus"},responceEventStatus,"HTML")}),setInitalHeightWidth(),$("body").on("mouseover",".tab-item",function(){$(this).tooltip("show")}),$("body").on(".mouseout",".tab-item",function(){$(".tooltip").remove()}),$(".node-right").mouseover(function(){$(this).addClass("node-right-trans")}),$(".node-right").mouseout(function(){$(this).removeClass("node-right-trans")}),$("body").on("click",".col-1",function(e){$(".gridICon.iconActive").remove(),$(".grid-dropdown").hide(),$(".center-div  .add-col-wrap").children("ul").removeClass("show"),$(".center-div  td").removeClass("bg-green border-green border-bottom-green border-top-green border-right-green"),$(".dark-gray").removeClass("dark-gray"),$(".center-div  .node-white-circle.node-green-circle").removeClass("node-green-circle");var t=$(this);$(t).hasClass("row-selected")?($(this).removeClass("row-selected "),$(this).nextAll("td").removeClass("row-selected border-top-green"),$(this).parent("tr").prev("tr").children("td.border-light-bottom").removeClass("row-green-border"),$(".center-div").hasClass("process-grid")||$(this).parent("tr").next("tr").children("td.col-1").removeClass("border-top-green")):($(".center-div  td").removeClass("row-selected"),$(this).addClass("row-selected"),$(".center-div  td").parent("tr").prev("tr").children("td.border-light-bottom").removeClass("row-green-border"),$(this).nextAll("td").addClass("row-selected"),$(this).parent("tr").prev("tr").children("td.border-light-bottom").addClass("row-green-border"),$(".center-div").hasClass("process-grid")||$(this).parent("tr").next("tr").children("td.col-1").addClass("border-top-green"),$(".center-div  .row-selected").find(".node-white-circle").addClass("node-green-circle"),$(".center-div  .row-0").find(".row-selected").removeClass("row-selected"),$(".center-div  .row-1").find("td").removeClass("border-top-green")),e.stopPropagation()}),$("body").on("click",".center-div .add-process-series",function(){displayLoader();var e=$(this).closest("td"),t=$(e).closest("tr"),n=($(t).closest("table"),$(e).index());myRow=$(t).index();var i=Array(),a=0,s=0;$(".center-div table").each(function(){$(this);$("tbody tr",$(this)).each(function(e,t){var o=$(this).attr("class");$(this).find("td").each(function(t,r){i[s]=e+"@"+t+"@"+o+"@"+$(this).attr("class")+"@"+$(this).html(),s++,e>=2&&n==t&&a++})})}),$.post(domainUrl+"associations/addProcess",{data:i,myCol:n,preNoSegment:a,noOfSegment:0},associationResponceCreatePhase,"HTML")}),$("body").on("click",".center-div .add-suboperaton-segment",function(){var e=$(this).closest("td"),t=$(e).closest("tr"),n=($(t).closest("table"),$(e).index()),i=$(t).index(),a=0;Array();$(".center-div table").each(function(){$(this);$("tbody tr",$(this)).each(function(e,t){$(this).find("td").each(function(t,i){e>=2&&n==t&&(str=$(this).text(),a++)})})});var s="";$(".center-div .fixed-left-column").find(".operation1 .add-segment  .dropdown-menu").each(function(e,t){$(this).hasClass("show")&&(s=parseInt(e)+parseInt(1))}),$.post(domainUrl+"grid/index",{type:"phase",preNoSegment:a,columnNumber:n,myRow:i,opIndexNo:s,confirm:"SubOpeartion"},responceSubOpearation,"HTML")}),$("body").on("click",".center-div .addPopupPhaseClass",function(){var e=$(this).closest("td"),t=$(e).closest("tr"),n=($(t).closest("table"),$(e).index()),i=($(t).index(),0);$("#course-path-number").hasClass("On")&&gridNavigation.changeColor(),$(".center-div table").each(function(){$(this);$("tbody tr",$(this)).each(function(e,t){$(this).find("td").each(function(t,a){e>=2&&n==t&&(str=$(this).text(),i++)})})});var a=0;0!=(a=""!=(a=$(this).closest("td").nextAll("td").find(".add-role-segment").length)?a:0)?$.post(domainUrl+"associations/index",{type:"phase",preNoSegment:i,columnNumber:n,confirm:"YES"},addresponcePhase,"HTML"):$.post(domainUrl+"associations/index",{type:"phase",preNoSegment1:i,columnNumber1:n,confirm:"NO"},addresponcePhase,"HTML")}),$("body").on("click","li.association-del-segment",function(){if($(this).find("a").hasClass("disabled"))return!1;var e=$(this);bootbox.confirm("Are you sure you want to delete this?",function(t){if(t){var n=e.closest("td"),i=$(n).closest("tr"),a=($(i).closest("table"),$(n).index()),s=$(i).index(),o=$(i).find("td").not(":empty").last().index();parentName=$.grep($(n).attr("class").split(" "),function(e,t){return 0===e.indexOf("parent_")}).join();var r=$(".center-div ."+parentName).length,d=parseInt(s)+parseInt(r)-parseInt(1);displayLoader(),e.closest("td").prev().hasClass("blank")?$(".cell_"+d+"_0").closest("tr").find("td").not("td:first").each(function(){$(this).index()<a&&(col=parseInt(s)-parseInt(1),$(".center-div .cell_"+col+"_"+$(this).index()).html($(this).html()))}):e.closest("tr").find("td").not("td:first").each(function(){$(this).index()<a&&(col=parseInt(d)+parseInt(1),$(".center-div .cell_"+col+"_"+$(this).index()).html($(this).html()))});var l,c;for(l=s;l<=d;l++)for(c=a;c<=o;c++)$(".center-div .cell_"+l+"_"+c).closest("tr").remove();var h=Array(),u=0;$(".center-div table.fixed-left-column").each(function(){$(this);$("tbody tr",$(this)).each(function(e,t){var n=$(this).attr("class");$(this).find("td").each(function(t,i){h[u]=e+"@"+t+"@"+n+"@"+$(this).attr("class")+"@"+$(this).html(),u++})})}),DeleteManifest(),$.post(domainUrl+"associations/deletePhase",{data:h,myCol:a,myRow:s,lastRow:d,lastColumn:o},associationResponceCreatePhase,"HTML")}})}),$("body").on("click",".center-div .addRoleSeries",function(){$_this=$(this);var e=Array(),t=(Array(),0),n=0,i=$_this.closest("td"),a=$(i).closest("tr"),s=($(a).closest("table"),$(i).index());myRow=$(a).index(),$(".center-div table").each(function(){$(this);$("tbody tr",$(this)).each(function(i,a){var o=$(this).attr("class");$(this).find("td").each(function(a,r){e[n]=i+"@"+a+"@"+o+"@"+$(this).attr("class")+"@"+$(this).html(),n++,i>=2&&s==a&&t++})})});$(this).find(".add-role-segment").length;PreParentCol=parseInt(s)+parseInt(2),preChiledVal=$(".center-div .parent_2_"+PreParentCol+" > div.creation-node").find(".col-text > span:first").attr("class"),$(".center-div .process-series").length>0?(displayLoader(),$.post(domainUrl+"associations/addActor",{data:e,myCol:s,myRow:myRow,preNoSegment:t,noOfSegment:0,ActorCheck:preChiledVal,confirm:"NO"},associationResponceCreatePhase,"HTML")):(displayLoader(),$.post(domainUrl+"associations/addRole",{data:e,myCol:s,myRow:myRow,preNoSegment:t,noOfSegment:0,confirm:"NO"},associationResponceCreatePhase,"HTML"))}),$("body").on("click",".deleteSegmentRole",function(){var e=$(this),t=$(this).closest("td").index(),n=Array(),i=0,a=e.closest("td"),s=$(a).closest("tr"),o=($(s).closest("table"),$(a).index());bootbox.confirm("Are you sure you want to delete this series?",function(e){e&&(displayLoader(),$("tr").each(function(){$(this).children("td").eq(t).remove()}),$(".center-div table.fixed-left-column").each(function(){$(this);$("tbody tr",$(this)).each(function(e,t){var a=$(this).attr("class");$(this).find("td").each(function(t,s){n[i]=e+"@"+t+"@"+a+"@"+$(this).attr("class")+"@"+$(this).html(),i++})})}),$.post(domainUrl+"grid/deletePhase",{data:n,myCol:o,myRow:2},responceCreateOperation,"HTML"))})}),$("body").on("click",".center-div .addDomain",function(){displayLoader();var e=$(this).closest("td"),t=$(e).closest("tr"),n=($(t).closest("table"),$(e).index());myRow=$(t).index();var i=Array(),a=0,s=0,o=[],r=[];$(".center-div table").each(function(){$(this);$("tbody tr",$(this)).each(function(e,t){var o=$(this).attr("class");$(this).find("td").each(function(t,r){i[s]=e+"@"+t+"@"+o+"@"+$(this).attr("class")+"@"+$(this).html(),s++,e>=2&&n==t&&(str=$(this).text(),str.toLowerCase().indexOf("add segment")>0&&a++)})})}),$(".center-div .blankRow").each(function(){o.push($(this).index())}),$(".center-div .fixed-left-column tr.seq").each(function(e,t){r.push($(this).index())});var d=[];$(".center-div .fixed-left-column tr").each(function(){if($(this).hasClass("seq")){var e=$(this).find(".domainclass").parents("td").parents("tr").index();"-1"!=e&&d.push(parseInt(e))}});var l=$(".center-div .blankRow").length;$.post(domainUrl+"grid/addLogicDomain",{data:i,myCol:n,preNoSegment:a,noOfSegment:0,checkBlankRows:l,nonSequence:o,logicsN:r,logicRowNo:d},responceCreateOperation,"HTML")}),$("body").on("click",".center-div .addSegmentRole",function(){displayLoader();var e=$(this).closest("td"),t=$(e).closest("tr"),n=($(t).closest("table"),$(e).index());myRow=$(t).index();var i=Array(),a=0,s=0,o=[],r=[];$(".center-div table").each(function(){$(this);$("tbody tr",$(this)).each(function(e,t){var o=$(this).attr("class");$(this).find("td").each(function(t,r){i[s]=e+"@"+t+"@"+o+"@"+$(this).attr("class")+"@"+$(this).html(),s++,e>=2&&n==t&&(str=$(this).text(),str.toLowerCase().indexOf("add segment")>0&&a++)})})}),$(".center-div .blankRow").each(function(){o.push($(this).index())}),$(".center-div .fixed-left-column tr.seq").each(function(e,t){r.push($(this).index())});var d=$(".center-div .blankRow").length;$.post(domainUrl+"grid/addOperationRole",{data:i,myCol:n,preNoSegment:a,noOfSegment:0,checkBlankRows:d,nonSequence:o,logicsN:r},responceCreateOperation,"HTML")}),$("body").on("click",".center-div .new-Role",function(){var e=$(this),t="",n="",i=e.closest("td").siblings(".role").find(".creation-node").parent().length;parseInt(i)<1?bootbox.confirm("Are you sure you want to add node in current role?",function(t){if(t){displayLoader();var n=e.closest("td"),i=$(n).closest("tr"),a=($(i).closest("table"),$(n).index());myRow=$(i).index();var s=Array(),o=0,r=0;$(".center-div table").each(function(){$(this);$("tbody tr",$(this)).each(function(e,t){var n=$(this).attr("class");$(this).find("td").each(function(t,i){s[r]=e+"@"+t+"@"+n+"@"+$(this).attr("class")+"@"+$(this).html(),r++,e>=2&&a==t&&(str=$(this).text(),str.toLowerCase().indexOf("add segment")>0&&o++)})})}),$.post(domainUrl+"grid/addOperationNode",{data:s,myCol:a,myRow:myRow,preNoSegment:o,noOfSegment:0},responceCreateOperation,"HTML")}}):bootbox.confirm("Are you sure you want to add node in current role?",function(i){if(i){displayLoader();var a=e.closest("td"),s=$(a).closest("tr");$(s).closest("table"),$(a).index(),$(s).index();n=e.closest("td").html(),e.closest("td").removeClass("disabled-role"),t=e.closest("td").siblings(".role").find(".creation-node").parent(),e.closest("td").siblings(".role").find(".creation-node").parent().addClass("disabled-role"),e.closest("td").html(t.html()),t.html(n),hideLoader(),$(".lodding").hide()}})}),$("body").on("click",".center-div .new-Domain",function(){var e=$(this),t="",n="",i=$(".center-div .fixed-left-column .domain-count").length;1==parseInt(i)?bootbox.confirm("Are you sure you want to add domain in current row?",function(t){if(t){displayLoader();var n=e.closest("td"),i=$(n).closest("tr"),a=($(i).closest("table"),$(n).index());myRow=$(i).index();var s=parseInt(myRow)-1;$(".center-div").find(".cell_"+s+"_"+a).children("div").addClass("domainclass");var o=Array(),r=0,d=0;$(".center-div table").each(function(){$(this);$("tbody tr",$(this)).each(function(e,t){var n=$(this).attr("class");$(this).find("td").each(function(t,i){o[d]=e+"@"+t+"@"+n+"@"+$(this).attr("class")+"@"+$(this).html(),d++,e>=2&&a==t&&(str=$(this).text(),str.toLowerCase().indexOf("add segment")>0&&r++)})})}),$.post(domainUrl+"grid/addOperationDomain",{data:o,myCol:a,myRow:myRow,preNoSegment:r,noOfSegment:0},responceCreateOperation,"HTML")}}):bootbox.confirm("Are you sure you want to add domain in current row?",function(i){if(i){displayLoader();var a=e.closest("td"),s=$(a).closest("tr"),o=($(s).closest("table"),$(a).index()),r=$(s).index(),d=parseInt(r)-1;$(".center-div").find(".cell_"+d+"_"+o).children("div").addClass("domainclass"),n=e.closest("td").html(),t=e.closest("td").siblings(".role").find(".creation-node").parent(),e.closest("td").html(t.html()),t.html(n),removeInteractiobborder(),hideLoader(),$(".lodding").hide()}})}),$("body").on("click",".center-div li.delete-phase-actor-series",function(){var e=$(this).closest("td"),t=$(e).closest("tr"),n=($(t).closest("table"),$(e).index()),i=Array(),a=0,s=$(".center-div .parent_2_"+n).length;parseInt(2),parseInt(s),parseInt(1);bootbox.confirm("Are you sure you want to delete hhh this series?",function(e){if(e){displayLoader(),$(".center-div.association-grid .col-"+n).prev("td").nextAll("td").children("span").parent("td").remove(),$(".center-div.association-grid .col-"+n).prev("td").nextAll("td").children("div").parent("td").remove();var t=0,s=0;$(".center-div .fixed-left-column").find("tr").each(function(e,n){++t>=3&&($(this).find("td").each(function(e,t){$(this).find(".custom-node").length>0&&s++}),0==s?$(this).remove():s=0)}),$(".center-div table.fixed-left-column").each(function(){$(this);$("tbody tr",$(this)).each(function(e,t){var n=$(this).attr("class");$(this).find("td").each(function(t,s){i[a]=e+"@"+t+"@"+n+"@"+$(this).attr("class")+"@"+$(this).html(),a++})})}),DeleteManifest(),$.post(domainUrl+"associations/deletePhase",{data:i,myCol:n,myRow:2},associationResponceCreatePhase,"HTML")}}),$(".row-1").children("td:nth-child(2)").removeClass("fixed-header-left"),$(".row-0").children("td:nth-child(2)").removeClass("fixed-header-left")}),$("body").on("click","li.delete-series",function(){var e=$(this).closest("td"),t=$(e).closest("tr"),n=($(t).closest("table"),$(e).index()),i=Array(),a=0,s=$(".center-div .parent_2_"+n).length;parseInt(2),parseInt(s),parseInt(1);bootbox.confirm("Are you sure you want to delete this series?",function(e){if(e){displayLoader(),$(".center-div .col-"+n).prev("td").nextAll("td").children("span").parent("td").remove(),$(".center-div .col-"+n).prev("td").nextAll("td").children("div").parent("td").remove();var t=0,s=0;$(".center-div .fixed-left-column tr").each(function(e,n){++t>=3&&($(this).find("td").each(function(e,t){$(this).find(".custom-node").length>0&&s++}),0==s?$(this).remove():s=0)}),$(".center-div table.fixed-left-column").each(function(){$(this);$("tbody tr",$(this)).each(function(e,t){var n=$(this).attr("class");$(this).find("td").each(function(t,s){i[a]=e+"@"+t+"@"+n+"@"+$(this).attr("class")+"@"+$(this).html(),a++})})}),DeleteManifest(),$.post(domainUrl+"grid/deletePhase",{data:i,myCol:n,myRow:2},responceCreatePhase,"HTML")}}),$(".row-1").children("td:nth-child(2)").removeClass("fixed-header-left"),$(".row-0").children("td:nth-child(2)").removeClass("fixed-header-left")}),$("body").on("click","li.del-segment",function(){if($(this).find("a").hasClass("disabled"))return!1;var e=$(this);bootbox.confirm("Are you sure you want to delete this?",function(t){if(t){var n=e.closest("td"),i=$(n).closest("tr"),a=($(i).closest("table"),$(n).index()),s=$(i).index(),o=$(i).find("td").not(":empty").last().index();parentName=$.grep($(n).attr("class").split(" "),function(e,t){return 0===e.indexOf("parent_")}).join();var r=$(".center-div ."+parentName).length,d=parseInt(s)+parseInt(r)-parseInt(1);displayLoader(),e.closest("td").prev().hasClass("blank")?$(".cell_"+d+"_0").closest("tr").find("td").not("td:first").each(function(){$(this).index()<a&&(col=parseInt(s)-parseInt(1),$(".center-div .cell_"+col+"_"+$(this).index()).html($(this).html()))}):e.closest("tr").find("td").not("td:first").each(function(){$(this).index()<a&&(col=parseInt(d)+parseInt(1),$(".center-div .cell_"+col+"_"+$(this).index()).html($(this).html()))});var l,c;for(l=s;l<=d;l++)for(c=a;c<=o;c++)$(".center-div .cell_"+l+"_"+c).closest("tr").remove();var h=Array(),u=0;$(".center-div table.fixed-left-column").each(function(){$(this);$("tbody tr",$(this)).each(function(e,t){var n=$(this).attr("class");$(this).find("td").each(function(t,i){h[u]=e+"@"+t+"@"+n+"@"+$(this).attr("class")+"@"+$(this).html(),u++})})}),DeleteManifest(),$.post(domainUrl+"grid/deletePhase",{data:h,myCol:a,myRow:s,lastRow:d,lastColumn:o},responceCreatePhase,"HTML")}})}),$("body").on("click","li.del-operation-segment",function(){if($(this).find("a").hasClass("disabled"))return!1;var e=$(this);bootbox.confirm("Are you sure you want to delete this?",function(t){if(t){displayLoader();var n=e.closest("td"),i=$(n).closest("tr"),a=($(i).closest("table"),$(n).index()),s=$(i).index(),o=$(i).find("td").not(":empty").last().index();parentName=$.grep($(n).attr("class").split(" "),function(e,t){return 0===e.indexOf("parent_")}).join();var r,d,l=$(".center-div .parent_"+s+"_"+a).length,c=parseInt(s)+parseInt(l),h=parseInt(a)-parseInt(1),u=parseInt(c)-parseInt(1),p=$(".center-div .fixed-left-column tr").eq(parseInt(s)-1).children("td.col-"+a).hasClass("blankRowTd"),f=$(".center-div .parent_"+parseInt(c)+"_"+a).length,v=$(".center-div .parent_"+u+"_"+h+" > div.creation-node").find(".col-text > span:first").attr("class"),m="",g=$(".center-div ."+parentName).length;if(p&&"destructure"==v)b=parseInt(s)+parseInt(g)-parseInt(1);else var b=parseInt(s)+parseInt(g)-parseInt(1);if(e.closest("td").prev().hasClass("blank")?$(".cell_"+b+"_0").closest("tr").find("td").not("td:first").each(function(){$(this).index()<a&&(col=parseInt(s)-parseInt(1),$(".center-div .cell_"+col+"_"+$(this).index()).html($(this).html()))}):e.closest("tr").find("td").not("td:first").each(function(){$(this).index()<a&&(col=parseInt(b)+parseInt(1),$(".center-div .cell_"+col+"_"+$(this).index()).html($(this).html()))}),p&&"destructure"==v){if(e.closest("tr").prev("tr").hasClass("blankRow"))for(r=parseInt(s)-1;r<=parseInt(b);r++)for(d=a;d<=parseInt(o)+1;d++)$(".center-div .cell_"+r+"_"+d).closest("tr").remove();m=parseInt(a)-1}else if(1==p&&"undefined"==v&&f<1)for(m="",r=parseInt(s)-1;r<=parseInt(b);r++)for(d=a;d<=parseInt(o)+1;d++)$(".center-div .cell_"+r+"_"+d).closest("tr").remove();else for(m="",r=parseInt(s);r<=b;r++)for(d=a;d<=o;d++)$(".center-div .cell_"+r+"_"+d).closest("tr").remove();var C=Array(),w=0;$(".center-div table.fixed-left-column").each(function(){$(this);$("tbody tr",$(this)).each(function(e,t){var n=$(this).attr("class");$(this).find("td").each(function(t,i){C[w]=e+"@"+t+"@"+n+"@"+$(this).attr("class")+"@"+$(this).html(),w++})})}),$.post(domainUrl+"grid/deleteOperation",{data:C,myCol:a,myRow:s,lastRow:b,lastColumn:o,myassignCol:m},responceCreateOperation,"HTML")}})}),$("body").on("click",".add-panels",function(){$(this).find(".node-white-circle").addClass("node-white-circle-expanded"),displayLoader(),setGridWidth(selectedGridId),setTableWidth();var e=0,t=$("#center-screen").width();if(calculativeWidth+113>=t){if(0==$(".entr-center-tab ul").find(".detailNodeIcon").length){var n='<div class="detailNodeIcon" ><span class="rightNode1Icon"><img src="'+domainUrl+'/public/img/tab-arrow.png"></a></div>';$(n).appendTo(".entr-center-tab ul")}else $(".detailNodeIcon").show();calculativeWidth=0,$(".tab-item").each(function(e,n){(calculativeWidth+=$(n).width())+113>=t&&$(this).hide()})}e="tabIndex_"+(new Date).getTime().toString(),$(".entr-center-tab ul li a").each(function(e,t){$(this).removeClass("active").find("div.tab-node-circle").removeClass("node-green-circle").addClass("node-white-circle")});var i='<li data-toggle="tooltip" data-placement="bottom"  data-original-title="Undefined" class="tab-item" tab-index = '+e+'> <a href="#" class="active"> <div class="tab-node-circle node-green-circle">N</div><span class="ref-name">Undefined</span> <span class="cross-tab fa fa-times"></span> </a></li>';$(".entr-center-tab ul").prepend(i),$(".DropDownTabList ul li").removeClass("active");var a="<li tab-index = "+e+' class="active"><div class="node-circle node-white-circle show-col-wrap">N</div><span class="ref-name">Undefined</span></li>';$(".DropDownTabList ul").prepend(a),calculativeWidth=0,$(".tab-item").each(function(e,t){calculativeWidth+=$(t).width()}),$(".grid-div").each(function(e,t){$(this).removeClass("center-div")}),$(this).hasClass("Grid-process-panel")?($(".center-wrap.modes").show(),$(".center-wrap.coursemodes").hide(),$.post(domainUrl+"grid",{type:"mainPage"},responceGridButton,"HTML")):$(this).hasClass("Grid-accounts-panel")?($(".center-wrap.modes").show(),$(".center-wrap.coursemodes").hide(),$.post(domainUrl+"accounts",{type:"mainPage"},responceAccountingGridButton,"HTML")):$(this).hasClass("Grid-association-panel")?($(".center-wrap.modes").show(),$(".center-wrap.coursemodes").hide(),$.post(domainUrl+"associations",{type:"mainPage"},responceAssociationGridButton,"HTML")):$(this).hasClass("Course-association-panel")&&($(".center-wrap.modes").hide(),$(".center-wrap.coursemodes").show(),$.post(domainUrl+"courses",{type:"mainPage"},responceGridButton,"HTML")),$(".center-div").scrollLeft(0)}),$("body").on("click",".dashboard-panel",function(){$(".center-wrap.modes").show(),$(".center-wrap.coursemodes").hide(),$("#dashboard_item").remove();$(".entr-center-tab ul").prepend('<li id="dashboard_item" data-toggle="tooltip" data-placement="bottom"  data-original-title="Dashboard" class="tab-item" tab-index = "tabIndex_0_0_7"> <a href="#" class="active"> <div class="tab-node-circle node-green-circle">N</div><span class="ref-name">Dashbo...</span> <span class="cross-tab fa fa-times"></span> </a></li>'),$.post(domainUrl+"dashboard",{type:"mainPage"},responceDashboardButton,"HTML"),$(".DropDownTabList ul li").removeClass("active");$(".DropDownTabList ul").prepend('<li tab-index = "tabIndex_0_0_7"  class="active"><div class="node-circle node-white-circle show-col-wrap">N</div><span class="ref-name">Dashboard</span></li>')}),$("body").on("click",".courseboard-panel",function(){$(".center-wrap.modes").show(),$(".center-wrap.coursemodes").hide(),$("#courseboard_item").remove();$(".entr-center-tab ul").prepend('<li id="courseboard_item" data-toggle="tooltip" data-placement="bottom"  data-original-title="Courseboard" class="tab-item" tab-index = "tabIndex_0_0_8"> <a href="#" class="active"> <div class="tab-node-circle node-green-circle">N</div><span class="ref-name">Course...</span> <span class="cross-tab fa fa-times"></span> </a></li>'),$.post(domainUrl+"courseboard",{type:"mainPage"},responceCourseboardButton,"HTML"),$(".DropDownTabList ul li").removeClass("active");$(".DropDownTabList ul").prepend('<li tab-index = "tabIndex_0_0_8"  class="active"><div class="node-circle node-white-circle show-col-wrap">N</div><span class="ref-name">Courseboard</span></li>')}),$("body").on("dblclick",".center-div .col-head",function(e){$(".center-div  td").removeClass("row-selected"),$(".center-div  td").parent("tr").prev("tr").children("td.border-light-bottom").removeClass("row-green-border"),$("#operationPaneFlyout").hasClass("in")||setTableWidth();var t=$(this).parent("td, th"),n=$(t).parent("tr"),i=($(n).parent(),$(t).index());$(".center-div  .add-segment ul.dropdown-menu, .add-status ul.dropdown-menu").removeClass("show");var a=0;$(".center-div  td").each(function(e){e===i&&($(".center-div .col-"+i).hasClass("collapse")?($(".center-div .col-"+i).removeClass("collapse"),$(".center-div .col-"+i).find("i").removeClass("rotate"),$(".center-div .col-"+i).nextAll("th").each(function(e,t){var n=parseInt($(t).css("left"));$(t).css("left",n+75)}),9==i&&$(".center-div .col-9 span.col-node-text").each(function(e,t){$(this).hasClass("col-node-Actor-Perspective")})):($(".center-div .col-"+i).addClass("collapse"),$(".center-div .fixed-left-column").width("+75"),$(".center-div .col-"+i).find("i").addClass("rotate"),$(".center-div .col-"+i).nextAll("th").each(function(e,t){var n=parseInt($(t).css("left"));$(t).css("left",n-75)}))),a++}),$(".center-div .col-"+i).hasClass("collapse")?$(".center-div .row-2 .col-"+i+" span").hasClass("col-node-text custom-node")||$(".center-div .row-3 .col-"+i+" span").hasClass("col-node-text custom-node")?$(".center-div .col-"+i).find("span.custom-node.col-node-text").each(function(e,t){wordcnt=$(this).attr("placeholder"),void 0==wordcnt||(showchr=wordcnt.substr(0,2),$(this).text(showchr+"...")),$(this).hasClass("col-node-Actor-Perspective")&&$(".col-node-Actor-Perspective").css({position:"absolute",left:"27px"})}):$(".center-div .col-"+i).find("input.custom-node").each(function(e,t){wordcnt=$(this).attr("placeholder"),inputvalue=$(this).val(),$(this).attr("colValue",inputvalue)}):$(".center-div .row-2 .col-"+i+" span").hasClass("col-node-text custom-node")||$(".center-div .row-3 .col-"+i+" span").hasClass("col-node-text custom-node")?$(".center-div .col-"+i).find("span.custom-node").each(function(e,t){var n=$(this).attr("placeholder");$(this).text(n)}):$(".center-div .col-"+i).find("input.custom-node").each(function(e,t){}),fixCollapseTable(),$(".center-div .col-"+i).hasClass("collapse")?$(".center-div .col-"+i).each(function(e,t){$(this).find(".custom-node").attr("readonly","true")}):$(".center-div .col-"+i).each(function(e,t){$(this).find(".custom-node").removeAttr("readonly")})}),$("body").on("dblclick",".center-div .col-1 .col-head",function(e){$("i.segment").removeClass("show"),$(".center-div .col-1").hasClass("collapse")?($(".center-div .fTHLC-outer-wrapper").css({paddingLeft:73}),$(".center-div .fixed-top-header").css({marginLeft:0}),$(".center-div.association-grid .fTHLC-outer-wrapper").css({paddingLeft:73}),$(".center-div .association-grid .fixed-top-header").css({marginLeft:0}),$(".center-div.manifest .fTHLC-outer-wrapper").css({paddingLeft:75})):($(".center-div .fTHLC-outer-wrapper").css({paddingLeft:172}),$(".center-div .fixed-top-header").css({marginLeft:99}),$(".center-div.association-grid .fTHLC-outer-wrapper").css({paddingLeft:172}),$(".center-div .fixed-top-header .fixed-top-header").css({marginLeft:99}),$(".center-div.manifest .fTHLC-outer-wrapper").css({paddingLeft:174}))}),$("body").on("click",".center-div .add-phase-segment",function(e){var t=$(this).closest("td"),n=$(t).closest("tr"),i=($(n).closest("table"),$(t).index()),a=$(this).closest("td").nextAll("td").find(".add-phase-segment").length,s=$(this).closest("td").nextAll("td").find(".add-operation").length,o=$(this).closest("td").nextAll("td").find(".add-role-segment").length;a>0?($(".col-"+i).find(".add-right").addClass("disabled"),$(".col-"+i).find(".popupPhaseClass").closest("li").addClass("disabled"),$(".col-"+i).find(".add-operation-series").closest("li").addClass("disabled"),$(".col-"+i).find(".addPopupPhaseClass").closest("li").addClass("disabled"),$(".col-"+i).find(".add-role-series").closest("li").addClass("disabled")):s>0?($(".col-"+i).find(".add-operation-series").closest("li").addClass("disabled"),$(".col-"+i).find(".add-operation-series").closest("li").addClass("disabled")):o>0?($(".col-"+i).find(".add-right").removeClass("disabled"),$(".col-"+i).find(".add-role-series").closest("li").addClass("disabled"),$(".col-"+i).find(".addPopupPhaseClass").closest("li").removeClass("disabled")):($(".col-"+i).find(".add-right").removeClass("disabled"),$(".col-"+i).find(".popupPhaseClass").closest("li").removeClass("disabled"),$(".col-"+i).find(".add-operation-series").closest("li").removeClass("disabled"),$(".col-"+i).find(".addPopupPhaseClass").closest("li").removeClass("disabled"),$(".col-"+i).find(".add-role-series").closest("li").removeClass("disabled"))}),$("body").on("click",".center-div .phase-segment",function(e){var t=$(this).closest("td"),n=$(t).closest("tr"),i=($(n).closest("table"),$(t).index()),a=$(n).index();removeClassSave();$(this);$(".parent_2_"+i).find(".add-above-segment").addClass("disabled"),$(".parent_2_"+i).find(".add-association-above-segment").addClass("disabled");var s=$(this).closest("td").nextAll("td").find(".phase-segment").length;s>0&&($(this).siblings(".add-segment").find("li:nth-child(1)").children("a").addClass("disabled "),$(this).siblings(".add-segment").find(".add-above-segment").addClass("no-bg").children("a").addClass("disabled "),$(this).siblings(".add-segment").find(".add-below-segment").addClass("no-bg").children("a").addClass("disabled "),$(this).siblings(".add-segment").find(".add-association-above-segment").addClass("no-bg").children("a").addClass("disabled "),$(this).siblings(".add-segment").find(".add-association-below-segment").addClass("no-bg").children("a").addClass("disabled "));var a=$(n).index(),o="",r="",d=parseInt(i)-1;parentName=$.grep($(t).attr("class").split(" "),function(e,t){return 0===e.indexOf("parent_")}).join();var l=$(".center-div ."+parentName).length,c=(parseInt(a),parseInt(l),parseInt(2),parseInt(a)+parseInt(l)-parseInt(1));o=$(".center-div .parent_"+a+"_"+d+" > div.creation-node").find(".col-text > span:first").attr("class"),r=$(".center-div .parent_"+c+"_"+d+" > div.creation-node").find(".col-text > span:first").attr("class"),"creation"==o?($(".add-up-segment").addClass("disabled"),$(".add-down-segment").removeClass("disabled").children("a").removeClass("disabled"),$(".add-below-segment").removeClass("disabled").children("a").removeClass("disabled"),$(".add-asso-up-segment").addClass("disabled"),$(".add-asso-down-segment").removeClass("disabled").children("a").removeClass("disabled")):"destructure"==r?($(".add-down-segment").addClass("disabled"),$(".add-up-segment").removeClass("disabled").children("a").removeClass("disabled"),$(".add-asso-down-segment").addClass("disabled"),$(".add-asso-up-segment").removeClass("disabled").children("a").removeClass("disabled"),$(".add-above-segment").removeClass("disabled").children("a").removeClass("disabled"),$(".add-association-below-segment").removeClass("disabled").children("a").removeClass("disabled")):($(".add-up-segment").removeClass("disabled").children("a").removeClass("disabled"),$(".add-down-segment").removeClass("disabled").children("a").removeClass("disabled"),$(".add-asso-up-segment").removeClass("disabled").children("a").removeClass("disabled"),$(".add-asso-down-segment").removeClass("disabled").children("a").removeClass("disabled"),$(".add-above-segment").removeClass("disabled").children("a").removeClass("disabled"),$(".add-below-segment").removeClass("disabled").children("a").removeClass("disabled"),$(".add-association-above-segment").removeClass("disabled").children("a").removeClass("disabled"),$(".add-association-below-segment").removeClass("disabled").children("a").removeClass("disabled")),s>0?($(".col-"+i).find(".add-segment").find(".add-below-segment").addClass("disabled"),$(".col-"+i).find(".add-segment").find(".add-above-segment").addClass("disabled"),$(".col-"+i).find(".add-segment").find(".add-association-below-segment").addClass("disabled"),$(".col-"+i).find(".add-segment").find(".add-association-above-segment").addClass("disabled")):($(".col-"+i).find(".add-segment").find(".add-below-segment").removeClass("disabled"),$(".col-"+i).find(".add-segment").find(".add-above-segment").removeClass("disabled"),$(".col-"+i).find(".add-segment").find(".add-association-below-segment").removeClass("disabled"),$(".col-"+i).find(".add-segment").find(".add-association-above-segment").removeClass("disabled")),1==$(".col-"+i).find(".phase-segment").length?$(".association-del-segment").hide():$(".association-del-segment").show()}),$("body").on("click",".center-div .add-role-segment",function(e){var t=$(this).closest("td"),n=$(t).closest("tr"),i=($(n).closest("table"),$(t).index()),a=$(".center-div .process-series").length;$(this).closest("td").nextAll("td").find(".add-role-segment").length>0?($(".col-"+i).find(".add-right").addClass("disabled"),$(".col-"+i).find(".addpopupPhaseClass").closest("li").addClass("disabled"),$(".col-"+i).find(".addRoleSeries").closest("li").addClass("disabled"),$(".col-"+i).find(".add-process-series").closest("li").addClass("disabled")):a>0?$(".col-"+i).find(".add-process-series").closest("li").addClass("disabled"):($(".col-"+i).find(".add-process-series").closest("li").removeClass("disabled"),$(".col-"+i).find(".add-right").removeClass("disabled"),$(".col-"+i).find(".addRoleSeries").closest("li").removeClass("disabled"),$(".col-"+i).find(".addpopupPhaseClass").closest("li").removeClass("disabled"))}),$("body").on("click",".center-div .add",function(e){$(".center-div  .col-head").removeClass("dark-gray"),$(".center-div  i.segment").removeClass("show"),$(".center-div  .border-right-green").removeClass("border-right-green"),removeClassSave(),$(".center-div  td").removeClass("row-selected"),$(".center-div  td,.center-div  th").removeClass("bg-green border-left-green border-bottom-green border-top-green"),$(".center-div  td,.center-div  th").find(".node-white-circle").removeClass("node-green-circle"),removeSelection();var t=$(this).closest("td, th"),n=$(t).parent("tr"),i=($(n).parent(),$(t).index()),a=$(this).offset().left,s=0;s=a>987?a-145:a;var o=$(this).offset().top;$(".add-colums").children(".dropdown-menu").css({left:s,top:o+16});var r=0;$("tr.row-0, tr.row-1").find("td, th").each(function(e,t){e===i&&($(".add-colums").children(".show-"+i).hasClass("show")?($("i.add").removeClass("show show-icon active"),$(".add-colums").children(".show-"+i).removeClass("show")):($("i.add").removeClass("show show-icon active"),$(this).find("i.add").addClass("show-icon active"),$(".add-colums").children(".dropdown-menu").removeClass("show"),$(".add-colums").children(".show-"+i).addClass("show"),$(".add-colums").children(".show-"+i).find(".delete-series").removeClass("disabled"),$(".add-colums").children(".show-"+i).find(".delete-series a").removeClass("disabled")),$(".add-segment .dropdown-menu").removeClass("show")),r++}),$(".add-check-role").children("ul").removeClass("show"),e.stopPropagation()}),$("body").on("click",".segment",function(e){$(".col-head").removeClass("dark-gray"),$(".border-right-green").removeClass("border-right-green"),$("td").removeClass("row-selected"),$("td,th").removeClass("bg-green border-left-green border-bottom-green border-top-green"),$("td,th").find(".node-white-circle").removeClass("node-green-circle"),$("td").parent("tr").prev("tr").children("td.border-light-bottom").removeClass("row-green-border");var t=$(this).offset().top,n=$(this).offset().left,i=0,a=$(this).closest("td").find(".add-segment ul.dropdown-menu, .add-status ul.dropdown-menu").height();i=n>980?n-145:n,setTop=t>450?t-a-15:t,$(".add-segment ul.dropdown-menu, .add-status ul.dropdown-menu").css({left:i,top:setTop+15}),removeSelection(),$(".add-colums").children(".dropdown-menu").removeClass("show"),$(".segment").removeClass("show"),$(this).closest("td").find(".add-segment ul.dropdown-menu, .add-status ul.dropdown-menu").hasClass("show")?($(this).addClass("active show"),$(this).closest("td").find(".add-segment ul.dropdown-menu, .add-status ul.dropdown-menu").removeClass("show")):($(".add-segment ul.dropdown-menu, .add-status ul.dropdown-menu").removeClass("show"),$(this).addClass("active show"),$(this).closest("td").find(".add-segment ul.dropdown-menu, .add-status ul.dropdown-menu").addClass("show"));var s=$(this).closest("td"),o=$(s).closest("tr"),r=($(o).closest("table"),$(s).index());myRow=$(o).index(),$(".center-div .fixed-left-column .row"+myRow).find(".col-"+r).next("td").next("td").find(".operation-delete").length>0?$(".center-div .fixed-left-column .col-"+r).find(".dropdown-menu.show .add-suboperaton-segment").addClass("disabled"):$(".center-div .fixed-left-column .col-"+r).find(".dropdown-menu.show .add-suboperaton-segment").removeClass("disabled"),e.stopPropagation()}),$("body").on("click",".add-segment",function(e){var t=$(this).closest("td"),n=$(t).closest("tr"),i=($(n).closest("table"),$(t).index());myRow=$(n).index();var a=parseInt(i)-parseInt(1),s=parseInt(myRow)-parseInt(1),o=$(".center-div .parent_"+myRow+"_"+i).length,r=parseInt(myRow)+parseInt(o),d=$(".center-div .fixed-left-column tr").eq(r).children("td.col-"+i).hasClass("blankRowTd"),l=$(".center-div .parent_"+myRow+"_"+a+" > div.creation-node").find(".col-text > span:first").attr("class"),c=($(".center-div .parent_"+parseInt(r)+"_"+i).length,$(".center-div .parent_"+parseInt(s)+"_"+i).length);"creation"==l&&d?$(".center-div .col-"+i).find(".del-operation-segment").closest("li").addClass("disabled"):"creation"==l&&0==c?$(".center-div .col-"+i).find(".del-operation-segment").closest("li").addClass("disabled"):$(".center-div .col-"+i).find(".del-operation-segment").closest("li").removeClass("disabled"),e.stopPropagation()}),$("body").click(function(){$("i.segment").hide(),$("i.segment").removeClass("active show"),$(".row-green-border").removeClass("row-green-border"),$(".row-selected").removeClass("row-selected"),$(".border-top-green").removeClass("border-top-green"),$(".border-right-green").removeClass("border-right-green"),$(".dark-gray").removeClass("dark-gray"),removeSelection(),$("#main #node-wrapper li.node-selected").removeClass("node-selected")}),showStatusDrp(),$("body").on("click",".add-up-segment",function(){$(this).closest(".dropdown-menu").removeClass("show");var e=$(this).closest("td"),t=$(e).parent("tr"),n=($(t).parent(),$(e).index());myRow=$(t).index(),moveSegment(myRow,n,"UP")}),$("body").on("click",".add-down-segment",function(){$(this).closest(".dropdown-menu").removeClass("show");var e=$(this).closest("td"),t=$(e).parent("tr"),n=($(t).parent(),$(e).index());myRow=$(t).index(),moveSegment(myRow,n,"DOWN")}),$("body").on("click",".add-asso-up-segment",function(){$(this).closest(".dropdown-menu").removeClass("show");var e=$(this).closest("td"),t=$(e).parent("tr"),n=($(t).parent(),$(e).index());myRow=$(t).index(),moveAssoSegment(myRow,n,"UP")}),$("body").on("click",".add-asso-down-segment",function(){$(this).closest(".dropdown-menu").removeClass("show");var e=$(this).closest("td"),t=$(e).parent("tr"),n=($(t).parent(),$(e).index());myRow=$(t).index(),moveAssoSegment(myRow,n,"DOWN")}),$("body").on("click",".center-div .add-below-segment",function(){$(this).closest(".dropdown-menu").removeClass("show");var e=0,t=$(this).closest("td"),n=$(t).parent("tr"),i=($(n).parent(),$(t).index());myRow=$(n).index(),nonSequence=[],$(".center-div .blankRow").each(function(){nonSequence.push($(this).index())});var a=$(".center-div .fixed-left-column .role-count").length;e=parseInt(a);var s=$(".center-div .parent_"+myRow+"_"+i).length,o=$(".center-div .fixed-left-column .domain-count").length;addSegment(myRow,i,"Below",e,nonSequence,s,o)}),$("body").on("click",".center-div .add-above-segment",function(){$(this).closest(".dropdown-menu").removeClass("show");var e=0,t=$(this).closest("td"),n=$(t).parent("tr"),i=($(n).parent(),$(t).index());myRow=$(n).index(),nonSequence=[],$(".center-div .blankRow").each(function(){nonSequence.push($(this).index())});var a=$(".center-div .parent_"+myRow+"_"+i).length,s=$(".center-div .fixed-left-column .role-count").length;e=parseInt(s);var o=$(".center-div .fixed-left-column .domain-count").length;addSegment(myRow,i,"Above",e,nonSequence,a,o)}),$("body").on("click",".center-div .add-association-above-segment",function(){$(this).closest(".dropdown-menu").removeClass("show");var e=$(this).closest("td"),t=$(e).parent("tr"),n=($(t).parent(),$(e).index());myRow=$(t).index();var i=$(".center-div .fixed-left-column").find(".Process").length;checkrole=$(".center-div .fixed-left-column .addAssociationRole").length,addAssociationSegment(myRow,n,"Above",i,checkrole)}),$("body").on("click",".center-div .add-association-below-segment",function(){$(this).closest(".dropdown-menu").removeClass("show");var e=$(this).closest("td"),t=$(e).parent("tr"),n=($(t).parent(),$(e).index());myRow=$(t).index();var i=$(".center-div .fixed-left-column .Process").length;checkrole=$(".center-div .fixed-left-column .addAssociationRole").length,addAssociationSegment(myRow,n,"Below",i,checkrole)}),$("body").on("click",".center-div .add-below-non-sequence-operation-segment",function(){var e=0;$(this).closest(".dropdown-menu").removeClass("show");var t=$(this).closest("td"),n=$(t).parent("tr"),i=($(n).parent(),$(t).index());myRow=$(n).index();var a=$(".center-div .fixed-left-column .role-count").length;e=parseInt(a);var s=$(".center-div .fixed-left-column .domain-count").length,o=$(".center-div .parent_"+myRow+"_"+i).length;addOperationSegment(myRow,i,"Below",e,"NonSquential",s,o)}),$("body").on("click",".center-div .add-below-operation-segment",function(){var e=0;$(this).closest(".dropdown-menu").removeClass("show");var t=$(this).closest("td"),n=$(t).parent("tr"),i=($(n).parent(),$(t).index());myRow=$(n).index();var a=$(".center-div .fixed-left-column .role-count").length;e=parseInt(a);var s=$(".center-div .fixed-left-column .domain-count").length,o=$(".center-div .parent_"+myRow+"_"+i).length;addOperationSegment(myRow,i,"Below",e,"",s,o)}),$("body").on("click",".center-div .add-above-operation-segment",function(){var e=0;$(this).closest(".dropdown-menu").removeClass("show");var t=$(this).closest("td"),n=$(t).parent("tr"),i=($(n).parent(),$(t).index());myRow=$(n).index();var a=$(".center-div .fixed-left-column .role-count").length;e=parseInt(a);var s=$(".center-div .fixed-left-column .domain-count").length,o=$(".center-div .parent_"+myRow+"_"+i).length,r=$(".center-div .fixed-left-column tr").eq(parseInt(myRow)-1).children("td.col-"+i).hasClass("blankRowTd");addOperationSegment(myRow,i,"Above",e,"",s,o,r)}),$("body").on("click",".center-div .add-logic-operation-segment",function(){var e=0;$(this).closest(".dropdown-menu").removeClass("show");var n=$(this).closest("td"),i=$(n).parent("tr"),a=($(i).parent(),$(n).index());myRow=$(i).index();var s=$(".center-div .fixed-left-column .role-count").length;e=parseInt(s);var o=$(".center-div .parent_"+myRow+"_"+a).length,r=$(".center-div .fixed-left-column .domain-count").length;if(0==r){d=$(this).closest("td").closest("tr").children("td").length;t(myRow,parseInt(d)-parseInt(3),0,e,0,0,o,d,a)}else{var d=$(i).find("td").not(":empty").last().index();addLogicOperationSegment(myRow,a,"Below",e,"",r,o,d)}}),$("body").on("click",".center-div .add-below-logic-non-sequence-operation-segment",function(){var t=0;$(this).closest(".dropdown-menu").removeClass("show");var n=$(this).closest("td"),i=$(n).parent("tr"),a=($(i).parent(),$(n).index());myRow=$(i).index();var s=$(".center-div .fixed-left-column .role-count").length;t=parseInt(s);var o=$(".center-div .fixed-left-column .domain-count").length,r=$(".center-div .parent_"+myRow+"_"+a).length;if(0==o){d=$(this).closest("td").closest("tr").children("td").length;e(myRow,parseInt(d)-parseInt(3),0,t,0,0,r,d,a)}else{var d=$(i).find("td").not(":empty").last().index();addLogicOperationSegment(myRow,a,"Below",t,"NonSquential",o,r,d)}}),$("body").on("click",".center-div .check-domain",function(e){var t=$(".center-div .fixed-top-header").find(".check-domain").length,n=$(this).siblings(".add-check-domain").offset().left,i=$(this).siblings(".add-check-domain").offset().top,a=0;a=n>987?n-145:n,$(".center-div .add-check-domain").children(".dropdown-menu").css({left:a,top:i}),t>1?$(this).parent().find(".add-check-domain").find("li.deleteSegmentRole").removeClass("disabled"):$(this).parent().find(".add-check-domain").find("li.deleteSegmentRole").addClass("disabled"),$(this).parent().find(".add-check-domain").children("ul").hasClass("show")?$(this).parent().find(".add-check-domain").children("ul").removeClass("show"):($(".center-div .add-check-domain").children("ul").removeClass("show"),$(this).parent().find(".add-check-domain").children("ul").addClass("show"),$(this).parent().find(".add-check-domain").children("ul").find(".addSegmentRole").parent().addClass("disabled")),$(".add-segment .dropdown-menu").removeClass("show"),e.stopPropagation()}),$("body").on("click",".center-div .check-role",function(e){var t=$(".center-div .fixed-top-header").find(".check-role").length,n=$(this).siblings(".add-check-role").offset().left,i=$(this).siblings(".add-check-role").offset().top,a=0;a=n>987?n-145:n,$(".center-div .add-check-role").children(".dropdown-menu").css({left:a,top:i}),t>1?$(this).parent().find(".add-check-role").find("li.deleteSegmentRole").removeClass("disabled"):$(this).parent().find(".add-check-role").find("li.deleteSegmentRole").addClass("disabled"),$(this).parent().find(".add-check-role").children("ul").hasClass("show")?$(this).parent().find(".add-check-role").children("ul").removeClass("show"):($(".center-div").find(".add-check-role").children("ul").removeClass("show"),$(".center-div").find(".add-check-role").children("ul").find("li").removeClass("disabled"),$(this).parent().find(".add-check-role").children("ul").addClass("show"),$(this).parent().next().find(".add").hasClass("check-role")&&$(this).parent().find(".add-check-role").children("ul").find(".addDomain").parent().addClass("disabled")),$(".add-segment .dropdown-menu").removeClass("show"),e.stopPropagation()}),$("body").on("click",".add-operation-series",function(){displayLoader();var e=$(this).closest("td"),t=$(e).closest("tr"),n=($(t).closest("table"),$(e).index());myRow=$(t).index();var i=Array(),a=0,s=0;$("#course-path-number").hasClass("On")&&gridNavigation.changeColor(),$(".center-div table").each(function(){$(this);$("tbody tr",$(this)).each(function(e,t){$(this).addClass("operation");var o=$(this).attr("class");$(this).find("td").each(function(t,r){i[s]=e+"@"+t+"@"+o+"@"+$(this).attr("class")+"@"+$(this).html(),s++,e>=2&&n==t&&(str=$(this).text(),str.toLowerCase().indexOf("add segment")>0&&a++)})})}),$.post(domainUrl+"grid/createOperation",{data:i,myCol:n,preNoSegment:a,noOfSegment:0},responceCreateOperation,"HTML")}),$("body").on("click",".current-div .add-Role",function(){var e=$(this).closest("td"),t=$(e).closest("tr"),n=$(t).closest("table"),i=$(e).index(),a=0,s=0;$(n).find("tr").each(function(){var e=$(this),t=0;$(e).find("td").each(function(e){if(e===i){$(this),$(this).find("i.add").removeClass("active"),$(this).find(".add-colums ul.dropdown-menu").removeClass("show");var n=$(this).clone(),a=$(this);$(n).insertAfter(a),$(n).find(".add-colums ul.dropdown-menu").removeClass("show"),$(n).find("i.add").hide(),$(n).find("i.add").removeClass("active"),$(n).find(".add-colums ul li a").removeClass("disabled"),$(n).find(".add-colums ul li").removeClass("no-bg")}t++}),a++}),$(n).find("tr:first td").each(function(){s>0&&$(this).find(".top-col").html(s),s++})}),$("body").on("click",".popupPhaseClass",function(){var e=$(this).closest("td"),t=$(e).closest("tr"),n=($(t).closest("table"),$(e).index()),i=0;$("#course-path-number").hasClass("On")&&gridNavigation.changeColor(),$(".center-div table").each(function(){$(this);$("tbody tr",$(this)).each(function(e,t){$(this).find("td").each(function(t,a){e>=2&&n==t&&(str=$(this).text(),str.toLowerCase().indexOf("add segment")>0&&i++)})})}),checkoperation=$(".center-div .operation-event").children(".segment-node").parent("td").length,""!=checkoperation?$.post(domainUrl+"grid/index",{type:"phase",preNoSegment:i,columnNumber:n,confirm:"YES"},responcePhase,"HTML"):$.post(domainUrl+"grid/index",{type:"phase",preNoSegment:i,columnNumber:n,confirm:"NO"},responcePhase,"HTML")}),$("body").on("click",".col-head",function(e){$(".gridICon.iconActive").remove(),$(".grid-dropdown").hide(),$(".center-div  i.segment").removeClass("show"),$(".center-div .add-col-wrap ul.dropdown-menu").removeClass("show"),$(".center-div .border-right-green").removeClass("border-right-green"),$(".center-div .segment-node-input").removeClass("segment-node-input"),$("td").removeClass("row-selected"),$("td").parent("tr").prev("tr").children("td.border-light-bottom").removeClass("row-green-border"),$("#operationPaneFlyout").hasClass("in")||setTableWidth();var t=$(this).parent("td"),n=$(t).parent("tr"),i=$(n).parent(),a=$(t).index();$(n).index();$(".add-colums ul.dropdown-menu").removeClass("show"),$("i").removeClass("active"),$(".col-head").removeClass("dark-gray"),$(this).closest("td").hasClass("border-green")?removeSegSelection():$(i).find("tr").each(function(){var e=$(this);$(e).find("td").each(function(e){e===a&&($("td.col-"+a).children(".col-head").addClass("dark-gray"),$(".creation-bg").removeClass("bg-green"),$("td.col-"+a).siblings("td").removeClass("border-green bg-green"),$("td.col-"+a).not(":empty").prev("td.border-right").removeClass("border-right-green"),$(".border-right-green").removeClass("border-right-green"),$(".border-top-green").removeClass("border-top-green"),$(".border-bottom-select").removeClass("border-bottom-select"),$(".border-bottom-green").removeClass("border-bottom-green"),$("td.col-"+a).siblings("td").find(".node-white-circle").removeClass("node-green-circle"),$("td.col-"+a).find(".node-white-circle").addClass("node-green-circle"),$("td.col-"+a).not(":empty").addClass("border-green bg-green offinator"),$("td.col-"+a).not(":empty").prev("td.border-right").addClass("border-right-green"),$("td.border-bottom.col-"+a).addClass("border-bottom-green"))})}),$(".center-div .icons").removeClass("showing"),0==hideNumbering&&$(".table-count").removeClass("hide"),e.stopPropagation()}),$("body").on("click",".center-div .segment-node",function(e){$(".gridICon.iconActive").remove(),$(".grid-dropdown").hide(),$("i.segment").removeClass("show"),$("td").removeClass("row-selected"),$("td").parent("tr").prev("tr").children("td.border-light-bottom").removeClass("row-green-border"),removeClassSave();var t=$(this).closest("td"),n=$(t).parent("tr"),i=($(n).parent(),$(t).index());$(n).index();$(".add-col-wrap .dropdown-menu").removeClass("show");var a=$.grep(this.closest("td").className.split(" "),function(e,t){return 0===e.indexOf("parent")}).join();""!=a&&($(".center-div ."+a).hasClass("border-green")?($(".border-right-green").removeClass("border-right-green"),$("li.tab-item a.active").find(".tab-node-circle").addClass("node-green-circle")):($(".center-div .col-7 span.col-node-text").hasClass("col-node-Actor-Perspective")&&$(this).closest("td").addClass("border-top-green"),removeSegSelection(),$(".center-div .border-right-green").removeClass("border-right-green"),$(".center-div ."+a).prev("td.border-right").removeClass("border-right-green"),$(this).children(".node-white-circle").addClass("node-green-circle"),$(this).find("input.custom-node").click().focus(),$(".center-div ."+a).first().addClass("border-top-green"),$(".center-div ."+a).addClass("border-green bg-green"),$(".center-div ."+a).prev("td.border-right").addClass("border-right-green"),$(".center-div ."+a).last().addClass("border-bottom-green"),$(this).closest("tr").prev("tr").children("td").eq(i).addClass("border-bottom-select"),$(".center-div li.tab-item a.active").find(".tab-node-circle").addClass("node-green-circle"))),e.stopPropagation()}),$("body").on("click",".operation-series .custom-node",function(e){$(".border-right-green").removeClass("border-right-green"),removeClassSave(),$(".gridICon.iconActive").remove(),$(".grid-dropdown").hide()}),$("body").on("click",".center-div .creation-node",function(e){var t=$(this);$(".gridICon.iconActive").remove(),$(".grid-dropdown").hide(),$(this).find(".custom-node").hasClass("actionNode")&&($(".hideMeAction").toggle(),"none"==$(".hideMeAction").find("ol").css("display")&&$(".hideMeAction").find("ol").css("display","block")),$(".hideMeAction .iCheck-helper").click(function(){if($(".hideMeAction .iCheck-helper").prev().prop("checked")){for(var e=$(t).parent().attr("class"),n=e.search("col-"),i=e.substr(n,7),a=parseInt(i.split("-")[1]),s=1;s<a;s++)$(".center-div.process-grid .col-"+s).addClass("deactiveBg");$(".center-div.process-grid .fTHLC-inner-wrapper").css("overflow","hidden"),$(".courseRO").show()}else $("#center-screen tr td").removeClass("deactiveBg"),$(".center-div.process-grid .fTHLC-inner-wrapper").css("overflow","auto"),$(".courseRO").hide()}),$(".center-div i.segment").removeClass("show"),$(".center-div .border-right-green").removeClass("border-right-green"),removeClassSave(),$(".center-div td").removeClass("row-selected"),$(".center-div td").parent("tr").prev("tr").children("td.border-light-bottom").removeClass("row-green-border");var n=$(this).closest("td"),i=$(n).parent("tr"),a=($(i).parent(),$(n).index());$(i).index();$(".center-div .add-col-wrap .dropdown-menu").removeClass("show");$(this).find(".custom-node").attr("name");$(this).closest("td").hasClass("border-green")?$(this).hasClass("nodeFlyout")?$("#nodeFlyout").hasClass("in")||removeSegSelection():removeSegSelection():(removeSegSelection(),$(this).children(".node-white-circle").addClass("node-green-circle"),$(this).closest("td").addClass("border-top-green border-green border-bottom-green bg-green"),$(this).parent("td").addClass("border-top-green"),$(this).closest("tr").prev("tr").children("td").eq(a).addClass("border-bottom-select"),gridNavigation.numberSelection(t,!0)),e.stopPropagation()}),$("body").on("click",".center-div .segment-node input.custom-node",function(e){$(".gridICon.iconActive").remove(),$(".grid-dropdown").hide(),$(".center-div .dropdown-menu").each(function(e,t){$(this).hasClass("show")&&$(this).removeClass("show")}),$(".center-div .row-selected").removeClass("row-selected");var t=$(this).closest("td"),n=$(t).parent("tr"),i=($(n).parent(),$(t).index()),a=($(n).index(),$.grep(this.closest("td").className.split(" "),function(e,t){return 0===e.indexOf("parent")}).join());$(".center-div span.icons").removeClass("showing"),0==hideNumbering&&$("span.table-count").removeClass("hide"),$(".center-div i.fa-bars").addClass("segment").removeClass("show"),$(".center-div .border-right-green").removeClass("border-right-green"),$(".center-div .dark-gray").removeClass("dark-gray"),1==hideNumbering&&$(this).parent().children("span.table-count").addClass("hide"),$(this).closest("td").hasClass("collapse")?1==hideNumbering?$(this).parent().children("span.table-count").addClass("hide"):$(this).parent().children("span.table-count").removeClass("hide"):$(this).parent().children("span.table-count").addClass("hide"),$(this).parent().children("span.icons").addClass("showing"),$(this).parent().parent().children("i.phase-segment").removeClass("segment show").css("display","none"),$(this).closest(".segment-node").siblings("i.add-segment").removeClass("segment show").css("display","none"),removeSegSelection(),$(".center-div ."+a).first().addClass("segment-node-input border-top-green"),$(".center-div ."+a).addClass("segment-node-input border-green bg-green"),$(".center-div ."+a).prev(".border-right").addClass("border-right-green"),$(".center-div ."+a).last().addClass("segment-node-input border-bottom-green"),$(".center-div ."+a+".operation1").closest("tr").prev("tr").children("td.operation1").first().addClass("segment-node-input border-bottom-select"),$(this).closest("tr").prev("tr").children("td").eq(i).addClass("border-bottom-select"),$(this).closest(".col-text").siblings(".node-white-circle").addClass("segment-node-input node-green-circle"),$(".center-div li.tab-item a.active").find(".tab-node-circle").addClass("node-green-circle"),$("#course-path-number").hasClass("On")&&gridNavigation.numberSelection($(this)),$(".icons i").tooltip(),$(".center-div .saveIcon,.center-div  .closeIcon").click(function(e){$(".center-div .icons").removeClass("showing"),$(".show-auto-number").hasClass("hide-gridNumber")||$(this).parent().siblings(".table-count").removeClass("hide"),$(this).parent().parent().siblings("i.fa-bars").addClass("segment"),$(this).closest(".segment-node").siblings("i.fa-bars").addClass("segment"),$(".center-div .border-right-green").removeClass("border-right-green"),$(".center-div .border-bottom-select").removeClass("border-bottom-select"),$(".center-div ."+a).first().removeClass("segment-node-input border-top-green"),$(".center-div ."+a).removeClass("segment-node-input border-green bg-green"),$(".center-div ."+a).last().removeClass("segment-node-input border-bottom-green"),$(".center-div ."+a+".operation1").closest("tr").prev("tr").children("td.operation1").first().removeClass("segment-node-input border-bottom-select"),$(this).closest(".col-text").siblings(".node-white-circle").removeClass("segment-node-input node-green-circle"),e.stopPropagation()});var s="";$(".center-div .custom-node").keyup(function(e){s=$(this).val(),$(this).attr("colValue",s),$(this).attr("value",s)}),$(".center-div .dropdown-menu").each(function(e,t){$(this).hasClass("show")&&$(this).removeClass("show")}),e.stopPropagation()}),$("body").on("click",".show-auto-number",function(e){$(this).hasClass("hide-gridNumber")?($(".collapse span.table-count").removeClass("hide"),$(this).removeClass("hide-gridNumber"),$(".table-count").each(function(e,t){$(this).next().hasClass("showing")||$(this).removeClass("hide")}),hideNumbering=!1):($(this).addClass("hide-gridNumber"),$(".collapse span.table-count").addClass("hide"),$(".table-count").each(function(e,t){$(this).next().hasClass("showing")||$(this).addClass("hide")}),hideNumbering=!0),$("i").tooltip("hide"),e.stopPropagation()}),$("body").on("mouseover",".show-auto-number",function(){$(".show-auto-number").hasClass("hide-gridNumber")?$(".tooltip-inner").text("Show Course Path Numbering"):$(".tooltip-inner").text("Hide Course Path Numbering")}),$("body").on("mouseover",".new-Role",function(){$(this).addClass("new-role-show")}),$("body").on("mouseover",".new-Domain",function(){$(this).addClass("new-domain-show")}),$("body").on("mouseout",".new-Role",function(){$(this).removeClass("new-role-show")}),$("body").on("mouseout",".new-Domain",function(){$(this).removeClass("new-domain-show")}),$("body").on("click",".center-div .col-head-assoc",function(){$(".Grid-association-panel").trigger("click"),$(".Domain .leftCalss").removeClass("active"),$("#domainDiv").css("display","none"),$(".perspective .leftCalss").addClass("active"),$("#perspectiveDiv").css("display","block")})}),$(window).load(function(){var e=$(window).height()-($(".right-header").height()+$(".footer-temp").height()+$("#ControlBar").height());$("#left-screen").css("height",$(window).height()-52+"px"),$("#center-screen").css("height",e+"px"),$("#right-screen").css("height",$(window).height()-52+"px"),setWidthInitialy(),$(".rightSectionWrap, .property-node-search").css("height",$(window).height()-227+"px"),$(".right-tab-node").find(".tab-content").css("height",$(window).height()-200+"px"),$(".rightSectionWrap, .property-node-search").css("height",$(window).height()-227+"px"),setInitalHeightWidth(),$("body").on("click","#second-class-div #node-wrapper .node-content",function(){setNodePosition()}),$("body").on("click","#fourh-class-div #node-wrapper .node-content",function(){$("#fourh-class-div .property-selected").removeClass("property-selected"),$(this).addClass("property-selected")}),$(".submit-val").click(function(){var e=$.trim($(".rename-value").val());if(/[^a-zA-Z\-\_\.\s]/.test(e))return $(".error-msg").css("display","block"),$(".rename-value").val(" "),!1;if($(".error-msg").css("display","none"),""!=e){$(".node-selected .node-rename").html(e),$(".node-selected").attr("fullNameTabnode",e);var t=$(".node-selected").parent().attr("tab-data"),n=e.length;if(n<=9){var a=9-n;for(i=1;i<=a;i++)e+="&nbsp;&nbsp;"}else e=e.substr(0,6)+"...";$(".entr-center-tab ul li").each(function(){var n=$(this).attr("tab-index");if($(this).find("a").hasClass("active")&&t==n){var i=$.trim($(".rename-value").val());$(this).attr("data-original-title",i),$(this).find(".ref-name").html(e)}});var s=$(".rename-value").val();n>=19&&(s=s.substr(0,16)+"..."),$(".DropDownTabList ul li").each(function(e,n){var i=$(this).attr("tab-index");$(this).hasClass("active")&&t==i&&$(this).find(".ref-name").html(s)})}}),$(".rename-value").keyup(function(e){"13"==(e.keyCode?e.keyCode:e.which)&&$(".submit-val").trigger("click")}),$("body").on("dblclick",".node-rename",function(e){$("#renamePopup").modal("show"),$(".error-msg").css("display","none"),$("#renamePopup .rename-value").val(""),e.stopPropagation()}),$("body").on("click",".TabNodePerpective",function(e){var t=$(this).attr("fullnametabnode");$(".TabNodePerpective").each(function(e,t){$(this).removeClass("node-selected")}),$(".DropDownTabList li").each(function(e,t){$(this).removeClass("active")}),$(".tab-item a").each(function(e,t){$(this).removeClass("active").find("div.tab-tab-node-circle").removeClass("node-green-circle").addClass("node-white-circle")}),$(this).addClass("node-selected");var n=$(".node-selected").find(".node-rename").text(),a=n.length;if(a<=9){var s=9-a;for(i=1;i<=s;i++)n+="&nbsp;&nbsp;"}else n=n.substr(0,6)+"...";var o=$(".node-selected").find(".node-rename").text();a>=19&&(o=o.substr(0,16)+"...");var r=$("#center-screen").width(),d=$(".node-selected").attr("tab-data");selectedGridId!=d&&($("#nodeFlyout").modal("hide"),setGridWidth(selectedGridId)),selectedGridId=d,$(".grid-div").css("display","none"),$(".grid-div").removeClass("center-div"),$(".grid-div").each(function(e,t){$(this).attr("grid-id")==d&&($(this).css("display","block"),$(this).addClass("center-div"))});var l=0;if($(".entr-center-tab ul li a").removeClass("active").find("div.tab-node-circle").removeClass("node-green-circle").addClass("node-white-circle"),$(".entr-center-tab ul li").each(function(e,i){var a=$(this).attr("tab-index");if(d==a)if(l=1,"none"==$(this).css("display")){$(this).remove(),calculativeWidth=0,$(".tab-item").each(function(e,t){(calculativeWidth+=$(t).width())+113>=r&&$(this).hide()});var s=('<li data-toggle="tooltip" data-placement="bottom"  data-original-title="%Undefined%" class="tab-item" tab-index = '+a+'> <a href="#" class="active"> <div class="tab-node-circle node-green-circle">N</div><span class="ref-name">%name%</span> <span class="cross-tab fa fa-times"></span> </a> </li>').replace("%name%",n).replace("%Undefined%",t);$(".entr-center-tab ul").prepend(s),$(".center-div").hasClass("manifest-Create")&&$(".entr-center-tab ul li:first").addClass("manifest-Create")}else $(this).find("a").addClass("active").find("div.tab-node-circle").removeClass("node-white-circle").addClass("node-green-circle");$(".TabNodePerpective").removeClass("node-selected")}),$(".DropDownTabList ul li").each(function(e,t){var n=$(this).attr("tab-index");d==n&&(l=1,$(this).addClass("active"))}),0==l){r=$("#center-screen").width();if(calculativeWidth+113>=r){calculativeWidth=0,$(".tab-item").each(function(e,t){(calculativeWidth+=$(t).width())+113>=r&&$(this).hide(),$(".detailNodeIcon").css("display","block")}),$(".entr-center-tab ul li a").removeClass("active");h=(u=(c='<li data-toggle="tooltip" data-placement="bottom"  data-original-title="%Undefined%" class="tab-item" tab-index = '+d+'> <a href="#" class="active"> <div class="tab-node-circle node-green-circle">N</div><span class="ref-name">%name%</span> <span class="cross-tab fa fa-times"></span> </a> </li>').replace("%name%",n)).replace("%Undefined%",t);$(".entr-center-tab ul").prepend(h),$(".DropDownTabList ul li").removeClass("active");u=(h="<li tab-index = "+d+' class="active"><div class="node-circle node-white-circle show-col-wrap">N</div><span class="ref-name">%name%</span></li>').replace("%name%",o);$(".DropDownTabList ul").prepend(u),$(".center-div").hasClass("manifest-Create")&&$(".entr-center-tab ul li:first").addClass("manifest-Create")}else{$(".entr-center-tab ul li a").removeClass("active");var c='<li data-toggle="tooltip" data-placement="bottom"  data-original-title="%Undefined%" class="tab-item" tab-index = '+d+'> <a href="#" class="active"> <div class="tab-node-circle node-green-circle">N</div><span class="ref-name">%name%</span> <span class="cross-tab fa fa-times"></span> </a> </li>',h=(u=c.replace("%name%",n)).replace("%Undefined%",t);$(".entr-center-tab ul").prepend(h),$(".DropDownTabList ul li").removeClass("active");var u=(h="<li tab-index = "+d+' class="active"><div class="node-circle node-white-circle show-col-wrap">N</div><span class="ref-name">%name%</span></li>').replace("%name%",o);$(".DropDownTabList ul").prepend(u),$(".center-div").hasClass("manifest-Create")&&$(".entr-center-tab ul li:first").addClass("manifest-Create"),calculativeWidth=0,$(".tab-item").each(function(e,t){calculativeWidth+=$(t).width()})}}setWidthInitialy(),setTableWidth()}),$("body").on("click",".tab-item",function(){$(".tab-item a").each(function(e,t){$(this).removeClass("active").find("div.tab-node-circle").removeClass("node-green-circle").addClass("node-white-circle")}),$(this).find("a").addClass("active").find("div.tab-node-circle").removeClass("node-white-circle").addClass("node-green-circle");var e=$(this).attr("tab-index"),t=$(this).find(".ref-name").html();"Roles"==t||"Classes"==t?($(".main-loader").show(),$(".soniclass1").hide(),getRightPaneHtml()):($(".soniclass1").show(),$(".main-loader").show(),getRightPaneHtml1()),selectedGridId!=e&&($("#nodeFlyout").modal("hide"),setGridWidth(selectedGridId)),selectedGridId=e,$(".grid-div").css("display","none"),$(".grid-div").removeClass("center-div"),$(".grid-div").each(function(t,n){$(this).attr("grid-id")==e&&($(this).css("display","block"),$(this).addClass("center-div"))}),$(".DropDownTabList li").each(function(e,t){$(this).removeClass("active")}),$(".DropDownTabList li").each(function(t,n){var i=$(this).attr("tab-index");e==i&&$(this).addClass("active")}),$(".DropDownTabList ").css("display","none"),$(".TabNodePerpective").each(function(e,t){$(this).find(".node-content").removeClass("node-selected"),$(this).removeClass("node-selected")}),$(".TabNodePerpective").each(function(n,i){var a=$(this).attr("tab-data");"tabIndex_000_0"==a?$(this).attr("node-type-name")=="cell_"+t&&$(this).addClass("node-selected"):e==a&&$(this).addClass("node-selected")}),setWidthInitialy(),setTableWidth()}),$("body").on("click",".DropDownTabList li",function(){$(this).hasClass("active")||$("#nodeFlyout").modal("hide");var e=$("#center-screen").width();$(".DropDownTabList li").each(function(e,t){$(this).removeClass("active")}),$(this).addClass("active"),$(this).parent().parent().css("display","none");var t=$(this).attr("tab-index"),n=$(this).find(".ref-name").html();$(".grid-div").css("display","none"),$(".grid-div").removeClass("center-div"),$(".grid-div").each(function(e,n){$(this).attr("grid-id")==t&&($(this).css("display","block"),$(this).addClass("center-div"))}),$(".tab-item a").each(function(e,t){$(this).removeClass("active").find("div.tab-node-circle").removeClass("node-green-circle").addClass("node-white-circle")}),$(".TabNodePerpective").each(function(e,t){$(this).find(".node-content").removeClass("node-selected"),$(this).removeClass("node-selected")});var a;$(".TabNodePerpective").each(function(e,i){var s=$(this).attr("tab-data");"tabIndex_000_0"==s?$(this).attr("node-type-name")=="cell_"+n&&$(this).addClass("node-selected"):t==s&&($(this).addClass("node-selected"),a=$(this).attr("fullnametabnode"))});var s=$(this).find(".ref-name").text(),o=s.length;if(o<9){var r=9-o;for(i=1;i<=r;i++)s+="&nbsp;&nbsp;"}else s=s.substr(0,6)+"...";$(".tab-item a").each(function(n,i){var o=$(this).parent().attr("tab-index");if(t==o)if("none"===$(this).parent().css("display")){$(this).parent().remove(),calculativeWidth=0,$(".tab-item").each(function(t,n){(calculativeWidth+=$(n).width())+113>=e&&$(this).hide()});var r=('<li data-toggle="tooltip" data-placement="bottom"  data-original-title="%Undefined%" class="tab-item" tab-index = '+t+'> <a href="#" class="active"> <div class="tab-node-circle node-green-circle">N</div><span class="ref-name">%name%</span> <span class="cross-tab">X</span> </a> </li>').replace("%name%",s).replace("%Undefined%",a);$(".entr-center-tab ul").prepend(r),$(".center-div").hasClass("manifest-Create")&&$(".entr-center-tab ul li:first").addClass("manifest-Create")}else $(this).addClass("active").find("div.tab-node-circle").removeClass("node-white-circle").addClass("node-green-circle")}),setWidthInitialy(),setTableWidth()}),$("body").on("click",".cross-tab",function(e){$("#nodeFlyout").modal("hide"),$(".tooltip").remove();var t=0;$(".tooltip").css("display","none");var n=$(this).closest(".tab-item").attr("tab-index");$(this).closest(".tab-item").hasClass("manifest-Create")&&$(".tab-item.manifest-tab").each(function(e,i){t=$(i).attr("tab-index"),$(i).attr("parent-id")==n&&($(i).remove(),$("[grid-id="+t+"]").css("display","none"))});var i=$(this).closest(".tab-item").next().attr("tab-index");void 0==i&&(i=$(this).closest(".tab-item").prev().attr("tab-index")),$(this).closest(".tab-item").remove(),$(this).hasClass()&&$(".tab-item a").each(function(e,t){$(this).removeClass("active").find("div.tab-node-circle").removeClass("node-green-circle").addClass("node-white-circle")}),$(".tab-item").each(function(e,t){if("none"==$(this).css("display"))return $(this).css("display","block"),!1}),$(".tab-item a").each(function(e,t){$(this).parent().attr("tab-index")==i&&$(this).addClass("active").find("div.tab-node-circle").addClass("node-green-circle").removeClass("node-white-circle")}),$(".grid-div").css("display","none"),$(".grid-div").removeClass("center-div"),$(".grid-div").each(function(e,t){$(this).attr("grid-id")==i&&($(this).css("display","block"),$(this).addClass("center-div"))}),$(".DropDownTabList li").each(function(e,i){var a=$(this).attr("tab-index");a!=n&&a!=t||$(this).remove()}),$(".DropDownTabList li").each(function(e,t){$(this).removeClass("active")}),$(".DropDownTabList li").each(function(e,t){$(this).attr("tab-index")==i&&$(this).addClass("active")});var a=$("#center-screen").width();calculativeWidth=0,$(".tab-item").each(function(e,t){calculativeWidth+=$(t).width()}),calculativeWidth<=a&&($(".detailNodeIcon").css("display","none"),$(".DropDownTabList").css("display","none")),$(".TabNodePerpective").each(function(e,t){$(this).removeClass("node-selected")}),$(".TabNodePerpective").each(function(e,t){var n=$(this).attr("tab-data");if(i==n)return $(this).addClass("node-selected"),!1}),setWidthInitialy(),setTableWidth(),e.stopPropagation()}),$("body").on("click",".detailNodeIcon",function(){$(".DropDownTabList").toggle()}),$("body").on("click",".operation-tab-node",function(){var e=$("#center-screen").width(),t=$(".center-div").attr("grid-id"),n=!1;if($(".grid-div").each(function(){$(this).hasClass("manifest")&&(n=!0)}),1==n)$(".grid-div.process-grid").css("display","none").addClass("center-div"),$(".grid-div.manifest").css("display","block").removeClass("center-div"),$(".list-tab a").removeClass("active"),$(".manifest-tab a").addClass("active");else{$(".tab-item a").each(function(e,t){$(this).hasClass("active")&&$(this).parent().addClass("manifest-Create")}),$(".center-div").addClass("manifest-Create");var a,s,o="Manifestation".length;if(o<=9){var r=9-o;for(i=1;i<=r;i++)a+="&nbsp;&nbsp;"}else a="Manifestation".substr(0,6)+"...";s=o>=19?"Manifestation".substr(0,16)+"...":"Manifestation",$(".TabNodePerpective").each(function(e,t){$(this).removeClass("node-selected")}),displayLoader(),$("#nodeFlyout").modal("hide"),setGridWidth(selectedGridId);var d=0,e=$("#center-screen").width();if(calculativeWidth+113>=e){if(0==$(".entr-center-tab ul").find(".detailNodeIcon").length){var l='<div class="detailNodeIcon" ><span class="rightNode1Icon"><img src="'+domainUrl+'/public/img/tab-arrow.png"></a></div>';$(l).appendTo(".entr-center-tab ul")}else $(".detailNodeIcon").show();calculativeWidth=0,$(".tab-item").each(function(t,n){(calculativeWidth+=$(n).width())+113>=e&&$(this).hide()})}d="tabIndex_"+(new Date).getTime().toString(),$(".entr-center-tab ul li a").each(function(e,t){$(this).removeClass("active").find("div.tab-node-circle").removeClass("node-green-circle").addClass("node-white-circle")});var c='<li data-toggle="tooltip" data-placement="bottom"  data-original-title="Manifestation" class="tab-item manifest-tab" tab-index = '+d+" parent-Id = "+t+'> <a href="#" class="active"> <div class="tab-node-circle node-green-circle">N</div><span class="ref-name">'+a+'</span> <span class="cross-tab fa fa-times"></span> </a></li>';$(".entr-center-tab ul").prepend(c),$(".DropDownTabList ul li").removeClass("active");var h="<li tab-index = "+d+' class="active"><div class="node-circle node-white-circle show-col-wrap">N</div><span class="ref-name">'+s+"</span></li>";$(".DropDownTabList ul").prepend(h),calculativeWidth=0,$(".tab-item").each(function(e,t){calculativeWidth+=$(t).width()}),$(".grid-div").each(function(e,t){$(this).removeClass("center-div")}),$(".left-side-heading").html("Manifestation"),$.post(domainUrl+"manifestation",{},responceManifestation,"HTML"),$(".center-div").scrollLeft(0),$(".show-auto-number").removeClass("hide-gridNumber")}setTableWidth(),$("#operationPaneFlyout").animate({right:"-100%"}).removeClass("in"),OperationPane()}),$(".col-head-bk").click(function(){})}),$(window).resize(function(){setWidthInitialy(),setTableWidth(),"function"==typeof DialogueFlyout&&DialogueFlyout(),"function"==typeof dualPaneHeight&&dualPaneHeight(),setColumnsH(),setHeightThreePane()});var course=[];$(document).ready(function(){});var htmlElm,gridNavigation={nextNumSelect:function(){var e=$(".fixed-left-column:last").find(".table-count"),t=e.filter(".activeNum"),n=t.data("id");n++;var i=0!==t.length?e.filter("[data-id="+n+"]"):e.filter("[data-id=1]");$(".center-div span.icons").removeClass("showing"),e.removeClass("activeNum"),$(i).last().addClass("activeNum"),$(".fixed-left-column").find(".bg-green").removeClass("border-green bg-green border-bottom-green border-top-green");var a=$(".activeNum:last").closest(".ExcelTablerow").prev()[0].className.match(/parent_[_0-9]*/);a&&1!==n&&n!==e.length&&!$("."+a).find(".table-count").length?($("."+a).removeClass("show_number_grey").addClass("border-green bg-green"),$("."+a).first().addClass("border-top-green").end().last().addClass("border-bottom-green"),$(".activeNum").closest("td").removeClass("show_number_grey").addClass("border-green bg-green border-bottom-green")):$(".activeNum").closest("td").removeClass("show_number_grey").addClass("border-green bg-green border-bottom-green"),$(".prevBtn").parent().hasClass("disable")&&($(".prevBtn").parent().removeClass("disable"),$(".prevBtn").attr("onclick","gridNavigation.prevNumSelect()")),n==e.length&&($(".nextBtn").parent().addClass("disable"),$(".nextBtn").removeAttr("onclick","nextNumSelect"))},prevNumSelect:function(){var e=$(".fixed-left-column:last").find(".table-count"),t=e.filter(".activeNum").data("id");t--;var n=e.filter("[data-id="+t+"]");e.removeClass("activeNum"),$(n).last().addClass("activeNum"),$(".fixed-left-column").find(".bg-green").removeClass("border-green bg-green border-bottom-green border-top-green");var i=$(".activeNum:last").closest(".ExcelTablerow").prev()[0].className.match(/parent_[_0-9]*/);i&&1!==t&&!$("."+i).find(".table-count").length?($("."+i).addClass("border-green bg-green"),$("."+i).first().addClass("border-top-green").end().last().addClass("border-bottom-green"),$(".activeNum").closest("td").addClass("border-green bg-green border-bottom-green")):$(".activeNum").closest("td").addClass("border-green bg-green border-bottom-green"),$(".nextBtn").parent().hasClass("disable")&&($(".nextBtn").parent().removeClass("disable"),$(".nextBtn").attr("onclick","gridNavigation.nextNumSelect()")),1==t&&($(".prevBtn").parent().addClass("disable"),$(".prevBtn").removeAttr("onclick","prevNumSelect"))},changeColor:function(){$(".fixed-left-column").find(".bg-green").removeClass("border-green bg-green border-bottom-green"),$(".table-count").removeClass("activeNum"),$(".table-count:first").addClass("activeNum"),$(".activeNum").closest("td").addClass("border-green bg-green border-bottom-green"),$(".nextBtn").parent().hasClass("disable")&&($(".nextBtn").parent().removeClass("disable"),$(".nextBtn").attr("onclick","nextNumSelect()")),$(".fixed-left-column [class*=parent_]").removeClass("show_number_grey"),$(".fixed-left-column [class*=parent_]").not(":first").nextAll().addClass("show_number_grey")},numberSelection:function(e,t){var n;$(".table-count").removeClass("activeNum"),$(".center-div span.icons").removeClass("showing"),$(e).closest("td").first().find(".center-div span.icons").addClass("showing"),t?(1!==$(e).find(".table-count").data("id")&&$(e).find(".table-count").data("id")!==$(".creation-node").find(".table-count").length&&(n=$(e).closest(".ExcelTablerow").prev()[0].className.match(/parent_[_0-9]*/),$("."+n).removeClass("show_number_grey").addClass("border-green bg-green"),$("."+n).first().addClass("border-top-green").end().last().addClass("border-bottom-green")),$(e).closest("td").find(".table-count").addClass("activeNum")):(n=$(e).closest(".ExcelTablerow").next()[0].className.match(/parent_[_0-9]*/),$("."+n).first().addClass("border-top-green border-green border-bottom-green bg-green").find(".table-count").addClass("activeNum"))}};$(document).click(function(){$(".add-col-wrap .dropdown-menu").hasClass("show")&&($(".add-col-wrap .dropdown-menu").removeClass("show"),$("td.ExcelTableFormationCol i, td.ExcelTablerow i").removeClass("active show-icon show"))}),$(".add-col-wrap .sub-item li[data-target='#addSeriespoup']").click(function(){$(".series-popup").hasClass("in")?$(".add-col-wrap .dropdown-menu").addClass("show"):$(".add-col-wrap .dropdown-menu").removeClass("show")}),window.puJsFileLoadCounter++;var InitallySetWidth=!0,currentView=2,currentManifestView=0,clicked,clickedManifest,clickedModeforManifesto,globalSelected;$(document).ready(function(){$(".arrows").removeClass("show"),$(".arrow-left").addClass("inactive"),$(".arrow-left").removeClass("prevViewNode"),$("body").on("focus",".account-head-node input, .account-head-title input",function(e){$(this).siblings(".icons").addClass("showing"),$(this).siblings(".icons").hasClass("showing")&&($(this).closest("td").find(".segment").addClass("HideSegment"),$(".editTextDisabledLast").find("i.add").addClass("hide")),e.stopPropagation()}),$("body").on("click",".account-head-node span.icons, .account-head-title span.icons",function(e){$(this).removeClass("showing"),$(".editTextDisabledLast").find("i.add").removeClass("hide"),$("td").find(".segment").removeClass("HideSegment"),e.stopPropagation()}),$("body").on("keydown",function(e){$(".arrows").hasClass("show")&&(37==e.keyCode&&$(".prevViewNode").trigger("click"),39==e.keyCode&&$(".nextViewNode").trigger("click"))}),$("body").on("click","#nodeFlyout .interaction-yes .node-left",function(e){$("#nodeFlyout .close").trigger("click"),globalSelected.nextUntil("tr.operation").nextUntil("tr.end").removeClass("node-hide").next().removeClass("node-hide"),"next"===clicked?$(".nextViewNode").trigger("click"):$(".prevViewNode").trigger("click")}),$("body").on("click","#nodeFlyout .interaction-no .node-left",function(e){$("#nodeFlyout .close").trigger("click"),globalSelected.nextUntil("tr.operation").nextAll("tr").addClass("node-hide"),"next"===clicked?$(".nextViewNode").trigger("click"):$(".prevViewNode").trigger("click")}),$("body").on("click",".nextViewNode",function(e){if($(".center-div").hasClass("manifest")){CheckBuildMode=0;a=$(".center-div .table-count").length;if("nextClicked"==clickedModeforManifesto&&(currentManifestView=2,clickedModeforManifesto=""),a<currentManifestView)return $(".entr-center-tab .active .cross-tab").trigger("click"),$("li.manifest-Create").trigger("click"),$(".nextViewNode").trigger("click"),!1;"prev"==clickedManifest&&(currentManifestView+=2);s=$(".center-div").find(".col-text [data-id='"+currentManifestView+"']").siblings(".custom-node").attr("name");$(".center-div td."+s).removeClass("view-mode-node");var t=$(".center-div").find(".col-text [data-id='"+currentManifestView+"']").parents("td").offset().left,n=$(".center-div .fTHLC-inner-wrapper").scrollLeft(),i=t-$(".center-div .fTHLC-inner-wrapper").offset().left+n;$(".center-div .fTHLC-inner-wrapper").scrollLeft(i),$(".center-div").find(".col-text [data-id='"+currentManifestView+"']").parents("td").find("div:first").trigger("click"),currentManifestView+=1,clickedManifest="next"}else{CheckBuildMode=0,clickedManifest="";var a=$(".center-div tr:not(.node-hide) .table-count").length;$(".prevViewNode").css("display","block"),"prev"==clicked&&(currentView+=2),$(".arrow-left").removeClass("inactive"),$(".arrow-left").addClass("prevViewNode"),a==currentView?($(".arrow-right").addClass("inactive"),$(".arrow-right").removeClass("nextViewNode")):($(".arrow-right").removeClass("inactive"),$(".arrow-right").addClass("nextViewNode")),1==$(".center-div").find(".col-text [data-id='"+currentView+"']").parents("td").find("div:first").hasClass("operation-tab-node")&&(CheckBuildMode=1);var s=$(".center-div").find(".col-text [data-id='"+currentView+"']").siblings(".custom-node").attr("name");$(".center-div td."+s).removeClass("view-mode-node");t=$(".center-div").find(".col-text [data-id='"+currentView+"']").parents("td").offset().left;globalSelected=$(".center-div").find(".col-text [data-id='"+currentView+"']").parents("td").parents("tr");var n=$(".center-div .fTHLC-inner-wrapper").scrollLeft(),i=t-$(".center-div .fTHLC-inner-wrapper").offset().left+n;$(".center-div .fTHLC-inner-wrapper").scrollLeft(i),$(".center-div").find(".col-text [data-id='"+currentView+"']").parents("td").find("div:first").trigger("click"),$(".center-div.manifest tr .col-node-text").each(function(){var e=$(this).attr("name");$(".center-div.manifest td."+e).addClass("view-mode-node")}),"1"==CheckBuildMode&&($(".arrow-right").removeClass("nextViewNode"),setTimeout(function(){$(".arrow-right").addClass("nextViewNode")},500)),currentView+=1,clicked="next",clickedModeforManifesto="nextClicked"}e.stopPropagation()}),$("body").on("click",".prevViewNode",function(e){if($(".center-div").hasClass("manifest")){CheckBuildMode=0;o=$(".center-div .table-count").length;if("prevClicked"==clickedModeforManifesto&&(currentManifestView=o,clickedModeforManifesto=""),"next"==clickedManifest&&(currentManifestView-=2),currentManifestView<=1)return $(".entr-center-tab .active .cross-tab").trigger("click"),$("li.manifest-Create").trigger("click"),$(".prevViewNode").trigger("click"),!1;var t=currentManifestView+1,n=$(".center-div").find(".col-text [data-id='"+t+"']").siblings(".custom-node").attr("name");$(".center-div td."+n).addClass("view-mode-node");var i=$(".center-div").find(".col-text [data-id='"+currentManifestView+"']").parents("td").offset().left,a=$(".center-div .fTHLC-inner-wrapper").scrollLeft(),s=i-$(".center-div .fTHLC-inner-wrapper").offset().left+a;$(".center-div .fTHLC-inner-wrapper").scrollLeft(s),$(".center-div").find(".col-text [data-id='"+currentManifestView+"']").parents("td").find("div:first").trigger("click"),currentManifestView-=1,clickedManifest="prev"}else{CheckBuildMode=0,clickedManifest="";var o=$(".center-div tr:not(.node-hide) .table-count").length;$(".nextViewNode").css("display","block"),"next"==clicked&&(currentView-=2),$(".arrow-right").removeClass("inactive"),$(".arrow-right").addClass("nextViewNode"),2==currentView?($(".arrow-left").addClass("inactive"),$(".arrow-left").removeClass("prevViewNode")):($(".arrow-left").removeClass("inactive"),$(".arrow-left").addClass("prevViewNode")),1==$(".center-div").find(".col-text [data-id='"+currentView+"']").parents("td").find("div:first").hasClass("operation-tab-node")&&(CheckBuildMode=1);var r=currentView+1,n=$(".center-div").find(".col-text [data-id='"+r+"']").siblings(".custom-node").attr("name");$(".center-div td."+n).addClass("view-mode-node");i=$(".center-div").find(".col-text [data-id='"+currentView+"']").parents("td").offset().left;globalSelected=$(".center-div").find(".col-text [data-id='"+currentView+"']").parents("td").parents("tr");var a=$(".center-div .fTHLC-inner-wrapper").scrollLeft(),s=i-$(".center-div .fTHLC-inner-wrapper").offset().left+a;$(".center-div .fTHLC-inner-wrapper").scrollLeft(s),$(".center-div").find(".col-text [data-id='"+currentView+"']").parents("td").find("div:first").trigger("click"),$(".center-div.manifest tr .col-node-text").each(function(){var e=$(this).attr("name");$(".center-div.manifest td."+e).removeClass("view-mode-node")}),"1"==CheckBuildMode&&($(".arrow-left").removeClass("prevViewNode"),setTimeout(function(){$(".arrow-left").addClass("prevViewNode")},500),CheckBuildMode=0),currentView-=1,clicked="prev",clickedModeforManifesto="prevClicked"}e.stopPropagation()}),$("body").on("click",".simulate-mode",function(e){$(".center-div tr.operation").prev("tr").nextAll("tr").addClass("node-hide"),0==simulateContinue&&($(".entr-center-tab ul li a.active").parents("li").css("display","block"),currentView=2,currentManifestView=0,clicked="",clickedManifest="",clickedModeforManifesto=""),simulateContinue=0,$(".arrows").addClass("show"),$(this).addClass("active"),$(this).siblings("a").removeClass("active"),$(".center-div td").addClass("view-mode"),$(".center-div table tr:not(:first-child, :nth-child(2)) td").addClass("view-mode-node"),$(".center-div .cell_2_1").removeClass("view-mode-node"),$(".yes-no").addClass("show"),$(".saved").addClass("show")}),$("body").on("click",".build-mode",function(e){$(".center-div tr").removeClass("node-hide"),$(".center-div").find(".col-text [data-id='2']").parents("td").find("div:first").trigger("click"),$(".entr-center-tab ul li").css("display","block"),$(".arrows").removeClass("show"),$(this).addClass("active"),$(this).siblings("a").removeClass("active"),$(".center-div td").removeClass("view-mode"),$(".center-div td.ExcelTablerow").removeClass("view-mode-node")}),$("body").on("click",".add-transaction",function(e){var t=$(this),n=t.data("sequence"),i='<div class="segment-node">';i+='<div class="col-text segment-text operation-text">',i+='<span class="col-node-text"><input type="text" placeholder="Undefined" class="custom-node undefined"><span class="icons"><i data-original-title="Save" data-placement="bottom" data-toggle="tooltip" class="saveIcon"></i><i data-original-title="Cancel" data-placement="bottom" data-toggle="tooltip" class="closeIcon"></i></span></span>',i+="</div>",t.closest("tr").addClass("current-section").nextUntil(".row-group").addClass("current-section"),$(".account-grid.center-div tbody tr:first").addClass("make-clone"),$(".account-grid.center-div tbody tr:first").find(".account-title").addClass("fees-title"),$(".account-grid.center-div tbody tr:first").nextUntil(".row-group").addClass("make-clone");var a=$(".make-clone").clone(!0);a.find("input[type=text]").attr("value",""),a.find("input.share-percentage-debit").attr("value","100"),a.find("select option").removeAttr("selected").prop("selectedIndex",0),a.find(".account-node input[type=checkbox]").attr("checked",!1).attr("disabled",!1),a.find("input[type=text],select").closest(".account-node").not(".total").hide().closest("td").addClass("creation-bg"),a.find("td.custom-border:empty").removeClass("custom-border"),a.find(".fees-title").html(i),a.find("li:first").removeClass("disabled"),a.find("li:last").removeClass("disabled"),a.find("tr").removeClass("base-fee"),"above"==n?a.insertBefore($(".current-section:first")):a.insertAfter($(".current-section:last")),$(".make-clone").removeClass("make-clone"),$(".current-section").removeClass("current-section"),removeRowClass(),hideDrodownMenu(),addCellClass(),InitallySetWidth=!1,AcountTableWidth(),$(".center-div .fTHLC-inner-wrapper").scrollLeft(4),$(".center-div #account-table").find("tr").not(":last").children("td.border-bottom").removeClass("border-bottom"),$(".center-div #account-table").find("tr:last").children("td:not(.border-bottom)").addClass("border-bottom"),$(".center-div #account-table .saveIcon").click(function(){var e=$(this).parent().parent().children()[0];$(e).addClass("makeBolder");var t=$(this).closest("div.account-title.fee-title").find("input.custom-node").val();if(""!=t){var n=$.trim(t).split(" "),i="";$.each(n,function(e){i+=n[e]+"-"}),i=i.substring(0,i.length-1).toLowerCase(),$(this).closest("tr").addClass(i).nextUntil(".row-group").addClass(i)}})}),$("body").on("click",".delete-transaction",function(e){var t=$(this);bootbox.confirm({title:"Alert",message:"Are you sure you want to delete this transaction?",buttons:{cancel:{label:"Cancel",className:"btn-default"},confirm:{label:"Delete",className:"btn-primary"}},callback:function(e){e?(displayLoader(),t.closest("tr").addClass("deleted-row").nextUntil(".row-group").addClass("deleted-row"),removeRowClass(),$(".deleted-row").remove(),hideDrodownMenu(),addCellClass(),InitallySetWidth=!1,AcountTableWidth(),hideLoader(),calculateBalance(),$(".center-div #account-table").find("tr:last").children("td:not(.border-bottom)").addClass("border-bottom")):hideDrodownMenu()}})}),$("body").on("keydown","input[type=text]",function(e){var t=e.keyCode||e.which;9!=t&&8!=t||(calculateBalance(),e.stopPropagation())}),$("body").on("click","input.popout",function(e){$this=$(this),optionWrapper=$("tbody tr.freeze:last").next("tr");var t=$.trim($this.val()),n=$.trim($("div.account-node i.selected-value").siblings("input.calculate-amount").val());if(""!=t&&""!=n&&"0"!=t&&"0"!=n){$this.addClass("selected");var i=t*n/100;$("div.account-node i.selected-value").siblings(".calculate-amount-hidden,.selected-amount-hidden").remove(),$("div.account-node i.selected-value").closest(".account-node").append('<input class="calculate-amount-hidden" type="hidden" value='+i+'><input class="selected-amount-hidden" type="hidden" value='+t+">"),$("div.account-node i.selected-value").removeClass("selected-value"),$(".center-div #account-table tbody tr").siblings().find("input.share-debit, input.share-credit, input.distribution-debit, input.distribution-credit, input.total-debit, input.total-credit, input.total-balance, input.final-distribution-debit, input.final-distribution-credit, input.final-distribution-balance, input.final-total-debit, input.final-total-credit, input.final-total-balance").removeClass("popout"),calculateBalance()}else""==t||"0"==t?(bootbox.alert("Selection Input value should not be zero or blank."),$this.focus()):(bootbox.alert("Percentage value should not be zero or blank."),$(optionWrapper).find(".calculate-amount:visible").focus());$("div.account-node i.selected-value").removeClass("addDisabled")})}),window.puJsFileLoadCounter++,$(document).ready(function(){$("body").on("keydown",".tabber li:first",function(e){var t=e.keyCode?e.keyCode:e.which;if(13==t&&(e.preventDefault(),addChildProperty($(this)),tabPositions(),calculatePlusIcons(),e.stopPropagation()),40==t){var n=$(this).parents(".tabber").find(".runTab"),i=n.index($(this).find(".runTab"));$(n[i+1]).focus(),e.stopPropagation()}if(9==t&&e.preventDefault(),8==t&&0==$(this).find(".runTab:first").val().length){if(void 0==$(this).prev().closest("li").find(".runTab").attr("class")){var a=$(this).closest("ol").closest("li").find(".runTab"),s=(o=(o=$(this).find("textarea").prop("id")).replace("property_",""))+",";$("#old_"+o).find("ol li").each(function(){s=s+$(this).attr("data-class")+","});r=$("#remove_prop_ids").val()+s;$("#remove_prop_ids").attr("value",r),$(this).remove(),a.focus()}else{$(this).prev().closest("li").find(".runTab").focus();var o=$(this).find("textarea").prop("id"),s=(o=o.replace("property_",""))+",";$("#old_"+o).find("ol li").each(function(){s=s+$(this).attr("data-class")+","});var r=$("#remove_prop_ids").val()+s;$("#remove_prop_ids").attr("value",r),$(this).remove()}return calculatePlusIcons(),0==$(".tabber li").length&&($(".tabber").closest(".sortable").find(".addplus").empty(),$(".tabber").closest(".sortable").find(".addplus").hide()),setNumberPrint(),!1}}),$("body").on("keydown",".instanceRunTab:last, .runTab:last",function(e){9==(e.keyCode?e.keyCode:e.which)&&e.preventDefault()}),$("body").on("keydown",".tabber li:not(:first)",function(e){var t=e.keyCode?e.keyCode:e.which;if(e.shiftKey&&9==t){if(e.preventDefault(),!$(this).closest("ol").hasClass("tabber")){var n=$(this).closest("ol").closest("li");$(this).insertAfter(n),$(this).find(".runTab").focus()}return tabPositions(),calculatePlusIcons(),!1}if(9==t)return e.preventDefault(),void 0!=$(this).prev("li").attr("id")&&$(this).prev().find("ol:first").append($(this)).find(".runTab").focus(),tabPositions(),calculatePlusIcons(),increaseWidthEdit(t),!1;if(8==t){if(0==$(this).find(".runTab:first").val().length){if(void 0==$(this).prev().closest("li").find(".runTab").attr("class")){var i=$(this).closest("ol").closest("li").find(".runTab"),a=$(this);increaseWidthEdit(t,a);o=(s=(s=$(this).find("textarea").prop("id")).replace("property_",""))+",";$("#old_"+s).find("ol li").each(function(){o=o+$(this).attr("data-class")+","});r=$("#remove_prop_ids").val()+o;$("#remove_prop_ids").attr("value",r),$(this).remove(),i.focus()}else{$(this).prev().closest("li").find(".runTab").focus();var s=$(this).find("textarea").prop("id"),o=(s=s.replace("property_",""))+",";$("#old_"+s).find("ol li").each(function(){o=o+$(this).attr("data-class")+","});var r=$("#remove_prop_ids").val()+o;$("#remove_prop_ids").attr("value",r),$(this).remove()}return calculatePlusIcons(),setNumberPrint(),!1}tabPositions(),calculatePlusIcons(),setNumberPrint(),e.stopPropagation()}if(13==t&&(e.preventDefault(),addChildProperty($(this)),tabPositions(),calculatePlusIcons(),increaseWidthEdit(t),e.stopPropagation()),38==t){if(void 0==$(this).prev().closest("li").find(".runTab").attr("class")){i=$(this).closest("ol").closest("li").attr("id");$("#"+i).find(".runTab").first().focus()}else $(this).prev().closest("li").find(".runTab").focus();return!1}if(40==t){var d=$(this).parents(".tabber").find(".runTab"),l=d.index($(this).find(".runTab"));$(d[l+1]).focus(),e.stopPropagation()}}),$("body").on("click",".addplus span",function(){var e,t=$(this).index();e=t===$(".addplus span").not(".number_print").length?$(".tabber").find("ol:last"):$(".tabber").find("[position="+t+"]").last(),addChildProperty(e),tabPositions()}),$("body").on("mouseover",".addplus span",function(){var e=$(this).index()-1;$("[position="+e+"]").find(".node-content:first").addClass("node-selected-hover")}),$("body").on("mouseleave",".addplus span",function(){$(".tabber li").find(".node-content").removeClass("node-selected-hover")}),$("body").on("dblclick",".tabber li .node-circle",function(e){var t=$(this).closest("li");"block"==t.find("ol").css("display")?t.find("ol").css("display","none"):t.find("ol").css("display","block")}),$("body").on("click",".tabber .addclass",function(){var e=$(this).closest("li").find("ol").first();addChildProperty(e)}),$("body").on("keydown","#common_name",function(e){13==(e.keyCode?e.keyCode:e.which)&&e.preventDefault()}),calculatePlusIcons()}),$(document).ready(function(){tabPositions()});var classBuilder=[];window.puJsFileLoadCounter++;var firstElementDate="",lastElementDate="";$(function(){var e=!1,t="",n="";$("body").on("mousedown","#pui_calendar div",function(i){rightMenuDropDown();i.keyCode?i.keyCode:i.which;e=!0;var a=$(this);return(3!==i.which||!$(this).hasClass("selected"))&&(i.shiftKey&&""!=t&&$("#"+t).index()<=$(this).index()?(void 0==$("#"+t).attr("id")&&(t=$("#pui_calendar div:first").attr("id")),$("#"+t).nextAll().addBack().each(function(e,t){if($(this).addClass("selected"),n=$(this).attr("id"),lastElementDate=new Date($(this).attr("data-year"),$(this).attr("data-month")-1,$(this).attr("data-date")),$(this).attr("id")==a.attr("id"))return!1}),!1):($("#pui_calendar div").removeClass("selected"),$(this).addClass("selected"),t=$(this).attr("id"),void(firstElementDate=new Date($(this).attr("data-year"),$(this).attr("data-month")-1,$(this).attr("data-date")))))}),$("*").mouseup(function(){e=!1}),$("body").on("mouseover","#pui_calendar div",function(){1==e&&(n="",$("#pui_calendar div").removeClass("selected"),n=$(this).attr("id"),lastElementDate=new Date($(this).attr("data-year"),$(this).attr("data-month")-1,$(this).attr("data-date")),$("#"+t).index()<=$("#"+n).index()&&(void 0==$("#"+t).attr("id")&&(t=$("#pui_calendar div:first").attr("id")),$("#"+t).nextAll().addBack().each(function(e,t){if($(this).addClass("selected"),$(this).attr("id")==n)return!1})))}),$("body").on("click","#right_aContextMenubar #NewEventFlyout",function(){$("#NewEventFlyout").animate({"margin-right":"0"},300),setTimeout(function(){$("#NewEventFlyout.rightFlyout").css("width",$("#calender-screen .display-wrapper").outerWidth()+61),$("#NewEventFlyout .courseflyout").css("width",$("#calender-screen .display-wrapper").outerWidth()-1)},300),$(".nano").nanoScroller();var e=numberDateCalculation(firstElementDate,0);$(".newevent-startdate").datepicker().datepicker("setDate",e),$(".newevent-startdate").datepicker("option","minDate","0"),$(".daysNumber").val($("#pui_calendar div.selected").length),1==$("#pui_calendar div.selected").length?enddate=numberDateCalculation($(".newevent-startdate").val(),0):enddate=numberDateCalculation(lastElementDate,0),$(".newevent-enddate").datepicker().datepicker("setDate",enddate),$(".newevent-enddate").datepicker("option","minDate",$(".newevent-startdate").val()),setDays(),$(".specific-hour").val(24*$(".daysNumber").val()),$(".specific-startdate").datepicker().datepicker("setDate",e),$(".specific-startdate").datepicker("option","minDate","0");var t=numberDateCalculation(enddate,1);$(".specific-enddate").datepicker("option","minDate",$(".specific-startdate").val()),$(".specific-enddate").datepicker().datepicker("setDate",t),$(".specific-starttime").val("12:00AM"),$(".specific-endtime").val("12:00AM")}),$("body").on("click","[data-original-title='NewEventCancel']",function(){var e=$("#NewEventFlyout").outerWidth()+60;$("#NewEventFlyout").animate({"margin-right":"-"+e+"px"},300)}),$("body").on("click",'[data-id="74_Add event"]',function(e){$("#NewEventFlyout").animate({"margin-right":"0"},300),setTimeout(function(){$("#NewEventFlyout.rightFlyout").css("width",$("#calender-screen .display-wrapper").outerWidth()+61),$("#NewEventFlyout .courseflyout").css("width",$("#calender-screen .display-wrapper").outerWidth()-1)},300),$(".nano").nanoScroller(),$(".newevent-startdate").datepicker().datepicker("setDate",new Date),$(".newevent-startdate").datepicker("option","minDate","0"),$(".newevent-enddate").datepicker().datepicker("setDate",new Date),$(".newevent-enddate").datepicker("option","minDate","0"),$(".daysNumber").val("1"),$(".specific-hour").val("24"),$(".specific-startdate").datepicker().datepicker("setDate",new Date),$(".specific-startdate").datepicker("option","minDate","0");var t=numberDateCalculation(new Date,1);$(".specific-enddate").datepicker().datepicker("setDate",t),$(".specific-enddate").datepicker("option","minDate","0"),$(".specific-starttime").val("12:00AM"),$(".specific-endtime").val("12:00AM"),e.stopPropagation()})}),window.puJsFileLoadCounter++;var ErrorModule=function(){function e(e){return'<span class="'+e.error_class+'">! Required Field.</span>'}function t(e,t){var n={"error-msg":"letter-error-msg","letter-error-msg":"error-msg"};e.find("."+t).remove(),e.find("."+n[t]).remove()}return{appendErrorAfter:function(n,i){var a=$.extend({error_class:"error-msg"},i||{});t(n.parent(),a.error_class),n.after(e(a))}}}();window.puJsFileLoadCounter++,objChatfn=!0,$(document).ready(function(){"localhost"!==location.hostname&&checkContextMenu(),$(document).on("input","textarea.message",function(){}),$("body").on("keydown",".message",function(e){if(13===(e.keyCode?e.keyCode:e.which)&&!e.shiftKey){var t=e.currentTarget.id;checkContextMenu(),$(".connection_notif").hasClass("error-message-alert")||$(".send-btn").trigger("click",t),e.preventDefault()}}),$(document).bind({dragenter:function(e){e.stopPropagation(),e.preventDefault();var t=e.originalEvent.dataTransfer;t.effectAllowed=t.dropEffect="none"},dragover:function(e){e.stopPropagation(),e.preventDefault();var t=e.originalEvent.dataTransfer;t.effectAllowed=t.dropEffect="none"}}),$("body").on("keypress",".message",function(e){if($("#error_msg_file").remove(),0==chattimer){var t=$(".chat_wrapper.active .chatters").attr("data-chatter"),n={typing:"true",sender:setUserID,messageto:t,username:setUsername};websocket.send(JSON.stringify(n)),chattimer=1}setTimeout(function(){var e={typing:"false",sender:setUserID,messageto:t,username:setUsername};websocket.send(JSON.stringify(e)),chattimer=0},1e4)}),$("body").on("click",".send-btn",function(e,t){if(paste_printScreen_case)sendAttachedFile(t),paste_printScreen_case=!1;else{checkContextMenu();var n=$(".message").val(),i=$(".chat_wrapper.active .chatters").attr("data-chatter"),a=$(".chat_wrapper.active").attr("data-group");if(void 0==a&&(a=0),""==$.trim(n)){alert("Enter Some message Please!");n=$(".message").val("");return}if($.trim(n).length>2e3)return void alert("Character limit upto 2000");var s=$("#"+i).find(".user-node-id").data("id"),o=$(".panel-heading.panel_active").data("id");if($("#add-text").hasClass("edited-statement"))var r="editMessage",d=$(".message").data("id");else var r="null",d="";var l=randomNumberFromRange(100,40),c={message:n.trim(),sender:setUserID,messageto:i,username:setUsername,timestamp:getTime(),isGroupMessage:a,type:"Statement",user_node:s,course_instance_node_id:o,action:r,node_instance_propertyid:d,random_id:l};console.log(c),void 0!=i?d?($(".desc_drop."+d).text().trim()!=$("#add-text").val()&&(saveNodeData(c),websocket.send(JSON.stringify(c))),$(".message").val(""),$("#add-text").removeClass("edited-statement"),$("#add-text").data("id","")):(saveNodeData(c),websocket.send(JSON.stringify(c)),$(".message").val("")):$(".message").val(""),$(".mini-dialogue-flyout .mini-type-textarea .append-top").length?($(".mini-dialogue-flyout .expand-collapse-box:visible").trigger("click"),$(".ref-min-center-dialogue .right-bar-tab.default-view-tab").show(),$(".mini-dialogue-flyout .ref-set-height").height($(".mini-dialogue-flyout").height()-($(".right-bar-tab").height()+$(".mini-type-textarea").height()))):($(".message").height(""),$(".message").height($(".message").prop("scrollHeight")-20))}$(".mini-dialogue-flyout .ref-set-height.nano").nanoScroller({scroll:"bottom"})})}),$("body").on("click",".online_users",function(e){if($(this).attr("id")&&($(".online_users").removeClass("selected"),$(this).addClass("selected"),updateMessage(this),$(".ref-min-center-dialogue .right-bar-tab.default-view-tab").show(),$(".expand-collapse-box").hasClass("append-top"))){var t=$(".mini-dialogue-flyout").height()-$(".ref-min-center-dialogue .right-bar-tab").outerHeight();$(".mini-type-textarea").css({height:t,"border-top":"none"})}});var notificationTimeout;visibilitychange=function(){var e;void 0!==document.hidden?e="visibilityState":void 0!==document.webkitHidden?e="webkitVisibilityState":void 0!==document.mozHidden?e="mozVisibilityState":void 0!==document.msHidden&&(e="msVisibilityState"),document[e]};