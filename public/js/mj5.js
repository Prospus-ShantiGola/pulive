function createSocketConnection(){return!1}function refreshCourseList(){$("#tempControler").attr("value","menudashboard"),$("#tempAction").attr("value","index"),$.post(domainUrl+"menudashboard/index",{mode:"0",setUserID:setUserID},responseCallAction,"html")}function strip(e){var t=document.createElement("DIV");return t.innerHTML=e,t.textContent||t.innerText||""}function checkBrowser(){var e=navigator.userAgent.toLowerCase();e.indexOf("firefox")>-1?$("body").addClass("firefox"):e.indexOf("opera")>-1?$("body").addClass("opera"):e.indexOf("msie")>-1?($("body").addClass("ie"),version=parseFloat(navigator.appVersion.split("MSIE")[1]),$("body").addClass("ie"+version)):null!=e.match("chrome")?$("body").addClass("chrome"):e.indexOf("safari")>-1&&$("body").addClass("safari")}function DoLogin(e){var t=$(".user_login_form .form-group").find("#emailaddress").val(),i=$(".user_login_form .form-group").find("#password").val(),n=$(".user_login_form .form-group").find("#logged_in_user").val();return $("#email_error").html(""),$("#password_error").html(""),$(".user_login_form .form-group").find("#emailaddress").removeClass("form-error-field"),$(".user_login_form .form-group").find("#password").removeClass("form-error-field"),""==t?($(".user_login_form .form-group").find("#emailaddress").addClass("form-error-field"),$("#email_error").html("Please enter email address."),!1):isValidEmail(t)?""==i?($(".user_login_form .form-group").find("#password").addClass("form-error-field"),$("#password_error").html("Please enter password."),!1):(void 0===e&&(e="N"),void $.post(domainUrl+"login/doLogin",{emailaddress:t,logged_in_user:n,password:i,forceUser:e},getLoginResponse,"JSON")):($(".user_login_form .form-group").find("#emailaddress").addClass("form-error-field"),$("#email_error").html("Please enter valid email address."),!1)}function callforceloginAction(){DoLogin(!0)}function getLoginResponse(e,t){switch($(".user_login_form .form-group").find("#logged_in_user").remove(),e.result){case"3":$("#confirmation-signin-popup #loggedin-msg").html(e.msg),$("#confirmation-signin-popup").modal("show"),$(".user_login_form .form-group").find("#emailaddress").after('<input type="hidden" value="'+e.logged_in_user+'" id="logged_in_user" name="logged_in_user" />'),$(".show-mini").hide();break;case"2":var i="The account "+e.email_address+" is already logged in. If you log in here, that session will be terminated.</br></br> Would you like to continue logging in?";$("#confirmation-signin-popup #loggedin-msg").html(i),$("#confirmation-signin-popup").modal("show"),$(".show-mini").hide();break;case"1":$("#error_msg_signin").html(e.msg),$(".show-mini").hide();break;default:$("#error_msg_signin").html(""),$(".user_login_form .form-group").each(function(e){$(this).val("")}),setUsername=e.data.first_name+" "+e.data.last_name,setUserID=e.data.node_id,"VesselWise.SalesRepresentative"==$.trim(e.data.common_name)?window.location.href=domainUrl+"index/subscription":window.location.href=domainUrl+"inbox"}}function isValidEmail(e){return/^[a-zA-Z0-9]+([-._][a-zA-Z0-9]+)*@([a-zA-Z0-9]+(-[a-zA-Z0-9]+)*\.)+[a-zA-Z]{2,4}$/.test(e)&&/^(?=.{1,64}@.{4,64}$)(?=.{6,100}$).*/.test(e)}function checkUserInactivity(){$(document).idleTimeout({redirectUrl:window.location.href,idleTimeLimit:idle_timeout,idleCheckHeartbeat:2,customCallback:!1,activityEvents:"click keypress scroll wheel mousewheel mousemove",errorAlertMessage:'Please disable "Private Mode", or upgrade to a modern browser. Or perhaps a dependent file missing. Please see: https://github.com/marcuswestin/store.js',sessionKeepAliveTimer:!1,sessionKeepAliveUrl:window.location.href})}function updateCoords(e){$("#x").val(e.x),$("#y").val(e.y),$("#w").val(e.w),$("#h").val(e.h)}function checkCoords(){return!!parseInt($("#w").val())||(bootbox.alert("Please select a crop region then press submit."),!1)}function getFirstRange(){var e=rangy.getSelection();return e.rangeCount?e.getRangeAt(0):null}function countEDTWords(){var e=0;$(".edtParagraph").each(function(t,i){var n=$.trim($(this).text());""!=n&&(e=n.replace(/[^\w ]/g," ").split(/[\s]+/).length+e)}),$(".doTotalsWords").text(e+" words")}function rangeInitialize(){rangy.init();var e=rangy.modules.ClassApplier||rangy.modules.CssClassApplier;rangy.supported&&e&&e.supported&&(edtBoldApplier=rangy.createClassApplier("edtBold"),edtUnderlineApplier=rangy.createClassApplier("edtUnderline"),edtItalicApplier=rangy.createClassApplier("edtItalic"),edtStrikeApplier=rangy.createClassApplier("edtStrike"),edtFontFamilyApplier=rangy.createClassApplier("fontFamily",{elementProperties:{style:{"font-family":"inherit"}}}),edtFontFamilySizeApplier=rangy.createClassApplier("fontSize",{elementProperties:{style:{"font-size":"inherit"}}}),edtFontFamilyColorApplier=rangy.createClassApplier("fontColor",{elementProperties:{style:{color:"inherit"}}}),edtFontFamilyBGColorApplier=rangy.createClassApplier("fontBGColor",{elementProperties:{style:{"background-color":"inherit"}}}))}function columnizer(){$(".edtContainer .edtColumns").empty();var e=minMaxId(".edt .edtParagraph");for(i=0;i<=e;i++)$(".edtContainer .edtColumns").append("<div>"+(i+1)+"</div>")}function minMaxId(e){var t=null,i=null;return $(e).each(function(){var e=parseInt($(this).attr("data-x"),10);(null===t||e<t)&&(t=e),(null===i||e>i)&&(i=e)}),i}function runTOC(){outLineArray=[],tempOutLineArray=[],tempOutLineIndex=[];var e=0,t=$("#edtAutoLevels").val();"custom"!=t&&void 0==getSelectedEDTLevel||(t=getSelectedEDTLevel),$(".collapsableEDTLevelsContent").empty();var i=$(".edtParagraph"),n=$(".collapsableEDTLevelsContent"),s="";i.each(function(t){var n=$(this).attr("data-x");outLineArray.push(parseInt(n));var a=$(this).outerHeight();$(this),i.eq(t).attr("data-x");$(this).hasClass("selectedHeader")?(e=1,s=s+"<span style='height:"+a+"px' data-index='"+t+"' class='disabled'>&nbsp;</span>"):s=s+"<span style='height:"+a+"px' data-index='"+t+"'>&nbsp;</span>"}),n.append(s),tempOutLineArray=outLineArray.slice();for(var a=0,o=0;o<tempOutLineArray.length;o++){if(0!=tempOutLineArray[o]){var r=tempOutLineArray[o-1],l=tempOutLineArray[o];l!=r&&l!=parseInt(r)+1&&l>r&&(tempOutLineArray.splice(o,1),tempOutLineIndex.push(a),o-=1)}a+=1}var d=Math.max.apply(Math,tempOutLineArray);$("#edtAutoLevels").empty(),0==d&&0==e&&$("#edtAutoLevels").css("display","none");for(var c=0;c<d;c++)$("#edtAutoLevels").css("display","inline"),c==t?$("#edtAutoLevels").append("<option value="+c+" selected>Level "+(parseInt(c)+1)+"</option"):$("#edtAutoLevels").append("<option value="+c+">Level "+(parseInt(c)+1)+"</option");1==e&&$("#edtAutoLevels").prepend("<option value='custom' selected>Custom</option");if($(".edtTOC ul").empty(),0==d&&0==e)return!1;d="custom"==$("#edtAutoLevels").val()?parseInt(getSelectedEDTLevel)+1:parseInt($("#edtAutoLevels").val())+1;for(var u="",h=0;h<outLineArray.length;h++)if(i.eq(h).attr("data-x")<d&&-1==tempOutLineIndex.indexOf(h)&&""!=$.trim(i.eq(h).text())){var p=$.trim(i.eq(h).text());p.length>40&&(p=p.substring(0,40),p=$.trim(p)+"...");var f=10*i.eq(h).attr("data-x");i.eq(h).hasClass("selectedHeader")?$(".collapsableEDTLevelsContent span:eq("+h+")").addClass("disabled"):(u=u+"<li style='margin-left:"+f+"px' data-num="+h+">"+p+"</li>",$(".collapsableEDTLevelsContent span:eq("+h+")").addClass("selected"))}$(".edtTOC ul").append(u)}function indexing(e){(new Date).getTime();$(".edt .edtList").each(function(e){var t=20*$(this).attr("data-x");$(this).css("margin-left",t+"px"),$(this).removeClass("edtListSub");var i=$(this);$(this).hasClass("edtList")&&$(this).prev(".edtParagraph").hasClass("edtList")&&$(this).attr("data-x")>$(this).prev(".edtParagraph").attr("data-x")&&$(this).addClass("edtListSub"),$(this).hasClass("edtList")&&$(this).prevAll().each(function(e,t){if(!$(this).hasClass("edtList"))return!1;if(i.attr("data-x")==$(this).attr("data-x"))return n=(n=$(this).attr("class")).replace(/edtCenter|edtLeftALign|edtRightAlign/gi,""),i.hasClass("selectedHeader")?i.addClass(n):(i.addClass(n),i.removeClass("selectedHeader")),!1;if(i.attr("data-x")>$(this).attr("data-x")){var n=$(this).attr("class");return i.hasClass("selectedHeader")?i.addClass(n):(i.addClass(n),i.removeClass("selectedHeader")),$(this).hasClass("edtList")&&i.addClass("edtListSub"),!1}})}),$("#edt").hasClass("unstructured")?$(".edtParagraph").outerHeight("auto"):$("#sNumbers").is(":checked")||$(".edtParagraph").outerHeight("auto"),countEDTWords(),"withoutMe"!=e&&pushUndoRedo()}function outLineNum(e){if($("#edt").hasClass("unstructured"))return!1;if(void 0!=e)t=e.index();else var t=0;var i=$(".edt .edtParagraph").length;void 0==$(".edtContainer .edtParagraph:eq("+t+")").attr("data-s")&&$($(".edtContainer .edtParagraph:eq("+t+")")).prevAll().each(function(e,i){void 0==$(this).attr("data-s")&&""==$(this).attr("data-s")||(t=$(this).index())});$(".edtContainer .edtParagraph");for(var n=[],s=[],a=$(".edtParagraph"),o=0;o<=i-1;o++){var r=a.eq(o).attr("data-x");if(s.push(r),r=Number(r),a.eq(o).attr("data-s",""),0==r){if(0==o)l=a.eq(o).index();else var l=(w=s.slice(0,o)).lastIndexOf("0");var d=n[l];void 0==d&&(d=0),l=Number(d)+1,n.push(l+".")}else{var c,u=a.eq(o).prev(".edtParagraph").attr("data-x"),h=n[a.eq(o).prev(".edtParagraph").index()];if(u==r){var p=h.split("."),f=parseInt(p[p.length-2])+1,m=p[p.length-2].length+1;c=(x=h.substring(0,h.length-m))+f+"."}else if(u<r){for(var g=r-u,v="",b=1;b<g;b++)v+="-.";c=h+v+"1."}else{var _,y=0,w=s.slice(0,o);w.reverse();var C=w.length-1;if($(w).each(function(e,t){if(s[C-e]<=r)return s[C-e]==r&&(y=1),_=C-e,u=s[C-e],!1}),h=n[_],0==y){var g=r-u,v="";for(b=1;b<g;b++)v+="-.";c=h+v+1+"."}else{p=h.slice(-2);p=parseInt(p)+1;var x=h.substring(0,h.length-2);c=x+p+"."}}n.push(c)}}$(n).each(function(e,t){a.eq(e).attr("data-s",t),""==a.eq(e).text()&&a.eq(e).html("<br>")})}function transverseNodes(e){for(var t=assignTransversingThis.attr("class"),i=20*(l=assignTransversingThis.attr("data-x")),n=$(e).children(),s=0;s<n.length;s++){if(0==s){var a=!1;if("block"!==getElementDefaultDisplay(e.children[s].nodeName)&&1==n.length&&(a=!0),"block"!==getElementDefaultDisplay(e.children[s].nodeName)&&"TABLE"!==e.children[s].nodeName&&!a){if("IMG"==e.children[s].nodeName){var o=e.children[s].getAttribute("src"),r=Date.now()+"_"+Math.floor(1e12*Math.random()+1);clearTimeout(imgLoaderTime),$(".edtCustomLoader").show(),pasteHtmlAtCaret("<div class='dummyIMG' id='"+r+"'></div> &nbsp;"),$.ajax({method:"POST",url:"edt-file-upload.php",data:{imgPath:o,type:"pasteUpload"}}).success(function(e){$("#"+r).parent(".edtParagraph").html($("#"+r).parent(".edtParagraph").html().replace(/(<br>\s*)+/g,"")),$("#"+r).html("<img src='"+e+"'>").find("img").unwrap(),imgLoaderTime=setTimeout(function(){$(".edtCustomLoader").hide()},500)})}else pasteHtmlAtCaret($.trim(e.textContent));return assignTransversingThis.html(assignTransversingThis.html().replace(/(<br>\s*)+/g,"")),cursorManager.setEndOfContenteditable(assignTransversingThis.get(0)),setTimeout(function(){$(".mainScroll").scrollTop(Math.abs($(assignTransversingThis).offset().top-$(assignTransversingThis).height()-$(".mainScroll").offset().top+$(".mainScroll").scrollTop()))}),$("#sNumbers").is(":checked")&&outLineNum(),indexing(),setDocEntryHig(),holdPaste=!1,!1}}var l=assignTransversingThis.attr("data-x"),t="edtParagraph";if(1==innerListMode)c=20*(d=parseInt(l)+1);else var d=l,c=20*d;innerListMode=!1;var u=$(n[s]).attr("style");if(void 0==u&&(u=""),"TABLE"==e.children[s].nodeName||"TBODY"==e.children[s].nodeName||"TR"==e.children[s].nodeName){var h=document.createElement("DIV");h.innerHTML=e.children[s].innerHTML,innerListMode=!0,transverseNodes(h)}else if(($(n[s]).hasClass("MsoListParagraphCxSpFirst")||$(n[s]).hasClass("MsoListParagraphCxSpMiddle")||$(n[s]).hasClass("MsoListParagraphCxSpLast")||$(n[s]).hasClass("MsoListParagraph")||$(n[s]).hasClass("MsoNormal"))&&"-1"!=u.indexOf(" level1 ")){m="<div class='"+t+" edtList' data-x='"+(d=0)+"' style='margin-left:"+(c=20*d)+"px'>"+$.trim(n[s].textContent)+"</div>";0==$.trim($(assignTransversingThis).text()).length?($(assignTransversingThis).html($.trim(n[s].textContent)),$(assignTransversingThis).attr("data-x",d).addClass(t+" edtList").css("margin-left",c)):($(m).insertAfter(assignTransversingThis),assignTransversingThis=assignTransversingThis.next())}else if(($(n[s]).hasClass("MsoListParagraphCxSpFirst")||$(n[s]).hasClass("MsoListParagraphCxSpMiddle")||$(n[s]).hasClass("MsoListParagraphCxSpLast")||$(n[s]).hasClass("MsoListParagraph")||$(n[s]).hasClass("MsoNormal"))&&"-1"!=u.indexOf(" level")){d="-1"!=u.indexOf(" level2 ")?1:"-1"!=u.indexOf(" level3 ")?2:"-1"!=u.indexOf(" level4 ")?3:"-1"!=u.indexOf(" level5 ")?4:"-1"!=u.indexOf(" level6 ")?5:"-1"!=u.indexOf(" level7 ")?6:"-1"!=u.indexOf(" level8 ")?7:"-1"!=u.indexOf(" level9 ")?8:0;m="<div class='"+t+" edtList edtListSub' data-x='"+d+"' style='margin-left:"+(c=20*d)+"px'>"+$.trim(n[s].textContent)+"</div>";0==$.trim($(assignTransversingThis).text()).length?($(assignTransversingThis).html($.trim(n[s].textContent)),$(assignTransversingThis).attr("data-x",d).addClass(t+" edtList").css("margin-left",c)):($(m).insertAfter(assignTransversingThis),assignTransversingThis=assignTransversingThis.next())}else if("UL"==n[s].nodeName||"OL"==n[s].nodeName||"LI"==n[s].nodeName)$(n[s].children).each(function(e,i){if("OL"==n[s].children[e].tagName||"UL"==n[s].children[e].tagName)(u=document.createElement("DIV")).innerHTML=n[s].children[e].outerHTML,innerListMode=!0,setFirstTime=1,transverseNodes(u);else if(n[s].children[e].children.length>1)for(var a=n[s].children[e].children.length,o=0;o<a;o++)if(0==$(n[s].children[e].children).has("li").length){if($(n[s].children[e]).find("img").length>0){var r=$(n[s].children[e]).find("img").attr("src"),l=Date.now()+"_"+Math.floor(1e12*Math.random()+1);clearTimeout(imgLoaderTime),$(".edtCustomLoader").show();h="<div class='dummyIMG' id='"+l+"'></div> &nbsp;"+n[s].children[e].textContent.trim()}else h=n[s].children[e].textContent.trim();if(0!=h.trim().length||$(n[s].children[e]).find("img").length>0){p="<div class='"+t+" edtList' data-x='"+d+"' style='margin-left:"+c+"px'>"+h+"</div>";$(p).insertAfter(assignTransversingThis),assignTransversingThis=assignTransversingThis.next(),$(n[s].children[e]).find("img").length>0&&$.ajax({method:"POST",url:"edt-file-upload.php",data:{imgPath:r,type:"pasteUpload"}}).success(function(e){$("#"+l).parent(".edtParagraph").html($("#"+l).parent(".edtParagraph").html().replace(/(<br>\s*)+/g,"")),$("#"+l).html("<img src='"+e+"'>").find("img").unwrap(),imgLoaderTime=setTimeout(function(){$(".edtCustomLoader").hide()},500)});break}}else if("UL"==n[s].children[e].children[o].tagName||"OL"==n[s].children[e].children[o].tagName){var u=document.createElement("DIV");u.innerHTML=n[s].children[e].children[o].outerHTML,innerListMode=!0,setFirstTime=1,transverseNodes(u)}else if(0==setFirstTime){if($(n[s].children[e].children[o]).find("img").length>0){var r=$(n[s].children[e].children[o]).find("img").attr("src"),l=Date.now()+"_"+Math.floor(1e12*Math.random()+1);clearTimeout(imgLoaderTime),$(".edtCustomLoader").show();h="<div class='dummyIMG' id='"+l+"'></div> &nbsp;"+n[s].children[e].children[o].textContent.trim()}else h=n[s].children[e].children[o].textContent.trim();(0!=h.trim().length||$(n[s].children[e].children[o]).find("img").length>0)&&(assignTransversingThis.addClass("edtList"),pasteHtmlAtCaret(h),$(n[s].children[e].children[o]).find("img").length>0&&$.ajax({method:"POST",url:"edt-file-upload.php",data:{imgPath:r,type:"pasteUpload"}}).success(function(e){$("#"+l).parent(".edtParagraph").html($("#"+l).parent(".edtParagraph").html().replace(/(<br>\s*)+/g,"")),$("#"+l).html("<img src='"+e+"'>").find("img").unwrap(),imgLoaderTime=setTimeout(function(){$(".edtCustomLoader").hide()},500)})),setFirstTime=1}else{if($(n[s].children[e].children[o]).find("img").length>0){var r=$(n[s].children[e].children[o]).find("img").attr("src"),l=Date.now()+"_"+Math.floor(1e12*Math.random()+1);clearTimeout(imgLoaderTime),$(".edtCustomLoader").show();h="<div class='dummyIMG' id='"+l+"'></div> &nbsp;"+n[s].children[e].children[o].textContent.trim()}else h=n[s].children[e].children[o].textContent.trim();if(0!=h.trim().length||$(n[s].children[e].children[o]).find("img").length>0){p="<div class='"+t+" edtList' data-x='"+d+"' style='margin-left:"+c+"px'>"+h+"</div>";$(p).insertAfter(assignTransversingThis),assignTransversingThis=assignTransversingThis.next(),$(n[s].children[e].children[o]).find("img").length>0&&$.ajax({method:"POST",url:"edt-file-upload.php",data:{imgPath:r,type:"pasteUpload"}}).success(function(e){$("#"+l).parent(".edtParagraph").html($("#"+l).parent(".edtParagraph").html().replace(/(<br>\s*)+/g,"")),$("#"+l).html("<img src='"+e+"'>").find("img").unwrap(),imgLoaderTime=setTimeout(function(){$(".edtCustomLoader").hide()},500)})}}else if(0==setFirstTime){if($(n[s].children[e]).find("img").length>0){var r=$(n[s].children[e]).find("img").attr("src"),l=Date.now()+"_"+Math.floor(1e12*Math.random()+1);clearTimeout(imgLoaderTime),$(".edtCustomLoader").show();h="<div class='dummyIMG' id='"+l+"'></div> &nbsp;"+n[s].children[e].textContent.trim()}else h=n[s].children[e].textContent.trim();(0!=h.trim().length||$(n[s].children[e]).find("img").length>0)&&(assignTransversingThis.addClass("edtList"),pasteHtmlAtCaret(h),$(n[s].children[e]).find("img").length>0&&$.ajax({method:"POST",url:"edt-file-upload.php",data:{imgPath:r,type:"pasteUpload"}}).success(function(e){$("#"+l).parent(".edtParagraph").html($("#"+l).parent(".edtParagraph").html().replace(/(<br>\s*)+/g,"")),$("#"+l).html("<img src='"+e+"'>").find("img").unwrap(),imgLoaderTime=setTimeout(function(){$(".edtCustomLoader").hide()},500)})),setFirstTime=1}else{if($(n[s].children[e]).find("img").length>0){var r=$(n[s].children[e]).find("img").attr("src"),l=Date.now()+"_"+Math.floor(1e12*Math.random()+1);clearTimeout(imgLoaderTime),$(".edtCustomLoader").show();h="<div class='dummyIMG' id='"+l+"'></div> &nbsp;"+n[s].children[e].textContent.trim()}else var h=n[s].children[e].textContent.trim();if(0!=h.trim().length||$(n[s].children[e]).find("img").length>0){var p="<div class='"+t+" edtList' data-x='"+d+"' style='margin-left:"+c+"px'>"+h+"</div>";$(p).insertAfter(assignTransversingThis),assignTransversingThis=assignTransversingThis.next(),$(n[s].children[e]).find("img").length>0&&$.ajax({method:"POST",url:"edt-file-upload.php",data:{imgPath:r,type:"pasteUpload"}}).success(function(e){$("#"+l).parent(".edtParagraph").html($("#"+l).parent(".edtParagraph").html().replace(/(<br>\s*)+/g,"")),$("#"+l).html("<img src='"+e+"'>").find("img").unwrap(),imgLoaderTime=setTimeout(function(){$(".edtCustomLoader").hide()},500)})}}});else if(0!=n[s].children.length&&"block"==getElementDefaultDisplay(n[s].children[0].tagName))transverseNodes(n[s]);else{if("H1"==n[s].tagName||"H2"==n[s].tagName||"H3"==n[s].tagName||"H4"==n[s].tagName)f='<span class="edtBold">'+n[s].textContent.trim()+"</span>";else if($(n[s]).find("img").length>0){var p=$(n[s]).find("img").attr("src"),r=Date.now()+"_"+Math.floor(1e12*Math.random()+1);clearTimeout(imgLoaderTime),$(".edtCustomLoader").show();f="<div class='dummyIMG' id='"+r+"'></div> &nbsp;"+n[s].textContent.trim()}else var f=n[s].textContent.trim();if(0==setFirstTime)pasteHtmlAtCaret(f),setFirstTime=1;else{var m="<div class='edtParagraph' data-x='"+assignTransversingThisAttrDataX+"' style='margin-left:"+i+"px'>"+f+"</div>";$(m).insertAfter(assignTransversingThis),assignTransversingThis=assignTransversingThis.next(),$(n[s]).find("img").length>0&&$.ajax({method:"POST",url:"edt-file-upload.php",data:{imgPath:p,type:"pasteUpload"}}).success(function(e){$("#"+r).parent(".edtParagraph").html($("#"+r).parent(".edtParagraph").html().replace(/(<br>\s*)+/g,"")),$("#"+r).html("<img src='"+e+"'>").find("img").unwrap(),imgLoaderTime=setTimeout(function(){$(".edtCustomLoader").hide()},500)})}}}cursorManager.setEndOfContenteditable(assignTransversingThis.get(0)),setTimeout(function(){$(".mainScroll").scrollTop($(assignTransversingThis).offset().top-$(assignTransversingThis).height()-$(".mainScroll").offset().top+$(".mainScroll").scrollTop())}),autoEDTHeightCheck(),$("#sNumbers").is(":checked")&&outLineNum(),indexing(),columnizer(),setDocEntryHig(),holdPaste=!1}function parsePastedHTML(e){var t=e.closest(".edtParagraph");cursorManager.setEndOfContenteditable(t.find(".replaceMe").get(0)),t.find(".replaceMe").remove();var i=document.createElement("DIV");if(i.innerHTML=$("#pastedText").html(),$("#pastedText").html(""),0==i.children.length)return pasteHtmlAtCaret($.trim(i.textContent)),autoEDTHeightCheck(),!1;assignTransversingThis=t,assignTransversingThisAttrDataX=t.attr("data-x"),setFirstTime=0,transverseNodes(i)}function pasteHtmlAtCaret(e){var t,i;if(window.getSelection){if((t=window.getSelection()).getRangeAt&&t.rangeCount){(i=t.getRangeAt(0)).deleteContents();var n=document.createElement("div");n.innerHTML=e;for(var s,a,o=document.createDocumentFragment();s=n.firstChild;)a=o.appendChild(s);i.insertNode(o),a&&((i=i.cloneRange()).setStartAfter(a),i.collapse(!0),t.removeAllRanges(),t.addRange(i))}}else document.selection&&"Control"!=document.selection.type&&document.selection.createRange().pasteHTML(e)}function getElementDefaultDisplay(e){var t,i=document.createElement(e),n="getComputedStyle"in window;return document.body.appendChild(i),t=(n?window.getComputedStyle(i,""):i.currentStyle).display,document.body.removeChild(i),t}function autoEDTHeightCheck(){var e=document.getElementById("edt");ResizeSensor.detach(e),new ResizeSensor(e,function(){if("structured"==$("#documentMode").val()){var t=22;t=parseFloat(t);var i=e.clientHeight/t,n=$(".edtBody .numbering span").length;i=Math.round(i);var s="",a=$(".edtBody .numbering");if(i>n){for(var o=i-n,r=1;r<=o;r++)s=s+"<span>"+parseInt(n+r)+"</span>";a.append(s)}else if(i<n)for(var o=n-i,r=1;r<=o;r++)a.find("span:last").remove()}$(".edtTOC").is(":visible")&&runTOC()})}function highlightText(e){if($("#edt").unhighlight({className:"actor"}),$("#edt").unhighlight({className:"role"}),$("#edt").unhighlight({className:"terms"}),"hidden"==e)return!1;edtTagArray.length>0&&$(edtTagArray).each(function(e,t){var i=edtTagArray[e].type.toLowerCase();"Dynamic"==edtTagArray[e].fieldType?$("[data-name="+edtTagArray[e].tag+"]").addClass(i):$("#edt").highlight(edtTagArray[e].tag,{wordsOnly:!0,className:i})})}function isScrolledIntoView(e){var t=$(".edtParagraph:eq(0)").offset().top,i=$(".mainScroll").scrollTop(),n=i+$(".mainScroll").height(),s=$(e).offset().top-t;return s+$(e).height()<=n&&s>=i}function pushUndoRedo(e){currentUndoRedoState=null;var t=$("#edt");t.find(".resize-sensor").remove();$.trim(t.html())!=statusUndoRedo[statusUndoRedo.length-1]&&(statusUndoRedo.push($.trim(t.html())),statusUndoRedo.length>undoRedoLength&&statusUndoRedo.shift(),highlightText(tagStatus),autoEDTHeightCheck())}function updateInstance(){var e=$("#instanceUpdate"),t=e.data("view_instance_id"),i=e.data("view_instance_node_id"),n=e.data("class_node_id");NProgress.start(),$.post(domainUrl+"classes/updateCombinedHtml",{view_instance_id:t,view_instance_node_id:i,class_node_id:n},responseupdateInstance,"html")}function responseupdateInstance(e,t){NProgress.done(),$("#DataSaveMsg").html("<span>Instance Of VIEW Class Published Successfully</span>"),$("#DataSaveMsg").fadeIn(),setTimeout(function(){$("#DataSaveMsg").fadeOut()},3e3),console.log(e)}function setGlobalVariableFirst(){if(console.log($("#common_name_first")),console.log($("#common_name_first").val()),""==$.trim($("#common_name_first").val()))return $("#common_name_first").css("border","1px solid red"),$("#common_name_first").focus(),!1;$("#common_name_first").css("border",""),NProgress.start(),$.post(domainUrl+"classes/index",{filter_operator:"Autometic",search_text:"AutometicAll"},responseCallAutometic,"html")}function responseCallAutometic(e,t){var i=$("#tempControler").val(),n=($("#tempAction").val(),"");n=i,$(".left-side-heading").html(ucfirst(n)),$(".manifest-tab").remove(),$(".content-wrapper-new").siblings(".user-action-wrap").hide(),"grid"!=i&&"associations"!=i&&"accounts"!=i&&"process"!=i&&"menudashboard"!=i&&"calendar"!=i&&($("#center-screen").hide(),$("#ControlBar").hide(),$("#menudashboard").hide(),$("#calender-screen").hide(),$(".pui_center_content").show(),commonNameFirst=$.trim($("#common_name_first").val()),nodeTypeFirst=$("#node_type_first").val(),versioningTypeFirst=$("#version_type_first").val(),$(".pui_center_content").html(e),NProgress.done(),$(".my-profile").removeClass("active"),$(".All_li").addClass("active"),$("#common_name_first").val(""),$("#node_type_first").val(2),$("#version_type_first").val(1),$("#second-class-div").html(ajaxDataFirst),ajaxDataFirst="",manageRightMenuIcon("add","classes"),$(".breadcrumb  li:first").click(),$(".Nodex-icon").removeClass("inactiveLink"),$(".Nodex-icon").css("pointer-events","all"),$(".Nodez-icon").removeClass("inactiveLink"),$(".Nodez-icon").css("pointer-events","all"),calculatePlusIcons(),NProgress.done(),$(".content-wrapper-new").siblings(".user-action-wrap").hide(),$("#main_action_menu").show(),$("#parti_action_div_id").show(),$("#firstTime").attr("value","N"),$('.class-table tr input[type="checkbox"]').attr("disabled",!0)),StopTabBreak("class_structure_form"),StopTabBreak("instance_structure_form"),setNumberPrint("second_instance_div")}function changeCommonName(e){var t=$(e).val();$("#common_name").val(t);var i=$("#post_name").html();i=i.replace(/.+?(?=[(])/,t+" "),$("#post_name").html(i);var n=$("#second-class-div-heading").attr("alt");n=n.replace(/(:).*(?=[\s][(])/,": "+t),$("#second-class-div-heading").attr("alt",n),$("#second-class-div-heading").html(n)}function setupRightMenu(e){1==parseInt(e)?($(".Nodex-icon").addClass("inactiveLink"),$(".Nodex-icon").css("pointer-events","none"),$(".Nodez-icon").removeClass("inactiveLink"),$(".Nodez-icon").css("pointer-events","all"),$(".Subclass-icon").addClass("inactiveLink"),$(".Subclass-icon").css("pointer-events","none")):3==parseInt(e)?($(".Nodex-icon").addClass("inactiveLink"),$(".Nodex-icon").css("pointer-events","none"),$(".Nodez-icon").addClass("inactiveLink"),$(".Nodez-icon").css("pointer-events","none"),$(".Subclass-icon").addClass("inactiveLink"),$(".Subclass-icon").css("pointer-events","none")):($(".Nodex-icon").removeClass("inactiveLink"),$(".Nodex-icon").css("pointer-events","all"),$(".Nodez-icon").removeClass("inactiveLink"),$(".Nodez-icon").css("pointer-events","all"),$(".Subclass-icon").removeClass("inactiveLink"),$(".Subclass-icon").css("pointer-events","all"))}function getClassStructure(e){$(".list-row").removeClass("current"),$("#list-row_"+e).addClass("current"),$(".form_active").length||$(".classes_top_cl").trigger("click"),"N"==$("#firstTime").val()&&NProgress.start(),$.post(domainUrl+"classes/classStructure",{class_id:e,mode:"Display"},responseClassStructure,"html")}function responseClassStructure(e,t){$("#second-class-div").html(e),$(".dz-hidden-input").next(".bootstrap-filestyle:visible").length&&$(".dz-hidden-input").next().hide(),void 0!=selectedNodeIDNumber&&($("#second-class-div .node-content").removeClass("node-selected"),$("#second-class-div [data-class ="+selectedNodeIDNumber+"]").find(".node-content").first().addClass("node-selected")),$("#second-class-div .node-selected").length<1&&$("#second-class-div .node-content").first().addClass("node-selected"),manageRightMenuIcon("listing","classes"),NProgress.done(),setPaperBckgrnd(),removeString(),setNumberPrint(),$('.class-table tr input[type="checkbox"]').removeAttr("disabled",!0),manageNiceScroll()}function paginationFolderAjax(e,t,i,n,s){NProgress.start(),$("#folder-first-instance-list-div").html(""),$.post(e+"/folderList",{page:t,order_by:i,order:n,type:"no-pagination",mode:s},responsePaginationFolderAjax,"html")}function paginationDocumentDetailsAjax(e,t,i,n,s){NProgress.start(),$("#course-instance-list-div").html("");var a=$("#FolderList").find("li.active").find("span").attr("data-id");$.post(e+"/folderDetails",{page:t,order_by:i,order:n,type:"no-pagination",mode:s,class_node_id:a},responseCallFolderDetailsAction,"html")}function courseAjax(e,t,i,n){NProgress.start(),$("#course-instance-list-div").html(""),$.post(e+"/index",{setUserID:setUserID,order_by:t,order:i,mode:n},responseCourseAjax,"html")}function responseCourseAjax(e,t){$("#course-instance-list-div").html(e),$(".list-tab a").addClass("active"),$("#center-screen, #ControlBar, .pui_center_content, #calender-screen, #actors-screen, #documents-screen, #main-screen").hide(),$("#menudashboard").html(e),$("#menudashboard").show(),$(".content-wrapper-new").siblings(".user-action-wrap").hide(),$("#new_course_action_menu").show(),$("#course_action_menu").hide(),setColumnsH(),$("#newDocumentFlyout").animate({right:"-100%"},300).removeClass("in"),$("#openCourseFlyout").animate({left:0},300).removeClass("in"),$(".loadder").hide();var i=$(".courseboard-table tr.current").attr("data-id");void 0==i&&(i=""),$.post(domainUrl+"menudashboard/courseView",{node_instance_id:i},responseCallcourseViewAction,"html"),dualPaneHeight(),hitName="",dashboardInitalLoad(),NProgress.done()}function paginationAjax(e,t,i,n,s){NProgress.start(),$.post(e+"/index",{page:t,order_by:i,order:n,type:"pagination",itemPerPage:s},responsePaginationAjax,"html")}function setPage(e){NProgress.start(),$.post(domainUrl+"classes/index",{page:1,order_by:"node_class_id",order:"DESC",type:"pagination",itemPerPage:e},responsePaginationAjax,"html")}function paginationAjaxList(e,t,i,n){NProgress.start(),$.post(e+"/index",{page:t,order_by:i,order:n,type:"no-pagination"},responsePaginationAjax,"html")}function responsePaginationAjax(e,t){$("#first-class-div").html(e),"barBtn"==selectedbtn?($(".barBtn .fa").removeClass("barIcon").addClass("squareIconGray"),$(".powerBtn .fa").removeClass("powerIcon").addClass("squareIconArrowWhite")):($(".barBtn .fa").removeClass("squareIconGray").addClass("barIcon"),$(".powerBtn .fa").removeClass("squareIconArrowWhite").addClass("powerIcon"))}function responsePaginationFolderAjax(e,t){$("#folder-first-instance-list-div").html(e),$("#FolderList").find("li:eq(0)").addClass("active"),$("#FolderList").find("li:odd").css("background","#F4F4F4"),$("#FolderList").find("li:even").css("background","#fff"),folderSection(),manageNiceScroll(),DragDropFolder(),sideFlyoutHeight(),DragDropFolderCall();var i=$("#FolderList").find("li.drag-folder.active").attr("id");$.post(domainUrl+"documents/folderDetails",{order_by:"node_instance_id",order:"DESC",type:"no-pagination",mode:"Normal",class_node_id:i},responseCallFolderDetailsAction,"html")}function responsePaginationFolderDetailsAjax(e,t){$("#document-details-instance-list-div").html(e),sideFlyoutHeight(),$("#folderSection .display-wrapper").width()<=500?$("#folderSection .display-wrapper .main-one-third").css("width","540px"):$("#folderSection .display-wrapper .main-one-third").css("width","100%"),manageNiceScroll(),$(".nano").nanoScroller(),NProgress.done()}function editClassProperty(){var e=$("#is_instance").val(),t=$(".node-selected input").not(".self_count_class").val();if($('.class-table tr input[type="checkbox"]').attr("disabled",!0),"N"==e){var i=$("#node_y_class_id").val();if(parseInt(i)>0){NProgress.start(),selectedNodeIDNumber=$(".node-content.node-selected").closest("li").attr("data-class"),$.post(domainUrl+"classes/classStructure",{class_id:i,mode:"Edit"},responseEditClassProperty,"html");var n=$("#second-class-div").find("div.node-selected .node-input span").html(),s=$("#second-class-div").find("div.node-selected .node-circle").hasClass("node-white-circle");"Node X"==$("#node-x-li a").html()?$.post(domainUrl+"classes/getNodeX",{node_id:t,nodeType:$("#node-x-li a").html(),mode:"Edit",nodeTypeId:1,nodeName:n,nodeIsChild:s},responseGetNodeX,"html"):$.post(domainUrl+"classes/getNodeX",{node_id:t,nodeType:$("#node-x-li a").html(),mode:"Edit",nodeTypeId:3,nodeName:n,nodeIsChild:s},responseGetNodeX,"html")}currentmode="edit"}else{var a=$("#node_instance_id").val();parseInt(a)>0&&(NProgress.start(),manageRightMenuIcon("add","classes"),$.post(domainUrl+"classes/instanceStructure",{node_instance_id:a,mode:"Edit",is_instance:e},responseInstanceStructure,"html"))}}function responseEditClassProperty(e,t){$("#second-class-div").html(e),void 0!=selectedNodeIDNumber&&($("#second-class-div .node-content").removeClass("node-selected"),$("#second-class-div [data-class ="+selectedNodeIDNumber+"]").find(".node-content").first().addClass("node-selected")),NProgress.done(),setPaperBckgrnd(),manageRightMenuIcon("add","classes"),stopLastElementTabing(),removeString(),manageNiceScroll()}function cancelClassProperty(){var e=$("#second-class-div").find("div.node-selected .node-input span").html(),t=$(".node-selected input").not(".self_count_class").val(),i=$("#second-class-div").find("div.node-selected .node-circle").hasClass("node-white-circle");if("Node X"==$("#node-x-li a").html()?$.post(domainUrl+"classes/getNodeX",{node_id:t,nodeType:$("#node-x-li a").html(),mode:"Display",nodeTypeId:1,nodeName:e,nodeIsChild:i},responseGetNodeX,"html"):$.post(domainUrl+"classes/getNodeX",{node_id:t,nodeType:$("#node-x-li a").html(),mode:"Display",nodeTypeId:3,nodeName:e,nodeIsChild:i},responseGetNodeX,"html"),$.post(domainUrl+"classes/getNodeXThirdPane",{mode:"Display"},responsegetNodeXThirdPane,"html"),"N"==$("#is_instance").val()){s=$("#node_y_class_id").val();parseInt(s)>0?getClassStructure(s):$(".first_class_structure").click()}else{var n=$("#node_instance_id").val();if(parseInt(n)>0){NProgress.start(),manageRightMenuIcon("listing","classes");s=$("#node_y_class_id").val();$.post(domainUrl+"classes/instanceStructure",{node_instance_id:n,mode:"Display",node_y_class_id:s},responseInstanceStructure,"html")}else{var s=$("#node_y_class_id").val();$.post(domainUrl+"classes/getClassInstance",{class_id:s,page:1,order_by:"node_instance_id",order:"DESC",mode:"pagination"},responseGetClassInstance1,"html")}}}function removeProperty(e){var t=$("#prop_temp_li_"+e),i=t.find(".runTab").length;i=parseInt(i,10),increaseWidthEdit(8,t),$("#prop_temp_li_"+e).remove(),0==$(".tabber li").length&&($(".tabber").closest(".sortable").find(".addplus").empty(),$(".tabber").closest(".sortable").find(".addplus").hide()),tabPositions(),calculatePlusIcons(),setNumberPrint("",i,$(".add-sub-child-wrap").is(":visible"))}function removePropertyNew(e){var t=e+",";$("#old_"+e).find("ol li").each(function(){t=t+$(this).attr("data-class")+","});var i=$("#remove_prop_ids").val()+t,n=$("#prop_temp_li_"+e),s=$("[data-class="+e+"]").find(".runTab").length;s=parseInt(s,10),increaseWidthEdit(8,n),$("#old_"+e).remove(),$("#remove_prop_ids").attr("value",i),0==$(".tabber li").length&&$(".tabber").closest(".sortable").find(".addplus").hide(),setNumberPrint("",s,$(".add-sub-child-wrap").is(":visible"))}function deleteClassProperty(){var e=$("#is_instance").val(),t=0,i="";"N"==e?$(".single_check").each(function(){1==$(this).is(":checked")&&(t=parseInt(t)+1,i=$(this).val())}):$(".single_i_check").each(function(){1==$(this).is(":checked")&&(t=parseInt(t)+1,i=$(this).val())}),parseInt(t)>0&&$.post(domainUrl+"classes/deleteClassCount",{counter:t,is_instance:e,class_id:i},responseOpenDialogOfDelete,"JSON")}function deleteClassPropertyVersion(){var e=$("#is_instance").val(),t=$("#node_y_class_id").val();$.post(domainUrl+"classes/deleteClassCount",{counter:1,is_instance:e,class_id:t},responseOpenDialogOfVersionDelete,"JSON")}function responseOpenDialogOfDelete(e,t){$("#delMsgOfCI").html(e.msg),$("#deleteInsOrClsPopup").modal("show")}function responseOpenDialogOfVersionDelete(e,t){$("#version").find(".Cancel1-icon").is(":not(':hidden')")&&(e={msg:"Are you sure you want to cancel?"}),$("#delMsgOfCI").html(e.msg),$("#deleteInsOrClsPopup").modal("show")}function deleteClassPropertyAgain(){NProgress.start();var e="";if("N"==$("#is_instance").val())if(1==$("#node_y_class_id").attr("version-id")){var t=$("#node_y_class_id").val();e=e+t+",",$.post(domainUrl+"classes/deleteClass",{delete_ids:e},responseDeleteClassProperty,"html")}else $(".single_check").each(function(){1==$(this).is(":checked")&&(e=e+$(this).val()+",")}),$.post(domainUrl+"classes/deleteClass",{delete_ids:e},responseDeleteClassProperty,"html");else $(".single_i_check").each(function(){1==$(this).is(":checked")&&(e=e+$(this).val()+",")}),$.post(domainUrl+"classes/deleteInstance",{delete_ids:e},responseDeleteInstanceProperty,"html")}function responseDeleteClassProperty(e,t){NProgress.done(),$(".first_hit").click()}function responseDeleteInstanceProperty(e,t){var i=$("#node_y_class_id").val();$.post(domainUrl+"classes/getClassInstance",{page:1,order_by:"node_instance_id",order:"DESC",class_id:i,mode:"pagination",itemPerPage:"0"},responsePaginationInstanceAjax,"html")}function saveClassProperty(saveType){NProgress.start();var is_instance=$("#is_instance").val();if($("#saveTypeClass").attr("value",saveType),"P"==saveType&&$("#second-class-div li>div").each(function(e,t){$(t).hasClass("node-selected")&&(nodeselectindex=e)}),"N"==is_instance){if(""==$.trim($("#class_caption").val())&&""==$.trim($("#node_y_class_id").val()))return!1;selectedtextareaValue="",$(".property-child .node-content").each(function(e,t){$(this).hasClass("node-selected")&&(selectedtextareaValue=$(this).find("textarea").val())});var selectedNodeZ=$(".thirdPaneActive").find(".node-input").attr("data-name");if("TAXONOMY"!=selectedNodeZ&&"VERSION"!=selectedNodeZ&&"NODE RIGHTS"!=selectedNodeZ&&"CLASS"!=selectedNodeZ||(selectedtextareaValue=selectedNodeZ),""==selectedtextareaValue&&$("#div-node-x-property").hasClass("active"))bootbox.alert("Please enter value for the empty Node Y property.");else{var selectedtextareaValue="";$(".property-child .node-content").each(function(e,t){$(this).hasClass("node-selected")&&(selectedtextareaValue=$(this).find("textarea").val())});var selectedparentId=0;void 0!=$(".thirdPaneActive .node-input").attr("data-class")&&(selectedparentId=parseInt($(".thirdPaneActive .node-input").attr("data-class").split("_")[1]));var slectedCheckbox=$("#third-class-div [id="+selectedparentId+"]").prop("checked"),flag=!1;$(".instanceRunTab").each(function(){$(this).val().length>0&&(flag=!0)}),"Node Z"==$("#node-x-li a").html()&&$(".checkFillInstanceValue").each(function(){$(this).val().length>0&&(flag=!0)});var selectedparentId=0;void 0!=$(".thirdPaneActive .node-input").attr("data-class")&&(selectedparentId=parseInt($(".thirdPaneActive .node-input").attr("data-class").split("_")[1]));var slectedCheckbox=$("#third-class-div [id="+selectedparentId+"]").prop("checked");if(1==slectedCheckbox&&1==flag)saveInstanceVal();else{var selectednode=$(".nodeselection-dropdown").val();if((1==parseInt(selectednode)||2==parseInt(selectednode))&&"P"==saveType){var checkNodeZInstances=0,index=1;$("#class_structure_form .class-wrapper li .hidden-node-z").each(function(){var e=$(this).val().split(",");e=$.grep(e,function(e,t){return""!==e&&null!=e});var t=$(this).siblings("div.node-white-circle-expanded").length;""==$.trim($("#node_y_class_id").val())&&(1==parseInt(index)?parseInt(e.length)<2&&(checkNodeZInstances=1):2==parseInt(index)?parseInt(e.length)<1&&(checkNodeZInstances=1):t&&parseInt(e.length)<1?checkNodeZInstances=1:!t&&parseInt(e.length)<4&&(checkNodeZInstances=1)),""!=$.trim($("#node_y_class_id").val())&&(1==parseInt(index)?parseInt(e.length)<3&&(checkNodeZInstances=1):2==parseInt(index)?parseInt(e.length)<2&&(checkNodeZInstances=1):t&&parseInt(e.length)<2?checkNodeZInstances=1:!t&&parseInt(e.length)<5&&(checkNodeZInstances=1)),index++}),$("#first-class-div .current.default_row_class td:last").html("Published"),$('.class-table tr input[type="checkbox"]').removeAttr("disabled",!0)}""==$.trim($("#node_y_class_id").val())?$("#action_type").attr("value","save"):$("#action_type").attr("value","edit"),sendClassJson();var myJsonString=JSON.stringify(classBuilder);if("Node Z"==$("#node-x-li a").html()&&1==$("#div-node-x-property").hasClass("active"))chVal=[],$.each($(".nodeClass-Y input[name='nodeX[]']:checked"),function(){chVal.push($(this).val())}),$("#sub_nav_39 li").removeClass("active"),$("#sub_nav_39 .All_li").addClass("active"),$.post(domainUrl+"classes/saveClass",{data:$("#class_structure_form").serialize(),propertyJson:myJsonString,mode:"normal",saveType:saveType},responseSaveClassProperty,"html");else if(1==parseInt(selectednode)||3==parseInt(selectednode)){var subclassexist=$(".sub_class_list_view ol > li").length;if(subclassexist)return bootbox.confirm({title:"Message",message:"If you select NODE X or NODE Z, all subclasses will be removed. Do you want to continue?",buttons:{cancel:{label:"No",className:"btn-default"},confirm:{label:"Continue",className:"btn-primary"}},callback:function(e){if(e){if($("#child_ids_of_class").val(""),"P"==saveType&&1==parseInt(selectednode)){var t=0,i=1;$("#class_structure_form .class-wrapper li .hidden-node-z").each(function(){var e=$(this).val().split(",");e=$.grep(e,function(e,t){return""!==e&&null!=e});var n=$(this).siblings("div.node-white-circle-expanded").length;""==$.trim($("#node_y_class_id").val())&&(1==parseInt(i)?parseInt(e.length)<2&&(t=1):2==parseInt(i)?parseInt(e.length)<1&&(t=1):n&&parseInt(e.length)<1?t=1:!n&&parseInt(e.length)<4&&(t=1)),""!=$.trim($("#node_y_class_id").val())&&(1==parseInt(i)?parseInt(e.length)<3&&(t=1):2==parseInt(i)?parseInt(e.length)<2&&(t=1):n&&parseInt(e.length)<2?t=1:!n&&parseInt(e.length)<5&&(t=1)),i++})}$("#sub_nav_39 li").removeClass("active"),$("#sub_nav_39 .All_li").addClass("active"),$.post(domainUrl+"classes/saveClass",{data:$("#class_structure_form").serialize(),propertyJson:myJsonString,mode:"normal",saveType:saveType},responseSaveClassProperty,"html")}}}),!1;$("#sub_nav_39 li").removeClass("active"),$("#sub_nav_39 .All_li").addClass("active"),$.post(domainUrl+"classes/saveClass",{data:$("#class_structure_form").serialize(),propertyJson:myJsonString,mode:"normal",saveType:saveType},responseSaveClassProperty,"html")}else if("Node X"==$("#node-x-li a").html()&&$(".image-slider a").length>2){var flagCheck=checkValidate();1==flagCheck&&(NProgress.start(),$.post(domainUrl+"classes/saveClass",{data:$("#class_structure_form").serialize(),propertyJson:myJsonString,mode:"normal",saveType:saveType},responseSaveClassProperty,"html"))}else $(".image-slider a").length>2&&$("#node-x-li a").html(),$("#sub_nav_39 li").removeClass("active"),$("#sub_nav_39 .All_li").addClass("active"),$.post(domainUrl+"classes/saveClass",{data:$("#class_structure_form").serialize(),propertyJson:myJsonString,mode:"normal",saveType:saveType},responseSaveClassProperty,"html")}}}else if(""==$.trim($("#node_instance_id").val())?$("#instance_action_type").attr("value","save"):$("#instance_action_type").attr("value","edit"),""!=$.trim($("#instance_caption").val())){sendInstanceJson();var myInstanceJsonString=JSON.stringify(instanceBuilder),postData={mapping_class_id:$.trim($("#node_y_class_id").val())};if(""==$.trim($("#node_instance_id").val())){var flag=!0,checkflag="",temp=!0;if($(".validationCheck").each(function(i,k){var element=$(this),data=$(this).val();if(NProgress.done(),1==flag){var fn="";fn=$(this).attr("validate-data").split(";");var aa=[];for(i=0;i<fn.length;i++)aa.push(fn[i]);aa.toString(),$(aa).each(function(i,v){var newStr=v,valdata=data;if(newStr.indexOf("pui_fun")>=0)var elementId=element.attr("id"),aaa=newStr.replace("this.value",elementId);else if(""==valdata)var aaa=newStr.replace("this.value","");else var aaa=newStr.replace("this.value",data);0==(checkflag=eval(aaa))&&(temp=!1)}),flag=0!=temp}}),1==flag)if(638==$.trim($("#node_y_class_id").val())&&"P"==saveType){var cssInstanceId=$("#instance_property_caption2951").val(),htmlLayout=$("#instance_property_caption2949").val(),regExp=/<AUTO_CSS>(.*)<\/AUTO_CSS>/g,regExp1=/SID_([\d]+)/g,match=regExp.exec(htmlLayout),asidArr=[];if(match)for(;match1=regExp1.exec(match[1]);)-1==asidArr.indexOf(match1[1])&&asidArr.push(match1[1]);for(var newHtmlLayout=htmlLayout.replace(/<AUTO_CSS>(.*)<\/AUTO_CSS>/g,""),sidArr=[];match2=regExp1.exec(newHtmlLayout);)-1==sidArr.indexOf(match2[1])&&sidArr.push(match2[1]);$.post(domainUrl+"classes/checkValidSelector",{selector_ids:sidArr,auto_selector_ids:asidArr,css_instance_id:cssInstanceId,action:"validation"},responseCheckValidSelector,"JSON")}else NProgress.start(),$("#sub_nav_39 li").removeClass("active"),$("#sub_nav_39 .All_li").addClass("active"),$.post(domainUrl+"classes/saveInstance",{data:$("#instance_structure_form").serialize(),saveType:saveType,is_instance:is_instance,myInstanceJsonString:myInstanceJsonString},responseSaveInstanceProperty,"html"),"P"==saveType&&($("#first-class-div .current.default_row_class td:last").html("Published"),$('.class-table tr input[type="checkbox"]').removeAttr("disabled",!0))}else if(638==$.trim($("#node_y_class_id").val())&&"P"==saveType){var cssInstanceId=$("#instance_property_caption2951").val(),htmlLayout=$("#instance_property_caption2949").val(),regExp=/<AUTO_CSS>(.*)<\/AUTO_CSS>/g,regExp1=/SID_([\d]+)/g,match=regExp.exec(htmlLayout),asidArr=[];if(match)for(;match1=regExp1.exec(match[1]);)-1==asidArr.indexOf(match1[1])&&asidArr.push(match1[1]);for(var newHtmlLayout=htmlLayout.replace(/<AUTO_CSS>(.*)<\/AUTO_CSS>/g,""),sidArr=[];match2=regExp1.exec(newHtmlLayout);)-1==sidArr.indexOf(match2[1])&&sidArr.push(match2[1]);$.post(domainUrl+"classes/checkValidSelector",{selector_ids:sidArr,auto_selector_ids:asidArr,css_instance_id:cssInstanceId,action:"validation"},responseCheckValidSelector,"JSON"),NProgress.done()}else if(125==$.trim($("#node_y_class_id").val()))bootbox.confirm({title:"Message",message:"Please update the property of conversion class as well.",buttons:{cancel:{label:"No",className:"btn-default"},confirm:{label:"Yes",className:"btn-primary"}},callback:function(e){e&&($("#sub_nav_39 li").removeClass("active"),$("#sub_nav_39 .All_li").addClass("active"),$.post(domainUrl+"classes/saveInstance",{data:$("#instance_structure_form").serialize(),saveType:saveType,myInstanceJsonString:myInstanceJsonString},responseSaveInstanceProperty,"html"))}});else{var flag1=!0,checkflag1="",temp1=!0;$(".validationCheck").each(function(i,k){var element=$(this),data1=$(this).val();if(NProgress.done(),1==flag1){var fn1="";fn1=$(this).attr("validate-data").split(";");var aa1=[];for(i=0;i<fn1.length;i++)aa1.push(fn1[i]);aa1.toString(),$(aa1).each(function(i,v){var newStr1=v,valdata1=data1;if(newStr1.indexOf("pui_fun")>=0)var elementId=element.attr("id"),aaa1=newStr1.replace("this.value",elementId);else if(""==valdata1)var aaa1=newStr1.replace("this.value","");else var aaa1=newStr1.replace("this.value",data1);0==(checkflag1=eval(aaa1))&&(temp1=!1)}),flag1=0!=temp1}}),1==flag1&&(NProgress.start(),$("#sub_nav_39 li").removeClass("active"),$("#sub_nav_39 .All_li").addClass("active"),$.post(domainUrl+"classes/saveInstance",{data:$("#instance_structure_form").serialize(),saveType:saveType,myInstanceJsonString:myInstanceJsonString},responseSaveInstanceProperty,"html"))}}}function responseCheckValidSelector(e,t){""!=e.error_msg?($("#msg_of_sid").html(e.error_msg),$("#sid_popup").modal("show")):$.post(domainUrl+"classes/checkValidSelector",{selector_ids:e.valid,selector:e.selector,action:"fetch_data",data:$("#instance_structure_form").serialize()},responseCheckValidSelectorAgain,"JSON")}function responseCheckValidSelectorAgain(e,t){$("#viewClassInstance textarea").val(""),$("#viewClassInstance").modal("show"),$("#viewClassInstance").on("shown.bs.modal",function(){$("#viewClassInstance textarea").val(e),$("#viewClassInstance textarea").focus()}),$("#viewClassInstance .btn").first().removeClass("inactiveLink")}function responseSaveClassProperty(e,t){$("#second-class-div").html(e),void 0!=selectedNodeIDNumber&&($("#second-class-div .node-content").removeClass("node-selected"),$("#second-class-div [data-class ="+selectedNodeIDNumber+"]").find(".node-content").first().addClass("node-selected"));var i=!1;"Node Z"==$("#node-x-li a").html()&&($("#second-class-div .node-content").each(function(e,t){$(this).hasClass("node-selected")&&(i=!0)}),0==i&&$("#second-class-div li").eq(nodeselectindex).find(".node-content").first().addClass("node-selected")),NProgress.done();var n=$(".node-selected input").not(".self_count_class").val(),s=$("#second-class-div").find("div.node-selected .node-input span").html(),a=$("#second-class-div").find("div.node-selected .node-circle").hasClass("node-white-circle");if("Node X"==$("#node-x-li a").html()?$.post(domainUrl+"classes/getNodeX",{node_id:n,nodeType:$("#node-x-li a").html(),mode:"Display",nodeTypeId:1,nodeName:s,nodeIsChild:a},responseGetNodeX,"html"):$.post(domainUrl+"classes/getNodeX",{node_id:n,nodeType:$("#node-x-li a").html(),mode:"Display",nodeTypeId:3,nodeName:s,nodeIsChild:a},responseGetNodeX,"html"),currentmode="Display","save"==$("#action_type").val()?($("#DataSaveMsg").html("<span>Class Saved Successfully</span>"),$('.class-table tr input[type="checkbox"]').removeAttr("disabled",!0)):($("#DataSaveMsg").html("<span>Class Updated Successfully</span>"),$('.class-table tr input[type="checkbox"]').removeAttr("disabled",!0)),$("#DataSaveMsg").fadeIn(),setTimeout(function(){$("#DataSaveMsg").fadeOut()},3e3),setPaperBckgrnd(),manageRightMenuIcon("listing","classes"),"save"==$("#action_type").val())if($("#div-node-x").hasClass("active")){var o=$("#first-class-div .get-version tbody tr").last().attr("class");lastRowClass=o.replace(" list-row",""),$("."+lastRowClass).remove();var r=0;$("#first-class-div .get-version").each(function(){$("tbody tr",$(this)).each(function(e,t){var i=$(this).attr("class");i=i.replace(/(lisat-class-row[\d]+)/,""),$(this).removeAttr("class"),$(this).addClass(i),$(this).removeClass("default_row_class"),0==e&&$(this).addClass("list-row"),$(this).addClass("lisat-class-row"+r),r++})});var l=$("#node_y_class_id").val();$("#first-class-div .get-version tbody tr").first().attr("id","list-row_"+l),$(".lisat-class-row0 td").each(function(e,t){0==e?$(this).html('<input id="r_check'+l+'" class="single_check" type="checkbox" name="r_check'+l+'" value="'+l+'"><label></label>'):1==e?($(this).attr("id","node_class_id_label_"+l),$(this).addClass("first_class_structure strat_click"),$(this).attr("onclick","getClassStructure("+l+")"),$(this).html(l)):(2==e?$(this).attr("id","common_name_label_"+l):3==e?$(this).attr("id","node_type_label_"+l):4==e?$(this).attr("id","version_label_"+l):5==e?$(this).attr("id","instance_label_"+l):$(this).attr("id","status_label_"+l),$(this).addClass("strat_click"),$(this).attr("onclick","getClassStructure("+l+")"))}),$(".lisat-class-row1 td").each(function(e,t){$(this).removeClass("first_class_structure")})}else $(".first_hit").click();removeString(),setNumberPrint()}function responseGetNodeX(e,t){$("#third-class-div").html(e),$("#third-class-div").find(".tab-pane").find("span").hasClass("no-dataAvilable")?$("#third-class-div").find(".tab-pane").addClass("no-content-bg-gray"):($("#third-class-div").find(".tab-pane").removeClass("no-content-bg-gray"),setNumberPrint("third-class-div")),$(".listing-wrapper").hasClass("active")?thirdPaneselection():defaultSelection(),dualPaneHeight(),manageNiceScroll()}function responsegetNodeXThirdPane(e,t){$("#fourh-class-div").html(e),$(".nano").nanoScroller(),dualPaneHeight(),setNumberPrint("fourh-class-div")}function responseSaveInstanceNodeId(e,t){if(parseInt(e.node_id)>0){var i=$("#second-class-div").find(".node-selected .hidden-node-x").val();$("#second-class-div").find(".node-selected .hidden-node-x").val(i+","+e.node_id)}if(3==parseInt(e.node_type_id)&&""==e.node_instance_id){var n=$("#second-class-div").find(".node-selected .hidden-node-z").val();$("#second-class-div").find(".node-selected .hidden-node-z").val(n+","+e.node_id);var s=$("#second-class-div").find(".node-selected .hidden-node-z-main").val();$("#second-class-div").find(".node-selected .hidden-node-z-main").val(s+","+e.node_class_id)}}function responseSaveInstanceProperty(e,t){if(NProgress.done(),"save"==$("#instance_action_type").val()?$("#DataSaveMsg").html("<span>Instance Saved Successfully</span>"):$("#DataSaveMsg").html("<span>Instance Updated Successfully</span>"),setTimeout(function(){$("#DataSaveMsg").fadeOut()},3e3),manageRightMenuIcon("listing","classes"),NProgress.start(),"save"==$("#instance_action_type").val()){var i=$("#node_y_class_id").val();$.post(domainUrl+"classes/getClassInstance",{class_id:i,page:1,order_by:"node_instance_id",order:"DESC",mode:"pagination"},responseGetClassInstance1,"html")}else NProgress.done(),getInstanceStructure($("#node_instance_id").val());$("#DataSaveMsg").fadeIn()}function responseGetClassInstance1(e,t){$("#first_instance_div").html(e),NProgress.done(),"No Instance Found"==$.trim($("#first_instance_div div.set-content-height tr.list-row td").text())?($(".DeleteClasses_li").addClass("inactive"),$(".DeleteClasses_li").find("a").css("pointer-events","none"),$(".ExportInstanceData_li").addClass("inactive"),$(".ExportInstanceData_li").find("a").css("pointer-events","none"),$(".Edit-icon").hide(),$(".Cancel-icon").hide()):($(".DeleteClasses_li").find("a").css("pointer-events","none"),$(".ExportInstanceData_li").removeClass("inactive"),$(".ExportInstanceData_li").find("a").css("pointer-events","all"),$(".Edit-icon").show())}function listPage(e){if("Y"==e){selectedbtn="powerBtn",NProgress.start();var t=$("#temp_item_per_page").val();$.post(domainUrl+"classes/index",{page:1,order_by:"node_class_id",order:"DESC",type:"pagination",itemPerPage:t},responsePaginationAjax,"html")}else selectedbtn="barBtn",NProgress.start(),$.post(domainUrl+"classes/index",{order_by:"node_class_id",order:"DESC",type:"no-pagination"},responsePaginationAjax,"html")}function setNumberPrint(e,t,i,n,s,a){e?$("#"+e+" .number_print").not(":hidden").each(function(e,t){$(this).text(e+1)}):$("#second-class-div .number_print").not(":hidden").each(function(e,t){$(this).text(e+1)}),t&&(t=a?t:"addProp"==t?i?1:2:i?"-"+t:"-"+Number(t+1),(n=n||$("#second-class-div .number_print1")).each(function(e,i){var n=$(this).parent().attr("onclick");if(s){s++;a=parseInt(s)}else var a=parseInt($(this).text())+Number(t);$(this).text(a),n&&(n=n.replace(/,\s?[0-9]+\)$/,", "+a+")"),$(this).parent().attr("onclick",n))}))}function addChildProperty(e){var t=$("#prop_number").val(),i='<li id="prop_temp_li_'+t+'" class="numbering" data-class="prop_temp_li_'+t+'"><div class="node-content  node-selected clearfix"><span class="number_print"></span><div class="node-left"><div class="node-circle node-white-circle">N</div><div class="node-head node-input"><textarea class="runTab" cols="30" rows="1" class="runTab" id="new_property_'+t+'" name="new_property[]" placeholder=""></textarea></div><input type="hidden" class="hidden-node-x" name="node_x_y[]" nodey-value="'+class_nodez_ids+'" value="'+class_nodez_ids+'" id="class_prop_temp_li_'+t+'"><input type="hidden" class="hidden-node-z" name="node_y_z[]" value="" id="node_y_z'+t+'" ><input type="hidden" class="hidden-node-z-main" name="prop_z_main[]" value="" id="prop_z_main'+t+'" ><input type="hidden" class="hidden-node-y" name="hidden_node_y[]" value="" id="hidden_node_y'+t+'" ><input type="hidden" class="hidden-node-y-instance-property-node-id" name="hidden_node_y_instance_property_node_id[]" value="" id="hidden_node_y_instance_property_node_id'+t+'" ></div><div class="node-right hide"><a class="action-move act-mov-sub-cross" onclick="removeProperty('+t+');"><span><i class="icon close-small"></i></span></a><a class="action-move act-mov-sub-cross addclass"><span><i class="icon plus-class"></i></span></a></div></div><ol></ol></li>';$(".node-content").removeClass("node-selected"),void 0!=e?e.is("ol")?(e.append(i),e.find("li:last").find(".runTab").focus()):void 0!=e&&($(i).insertAfter(e),e.next().find(".runTab").focus()):($(".property-child").append(i),$(".property-child li:last").find(".runTab").focus());var n=$(".tabber li").length,s=$(".add-sub-child-wrap").is(":visible");1===n&&($(".tabber").closest(".sortable").find(".addplus").append('<span class="number_print"></span>'),$(".tabber").closest(".sortable").find(".addplus").show());var a=parseInt(t)+1;$("#prop_number").attr("value",a),stopLastElementTabing(),textareaIncreaseHeight(),tabPositions(),calculatePlusIcons(),increaseWidthEdit(13),setNumberPrint("","addProp",s),manageNiceScroll(),setPaperBckgrnd(),$("#div-node-x").hasClass("active")&&$("#third-class-div input[name='nodeX[]']").removeAttr("checked")}function responseFilter(e,t){$("#first-class-div").html(e),NProgress.done()}function instanceClassProperty(){tempStatus=$.trim($("#sub_nav_39 div ul .active").text()),$("#sub_nav_39 li .active").html(),$("#sub_nav_39 li").removeClass("active"),$("#sub_nav_39 .All_li").addClass("active");var e=$("#is_instance").val();if($(".classes_top_cl").click(),"N"==e){var t=$("#node_y_class_id").val();parseInt(t)>0&&(instanceClick=!0,NProgress.start(),$.post(domainUrl+"classes/getClassInstance",{class_id:t,mode:"Normal"},responseGetClassInstance,"html"))}else GoTo(2);$(".dashSlider").hasClass("paneNum2")&&$(".paneNum2").addClass("customPaneSpanWidth")}function setInstance(){$("#is_instance").attr("value","N"),$(".ins").remove(),setWidth(),setTimeout("instanceClassProperty()",1e3)}function responseGetClassInstance(e,t){$("#div-node-x").before(e);$("#node-x-li").before('<li class="ins strat_click" ><a href="#">Instance List</a></li><li class="ins strat_click" ><a href="#">Instance Properties</a></li>'),$("#is_instance").attr("value","Y"),manageRightMenuIcon("listing","classes"),addArrow(),instanceShowHide(),$.trim($("#node_y_class_id").val())==domain_production_class_id?($("a.Edit-icon").addClass("inactiveLink"),$("a.Edit-icon").css("pointer-events","none"),$(".Compose-icon").show()):$(".Compose-icon").hide(),initialLoad(),GoTo(2)}function instanceShowHide(){$(".AddNewInstance_li").show(),$(".AddNewClass_li").hide(),"No Instance Found"==$.trim($("#first_instance_div div.set-content-height tr.list-row td").text())?($(".DeleteClasses_li").addClass("inactive"),$(".DeleteClasses_li").find("a").css("pointer-events","none"),$(".ExportInstanceData_li").addClass("inactive"),$(".ExportInstanceData_li").find("a").css("pointer-events","none"),$(".Edit-icon").hide(),$(".Cancel-icon").hide(),NProgress.done()):($(".DeleteClasses_li").find("a").css("pointer-events","none"),$(".ExportInstanceData_li").removeClass("inactive"),$(".ExportInstanceData_li").find("a").css("pointer-events","all"),$(".Edit-icon").show()),$(".ExportInstanceData_li").show(),$(".GenerateInstanceTemplate_li").show(),$(".ImportInstanceData_li").show()}function getInstanceStructure(e){$(".list-row-instance-class").removeClass("current"),$("#list-row-instance-id_"+e).addClass("current"),NProgress.start(),$.post(domainUrl+"classes/instanceStructure",{node_instance_id:e,mode:"Display"},responseInstanceStructure,"html")}function responseInstanceStructure(e,t){var i=($(window).width()-($(".sidebar_wrap").outerWidth()+$(".user-action-wrap").outerWidth()))/2-1;$(".set-height.active .intance-table").width(i+"px"),$("#second_instance_div").html(e),NProgress.done(),setPaperBckgrnd(),setNumberPrint("second_instance_div"),manageNiceScroll()}function paginationInstanceAjax(e,t,i,n,s){NProgress.start();var a=$("#node_y_class_id").val();$.post(e,{page:t,order_by:i,order:n,class_id:a,mode:"pagination",itemPerPage:s},responsePaginationInstanceAjax,"html")}function setPageInstance(e){NProgress.start();var t=$("#node_y_class_id").val();$.post(domainUrl+"classes/getClassInstance",{page:1,order_by:"node_instance_id",order:"DESC",mode:"pagination",itemPerPage:e,class_id:t},responsePaginationInstanceAjax,"html")}function paginationInstanceAjaxList(e,t,i,n){NProgress.start();var s=$("#node_y_class_id").val();$.post(e,{page:t,order_by:i,order:n,class_id:s,mode:"no-pagination"},responsePaginationInstanceAjax,"html")}function responseInstanceFilter(e,t){$("#first_instance_div").html(e),NProgress.done(),stopLastElementInstanceTabbing(),"No Instance Found"==$.trim($("#first_instance_div div.set-content-height tr.list-row td").text())?($(".DeleteClasses_li").addClass("inactive"),$(".DeleteClasses_li").find("a").css("pointer-events","none"),$(".ExportInstanceData_li").addClass("inactive"),$(".ExportInstanceData_li").find("a").css("pointer-events","none"),$(".Edit-icon").hide(),$(".Cancel-icon").hide()):($(".DeleteClasses_li").find("a").css("pointer-events","none"),$(".ExportInstanceData_li").removeClass("inactive"),$(".ExportInstanceData_li").find("a").css("pointer-events","all"),$(".Edit-icon").show())}function responsePaginationInstanceAjax(e,t){$("#first_instance_div").html(e),"barBtn1"==selectedbtn1?($(".barBtn1 .fa").removeClass("barIcon").addClass("squareIconGray"),$(".powerBtn1 .fa").removeClass("powerIcon").addClass("squareIconArrowWhite")):($(".barBtn1 .fa").removeClass("squareIconGray").addClass("barIcon"),$(".powerBtn1 .fa").removeClass("squareIconArrowWhite").addClass("powerIcon")),"No Instance Found"==$.trim($("#first_instance_div div.set-content-height tr.list-row td").text())?($(".DeleteClasses_li").addClass("inactive"),$(".DeleteClasses_li").find("a").css("pointer-events","none"),$(".ExportInstanceData_li").addClass("inactive"),$(".ExportInstanceData_li").find("a").css("pointer-events","none"),$(".Edit-icon").hide(),$(".Cancel-icon").hide(),NProgress.done()):($(".DeleteClasses_li").find("a").css("pointer-events","none"),$(".ExportInstanceData_li").removeClass("inactive"),$(".ExportInstanceData_li").find("a").css("pointer-events","all"),$(".Edit-icon").show()),$.trim($("#node_y_class_id").val())==domain_production_class_id?($("a.Edit-icon").addClass("inactiveLink"),$("a.Edit-icon").css("pointer-events","none"),$(".Compose-icon").show()):$(".Compose-icon").hide()}function listPageInstance(e){var t=$("#node_y_class_id").val();if("Y"==e){selectedbtn1="powerBtn1",NProgress.start();var i=$("#temp_item_per_page_instance").val();$.post(domainUrl+"classes/getClassInstance",{page:1,order_by:"node_instance_id",order:"DESC",class_id:t,mode:"pagination",itemPerPage:i},responsePaginationInstanceAjax,"html")}else selectedbtn1="barBtn1",NProgress.start(),$.post(domainUrl+"classes/getClassInstance",{order_by:"node_instance_id",order:"DESC",class_id:t,mode:"no-pagination"},responsePaginationInstanceAjax,"html")}function stopLastElementTabing(){var e=$(".property-child li").last().children().find("input").attr("id"),t=$("#class_structure_form li").first().children().find("input").first().attr("id");$("body").on("keydown","#"+e+",#"+t,function(e){9==(e.keyCode||e.which)&&e.preventDefault()})}function nodexSelection(){$("body").on("click","#second-class-div li, #second_instance_div li",function(e){3==$(".dashboard .set-height.active").length&&(threepanefirstDivClick=!0,NProgress.start());var t=!1;if($(".checkFillInstanceValue").each(function(){$(this).val().length>0&&(t=!0)}),0==t)$("#second-class-div .node-selected, #second_instance_div .node-selected").removeClass("node-selected"),$(this).find(".node-content:first").addClass("node-selected"),saveNodesValue(this);else{selectThis=this;var i,n=$(".thirdPaneActive .node-input").attr("data-class");if(void 0!=n&&(i=n.split("_")[1]),1==$(".nodeClass-Y #"+i).prop("checked")){parseInt($(".nodeClass-Y").length);$(".nodeClass-Y").each(function(e,t){$(this).find("input").attr("id")==i&&(void 0==(selectPreValue=$(this).find("input").attr("value"))&&(selectPreValue=$(this).siblings(".sprite-icon").attr("id")),$.post(domainUrl+"classes/saveInstanceData",{data:$("#instance_structure_form").serialize()},responseSaveInstanceNodeId111,"json"))})}else $("#second-class-div .node-selected").removeClass("node-selected"),$("#second_instance_div .node-selected").removeClass("node-selected"),$(this).find(".node-content:first").addClass("node-selected"),saveNodesValue(this)}$(".thirdPaneActive").length&&setTimeout('$(".thirdPaneActive .node-left").trigger("click");',1e3),e.stopPropagation()})}function responseSaveInstanceNodeId111(e,t){if(parseInt(e.node_id)>0){var i=$("#second-class-div").find(".node-selected .hidden-node-x").val();$("#second-class-div").find(".node-selected .hidden-node-x").val(i+","+e.node_id)}if(3==parseInt(e.node_type_id)&&""==e.node_instance_id){var n=$("#second-class-div").find(".node-selected .hidden-node-z").val();$("#second-class-div").find(".node-selected .hidden-node-z").val(n+","+e.node_id);var s=$("#second-class-div").find(".node-selected .hidden-node-z-main").val();$("#second-class-div").find(".node-selected .hidden-node-z-main").val(s+","+e.node_class_id)}$("#second-class-div .node-selected").removeClass("node-selected"),$(selectThis).find(".node-content:first").addClass("node-selected"),saveNodesValue(selectThis),selectThis=void 0,selectPreValue=void 0}function responseNodeZClassName(e){""!=e.caption_name&&null!=e.caption_name?($(".show-edit-node-cust i").css("visibility","visible"),$(".add-fly-radio-checked i").removeClass("plus-small").addClass("edit-class-select"),$("#flyRadioBtnWrapper").show(),$(".nodeZClassName").html(e.caption_name)):(1==$(".radio_class_check_plus").is(":checked")&&$(".show-edit-node-cust i").css("visibility","visible"),$(".add-fly-radio-checked i").addClass("plus-small").removeClass("edit-class-select"),$(".sub_class_list_view1").hide())}function saveNodesValue(e){var t="";t="",t=$(e).attr("data-class"),selectedNodeIDNumber=t;var i=$(".node-selected input").not(".self_count_class").val(),n=$("#second-class-div #prop_number").val();if(void 0===$("#second-class-div #viewTypeClass").val())if(void 0==n)s="Display";else s="Edit";else if(void 0==$("#second-class-div .node-selected .is_ins_class").val())s="Edit";else var s="Display";var a=$("#second-class-div").find("div.node-selected .node-input span").html(),o=$("#second-class-div").find("div.node-selected .node-circle").hasClass("node-white-circle");"Node X"==$("#node-x-li a").html()?$.post(domainUrl+"classes/getNodeX",{node_id:i,nodeType:$("#node-x-li a").html(),mode:s,nodeTypeId:1,nodeName:a,nodeIsChild:o},responseGetNodeX,"html"):$.post(domainUrl+"classes/getNodeX",{node_id:i,nodeType:$("#node-x-li a").html(),mode:s,nodeTypeId:3,nodeName:a,nodeIsChild:o},responseGetNodeX,"html")}function selectthirdNodeX(){if("Display"==currentmode){$(".thirdnodeX-Panel").css("visibility","hidden");var e=$("#second-class-div").find(".node-selected .hidden-node-x").val();if(void 0!=e){var t=e.split(",");for(i=0;i<t.length;i++)$("#fourh-class-div [id="+t[i]+"]").css("visibility","visible")}}}function parentDivSelection(e){var t=0,i=!0;if("Display"==e){$("#third-class-div .sprite-icon").each(function(e,n){"visible"==$(this).css("visibility")&&1==i&&(t=$(this).attr("id"),$("#third-class-div li").removeClass("thirdPaneActive"),$(this).closest("li").addClass("thirdPaneActive"),i=!1)});var n=$("#third-class-div [id="+t+"]").parent().find(".node-input").attr("data-class"),s=$("#third-class-div [id="+t+"]").parent().find(".node-input").find("span").html();void 0==n&&(n="Display_0")}else{$("#third-class-div .nodeClass-Y input").each(function(e,n){1==$(this).prop("checked")&&1==i&&(t=$(this).attr("id"),$("#third-class-div li").removeClass("thirdPaneActive"),$(this).closest("li").addClass("thirdPaneActive"),i=!1)}),1==i&&$("#third-class-div li:first").addClass("thirdPaneActive");var n=$("#third-class-div [id="+t+"]").parent().parent().find(".node-input").attr("data-class"),s=$("#third-class-div [id="+t+"]").parent().parent().find(".node-input").find("span").html();void 0==n&&(n="Edit_0")}var a=n.split("_");if(currentmode="Display"==a[0]?"Display":"Edit",$("#property-heading").html(""),"Node X"==$("#node-x-li a").html())o=s;else var o=s;$("#property-heading").html(cutString(o));var r="";r="class_caption"==$(".node-selected input").attr("id")?$(".node-selected .hidden-node-x").val():$(".node-selected input").val(),$.post(domainUrl+"classes/checkInstanceData",{node_class_id:a[1],node_id:r,full_class_id:n,selctedlName:o},responsecheckInstanceData,"json")}function defaultSelection(){var e=!1,t=[],n=$("#second-class-div").find(".node-selected .hidden-node-x").attr("nodey-value");if(void 0!=n)for(t=n.split(","),i=0;i<t.length;i++)$("span[id="+t[i]+"]").css("visibility","visible"),$("#third-class-div input[value="+t[i]+"]").prop("checked","checked");0==selectedNodeYId?$("#third-class-div li:first").addClass("thirdPaneActive"):($("#third-class-div .node-left").siblings(".nodeClass-Y").each(function(t,i){$(this).find("input").attr("value")==selectedNodeYId&&($(this).closest("li").addClass("thirdPaneActive"),e=!0)}),$("#third-class-div .node-left").siblings(".sprite-icon").each(function(t,i){$(this).attr("id")==selectedNodeYId&&($(this).closest("li").addClass("thirdPaneActive"),e=!0)}),0==e&&$("#third-class-div li:first").addClass("thirdPaneActive"));var s=$("li.thirdPaneActive .node-input").attr("data-class"),a=$("li.thirdPaneActive .node-input").find("span").html();void 0==s&&(s="Display_0",a="Display"),divideInThreePane(s,a)}function divideInThreePane(e,t){$("li").removeClass("thirdPaneActive"),$("[data-class="+e+"]").closest("li").addClass("thirdPaneActive");var i="",n=e.split("_");currentmode="Display"==n[0]?"Display":"Edit",$("#property-heading").html(""),i="Node X"==$("#node-x-li a").html()?"Node X (Properties): "+t:"Node Z"==$("#node-x-li a").html()?"Node Z (Properties): "+t:"Node Y (Properties): "+t,$("#property-heading").html(cutString(i));$("#node_y_class_id").val();var s="";s="class_caption"==$(".node-selected input").attr("id")?$(".node-selected .hidden-node-x").val():$(".node-selected input").val(),$.post(domainUrl+"classes/checkInstanceData",{node_class_id:n[1],node_id:s,full_class_id:e,selctedlName:i},responsecheckInstanceData,"json"),"Edit"!=currentmode&&"Display"!=currentmode||$("#instance_structure_form").attr("class","form_active1")}function divideInThreePaneX(e,t){$("li").removeClass("thirdPaneActive"),"Edit_0"==e?$("#third-class-div li:first").addClass("thirdPaneActive"):$("[data-class="+e+"]").closest("li").addClass("thirdPaneActive");var i=e.split("_");if(currentmode="Display"==i[0]?"Display":"Edit",$("#property-heading").html(""),"Node X"==$("#node-x-li a").html())n="Node X (Properties): "+t;else var n="Node Z (Properties): "+t;$("#property-heading").html(cutString(n));$("#node_y_class_id").val();var s=$(".node-selected input").val(),a="";$("#parent_class").length&&(a=$("#parent_class").val()),$.post(domainUrl+"classes/addNewInstance",{node_class_id:i[1],node_id:s,nodeType:$("#node-x-li a").html(),is_instance:$("#is_instance").val(),parentNodeId:a},responsenodex,"html"),"Edit"!=currentmode&&"Display"!=currentmode||$("#instance_structure_form").attr("class","form_active1")}function divideInThreePaneInstance(e,t){$("li").removeClass("thirdPaneActive"),$("[data-class="+e+"]").closest("li").addClass("thirdPaneActive");var i=e.split("_");if(currentmode="Display"==i[0]?"Display":"Edit",$("#property-heading").html(""),"Node X"==$("#node-x-li a").html())n="Node X (Properties): "+t;else var n="Node Z (Properties): "+t;$("#property-heading").html(cutString(n));var s=$("#node_y_class_id").val(),a="";a="class_caption"==$(".node-selected input").attr("id")?$(".node-selected .hidden-node-x").val():$(".node-selected input").val(),$.post(domainUrl+"classes/instanceStructure",{mode:i[0],node_class_id:i[1],node_id:a,node_y_class_id:s},responsenodex,"html"),"Edit"!=currentmode&&"Display"!=currentmode||$("#instance_structure_form").attr("class","form_active1")}function responsecheckInstanceData(e,t){e.checkvalue>0?divideInThreePaneInstance(e.full_class_id,e.selctedliId):divideInThreePaneX(e.full_class_id,e.selctedliId)}function responsenodex(e,t){if($("#fourh-class-div").html(e),setPaperBckgrnd(),$("#instance_structure_form").attr("class","form_active1"),$("#third-class-div").find(".tab-pane").find("span").hasClass("no-dataAvilable")?($("#fourh-class-div").find("form").addClass("no-content-property-bg-gray"),$("#fourh-class-div").find(".number_print").css("display","none")):(setNumberPrint("fourh-class-div"),$("#fourh-class-div").find(".number_print").css("display","block")),"VERSION"==$(".thirdPaneActive").find(".node-input").attr("data-name")){var i=$("#instance_structure_form").find(" ol.class-wrapper.sortable li ol.sortable li:first-child ol li:nth-child(2) ol li").find("textarea.instanceRunTab.checkFillInstanceValue").val();""==$.trim(i)&&$("#instance_structure_form").find(" ol.class-wrapper.sortable li ol.sortable li:first-child ol li:nth-child(2) ol li").find("textarea.instanceRunTab.checkFillInstanceValue").val("1")}var n=$("#second-class-div").find("ol.class-wrapper.sortable").find("li ol li:first-child ol li").find("span").html();$("#fourh-class-div").find("ol.class-wrapper.sortable").find("li ol.class-wrapper.sortable li:first-child ol li ol li:nth-child(2) ol li").find("div.node-head.node-input").children("span").html(n);$("#class_structure_form").find("div.node-selected").parents().hasClass("property-child");var s=$("#class_structure_form").find("div.node-selected").children("div.node-left").children("div.node-input").children("span").html();void 0===s&&(s="");var a=$("#second-class-div .node-selected .hidden-node-y").val();""!=$("#second-class-div .node-selected .hidden-node-y").val()?$.post(domainUrl+"classes/getClassNameNodeZ",{nodeId:a},responseNodeZClassName,"json"):(1==$(".radio_class_check_plus").is(":checked")&&$(".show-edit-node-cust i").css("visibility","visible"),$(".add-fly-radio-checked i").addClass("plus-small").removeClass("edit-class-select"),$(".sub_class_list_view1").hide()),1!=newVersionClick&&(NProgress.done(),manageNiceScroll(),adjustWidthClassStructure("expand","second-class-div"))}function responseinstanceData(e,t){if(void 0!=$(".node-content.node-selected input.hidden-node-x").val()?combineVal=$(".node-content.node-selected input.hidden-node-x").val().split(","):combineVal="",1==$(".nodeClass-Y input[value="+e.selected_node_class_id+"]").prop("checked"))"Node X"==$("#node-x-li a").html()?combineVal.push(e.node_id+","+e.selected_node_class_id):combineVal.push(e.node_id);else for(var i=0;i<combineVal.length;i++)combineVal[i]===e.node_id&&combineVal.splice(i,1);$(".node-content.node-selected input.hidden-node-x").val(""),$(".node-content.node-selected input.hidden-node-x").val(combineVal),combineVal=[],""==$(".node-content.node-selected input.hidden-node-x").val()&&$(".node-content.node-selected input.hidden-node-x").val("0")}function thirdPaneselection(){var e=[],t=$("#second-class-div").find(".node-selected .hidden-node-x").attr("nodey-value");if(void 0!=t)for(e=t.split(","),i=0;i<e.length;i++)$("span[id="+e[i]+"]").css("visibility","visible"),$("#third-class-div input[value="+e[i]+"]").prop("checked","checked");$("#third-class-div li:first").addClass("thirdPaneActive")}function saveInstanceVal(){if(""==$.trim($("#node_instance_id").val())?$("#instance_action_type").attr("value","save"):$("#instance_action_type").attr("value","edit"),""!=$.trim($("#instance_caption").val()))var e=$("#third-class-div .thirdPaneActive").find(".node-input").attr("data-class");$("#third-class-div .thirdPaneActive").find(".node-input").attr("data-name"),e.split("_"),$(this).find(".node-input").find("span").html(),$(".node-selected input").val();$.post(domainUrl+"classes/saveInstanceData",{data:$("#instance_structure_form").serialize()},responseInstanceNodeId,"json")}function responseInstanceNodeId(e,t){if(parseInt(e.node_id)>0){var i=$("#second-class-div").find(".node-selected .hidden-node-x").val();$("#second-class-div").find(".node-selected .hidden-node-x").val(i+","+e.node_id)}if(3==parseInt(e.node_type_id)&&""==e.node_instance_id){var n=$("#second-class-div").find(".node-selected .hidden-node-z").val();$("#second-class-div").find(".node-selected .hidden-node-z").val(n+","+e.node_id);var s=$("#second-class-div").find(".node-selected .hidden-node-z-main").val();$("#second-class-div").find(".node-selected .hidden-node-z-main").val(s+","+e.node_class_id)}if(""!=e.node_id){""==$.trim($("#node_y_class_id").val())?$("#action_type").attr("value","save"):$("#action_type").attr("value","edit"),sendClassJson();var a=JSON.stringify(classBuilder),o=$("#saveTypeClass").val(),r=$(".nodeselection-dropdown").val();if((1==parseInt(r)||2==parseInt(r))&&"P"==o){var l=0,d=1;$("#class_structure_form .class-wrapper li .hidden-node-z").each(function(){var e=$(this).val().split(",");e=$.grep(e,function(e,t){return""!==e&&null!=e});var t=$(this).siblings("div.node-white-circle-expanded").length;""==$.trim($("#node_y_class_id").val())&&(1==parseInt(d)?parseInt(e.length)<2&&(l=1):2==parseInt(d)?parseInt(e.length)<1&&(l=1):t&&parseInt(e.length)<1?l=1:!t&&parseInt(e.length)<4&&(l=1)),""!=$.trim($("#node_y_class_id").val())&&(1==parseInt(d)?parseInt(e.length)<3&&(l=1):2==parseInt(d)?parseInt(e.length)<2&&(l=1):t&&parseInt(e.length)<2?l=1:!t&&parseInt(e.length)<5&&(l=1)),d++})}"Node X"==$("#node-x-li a").html()&&$(".image-slider a").length>2?1==checkValidate()&&(NProgress.start(),$.post(domainUrl+"classes/saveClass",{data:$("#class_structure_form").serialize(),propertyJson:a,mode:"normal",saveType:o},responseSaveClassProperty,"html")):"Node Z"==$("#node-x-li a").html()&&$(".image-slider a").length>2?($.post(domainUrl+"classes/saveClass",{data:$("#class_structure_form").serialize(),propertyJson:a,mode:"normal",saveType:o},responseSaveClassProperty,"html"),"P"==o&&($("#first-class-div .current.default_row_class td:last").html("Published"),$('.class-table tr input[type="checkbox"]').removeAttr("disabled",!0))):$(".image-slider a").length<3&&$.post(domainUrl+"classes/saveClass",{data:$("#class_structure_form").serialize(),propertyJson:a,mode:"normal",saveType:o},responseSaveClassProperty,"html")}}function newVersion(){var e=$(".list-row.current").find("td").eq(4).html(),t=$("#node_y_class_id").val();$.post(domainUrl+"classes/checkVersionVal",{class_id:t,version:e},responseversioncheck,"JSON")}function responseversioncheck(e,t){var i,n="",n=(i=$(".list-row.current").find("td").eq(4).html()).split(".");$(".version-table").find("#major_cur_vers").html($.trim(n[0])),parseInt(n[0]),$(".version-table").find("#major_next_vers").html($.trim(e.majorVersion)),$(".version-table").find("#minor_cur_vers").html($.trim(i)),$(".version-table").find("#minor_next_vers").html($.trim(e.nextVersion)+"<span class='last-word'>"+$.trim(e.nextVersion2)+"</span>"),$("#versionModal").modal("show")}function createVersion(e){newVersionClick=!0,NProgress.start();var t=$("#node_y_class_id").val(),i=$(".node-selected input.hidden-node-x").val(),n=$(".version-table").find("#major_next_vers").html();"Node X"==$("#node-x-li a").html()?$.post(domainUrl+"classes/versionClassStructure",{class_id:t,node_id:i,node_type_id:1,vertype:e,majorVersion:n},responseversionClassStructure,"JSON"):$.post(domainUrl+"classes/versionClassStructure",{class_id:t,node_id:i,node_type_id:3,vertype:e,majorVersion:n},responseversionClassStructure,"JSON"),checkVersionMode=1}function responseversionClassStructure(e,t){if("N"==$("#is_instance").val()){var i=e.node_y_class_id;parseInt(i)>0&&(1==newVersionClick&&($(".breadcrumb  li:first").click(),newVersionClick=!1),$.post(domainUrl+"classes/index",{filter_operator:"Autometic",search_text:"AutometicAll"},responseCallVersionAutometic,"html"))}}function responseCallVersionAutometic(e,t){var i=$("#tempControler").val(),n=($("#tempAction").val(),"");if(n=i,$(".left-side-heading").html(ucfirst(n)),$(".manifest-tab").remove(),$(".content-wrapper-new").siblings(".user-action-wrap").hide(),"grid"!=i&&"associations"!=i&&"accounts"!=i&&"process"!=i&&"menudashboard"!=i&&"calendar"!=i){$("#center-screen").hide(),$("#ControlBar").hide(),$("#menudashboard").hide(),$("#calender-screen").hide(),$(".pui_center_content").show(),$(".pui_center_content").html(e),NProgress.done(),$(".my-profile").removeClass("active"),$(".All_li").addClass("active");var s=$(".first_class_structure").html();$("#list-row_"+s).addClass("current"),editClassPropertyVersion(s),$(".content-wrapper-new").siblings(".user-action-wrap").hide(),$("#main_action_menu").show(),$("#parti_action_div_id").show(),$("#firstTime").attr("value","N"),$('.class-table tr input[type="checkbox"]').attr("disabled",!0)}StopTabBreak("class_structure_form"),StopTabBreak("instance_structure_form"),setNumberPrint("second_instance_div"),1==checkVersionMode&&(addArrow(),checkVersionMode=0),manageNiceScroll()}function editClassPropertyVersion(e){if("N"==$("#is_instance").val()){var t=e;parseInt(t)>0&&(NProgress.start(),$.post(domainUrl+"classes/classStructure",{class_id:t,mode:"Edit",version:1},responseEditClassProperty,"html"))}}function cutString(e){var t="",i="";if(""!=e&&void 0!=e&&""!=(i=e.split(":"))[1]&&void 0!=i[1])return""!=i[2]&&void 0!=i[2]?i[2].replace(/\s\s+/g,"").length>=16?(t=i[2].replace(/\s\s+/g,"").substr(0,16),withStr=$.trim(i[1])+": "+t+"...",withStr):(withStr=i[1]+": "+i[2].replace(/\s\s+/g,""),withStr):i[1].replace(/\s\s+/g,"").length>=16?(t=i[1].replace(/\s\s+/g,"").substr(0,16),withStr=i[0]+": "+t+"...",withStr):(withStr=i[0]+": "+i[1].replace(/\s\s+/g,""),withStr)}function setValueOfNodeZ(e,t){$("#instance_property_caption"+t).val(e.value),"DATATYPE"==$(".thirdPaneActive").find(".node-input").attr("data-name")&&("Class"!=e.value?(1==$(".radio_class_check_plus").is(":checked")&&$(".show-edit-node-cust i").css("visibility","visible"),$("#second-class-div .node-selected .hidden-node-y").val(""),$("#second-class-div .node-selected .hidden-node-y-instance-property-node-id").val(""),$(".add-fly-radio-checked i").removeClass("plus-small").removeClass("edit-class-select"),$(".show-edit-node-cust i").css("visibility","hidden"),$(".sub_class_list_view1").hide()):""!=$("#second-class-div .node-selected .hidden-node-y").val()?($(".add-fly-radio-checked i").removeClass("plus-small").addClass("edit-class-select"),$(".sub_class_list_view1").show()):($(".add-fly-radio-checked i").addClass("plus-small").removeClass("edit-class-select"),$(".show-edit-node-cust i").css("visibility","visible"),$(".sub_class_list_view1").hide())),"data_source_type"==e.id&&("Class Property"==e.value?($("#class_property_details_li").show(),$(".class_property_details_class").attr("style","")):($("#class_property_details_li").hide(),$(".class_property_details_class").val("--"),$(".class_property_details_class").attr("style","")))}function setValueOfNodeZcheckBox(e,t){var i="";$(".checkClass_"+t).each(function(e){1==$(this).prop("checked")&&(i=i+$(this).val()+checkboxSep)}),""==$.trim(i)&&(i=checkboxSep),$("#instance_property_caption"+t).val(i)}function setValueOfNodeZ_clone(e,t){$("#instance_property_caption_clone"+t).val(e.value)}function setValueOfNodeZcheckBox_clone(e,t){var i="";$(".checkClass_clone_"+t).each(function(e){1==$(this).prop("checked")&&(i=i+$(this).val()+checkboxSep)}),""==$.trim(i)&&(i=checkboxSep),$("#instance_property_caption_clone"+t).val(i)}function setValueOfNodeZForFile(e,t){var i=new FormData(document.getElementById("instance_structure_form"));if("632"==$("#instance_structure_form #node_class_id").val()){var n=document.getElementById("filenodeZ"+t).value,s=n.substring(n.lastIndexOf(".")+1).toLowerCase();if("png"!=s&&"jpeg"!=s&&"jpg"!=s)return alert("Photo only allows file types of PNG, JPG, and JPEG"),!1;if(document.getElementById("filenodeZ"+t).files[0].size>1e5)return alert("Max Upload size is 100KB only"),!1}var a=$("#instance_property_caption"+t).attr("value");""!=a&&i.append("imgName",a),i.append("fileName",e.value),i.append("id",t),$.ajax({type:"POST",url:domainUrl+"classes/saveNodeZFile",type:"POST",data:i,dataType:"json",async:!0,enctype:"multipart/form-data",processData:!1,contentType:!1,beforeSend:function(){displayLoader()},success:function(e){if(hideLoader(),void 0!=typeof e.errorMsg&&void 0==typeof e.fileName)return bootbox.alert(e.errorMsg),!1;$("#instance_property_caption"+t).attr("value",e.fileName)}})}function setClassAndInstancePropertyNodeIds(){var e="",t="";$(".single_radio_check").each(function(){1==this.checked&&(e=this.value)});var i="";if($(".single_radio_check1").each(function(){1==this.checked&&(i=i+this.value+",")}),""!=e&&""==i)return bootbox.alert("Please select instances for the selected class."),!1;$("#second-class-div").find(".node-selected .hidden-node-y").val(e),$("#second-class-div").find(".node-selected .hidden-node-y-instance-property-node-id").val(i),""!=$("#second-class-div").find(".node-selected .hidden-node-y").val()&&($(".add-fly-radio-checked i").removeClass("plus-small").addClass("edit-class-select"),$(".show-edit-node-cust i").css({visibility:"visible"}),$(".sub_class_list_view1").show(),t=$(".list-row.current").find(".td_new_name").html(),$(".nodeZClassName").html(t)),$(".classesInstance_Cancel").trigger("click")}function getSubClassStructure(e,t,i,n){$("#temp-class").attr("value",t),$("div.node-selected").removeClass("node-selected"),$(i).addClass("node-selected"),0==parseInt($("div.node-selected").siblings("ol.subclass-"+t).length)?(displayLoader(),$("#hidden_line_number").remove(),$.post(domainUrl+"classes/subClassStructure",{class_id:e,countnumber:n},getSubClassResponseStructure,"html")):"none"==$.trim($("div.node-selected").siblings(".subclass-"+t).css("display"))?($(".temp-sub-class-"+t).closest("li").find("div.node-selected").parent("li").find("div.node-right-sub i:first").removeClass("fa-angle-up").addClass("fa-angle-down"),$(".temp-sub-class-"+t).closest("li").find("div.node-selected").parent("li").find(".subclass-"+t).show()):($(".temp-sub-class-"+t).closest("li").find("div.node-selected").parent("li").find("div.node-right-sub i:first").removeClass("fa-angle-down").addClass("fa-angle-up"),$(".temp-sub-class-"+t).closest("li").find("div.node-selected").parent("li").find(".subclass-"+t).hide())}function getSubClassResponseStructure(e,t){$("#fourh-class-div").find("span").hasClass("no-dataAvilable")&&($("#fourh-class-div").find(".niceScrollDiv").removeClass("niceScrollDiv"),$("#fourh-class-div").find(".nice-scroll-box").removeClass("nice-scroll-box")),manageNiceScroll(),$("li").removeClass("calculate-position");var i=$("#temp-class").attr("value");$(".temp-sub-class-"+i).closest("li").find("div.node-selected").parent("li").find("div.node-right-sub i:first").removeClass("fa-angle-up").addClass("fa-angle-down"),$(".temp-sub-class-"+i).closest("li").find("div.node-selected").parent("li").append(e),$(".temp-sub-class-"+i).closest("li").find("div.node-selected").parent("li").children(".class-structure-within-subclass").addClass("subclass-"+i),adjustWidthClassStructure("expand","second-class-div"),setNumberPrint(),hideLoader()}function adjustWidthClassStructure(e,t){var i,n,s,a;if($("#fourh-class-div").find("span").hasClass("no-dataAvilable")&&($("#fourh-class-div").find(".niceScrollDiv").removeClass("niceScrollDiv"),$("#fourh-class-div").find(".nice-scroll-box").removeClass("nice-scroll-box")),"collapse"===e){var o=$(".nice-scroll-box").parent().width();$(".nice-scroll-box").width()>o&&(i=$(".node-selected").parent().find("ol").width(),n=$(".node-selected").parent().find("ol:last").not(":empty").width(),s=Math.ceil(100*(i-n)/$(".nice-scroll-box").closest(".niceScrollDiv").width()),a=Math.ceil(100*$(".nice-scroll-box").width()/$(".nice-scroll-box").closest(".niceScrollDiv").width()),a=a-s>100?a-s:100,$(".nice-scroll-box").width(parseInt(a)+"%"),(r=$("#"+t+" .node-left").not(":hidden")).each(function(){var e=$(this).width();parseInt($(this).find(".node-input").width()+27)>=e&&(i=$(this).closest(".sub-class-list").width(),n=$(this).closest(".sub-class-list").find("ol:last").not(":empty").width(),s=Math.ceil(100*(i-n)/$(".nice-scroll-box").closest(".niceScrollDiv").width()),a=Math.ceil(100*$(".nice-scroll-box").width()/$(".nice-scroll-box").closest(".niceScrollDiv").width()),$(".nice-scroll-box").width(parseInt(a+s)+"%"))}))}else{var r=$(".node-selected").parent().find('.node-left:not(":hidden")');$.each(r,function(e){var t=$(this).outerWidth(!0);parseInt($(this).find(".node-input").outerWidth(!0)+27)>t&&(i=$(".node-selected").parent().find("ol").width(),n=$(".node-selected").parent().find("ol:last").not(":empty").width(),s=Math.ceil(100*(i-n)/$(".nice-scroll-box").closest(".niceScrollDiv").width()),a=Math.ceil(100*$(".nice-scroll-box").width()/$(".nice-scroll-box").closest(".niceScrollDiv").width()),$(".nice-scroll-box").width(parseInt(a+s)+"%"))})}}function getInstanceSubClassStructure(e,t,i,n,s,a,o,r){$(".tempclass").removeClass("node-selected"),$(n).addClass("tempclass node-selected");$(n).parent().nextAll().find(".number_print1");$("#temp-class-ins-").attr("value",t);var l=jQuery("#hidden_instance_temp_id").val();jQuery("#hidden_instance_temp_id").val(parseInt(jQuery("#hidden_instance_temp_id").val())+1),0==parseInt($("div.node-selected").siblings("ol.subclass-"+t).length)?(displayLoader(),$.post(domainUrl+"classes/instanceSubClassStructure",{section_mode:"yes",temp_instance_id:l,class_id:e,line_count_number:r,count_instance:o,mode:i,node_y_id:s,sub_class_label:a},getInstanceSubClassResponseStructure,"html")):"none"==$.trim($("div.node-selected").siblings(".subclass-"+t).css("display"))?(show_hide(t,1),$(".temp-sub-class-ins-"+t).closest("li").find("div.node-selected").parent("li").find("div.node-right-sub .action-move i:first").removeClass("fa-angle-up").addClass("fa-angle-down"),$(".temp-sub-class-ins-"+t).closest("li").find("div.node-selected").find("span.action-plus").removeClass("inactive").addClass("active"),$(".temp-sub-class-ins-"+t).closest("li").find("div.node-selected").find("span.action-plus").css("pointer-events","all"),adjustWidthClassStructure("expand","second_instance_div")):(show_hide(t,0),$(".temp-sub-class-ins-"+t).closest("li").find("div.node-selected").parent("li").find("div.node-right-sub .action-move i:first").removeClass("fa-angle-down").addClass("fa-angle-up"),$(".temp-sub-class-ins-"+t).closest("li").find("div.node-selected").find("span.action-plus").removeClass("active").addClass("inactive"),$(".temp-sub-class-ins-"+t).closest("li").find("div.node-selected").find("span.action-plus").css("pointer-events","none"),adjustWidthClassStructure("collapse","second_instance_div"))}function getInstanceSubClassResponseStructure(e,t){var i=$("#temp-class-ins-").attr("value"),n=$.parseHTML(e);$(n).find("span.number_print1").length>0&&$(".temp-sub-class-ins-"+i).closest("li").find("div.node-selected").parent("li").find("div.node-right-sub .action-move i:first").removeClass("fa-angle-up").addClass("fa-angle-down"),$(".temp-sub-class-ins-"+i).closest("li").find("div.node-selected").parent("li").append(e),$("#second_instance_div .edtParagraph").css("height","auto"),hideLoader(),$(n).find("span.number_print1").length>0&&($(".temp-sub-class-ins-"+i).closest("li").find("div.node-selected").find("span.action-plus").removeClass("inactive").addClass("active"),$(".temp-sub-class-ins-"+i).closest("li").find("div.node-selected").find("span.action-plus").css("pointer-events","all"),$(".temp-sub-class-ins-"+i).closest("li").find("div.node-selected").parent("li").children(".ins-subcls").addClass("subclass-"+i)),addTempInstance(),adjustWidthClassStructure("expand","second_instance_div")}function show_hide(e,t){t?$(".temp-sub-class-ins-"+e).closest("li").find("div.node-selected").parent("li").find(".subclass-"+e).show():$(".temp-sub-class-ins-"+e).closest("li").find("div.node-selected").parent("li").find(".subclass-"+e).hide()}function getInstanceCloneSubClassStructure(e,t,i,n,s,a,o,r,l){if(parseInt($("#clone-counter").val())){NProgress.start(),$("#clone-counter").val("0");u=parseInt($("span.action-plus").parent().parent("div.node-selected").find("span.number_print1").text());$(".tempclass").removeClass("node-selected"),$("#second_instance_div").find("div.node-content").removeClass("node-selected"),$(n).closest("div.node-content").addClass("tempclass node-selected");var d=$(n).closest("div.node-selected").siblings("ol.ins-subcls").length;r.preventDefault(),$("#temp-class-ins-").attr("value",t);var c=jQuery("#hidden_instance_temp_id").val();jQuery("#hidden_instance_temp_id").val(parseInt(jQuery("#hidden_instance_temp_id").val())+1);$(".temp-sub-class-ins-"+t).closest("li").find("div.node-selected").parent("li");var u=l;$.post(domainUrl+"classes/instanceSubClassStructure",{resp_number_print:l,temp_instance_id:c,class_id:e,line_count_number:u,count_instance:d,mode:i,node_y_id:s,sub_class_label:a},getInstanceCloneSubClassResponseStructure,"html")}r.stopPropagation()}function getInstanceCloneSubClassResponseStructure(e,t){var n,s=$("#temp-class-ins-").attr("value"),a=parseInt($(".temp-sub-class-ins-"+s).closest("li").find("div.node-selected").find(".hidden_number_print").val())-1,o=$(".temp-sub-class-ins-"+s).closest("li").find("div.node-selected").parent("li");o.nextAll("li").each(function(){var e=[],t=(n=parseInt($(this).find("span.number_print1").text()))+a;if($(this).find(".number_print1").each(function(e,t){n=parseInt($(this).text());var i=parseInt(n)+parseInt(a);$(this).text(i)}),$(this).find("div.node-content:first").hasClass("showhide")||$(this).find("div.node-content:first").hasClass("hideshow"));else{var s=$(this).find("div.node-content:first").attr("onclick").split(","),o=s.length;for(i=0;i<parseInt(o)-1;i++)e[i]=s[parseInt(i)];e[parseInt(o)-1]=t+")",$(this).find("div.node-content:first").attr("onclick",e)}}),o.append(e),o.children(".ins-subcls").addClass("subclass-"+s),addTempInstance(),$("#clone-counter").val("1");var r=$(".temp-sub-class-ins-"+s).closest("li").find("div.node-selected").parent("li").nextAll().find(".number_print1"),l=parseInt($(".temp-sub-class-ins-"+s).closest("li").find(".number_print1:last").text());r.length&&setNumberPrint("second_instance_div","addProp",!0,r,l),NProgress.done()}function sendInstanceJson(){instanceBuilder=[],$("li.sub-class-list-new").each(function(){var e=[],t=$(this).attr("id"),i=[],n=$(".si_node_class_id-"+t).val(),s=$(".si_node_id-"+t).val();$(".si_node_instance-"+t).each(function(t){e[t]=$(this).val()}),$(".si_node_class_property_id-"+t).each(function(e){i[e]=$(this).val()});var a=$(this).attr("parent");void 0==a&&(a="none"),instanceBuilder.push({parent:a,text:e,id:t,temp_node_id:s,subnodeclasspropertyid:i,subnodeclassid:n})})}function addTempInstance(e){tempInstancePositions(parseInt($("#temp-instance-id").val())+1)}function tempInstancePositions(e){var t=e;$("li.sub-class-list-new").each(function(){var e=$(this).closest("ol.ins-subcls").closest("li.sub-class-list-new").attr("id");void 0!==$(this).attr("parent")&&""!==$(this).attr("parent")||(e?$(this).attr("parent",e):$(this).attr("parent",$("#instance_caption").val()),t++),void 0!==$(this).attr("id")&&""!==$.trim($(this).attr("id"))?(jQuery(this).find(".si_node_instance, .si_node_class_property_id, .si_node_class_id, .si_node_id").removeClass(function(e,t){var i=t.match(/(si_node_instance-[0-9]+)|(si_node_class_property_id-[0-9]+)|(si_node_class_id-[0-9]+)|(si_node_id-[0-9]+)/g);return i?i.join(" "):i}),$(this).find(".si_node_instance").addClass("si_node_instance-"+$(this).attr("id")),$(this).find(".si_node_class_property_id").addClass("si_node_class_property_id-"+$(this).attr("id")),$(this).find(".si_node_class_id").addClass("si_node_class_id-"+$(this).attr("id")),$(this).find(".si_node_id").addClass("si_node_id-"+$(this).attr("id"))):($(this).attr("id",t),jQuery(this).find(".si_node_instance, .si_node_class_property_id, .si_node_class_id, .si_node_id").removeClass(function(e,t){var i=t.match(/(si_node_instance-[0-9]+)|(si_node_class_property_id-[0-9]+)|(si_node_class_id-[0-9]+)|(si_node_id-[0-9]+)/g);return i?i.join(" "):i}),$(this).find(".si_node_instance").addClass("si_node_instance-"+t),$(this).find(".si_node_class_property_id").addClass("si_node_class_property_id-"+t),$(this).find(".si_node_class_id").addClass("si_node_class_id-"+t),$(this).find(".si_node_id").addClass("si_node_id-"+t))}),$("#temp-instance-id").attr("value",t)}function deleteSubClass(e,t,i,n){if(i.preventDefault(),i.stopPropagation(),""!==$.trim(t)){$("#delete-sub-class").val(e),$("#delete-sub-class-id").val(t);$("#del_msg_of_sub_class").val(e+" ~  ~ subclass"),$("#delMsgOfSubClass").html("There are currently instances associated with this subclass. If you remove this, then the dependant instances will also be deleted. Continue anyway?"),$("#deleteSubInsOrSubClassPopup").modal("show")}else{var s=","+n,a=$("#child_ids_of_class").attr("value").replace(s,"");$("#child_ids_of_class").attr("value",a);var o=$(e).closest(".parent-sub-class-list"),r=parseInt(o.find(".number_print1:first").text()),l=parseInt(o.next().find(".number_print1:first").text()),d=parseInt(l-r),c=o.nextAll().find(".number_print1");$(e).closest(".parent-sub-class-list").remove(),setNumberPrint("",d,!0,c)}}function removedraftInstances(e,t){var i=e,n=t,s=$("#node_y_class_id").val();$.post(domainUrl+"classes/deleteSubClassInstances",{sub_class_id:n,node_class_id:s,instance_node_id:i},responseDeleteInstanceProperty,"html")}function responseDeleteSubClassStructure(e,t){e.msg}function deleteSubInstance(e,t,i){if(1===parseInt(i)){$("#del_msg_of_sub_class").val(e+" ~ "+t+" ~ instance"),$("#delMsgOfSubClass").html("If you delete this instance, all associated instances will also be removed. Do you want to delete instance?"),$("#deleteSubInsOrSubClassPopup").modal("show"),event.stopPropagation()}else manageinstanceSubclassNumber(e)}function manageinstanceSubclassNumber(e){if(0==$(e).closest("ol.ins-subcls").siblings("ol.ins-subcls").length)bootbox.alert("You can't delete this instance."),event.stopPropagation();else{var t=1;$(e).closest("ol.ins-subcls").siblings().each(function(){if($(this).find("a.count-class").length>1)$(this).children("li.sub-class-list").each(function(){""!=$.trim($(this).find("a.count-class").text())&&$(this).find("a.count-class").text(t++)});else{var e=$.trim($(this).find("span.number_print1.clone").attr("class"));if(void 0!=typeof e&&""!=e){var i=e.slice(0,-1);$(this).find("span.number_print1.clone").removeClass(e).addClass(i+t),$(this).find("span.number_print1.prop").each(function(){var e=$.trim($(this).attr("class")),i=e.slice(0,-1);$(this).removeClass(e).addClass(i+t)}),$(this).find("span.number_print1.input").each(function(){var e=$.trim($(this).attr("class")),i=e.slice(0,-1);$(this).removeClass(e).addClass(i+t)}),$(this).find("span.number_print1.radio").each(function(){var e=$.trim($(this).attr("class")),i=e.slice(0,-1);$(this).removeClass(e).addClass(i+t)}),$(this).find("span.number_print1.checkbox").each(function(){var e=$.trim($(this).attr("class")),i=e.slice(0,-1);$(this).removeClass(e).addClass(i+t)}),$(this).find("span.number_print1.dropdown").each(function(){var e=$.trim($(this).attr("class")),i=e.slice(0,-1);$(this).removeClass(e).addClass(i+t)}),$(this).find("span.number_print1.file").each(function(){var e=$.trim($(this).attr("class")),i=e.slice(0,-1);$(this).removeClass(e).addClass(i+t)}),$(this).find("span.number_print1.textarea").each(function(){var e=$.trim($(this).attr("class")),i=e.slice(0,-1);$(this).removeClass(e).addClass(i+t)}),$(this).find("span.number_print1.calendar").each(function(){var e=$.trim($(this).attr("class")),i=e.slice(0,-1);$(this).removeClass(e).addClass(i+t)}),$(this).find("span.number_print1.else").each(function(){var e=$.trim($(this).attr("class")),i=e.slice(0,-1);$(this).removeClass(e).addClass(i+t)})}""!=$.trim($(this).find("a.count-class").text())&&$(this).find("a.count-class").text(t++)}});var n=$(e).closest("ol").find("div.node-content:first").find("span.number_print1").text(),s=$(e).closest("ol").nextAll("ol.ins-subcls:first").find("div.node-content:first").find("span.number_print1").text();if(""==$.trim(s))var a=$(e).closest("ol").prevAll("ol.ins-subcls:first").find("div.node-content:first").find("span.number_print1").text(),o=parseInt(n)-parseInt(a);else o=parseInt(s)-parseInt(n);if(""!=$.trim($(e).closest("ol.ins-subcls").siblings("div.node-content").find("span.action-plus").attr("onclick"))){var r=$(e).closest("ol.ins-subcls").siblings("div.node-content").find("span.action-plus").attr("onclick").split(","),l=r.length,d=[],c=parseInt(r[parseInt(l)-1])-parseInt(o);for(i=0;i<parseInt(l)-1;i++)d[i]=r[parseInt(i)];d[parseInt(l)-1]=c+")",$(e).closest("ol.ins-subcls").siblings("div.node-content").find("span.action-plus").attr("onclick",d)}$(".action-plus").each(function(){var t=$(".act-mov-sub").index($(e).siblings(".act-mov-sub")),n=$(".act-mov-sub").length;for(i=t;i<n;i++)if($(".act-mov-sub").parent().eq(i).find(".action-plus").attr("onclick")){var s=$(".act-mov-sub").parent().eq(i).find(".action-plus").attr("onclick").split(","),a=s.length,r=[],l=parseInt(s[parseInt(a)-1])-parseInt(o);for(iB=0;iB<parseInt(a)-1;iB++)r[iB]=s[parseInt(iB)];r[parseInt(a)-1]=l+")",$(".act-mov-sub").parent().eq(i).find(".action-plus").attr("onclick",r)}}),$(e).closest("ol.ins-subcls").nextAll("ol.ins-subcls").each(function(){$(this).find("span.number_print1").each(function(){$(this).html(parseInt($(this).text())-o)})}),$("div.node-content").each(function(){var e=$(".act-mov-sub").index($(".node-selected .act-mov-sub")),t=$(".act-mov-sub").length;for(i=e;i<t;i++)if($(".act-mov-sub").parent().parent("div.node-content").eq(i).hasClass("showhide")||$(this).eq(i).hasClass("hideshow"));else if($(this).eq(i).attr("onclick")){var n=$(".act-mov-sub").parent().parent("div.node-content").eq(i).attr("onclick").split(","),s=n.length,a=[],r=parseInt(n[parseInt(s)-1])-parseInt(o);for(iB=0;iB<parseInt(s)-1;iB++)a[iB]=n[parseInt(iB)];a[parseInt(s)-1]=r+")",$(".act-mov-sub").parent().parent("div.node-content").eq(i).attr("onclick",a),$(".act-mov-sub").parent().parent("div.node-content").not(":hidden").find("span.number_print1").each(function(){$(this).html(parseInt($(this).text())-o)})}});$(e).closest(".parent-sub-class-list");$(e).closest("ol.ins-subcls").remove()}}function checkValidate(){var flag5=!0,checkflag5="",temp5=!0;return $(".validationCheck").each(function(i,k){var data=$(this).val();if(NProgress.done(),1==flag5){$(".thirdPaneActive .nodeClass-Y input[name='nodeX[]']").prop("checked",!0);var curid=$(".thirdPaneActive .nodeClass-Y input[name='nodeX[]']").attr("value"),classId=$(".thirdPaneActive .nodeClass-Y input[name='nodeX[]']").attr("id"),node_id=$(".node-selected input.hidden-node-x").val(),parentid=$(".node-selected input.hidden-node-x").attr("parent");$.post(domainUrl+"classes/instanceNodeStructure",{parentid:parentid,node_id:node_id,node_class_id:classId,class_node_id:curid},responseinstanceData,"json");var fn="";fn=$(this).attr("validate-data").split(";");var aa5=[];for(i=0;i<fn.length;i++)aa5.push(fn[i]);aa5.toString(),$(aa5).each(function(i,v){var newStr=v,valdata=data;if(""==valdata)var aaa=newStr.replace("this.value","");else var aaa=newStr.replace("this.value",data);0==(checkflag5=eval(aaa))&&(temp5=!1)}),flag5=0!=temp5}}),flag5}function showHideSubClassStructure(e){$(e).hasClass("showhide")?($(e).removeClass("showhide").addClass("hideshow"),$(e).siblings("ol").hide(),$(e).find("div.node-right-sub").find("a.act-mov-sub i").removeClass("fa-angle-down").addClass("fa-angle-up")):$(e).hasClass("hideshow")?($(e).removeClass("hideshow").addClass("showhide"),$(e).siblings("ol").show(),$(e).find("div.node-right-sub").find("a.act-mov-sub i").removeClass("fa-angle-up").addClass("fa-angle-down")):($(e).addClass("hideshow"),$(e).siblings("ol").hide(),$(e).find("div.node-right-sub").find("a.act-mov-sub i").removeClass("fa-angle-down").addClass("fa-angle-up"))}function instanceView(){NProgress.start(),assocationClick=!0,$(".classes_top_cl").click(),$(".panel-default").hide(),instanceShowHide(),$(".pui_center_content").html(""),$(".pui_center_content").hide(),$("#second-class-div").hide(),$(".my-profile").removeClass("active"),$("#tempControler").attr("value","classes"),$("#tempAction").attr("value","classStructure"),$.post(domainUrl+"classes/index",{},responseCallActionCompose,"html");headingName="classes",$(".left-side-heading").html(ucfirst(headingName)),$(".manifest-tab").remove(),$(".content-wrapper-new").siblings(".user-action-wrap").hide()}function responseCallActionCompose(e,t){$("#center-screen").hide(),$("#ControlBar").hide(),$("#menudashboard").hide(),$(".pui_center_content").html(e),$(".pui_center_content").hide(),$(".my-profile").removeClass("active"),$(".NodeY_li").addClass("active"),$(".All_li").addClass("active"),$(".content-wrapper-new").siblings(".user-action-wrap").hide(),$("#main_action_menu").show(),$("#parti_action_div_id").show(),$(".list-row").removeClass("current"),$("#list-row_"+domain_production_class_id).addClass("current"),$.post(domainUrl+"classes/classStructure",{class_id:domain_production_class_id,mode:"Display"},composeResponseClassStructure,"html")}function composeResponseClassStructure(e,t){$("#second-class-div").html(e),void 0!=selectedNodeIDNumber&&($("#second-class-div .node-content").removeClass("node-selected"),$("#second-class-div [data-class ="+selectedNodeIDNumber+"]").find(".node-content").first().addClass("node-selected")),$("#is_instance").attr("value","N"),$(".ins").remove(),$.post(domainUrl+"classes/getClassInstance",{class_id:domain_production_class_id,mode:"Normal"},composeResponseGetClassInstance,"html")}function composeResponseGetClassInstance(e,t){responseGetClassInstance(e,t),removeString(),setNumberPrint(),$("#second-class-div").show(),$("#first_instance_div").show(),$("#second_instance_div").show(),$(".pui_center_content").show();var i=($(window).width()-($(".sidebar_wrap").outerWidth()+$(".user-action-wrap").outerWidth()))/2;$(".set-height.active").outerWidth(i+"px"),$(".panel-default").show(),$(".panel-group").eq(1).find(".panel-default").eq(1).css("display","none"),assocationClick=!1,getInstanceStructure(parseInt($("#hidden-instance_id").val())),NProgress.done(),$(".set-height.active .intance-table").width(i+"px")}function gridView(){if(NProgress.start(),"No Instance Found"==$.trim($("#first_instance_div div.set-content-height tr.list-row td").text()))$(".association_top_cl").click(),$("li.AddNewAssociation_li > a").click();else{var e=$(".table-dashboard tr.list-row-instance-class.current").attr("id"),t=(e=e.split("list-row-instance-id_"))[1],i=$("#second_instance_div div.nano1").find("ol.sortable li ol.sortable li ol li:nth-child(2) ol li").find("div.node-input span").html();void 0!==i&&(i=i.trim());var n=$("#second_instance_div div.nano1").find("ol.sortable li div:nth-child(1)").find("div.node-input span").html();void 0!==n&&(n=n.trim()),$(".course_top_cl").click(),$("#ControlBar").find(".left-side-heading").html(i),$(".nodeIdCount").length?$(".nodeIdCount").html("( "+n+" )"):$("#ControlBar").find(".left-side-heading").after('<span class="nodeIdCount" id="temp_node_span">( '+n+" )</span>"),$.post(domainUrl+"associations/composeClassStructure",{node_class_id:domain_production_class_id,node_instance_id:t},gridInstanceResponse,"html")}}function gridcourseClassView(e,t,i,n){NProgress.start(),parObj={nodeID:e},"No Instance Found"==$.trim($("#first_instance_div div.set-content-height tr.list-row td").text())?($(".association_top_cl").click(),$("li.AddNewAssociation_li > a").click()):($(".course_top_cl").click(),$("#ControlBar").find(".left-side-heading").html(i),$(".nodeIdCount").length?$(".nodeIdCount").html("( "+t+" )"):$("#ControlBar").find(".left-side-heading").after('<span class="nodeIdCount" id="temp_node_span"><span>( '+t+' )</span><span class="colon">:</span><span class="refCourseTitle"><span class="refCourseTitleEdit"><input type="text" value="" name="productiontitle" class="production_title form-control input-field" placeholder="Undefined"><i class="icon tick"></i></span><span class="refCourseTitleView hide"><label>Undefined</label><i class="icon sm-edit"></i></span></span></span>'),$("#operationPaneFlyout").animate({right:"-100%"}).removeClass("in"),$("#hidden-instance_id").attr("value",e),$.post(domainUrl+"associations/composeClassStructure",{node_class_id:domain_production_class_id,node_instance_id:e},gridInstanceResponse,"html"))}function gridInstanceResponse(e,t){var i="";displayLoader();var n=$(".table-dashboard tr.list-row-instance-class.current").attr("id");i=""!=n&&void 0!==n?(n=n.split("list-row-instance-id_"))[1]:void 0!=$("#hidden-instance_id").val()&&"NaN"!==$("#hidden-instance_id").val()?parseInt($("#hidden-instance_id").val()):parObj.nodeID,$(".grid-div").css("display","none"),$(".tab-item:first a").addClass("active");var s="tabIndex_"+(new Date).getTime().toString();selectedGridId=s;var a=('<div class="grid-div center-div association-grid" grid-id ="%gridid%"></div><input type="hidden" id="hidden-instance_id" value="'+i+'" /><input type="hidden" id="temp_column_count" value="" /><input type="hidden" id="temp_rows_count" value="" />').replace("%gridid%",s);$("#center-screen").children(".grid-div").length>1&&($("#center-screen").children("#hidden-instance_id").remove(),$("#center-screen").children("#temp_column_count").remove(),$("#center-screen").children("#temp_rows_count").remove(),$("#center-screen").children(".grid-div").remove()),$(".pui_center_content").hide(),$("#hidden-instance_id").remove(),$("#temp_column_count").remove(),$("#temp_rows_count").remove(),$("#center-screen").append(a),$("#ControlBar").show(),$("#center-screen").show(),$("[grid-id="+s+"]").html(e);var o=$(".center-div").width()/2,r=$("#center-screen").height();$(".right-popup#nodeFlyout").width(o),$(".right-popup#nodeFlyout").height(r);$("#center-screen").width();var l=$("[grid-id="+s+"]").find("td"),d=$(l).parent("tr"),c=$(d).closest("table");$(l).index();$(this).closest("li").children("ol").find(".custom-node").focus(),$("tr").each(function(){setborder(),$(".row-2").children(".col-3").addClass("transparent"),$(".row-2").children(".col-5").addClass("transparent")}),$(c).find("tr").each(function(){$(this);var e=0;$(".entr-center-tab ul li a").each(function(t,i){$(this).hasClass("active")&&(e=$(this).parent().attr("tab-index"))}),$(".TabNodePerpective").each(function(t,i){$(this).hasClass("node-selected")&&$(this).attr("tab-data",e)}),$("body").on("click",".col-node-text input",function(e){$(this).parent(".col-node-text").siblings(".segment-count").show(),e.stopPropagation()})}),$(".center-div").scrollTop(0),showMenuInViewMode(i),$("#course-path-number").removeClass("inactive"),coursePathNumbering(),setColRowClass(),setTableWidth(),runAlgorithmOfAutoNumbering("associations"),$("#main-screen").hide(),NProgress.done(),hideLoader(),$(".loadder").hide()}function showMenuInViewMode(e){if($("#center-screen").children(".grid-div").length>1&&$("#center-screen").children(".grid-div").eq(0).remove(),parseInt(e)>0){var t=$.trim($("#ins_status"+e).text());$("#association_action_menu .user-roles").css("display","none"),$("#process_action_menu .user-roles").css("display","none"),"Published"==t?($("#association_action_menu .edit-association").css("display","block"),$("#association_action_menu .edit-association").addClass("inactiveLink")):($("#association_action_menu .edit-association").css("display","block"),$("#association_action_menu .edit-association").removeClass("inactiveLink")),$("#association_action_menu").css("display","block"),$("#association_action_menu .instance-view").removeClass("inactiveLink").css("display","block"),$("#process_action_menu .instance-view").removeClass("inactiveLink").css("display","block")}}function editAssociationProperty(){$("#association_action_menu .user-roles").css("display","block"),$("#association_action_menu .edit-association").css("display","none"),$("#association_action_menu .instance-view").css("display","none"),enablePlusIcon(),$("span.editable-field").each(function(){var e=$(this).text(),t='<input type="text" class="custom-node" alt="'+$.trim(e)+'" value="'+$.trim(e)+'">';$(this).replaceWith(t)}),$("body").on("mouseover","td",function(e,t){$("i.segment").hide(),$(this).find("i.segment").show()}),$("body").on("mouseout","td",function(e,t){$(this).find(".add-segment ul.dropdown-menu, .add-status ul.dropdown-menu").hasClass("show")?$(this).find("i.segment").show():$(this).find("i.segment").hide()}),$("input.custom-node").attr("placeholder","Undefined")}function enablePlusIcon(){$(".production_title").removeAttr("readonly");var e=0;$("table").find("tr:first").each(function(){$(this);var t=0;$("body").on("mouseover","td",function(e,i){$(this).children("i.add").addClass("show"),t++}),$("body").on("mouseout","td",function(e,i){$(this).find(".add-colums ul.dropdown-menu").hasClass("show")?$(this).children("i.add").addClass("show"):$(this).children("i.add").removeClass("show"),t++}),e++})}function disablePlusIcon(){var e=0;$("table").find("tr:first").each(function(){$(this);var t=0;$("body").on("mouseover","td",function(e,i){$(this).children("i.add").removeClass("show"),t++}),$("body").on("mouseout","td",function(e,i){$(this).find(".add-colums ul.dropdown-menu").hasClass("show"),$(this).children("i.add").removeClass("show"),t++}),e++})}function increaseWidthEdit(e,t){var i,n,s,a,o,r,l,d,c=$(".node-selected").width(),u=parseInt($(".node-selected > .node-left").width()+43);if(13==e||9==e)u>c&&(n=$(".nice-scroll-box").width(),i=parseInt($(".node-selected").parents("ol:eq(1)").width()-$(".node-selected").parents("ol:eq(0)").width()),$(".nice-scroll-box").width(n+i),s=$(".niceScrollDiv").width(),a=$(".niceScrollDiv").height(),o=$(".nice-scroll-box").width()-s,r=$(".nice-scroll-box").height()-a,$(".niceScrollDiv").scrollLeft(o),$(".niceScrollDiv").scrollTop(r));else if(8==e){var h=$(".nice-scroll-box").parent().width();(n=$(".nice-scroll-box").width())>h&&(l=t.closest("ol").width(),i=(d=t.parent().find("ol").not(":empty").last().width())?parseInt(l-d):parseInt(t.parents("ol:eq(1)").width()-t.parents("ol:eq(0)").width()),calculatedNiceScrollWidth=n-i<h?h:n-i,$(".nice-scroll-box").width(calculatedNiceScrollWidth))}}function instanceClassNew(){$("#instance_class_name_first").val(""),$("#instance-class-popup-div").trigger("click"),$("#instance-class-popup .btn").first().addClass("inactiveLink"),$("#instance-class-popup").on("shown.bs.modal",function(){$(this).find('input[type="text"]').focus()})}function instanceClassNewAgain(){if(""==$.trim($("#instance_class_name_first").val()))return $("#instance_class_name_first").css("border","1px solid red"),$("#instance_class_name_first").focus(),!1;$("#instance_class_name_first").css("border",""),NProgress.start();var e=$("#node_y_class_id").val();$.post(domainUrl+"classes/instanceClassNew",{class_id:e,class_name:$("#instance_class_name_first").val()},responseInstanceClassNew,"HTML")}function responseInstanceClassNew(e,t){$("#second-class-div").html(e),addChildProperty1(),manageRightMenuIcon("add","classes"),NProgress.done(),"Node Z"==$("#node-x-li a").html()&&$("#class_structure_form .class-wrapper").find("li").first().click()}function addChildProperty1(e){var t=$("#prop_number").val(),i='<li id="prop_temp_li_'+t+'" class="numbering" data-class="prop_temp_li_'+t+'"><div class="node-content  clearfix"><span class="number_print"></span><div class="node-left"><div class="node-circle node-white-circle">N</div><div class="node-head node-input"><textarea class="runTab" cols="30" rows="1" class="runTab" id="new_property_'+t+'" name="new_property[]" placeholder=""></textarea></div><input type="hidden" class="hidden-node-x" name="node_x_y[]" nodey-value="'+class_nodez_ids+'" value="'+class_nodez_ids+'" id="class_prop_temp_li_'+t+'"><input type="hidden" class="hidden-node-z" name="node_y_z[]" value="" id="node_y_z'+t+'" ><input type="hidden" class="hidden-node-z-main" name="prop_z_main[]" value="" id="prop_z_main'+t+'" ><input type="hidden" class="hidden-node-y" name="hidden_node_y[]" value="" id="hidden_node_y'+t+'" ><input type="hidden" class="hidden-node-y-instance-property-node-id" name="hidden_node_y_instance_property_node_id[]" value="" id="hidden_node_y_instance_property_node_id'+t+'" ></div><div class="node-right hide"><a class="action-move act-mov-sub-cross" onclick="removeProperty('+t+');"><span><i class="icon close-small"></i></span></a><a class="action-move act-mov-sub-cross addclass"><span><i class="icon plus-class"></i></span></a></div></div><ol></ol></li>';void 0!=e?e.is("ol")?e.append(i):void 0!=e&&$(i).insertAfter(e):$(".property-child").append(i),1===$(".tabber li").length&&($(".tabber").closest(".sortable").find(".addplus").append('<span class="number_print"></span>'),$(".tabber").closest(".sortable").find(".addplus").show());var n=parseInt(t)+1;$("#prop_number").attr("value",n),stopLastElementTabing(),textareaIncreaseHeight(),tabPositions(),calculatePlusIcons(),increaseWidthEdit(13),setNumberPrint(),manageNiceScroll(),setPaperBckgrnd(),$("#div-node-x").hasClass("active")&&$("#third-class-div input[name='nodeX[]']").removeAttr("checked")}function saveDocument(e){NProgress.start();var t=[],i=[],n=getCurrentDateTime(),s=$("#hidden_dialog_document_instance_id").val(),a=parseInt(globalFolderInstanceID);""!=$.trim(globalTitle)&&"Undefined"!=typeof globalTitle&&($("#document_title").val(globalTitle),$("#document_title").attr("value",globalTitle)),""==$.trim($("#document_title").val())?(bootbox.prompt("Please enter document title.",function(o){if($(".bootbox-input").click(function(){$(".bootbox-input").removeClass("alert-text"),$(".error-msg").remove()}),null===o||""==o)return null==o||($(".bootbox-input").addClass("alert-text"),parseInt($(".bootbox-input").siblings(".error-msg").length)>0&&$(".bootbox-input").siblings(".error-msg").remove(),$(".bootbox-input").after('<span class="error-msg" style="padding:5px">Required Field.</span>'),$(".error-msg").show(),!1);NProgress.start(),$("#document_title").val(o),$("#documents-screen #edt div.edtParagraph").each(function(){i.push({statement_actorauthor:"",statement_type:"",statement:$(this)[0].outerHTML,statement_timestamp:""})}),t={dialogue_template:"Document",dialogue_title:$("#document_title").val(),dialogue_admin:"",dialogue_timestamp:n,statementData:i},$.post(domainUrl+"documents/save",{document:t,saveType:e,instance_id:s,title:$("#document_title").val(),instancenodeid:a},responseSaveDocument,"html")}),$(".bootbox").addClass("DocModal"),$(".DocModal .modal-footer button").text(""),$(".DocModal .modal-footer button.btn-default").text("Cancel"),$(".DocModal .modal-footer button.btn-primary").text("Save"),NProgress.done()):($("#documents-screen #edt div.edtParagraph").each(function(){i.push({statement_actorauthor:"",statement_type:"",statement:$(this)[0].outerHTML,statement_timestamp:""})}),t={dialogue_template:"Document",dialogue_title:$("#document_title").val(),dialogue_admin:"",dialogue_timestamp:n,statementData:i},$.post(domainUrl+"documents/save",{document:t,saveType:e,instance_id:s,title:$("#document_title").val(),instancenodeid:a},responseSaveDocument,"html"))}function responseSaveDocument(e,t){e=JSON.parse(e),""==$("#hidden_dialog_document_instance_id").val()?$("#DataSaveDocument").html("<span>Document Saved Successfully</span>"):$("#DataSaveDocument").html("<span>Document Updated Successfully</span>"),$("#hidden_dialog_document_instance_id").val(e.node_instance_id),$("#hidden_dialog_document_node_id").val(e.node_id),$("#hidden_dialog_type").val(e.templateType),$("#hidden_dialog_title").val(e.dialogue_title),globalTitle=e.title,"saveDocument('D');"==$("#document_action_menu").find("#save-document-data").attr("onclick")&&($("#document_action_menu").find(".user-roles").find(".document-save").parent().addClass("inactive"),globalDocumentSaveStatus=1),NProgress.done(),$("#DataSaveDocument").fadeIn(),setTimeout(function(){$("#DataSaveDocument").fadeOut()},3e3)}function closeDocument(){var e=document.getElementById("edt");ResizeSensor.detach(e),$(".ref-hideTollbar").trigger("click"),0==globalDocumentSaveStatus?bootbox.confirm({title:"Exit without saving",message:"Are you sure you want to Close the document without saving your changes?",buttons:{cancel:{label:"No",className:"btn-default"},confirm:{label:"Yes",className:"btn-primary"}},callback:function(e){e&&($.post(domainUrl+"documents/folderList",{order_by:"sequence",order:"DESC",type:"no-pagination",mode:"Normal"},responseCallAction1,"html"),$("#folderList_action_menu").show(),$(".NewFolder_li").show(),$(".DeleteFolder_li").show(),$(".NewDocument_li").hide(),$(".OpenDocument_li").hide())}}):(NProgress.start(),$.post(domainUrl+"documents/folderList",{order_by:"sequence",order:"DESC",type:"no-pagination",mode:"Normal"},responseCallAction1,"html"),$("#folderList_action_menu").show(),$(".NewFolder_li").show(),$(".DeleteFolder_li").show(),$(".NewDocument_li").hide(),$(".OpenDocument_li").hide())}function getCurrentDateTime(){var e=new Date;return e.getFullYear()+"-"+("00"+(e.getMonth()+1)).slice(-2)+"-"+("00"+e.getDate()).slice(-2)+" "+("00"+e.getHours()).slice(-2)+":"+("00"+e.getMinutes()).slice(-2)+":"+("00"+e.getSeconds()).slice(-2)}function rejectDeleteClass(){$(".DeleteClasses_li").removeClass("inactive")}function numberPrintDrag(e,t,i){var n,s,a,o,r,l,d;(t<i?e.children().slice(t,i+1):e.children().slice(i,t+1)).each(function(e,t){n=$(this).prev().length?Number($(this).prev().find(".number_print1:first").text()):$(".number_print").length,s=$(this).prev().length?Number($(this).prev().find(".self_count_class").val())-1:1,a=n+s,console.log("prevNum"+n+"count_prop"+s),$(this).find("li").length&&(r=Number($(this).find(".number_print1:first").text()),l=a-r,$(this).find("li").each(function(){currentNum=Number($(this).find(".number_print1:first").text()),d=currentNum+l,$(this).find(".number_print1:first").text(d),(o=$(this).find(".node-content:first").attr("onclick"))&&(o=o.replace(/,\s?[0-9]+\)$/,", "+d+")"),$(this).find(".node-content:first").attr("onclick",o))})),$(this).find(".number_print1:first").text(a),(o=$(this).find(".node-content:first").attr("onclick"))&&(o=o.replace(/,\s?[0-9]+\)$/,", "+a+")"),$(this).find(".node-content:first").attr("onclick",o))});var c=[""];$("input[class*=temp-sub-class-]").each(function(e,t){var i=$(this).attr("class");i=i.match(/[0-9]+/),c.push(i)}),$("#child_ids_of_class").val(c.join())}function loadFolderDialogueDocument(e,t,i,n){NProgress.start();var s=$("li#"+parentFolderInstanceID).html();localStorage.setItem("resourcedata",s),$("#tempControler").attr("value","documents"),$("#tempAction").attr("value","index"),$("#menudashboard").children().remove(),loadDocument(e,t,i,n),$("#newDocumentFlyout").animate({right:"-100%"},300,function(){}).removeClass("in"),$("#newDocumentFlyout #File").removeClass("in"),$(".loadder").hide(),$("#documents-screen").show(),$("#document_action_menu").show(),$("#helpNoderAnchor").show(),$(".NewFolder_li").hide(),$(".DeleteFolder_li").hide(),$(".NewDocument_li").hide(),$(".OpenDocument_li").show(),$("#document_action_menu").find(".user-roles").find(".document-save").parent().addClass("inactive"),$("#document_action_menu").find("#add-document-open").remove(),caretInsert(),indexing(),setColumnsH();setTimeout(function(){$(".edtHeader #sNumbers").is(":checked")&&($(".statementNums").addClass("active"),$(".edtContainer").addClass("statementson"),outLineNum(),indexing()),$("body #documents-screen .open-file1").trigger("click"),$("body #documents-screen .open-file1").closest("li").removeClass("active"),$("body #documents-screen .file1").removeClass("active"),$(".action-file1").hide(),$(".action-file2").hide(),$(".loadder").hide()},1e3),enableDisablestatus=1}function enableResourceSaveIcon(){parseInt($("#hidden_dialog_document_instance_id").val())>0&&$("#document_action_menu").find(".user-roles").find(".document-save").parent().removeClass("inactive").addClass("active")}function disableResourceSaveIcon(){var e=$("#document_action_menu").find("#save-document-data").attr("onclick");1==enableDisablestatus&&$.trim($(".edtParagraph").text()).length>0?"saveDocument('D');"==e&&$("#document_action_menu").find(".user-roles").find(".document-save").parent().removeClass("inactive"):1==enableDisablestatus&&0==$.trim($(".edtParagraph").text()).length?"saveDocument('D');"==e&&$("#document_action_menu").find(".user-roles").find(".document-save").parent().removeClass("active").addClass("inactive"):0==enableDisablestatus&&"saveDocument('D');"==e&&$("#document_action_menu").find(".user-roles").find(".document-save").parent().removeClass("inactive").addClass("active")}function getInstanceCloneOfLocation(e,t,i,n,s,a,o,r,l,d,c,u){if(l=$("#edit_hidden_line_number_temp").val(),parseInt($("#clone-counter").val())){NProgress.start(),$("#clone-counter").val("0"),$(".tempclass").removeClass("node-selected"),$("#second_instance_div").find("div.node-content").removeClass("node-selected"),$(n).closest("div.node-content").addClass("tempclass node-selected");var h=$(n).closest("div.node-selected").siblings("ol.ins-subcls").length;$("#temp-class-ins-").attr("value",t);var p=s+parseInt(h)+1,f=($(".temp-sub-class-ins-"+t).closest("li").find("div.node-selected").parent("li"),l);$.post(domainUrl+"classes/instanceSubClassStructure",{resp_number_print:l,temp_instance_id:p,class_id:e,line_count_number:f,count_instance:h,mode:i,node_y_id:s,sub_class_label:a,location:d,role_id:c,role_name:u},getInstanceCloneOfLocationResponseStructure,"html")}}function getInstanceCloneOfLocationResponseStructure(e,t){var i=$("#temp-class-ins-").attr("value"),n=$(".instance-sortable-list").find("li:first");n.append(e),n.children(".ins-subcls").addClass("subclass-"+i),addTempInstance(),$("#clone-counter").val("1"),NProgress.done()}function fixedHeadLeftCol(){$(".center-div table.fixed-left-column").fixedTblHdrLftCol({scroll:{leftCol:{fixedSpan:2}}}),$(".col-head .arrow").remove();$("#center-screen").height(),$("#center-screen").width(),$(".center-div.process-grid .fTHLC-inner-wrapper").height();setInitalHeightWidth(),$("tr").children(".center-div.process-grid .fTHLC-left-col:nth-child(2)").addClass("collapse"),$(".ExcelTableFormationCol.col-1").html(1);var e="";$(".center-div  .fTHLC-inner-wrapper").scroll(function(){$(".center-div i.segment").removeClass("show"),$(".center-div i.add").removeClass("show show-icon active"),$(".center-div .add-col-wrap").children(".dropdown-menu").removeClass("show"),e=$(this).scrollLeft(),$(".center-div .fixed-top-header").scrollLeft(e)});var t=$(".center-div .fTHLC-inner-wrapper").height();$(".center-div  .fTHLC-outer-wrapper").scroll(function(){$(".center-div #account-table").find("td.fTHLC-left-col.cell-1, td.ExcelTableFormationRow").removeClass("top-inherit"),$(".center-div tr").last().children("td").css("margin-bottom",19);var e=$(this).children(".fixed-left-column").scrollTop();$(".center-div  .fTHLC-inner-wrapper").scrollTop(e);var i=$(".center-div.process-grid .fTHLC-outer-wrapper").scrollTop(),n=t+i;$(".center-div  .fTHLC-inner-wrapper").css("height",n)}),$("tr").last().prevAll("tr").children("td").hasClass("border-bottom")&&$("tr").last().prevAll("tr").children("td").removeClass("border-bottom"),$(".center-div .fixed-left-column").find("tr").children("td.operation-series.border-right.event").removeClass("border-right"),setSequenceNonsequence(),setTableWidth()}function fixedAssociationHeadLeftCol(){$(".center-div table.fixed-left-column").fixedTblHdrLftCol({scroll:{leftCol:{fixedSpan:2}}}),$(".col-head .arrow").remove();$("#center-screen").height(),$("#center-screen").width(),$(".center-div.association-grid .fTHLC-inner-wrapper").height();setInitalHeightWidth(),$("tr").children(".center-div.association-grid .fTHLC-left-col:nth-child(2)").addClass("collapse"),addCollapseClass(),$(".ExcelTableFormationCol.col-1").html(1);var e="";$(".center-div  .fTHLC-inner-wrapper").scroll(function(){$(".center-div i.segment").removeClass("show"),$(".center-div i.add").removeClass("show show-icon active"),$(".center-div .add-col-wrap").children(".dropdown-menu").removeClass("show"),e=$(this).scrollLeft(),$(".center-div .fixed-top-header").scrollLeft(e)});var t=$(".center-div .fTHLC-inner-wrapper").height();$(".center-div .fTHLC-outer-wrapper").scroll(function(){$(".center-div tr").last().children("td").css("margin-bottom",19);var e=$(this).children(".fixed-left-column").scrollTop();$(".center-div .fTHLC-inner-wrapper").scrollTop(e);var i=$(".center-div.association-grid .fTHLC-outer-wrapper").scrollTop(),n=t+i;$(".center-div .fTHLC-inner-wrapper").css("height",n)}),$("tr").last().prevAll("tr").children("td").hasClass("border-bottom")&&$("tr").last().prevAll("tr").children("td").removeClass("border-bottom"),setTableWidth()}function runAlgorithmOfAutoNumbering(e){var t=Array(),i=0,n=-1;$(".center-div table.fixed-left-column").each(function(){$(this);var e=$("tbody tr",$(this));e.each(function(e,t){$(this).find("td").each(function(t,i){1==e&&""!=$.trim($(this).html())&&n++})}),e.each(function(e,n){$(this).find("td").each(function(n,s){if(parentClass=$.grep(this.className.split(" "),function(e,t){return 0===e.indexOf("parent_")}).join(),e>1)if($("td.cell_1_"+n).hasClass("event")&&!$(this).hasClass("blank"))t[i]=e+"@"+n+"@"+parentClass+"_e",i++;else{var a=$(".cell_1_"+n).find(".col-head-title").html();a=a?a.toLowerCase():"";var o=$(".left-side-heading").html();"Process"!=o||"role"!=a&&"universe"!=a||$(this).hasClass("blank")?"Associations"!=o||"process"!=a||$(this).hasClass("blank")||$(this).find("input.custom-node").length||(t[i]=e+"@"+n+"@"+parentClass,i++):($(this).hasClass("disabled-role")?t[i]=e+"@"+n+"@"+parentClass+"_d":t[i]=e+"@"+n+"@"+parentClass,i++)}})})}),"associations"==e?$.post(domainUrl+"grid/algorithm",{data:t,lastColIndex:n},AssociationResponceAlgo,"JSON"):$.post(domainUrl+"grid/algorithm",{data:t,lastColIndex:n},responceAlgo,"JSON");var s="";$(".center-div .fixed-top-header table").each(function(){$("tbody tr",$(this)).each(function(e,t){$(this).find("td").each(function(t,i){1==e&&(text=$.trim($(this).text()).replace(/\s/g,""),"NUnstructured"==text&&(s=text))})})}),"NUnstructured"==s&&fillPlusImage()}function responceAlgo(e,t){$(".center-div table.fixed-left-column").each(function(){$(this);var t=$("tbody tr",$(this)),i="";$(".center-div .table-count").remove(),isAutonumberDisplay=!!$("#course-path-number").hasClass("On"),t.each(function(t,n){$(this).find("td").each(function(n,s){var a=$(this);$.each(e.data,function(e,s){$.each(s,function(s,o){i="parent_"+t+"_"+n,t==e&&n==s&&(0==isAutonumberDisplay?(a.find(".custom-node").after("<span class='table-count hide' data-id='"+o+"'>"+o+"</span>"),a.find(".custom-node").attr("name",i)):(a.find(".custom-node").after("<span class='table-count show' data-id='"+o+"'>"+o+"</span>"),a.find(".custom-node").attr("name",i)))})})})})}),disableDeletePhase(),fixedHeadLeftCol(),setTdColClass(),removeBorderRight(),countcellCount(),SegmentCount(),setWidthInitialy(),cellFlyout(),OperationPane(),setTimeout(function(){$(".center-div .fTHLC-inner-wrapper").scrollLeft(827)},500),hideLoader(),1==hideNumbering&&($(".table-count").addClass("hide"),$(".show-auto-number").addClass("hide-gridNumber")),$(".center-div .blankRow td.creation-bg").removeClass(function(e,t){return(t.match(/\bparent_\S+/g)||[]).join(" ")}),$(".center-div .fTHLC-inner-wrapper").niceScroll({cursorcolor:"#000",cursorborder:"0",cursorborderradius:"0",cursorwidth:"2px",background:"rgba(0,0,0,.15)"}),$(".process-grid").find(".fTHLC-inner-wrapper").addClass("manageScroll")}function AssociationResponceAlgo(e,t){$(".center-div table.fixed-left-column").each(function(){$(this);var t=$("tbody tr",$(this)),i="";$(".center-div .table-count").remove(),t.each(function(t,n){$(this).find("td").each(function(n,s){var a=$(this);$.each(e.data,function(e,s){$.each(s,function(s,o){i="parent_"+t+"_"+n,t==e&&n==s&&(isAutonumberDisplay=!!$("#course-path-number").hasClass("On"),0==isAutonumberDisplay?(a.find(".custom-node").after("<span class='table-count hide' data-id='"+o+"'>"+o+"</span>"),a.find(".custom-node").attr("name",i)):(a.find(".custom-node").after("<span class='table-count show' data-id='"+o+"'>"+o+"</span>"),a.find(".custom-node").attr("name",i)))})})})})}),fixedAssociationHeadLeftCol(),disableDeletePhase(),removeTdColClass(),setTdColClass(),countcellCount(),SegmentCount(),hideLoader(),setWidthInitialy(),cellFlyout(),OperationPane(),$(".center-div .fTHLC-inner-wrapper").scrollLeft(827),1==hideNumbering&&($(".table-count").addClass("hide"),$(".show-auto-number").addClass("hide-gridNumber")),$(".center-div .blankRow td.creation-bg").removeClass(function(e,t){return(t.match(/\bparent_\S+/g)||[]).join(" ")}),$(".center-div .fTHLC-inner-wrapper").niceScroll({cursorcolor:"#000",cursorborder:"0",cursorborderradius:"0",cursorwidth:"2px",background:"rgba(0,0,0,.15)"})}function disableDeletePhase(){$(".center-div li.del-operation-segment").removeClass("disabled"),$(".center-div .custom-node.undefined").each(function(){var e=$(this).closest("td"),t=$(e).closest("tr"),i=($(t).closest("table"),$(e).index()),n=$(t).index();parentName=$.grep($(e).attr("class").split(" "),function(e,t){return 0===e.indexOf("parent_")}).join();var s,a=$(".center-div ."+parentName).length,o=parseInt(n)+parseInt(a)-parseInt(1),r=0,l=parseInt(i)+parseInt(2);for(s=n;s<=o;s++)$(".center-div .cell_"+s+"_"+l).find(".custom-node").hasClass("operation-delete")&&r++;if(r<2)for(s=n;s<=o;s++)$(".center-div .cell_"+s+"_"+l).find("li.del-operation-segment").addClass("disabled");else $(this).closest("tr").find("tr").hasClass("blankRow")&&$(".center-div .parent_"+n+"_"+i).find("li.del-operation-segment").addClass("disabled")}),$(".center-div li.del-segment").removeClass("disabled"),$(".center-div .custom-node.undefined").each(function(){var e=$(this).closest("td"),t=$(e).closest("tr"),i=($(t).closest("table"),$(e).index()),n=$(t).index();parentName=$.grep($(e).attr("class").split(" "),function(e,t){return 0===e.indexOf("parent_")}).join();var s,a=$(".center-div ."+parentName).length,o=parseInt(n)+parseInt(a)-parseInt(1),r=parseInt(i)+parseInt(2),l=0;for(s=n;s<=o;s++)$(".center-div .cell_"+s+"_"+r).find(".custom-node").hasClass("undefined")&&l++;if(l<3)for(s=n;s<=o;s++)$(".center-div .cell_"+s+"_"+r).find("li.del-segment").addClass("disabled")})}function addRoleSystemClass(){$("td.operation2.fill").each(function(){var e=$(this),t=$(e).closest("tr"),i=($(t).closest("table"),$(e).index()),n=$(t).index();parentName=$.grep($($(this)).attr("class").split(" "),function(e,t){return 0===e.indexOf("parent_")}).join(),newCol1=parseInt(i)+parseInt(2),roleParent="role_"+n+"_"+newCol1,newCol2=parseInt(i)+parseInt(3),systemParent="system_"+n+"_"+newCol2;var s,a=$("."+parentName).length,o=parseInt(n)+parseInt(a)-parseInt(1),r=parseInt(i)+parseInt(2),l=parseInt(i)+parseInt(3);for(s=n;s<=o;s++)$(".cell_"+s+"_"+r+".operation-series.role")&&(className=className.replace("cell","role"),$(".cell_"+s+"_"+r+".operation-series.role").addClass(roleParent)),$(".cell_"+s+"_"+l+".operation-series.system")&&(className=className.replace("cell","system"),$(".cell_"+s+"_"+l+".operation-series.system").addClass(systemParent))})}function setInitalHeightWidth(){e=$(window).height()-($(".right-header").height()+$(".footer-temp").height()+$("#ControlBar").height());$("#center-screen").css("height",e+"px"),$(".grid-div").css("height",$("#center-screen").height()+"px");var e=$("#center-screen").height(),t=$("#center-screen").width();$(".center-div .fTHLC-outer-wrapper").css({width:t-73,height:e,paddingLeft:73});var i="";i=$(".breadcrumb-wrap").hasClass("breadcrumb-up")?e-($(".breadcrumb-wrap").height()-3):e-$(".breadcrumb-wrap").height(),$(".center-div .fTHLC-inner-wrapper").css({width:t-73,height:i-3})}function setSequenceNonsequence(){$(".center-div .blankRow").length;$(".center-div .add-segment").parents("tr").addClass("seq"),$(".center-div .blankLeftBorder").parents("tr").addClass("blankRow"),$(".center-div .seq.operation").prev("tr.operation").removeClass("operation").addClass("end"),$(".center-div tr.row-0").removeClass("operation"),$(".center-div tr.row-2").removeClass("operation"),$(".center-div tr.row-1").removeClass("end"),$(".center-div tr:last").removeClass("operation").addClass("end")}function addCollapseClass(){$(".center-div .fixed-top-header .col-head").each(function(e,t){if($(t).closest("td").hasClass("collapse")){var i=$(this).closest("td").attr("class").split(" ").filter(function(e,t){return 0===e.indexOf("col-")}).join();""!=i&&$(".center-div ."+i).addClass("collapse")}})}function removeDestructor(){var e=[];$(".center-div .fixed-left-column tr").each(function(){$(this).find(".add-sub-more-operation").each(function(){e.push($(this).next("td").index())})});for(var t=1,i=0;i<e.length;i++)$(".col-"+e[i]).each(function(e,i){$(i).find(".col-text").children("span").eq(0).hasClass("creation")?t=0:$(i).find(".col-text").children("span").eq(0).hasClass("destructure")&&($(i).removeClass("border-right"),0==t?t=1:($(i).html('<div class="blank-div segment-node"></div>'),$(i).removeClass("border-light-top"),$(i).addClass("creation-bg"),t=1))});for(var n=1,i=0;i<e.length;i++)$(".col-"+e[i]).each(function(e,t){$(t).find(".col-text").children("span").eq(0).hasClass("creation")?n=0:$(t).find(".col-text").children("span").eq(0).hasClass("destructure")&&0==n&&($(t).prev().removeClass("creation-bg"),n=1)});$(".center-div .fixed-left-column tr").each(function(e,t){$(t).removeClass("row_"+e),$(t).addClass("row_"+e)});var s=[];$(".center-div .blankRow").each(function(){s.push($(this).index())});for(var a=$(".center-div .fixed-left-column").find(".event-before:last").parent("td").parent().index(),o=$(".center-div .fixed-left-column").find(".event-before:last").parent().index(),r=($(".center-div .fixed-left-column").find(".event-before").parent().parent().index(),$(".center-div .fixed-left-column").find(".event-before").parent().parent().index()),i=0;i<s.length;i++)$(".center-div .row_"+s[i]).find(".col-"+o).addClass("blankRowTd");$(".center-div .fixed-left-column tr").each(function(e,t){$(t).find(".col-0").removeClass("blankRowTd")});var l=parseInt(r)+1,d=!1;$(".row_"+l+" td").each(function(e,t){"Interaction"==$(this).find("span.custom-node").html()&&(d=!0)}),1==d&&$(".center-div .fixed-left-column .row_"+r).each(function(){$(this).children("td").each(function(){$(this).removeClass("border-light-top")})});var c=parseInt(r)-2,u=parseInt(r)-1,h=!1;$(".row_"+c+" td").each(function(e,t){"Interaction"==$(this).find("span.custom-node").html()&&(h=!0)}),1==h&&$(".center-div .fixed-left-column .row_"+u).each(function(){$(this).children("td").each(function(){})}),$(".center-div .fixed-left-column .event-before").parent("td").parent().prev().find("td:even").removeClass("border-left"),$(".event-before").parent().parent().prev().find("td").each(function(e,t){$(t).find(".col-text").children("span").eq(0).hasClass("destructure")&&$(t).parent().children("td").eq(1).html('<div class="blank-div segment-node borderDashed"></div>')}),$(".center-div .fixed-left-column .row_"+a).each(function(e,t){$(t).find(".col-"+o).nextAll("td").addClass("creation-bg")});var p=parseInt(o)-parseInt(3),f=parseInt(o)-parseInt(1);$(".center-div .fixed-left-column").find(".col-"+p).removeClass("border-right"),$(".center-div .fixed-left-column").find(".col-"+f).removeClass("border-right"),$(".center-div .fixed-left-column").find(".col-"+o).removeClass("border-right")}function removeBorderRight(){var e=[];$(".center-div .fixed-left-column tr").each(function(t,i){var n=parseInt($(i).find(".event-before").parent().parent().index()+1);n>0&&e.push(parseInt(n))});for(m=0;m<e.length;m++)$(".row_"+e[m]).each(function(e,t){$(t).children("td").removeClass("border-light-top")});var t=[];$(".center-div .fixed-left-column tr").each(function(){$(this).find(".add-sub-more-operation").each(function(){t.push($(this).prev("td").index())})});for(m=0;m<t.length;m++)$(".col-"+t[m]).each(function(e,t){$(t).removeClass("border-right")});var i=[];$(".center-div .fixed-left-column tr").each(function(e,t){var n=parseInt($(t).find(".e-destructive").parent().parent().index()+1);n>0&&i.push(parseInt(n))});for(m=0;m<i.length;m++)$(".row_"+i[m]).each(function(e,t){$(t).children("td").addClass("border-light-top")});var n=$(".center-div .fixed-left-column").find(".event-before:last").parent().index(),s=parseInt(n)+parseInt(1),a=(parseInt(n),parseInt(2),[]);$(".center-div .fixed-left-column tr").each(function(e,t){var i=parseInt($(t).find(".e-before").parent().parent().index()+1);i>0&&a.push(parseInt(i))});var o=[];$(".center-div .fixed-left-column tr").each(function(e,t){var i=parseInt($(t).find(".e-before").parent().parent().index());i>0&&o.push(parseInt(i))});for(m=0;m<a.length;m++)$(".row_"+a[m]).each(function(e,t){$(t).find(".col-"+s).addClass("creation-bg"),$(t).find("td").each(function(e,t){e>n&&$(t).addClass("creation-bg")})});for(m=0;m<o.length;m++)$(".row_"+o[m]).each(function(e,t){$(t).find("td").each(function(e,t){e>n&&($(t).addClass("border-light-top"),$(t).addClass("creation-bg"))})});var r=[];$(".center-div .fixed-left-column tr").each(function(e,t){var i=parseInt($(t).find(".e-before").parent().parent().index()+1);i>0&&r.push(parseInt(i)+parseInt(3))});for(m=0;m<r.length;m++)$(".row_"+r[m]).each(function(e,t){$(t).find(".col-"+s).addClass("creation-bg"),$(t).find(".col-"+s).next("td").addClass("creation-bg")});var l=[],d=[],c=[];$(".center-div .fixed-left-column tr").each(function(e,t){var i=parseInt($(t).find(".e-destructive").parent().parent().index());i>0&&(l.push(parseInt(i)+parseInt(1)),d.push(parseInt(i)-parseInt(1)),c.push(parseInt(i)))});for(m=0;m<l.length;m++)$(".row_"+l[m]).each(function(e,t){$(t).find("td").each(function(e,t){e>n&&$(this).addClass("creation-bg")})});for(m=0;m<d.length;m++)$(".row_"+d[m]).each(function(e,t){$(t).find("td").each(function(e,t){e>n&&$(this).removeClass("border-light-bottom")})});var u=$(".center-div .fixed-top-header .row_0 td").find("i.add-phase-segment").last().parent().index();$(".center-div .fixed-left-column").find("tr").each(function(){$(this).find("td").each(function(e,t){e<parseInt(u)&&$(t).removeClass("border-light-top"),$(t).find("i").hasClass("segment")&&$(t).addClass("border-light-top").removeClass("border-light-bottom")})});h=[];$(".center-div .fixed-left-column tr").each(function(e,t){var i=parseInt($(t).find(".check-add-status").parent().parent().index());i>0&&h.push(parseInt(i)+parseInt(1))});$(".center-div .fixed-left-column tr").find(".check-add-status:last").parent().index(),$(".center-div .fixed-left-column tr").find(".check-add-status:last").parent().index();for(m=0;m<h.length;m++)$(".row_"+h[m]).each(function(e,t){$(t).find("td").each(function(e,t){$(this).removeClass("border-light-top")})});var h=[];$(".center-div .fixed-left-column tr").each(function(e,t){var i=parseInt($(t).find(".e-completion").parent().parent().index());i>0&&h.push(parseInt(i))});for(var n=$(".center-div .fixed-left-column").find(".event-before:last").parent().index(),p=parseInt(n)+parseInt(2),f=parseInt(n)-parseInt(1),m=0;m<h.length;m++)$(".row_"+h[m]).each(function(e,t){$(t).find("td").each(function(e,t){e==p&&($(t).html('<div class="blank-div segment-node"></div>'),$(t).removeClass("border-light-top"),$(t).addClass("creation-bg")),e>n&&$(t).addClass("creation-bg"),e>1&&e<n&&e%2==0&&$(t).removeClass("border-left")})});var g=[],v=[];$(".center-div .fixed-left-column tr").each(function(e,t){var i=parseInt($(t).find(".e-after").parent().parent().index());i>0&&(v.push(parseInt(i)),g.push(parseInt(i)+1))});for(m=0;m<g.length;m++)$(".row_"+g[m]).each(function(e,t){$(t).find("td").each(function(e,t){e>1&&e<n&&e%2==0&&$(t).removeClass("border-left"),e>parseInt(n)+1&&$(t).addClass("creation-bg")})});for(m=0;m<v.length;m++)$(".row_"+v[m]).each(function(e,t){$(t).find("td").each(function(e,t){e>n&&$(t).addClass("creation-bg")})});var b=[],_=[];$(".center-div .fixed-left-column tr").each(function(e,t){var i=parseInt($(t).find(".e-completion").parent().parent().index());i>0&&b.push(parseInt(i)-parseInt(1)),i>0&&_.push(parseInt(i)+parseInt(1))});for(m=0;m<b.length;m++)$(".row_"+b[m]).each(function(e,t){$(t).find("td").each(function(e,t){e==f&&$(t).removeClass("border-light-bottom")})});for(m=0;m<_.length;m++)$(".row_"+_[m]).each(function(e,t){$(t).find("td").each(function(e,t){e>n&&$(t).addClass("creation-bg")})});$(".center-div .fixed-top-header .row-0").find("td").find(".top-col").last().html();var y=[],w=[],C=[],x=0;$(".center-div .fixed-left-column tr").each(function(e,t){$(t).find("td").each(function(e,i){"Manifestation"==(x=$(i).find(".custom-node").attr("placeholder"))&&(y.push(parseInt($(t).index())),w.push(parseInt($(t).index())+parseInt(2)),C.push(parseInt($(t).index())+parseInt(1)))})});for(m=0;m<y.length;m++)$(".row_"+y[m]).each(function(e,t){$(t).find("td").each(function(e,t){})});for(m=0;m<C.length;m++)$(".row_"+C[m]).each(function(e,t){$(t).find("td").each(function(e,t){})});for(m=0;m<w.length;m++)$(".row_"+w[m]).each(function(e,t){$(t).find("td").each(function(e,t){e>6&&$(t).removeClass("border-light-top")})});nonSequence=[],currSeq=[],$(".center-div .blankRow").each(function(){nonSequence.push(parseInt($(this).index())+parseInt(1)),currSeq.push(parseInt($(this).index()))});for(m=0;m<nonSequence.length;m++)$(".row_"+nonSequence[m]).each(function(e,t){$(t).find("td").each(function(e,t){$(t).removeClass("border-light-top")})});for(m=0;m<currSeq.length;m++)$(".row_"+currSeq[m]).each(function(e,t){$(t).find("td").each(function(e,t){})});for(var k=$(".center-div .fixed-left-column").find("tr").not(":empty").last().index(),T=$(".center-div .fixed-top-header .row-0").find("td").find(".top-col").last().html(),m=0;m<=k;m++)$(".row_"+m).each(function(e,t){$(t).find("td").each(function(e,t){parseInt(T),parseInt(1)})});var N="";N+="<div class='creation-node'><div class='node-circle node-white-circle node-white-circle'>N</div><div class='col-text'> <span class='destructure'></span><span class='col-node-text custom-node'>Destruction</span><span class=''></span>",N+="</div></div>";for(var S=$(".center-div .fixed-left-column [placeholder ='Manifestation']").next().attr("data-id"),k=$(".center-div .fixed-left-column").find("tr").not(":empty").last().index(),m=3;m<k;m++)$(".row_"+m).each(function(e,t){$(t).find("td").each(function(e,t){e>6&&e<parseInt(S)&&e%2==0&&"Creation"==$(t).find(".custom-node").html()&&""!=$(".center-div .row_"+(m-1)).find(".col-"+e).find(".blank-div")&&($(".row_"+(m-1)).find(".col-"+e).html("").removeClass("creation-bg").addClass("border-light-top collapse border-light-bottom"),$(".row_"+(m-1)).find(".col-"+e).append(N))})});$(".row_"+k).each(function(e,t){$(t).find("td").each(function(e,t){e>1&&e<parseInt(11)&&e%2==0&&($(".row_"+k).find(".col-"+e).html("").removeClass("creation-bg").addClass("border-light-top collapse border-light-bottom"),$(".row_"+k).find(".col-"+e).append(N))})});var D=[];$(".center-div .blankRow").each(function(){D.push($(this).index())});for(m=0;m<D.length;m++)$(".row_"+D[m]).each(function(e,t){$(t).find("td").each(function(e,t){e>6&&$(t).html("")})});var I=[],T=$(".center-div .fixed-top-header .row-0").find("td").find(".top-col").last().html();$(".center-div .fixed-left-column tr").each(function(e,t){var i=parseInt($(t).find(".actionNode").parent().parent().parent().parent().index());i>0&&I.push(parseInt(i))});for(m=0;m<I.length;m++)$(".row_"+I[m]).each(function(e,t){$(t).find("td").each(function(e,t){e==T&&$(t).addClass("creation-bg")})});for(m=0;m<c.length;m++)$(".row_"+c[m]).each(function(e,t){$(t).find("td").each(function(e,t){e==parseInt(n)-parseInt(1)&&$(this).html("")})})}function countcellCount(){var e=$(".center-div .fixed-top-header .row-0").find("td").find(".top-col").last().html(),t=$(".center-div .fixed-left-column").find("tr").not(":empty").last().index();$("#cellCount").html(t+" x "+e)}function SegmentCount(){var e=$(".table-count").length,t=parseInt(e)-parseInt(1);$("#segmentCount").html(t)}function responsetimeLine(e,t){$(".grid-div").css("display","none"),$(".tab-item:first a").addClass("active");var i="tabIndex_"+(new Date).getTime().toString();selectedGridId=i;var n='<div class="grid-div center-div process-grid" grid-id ="%gridid%"></div>'.replace("%gridid%",i);$("#center-screen").append(n),$("[grid-id="+i+"]").html(e);$(".center-div").width(),$("#center-screen").height(),$("#center-screen").width();var s=$("[grid-id="+i+"]").find("td"),a=$(s).parent("tr"),o=$(a).closest("table"),r=($(s).index(),0);$("table").find("tr:first").each(function(){$(this);var e=0;$("body").on("mouseover","td",function(t,i){$(this).children("i.add").addClass("show"),e++}),$("body").on("mouseout","td",function(t,i){$(this).find(".add-colums ul.dropdown-menu").hasClass("show")?$(this).children("i.add").addClass("show"):$(this).children("i.add").removeClass("show"),e++}),r++}),$(this).closest("li").children("ol").find(".custom-node").focus(),$("tr").each(function(){setborder(),$(".row-2").children(".col-3").addClass("transparent"),$(".row-2").children(".col-5").addClass("transparent")}),$(o).find("tr").each(function(){$(this);var e=0;$("body").on("mouseover","td",function(t,i){$("i.segment").hide(),$(this).find("i.segment").show(),e++}),$("body").on("mouseout","td",function(t,i){$(this).find(".add-segment ul.dropdown-menu, .add-status ul.dropdown-menu").hasClass("show")?$(this).find("i.segment").show():$(this).find("i.segment").hide(),e++}),r++;var t=0;$(".entr-center-tab ul li a").each(function(e,i){$(this).hasClass("active")&&(t=$(this).parent().attr("tab-index"))}),$(".TabNodePerpective").each(function(e,i){$(this).hasClass("node-selected")&&$(this).attr("tab-data",t)}),$("body").on("click",".col-node-text input",function(e){$(this).parent(".col-node-text").siblings(".segment-count").show(),e.stopPropagation()})}),setColRowClass(),runAlgorithmOfTimeline(),$("body .center-div .time-col").closest("td").addClass("merge-td"),$(".center-div td.collapse.event").addClass("border-right"),$(".center-div .row-0").children("td").removeClass("border-right")}function runAlgorithmOfTimeline(e){fixedHeadLeftCol(),$(".center-div tr").find(".destructure").closest("td").next().prevAll("td.collapse").find(".destructure").closest("td").addClass("border-light-bottom border-light-top"),setTdColClass(),margecell(),$(".lodding").hide()}function findUnstructureLastRows(){var e="",t=0,i=0,n=-1;return $(".center-div table.fixed-left-column").each(function(){$(this);$("tbody tr",$(this)).each(function(s,a){n++,$(this).find("td").each(function(n,a){6==n&&(text=$.trim($(this).text()).replace(/\s/g,""),text=text.replace(/[0-9]+/,""),"NCreation"==text&&0==parseInt(t)&&0==parseInt(i)&&(t=s),"NDestruction"==text&&parseInt(t)>0&&0==parseInt(i)&&(i=s),e="",parseInt(t)>0&&parseInt(i)>0&&(e=t+","+i,t=0,i=0))})})}),e+","+n}function findUnstructureRows(){var e=[],t=0,i=0;return $(".center-div table.fixed-left-column").each(function(){$(this);$("tbody tr",$(this)).each(function(n,s){$(this).find("td").each(function(s,a){6==s&&(text=$.trim($(this).text()).replace(/\s/g,""),text=text.replace(/[0-9]+/,""),"NCreation"==text&&0==parseInt(t)&&0==parseInt(i)&&(t=n),"NDestruction"==text&&parseInt(t)>0&&0==parseInt(i)&&(i=n),parseInt(t)>0&&parseInt(i)>0&&(e.push("schedule_"+t+"_"+i),t=0,i=0))})})}),e}function openThreePaneSchedule(){console.log("oper3paneschedule"),$("#scheduleBuilder").animate({right:"0"},300,function(){$("#scheduleBuilder").addClass("in"),$(".nano").nanoScroller()}),$(".schedule-segment-day:first").length>=1?($('#timeline_form td[data-id="day"]').parents("tr").find(".cls-check").prop("checked",!0).attr("disabled",!0),$('#timeline_form td[data-id="hour"]').parents("tr").find(".cls-check").prop("checked",!0).attr("disabled",!0),$('#timeline_form td[data-id="minute"]').parents("tr").find(".cls-check").prop("checked",!0).attr("disabled",!0)):($('#timeline_form td[data-id="day"]').parents("tr").find(".cls-check").prop("checked",!1).attr("disabled",!1),$('#timeline_form td[data-id="hour"]').parents("tr").find(".cls-check").prop("checked",!1).attr("disabled",!1),$('#timeline_form td[data-id="minute"]').parents("tr").find(".cls-check").prop("checked",!1).attr("disabled",!1)),threepaneSlide()}function defaultWeek(){var e=$(".wk_segment").val(),t="";$(".segment-wk").html(""),$(".wk-starting-segment").html(""),t='<option value="1">1 Week</option>';for(var i=0;i<e;i++)ckVal=parseInt(i)+1,h_li='<li><div class="custom-checkbox"><input type="checkbox" disabled="true" checked="true" class="cls-check" value="'+ckVal+'" name="wk-ck-segment[]"><label></label></div><div>Week '+ckVal+"</div></li>",$(".segment-wk").append(h_li);$(".wk-starting-segment").append(t)}function defaultDay(){var e=$(".day_segment").val(),t="";$(".segment-day").html(""),$(".day-starting-segment").html(""),t='<option value="1">1 Day</option>';for(var i=0;i<e;i++)ckVal=parseInt(i)+1,h_li='<li><div class="custom-checkbox"><input type="checkbox" disabled="true" checked="true" class="cls-check" value="'+ckVal+'" name="day-ck-segment[]"><label></label></div><div>Day '+ckVal+"</div></li>",$(".segment-day").append(h_li);$(".day-starting-segment").append(t)}function defaultHour(){var e=$(".hour_segment").val();$(".segment-hour").html(""),$(".hour-starting-segment").html("");for(var t=0;t<e;t++)ckVal=parseInt(t)+1,hour_li='<li><div class="custom-checkbox"><input type="checkbox" disabled="true" checked="true" class="cls-check" value="'+ckVal+'" name="hour-ck-segment[]"><label></label></div><div>Hour '+ckVal+"</div></li>",$(".segment-hour").append(hour_li);$(".hour-starting-segment").append('<option value="1">1 Hour</option>')}function defaultMinute(){var e=$(".minute_segment").val();$(".segment-minute").html(""),$(".minute-starting-segment").html("");for(var t=0;t<e;t++)ckVal=parseInt(t)+1,minute_li='<li><div class="custom-checkbox"><input type="checkbox" disabled="true" checked="true" class="cls-check" value="'+ckVal+'" name="minute-ck-segment[]"><label></label></div><div>Minute '+ckVal+"</div></li>",$(".segment-minute").append(minute_li);$(".minute-starting-segment").append('<option value="1">1 Minute</option>')}function checkSegmentType(){$.each($("input[name='common_time[]']:checked"),function(){var e=$(this).val();$.inArray("week",e)&&$("#wk_parent_name").attr("value","Month"),$.inArray("day",e)&&$("#day_parent_name").attr("value","Week")})}function checkSeg(){var e=[];return $.each($("input[name='common_time[]']:checked"),function(){e.push($(this).val())}),e}function checkDayExist(){var e=0;return $(".center-div div.fixed-top-header tr.row-1 td").each(function(){"NDay"==$(this).text().replace(/\s/g,"")&&(e=1)}),e}function updateTextNumInCol(e,t,i){var n=1;$(".center-div table.fixed-left-column").each(function(){$("tbody tr",$(this)).each(function(s,a){$(this).find("td").eq(e).find("span."+i).text().length&&($(this).find("td").eq(e).find("span."+i).text(t+n),n++)})})}function correctCssStructured(){var e=parseInt($("#scheduleCol").val()),t=getRealPhaseInfo();$(".center-div table.fixed-left-column").each(function(){$("tbody tr",$(this)).not(":last").each(function(i,n){$(this).find("td").each(function(){$(this).removeClass("border-bottom"),3==$(this).index()?($(this).addClass("ExcelTablerow merge-td"),$(this).removeClass("ExcelTableFormationCol border-bottom")):($(this).index()==e||$(this).index()==e+1||5==$(this).index()||$.inArray($(this).index(),t)>-1)&&($(this).addClass("ExcelTablerow"),$(this).removeClass("ExcelTableFormationCol border-bottom"),$(this).index()==e+1&&$(this).addClass("border-right"))})})})}function toggleDaySelection(e){"day"==$(e).val()&&($(e).is(":checked")?($('td[data-id="hour"]').parents("tr").find(".cls-check").prop("checked",!0),$('td[data-id="minute"]').parents("tr").find(".cls-check").prop("checked",!0)):($('td[data-id="hour"]').parents("tr").find(".cls-check").prop("checked",!1),$('td[data-id="minute"]').parents("tr").find(".cls-check").prop("checked",!1)))}function showNotification(e){var t=e.interval?e.interval:1e4,i=$("#DataSaveMsg");i.show().html(e.msg),setTimeout(function(){i.fadeOut()},t)}function getTime(){var e=new Date;return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()}function getDayVal(){var e=new Date,t=e.getDay(),i=new Array(t);return i[0]="Sun",i[1]="Mon",i[2]="Tue",i[3]="Wed",i[4]="Thu",i[5]="Fri",i[6]="Sat",day=i[e.getDay()]}function isEditorExpanded(){}function getHeightForChatEditor(e){var t=e.find("#existingDialogueControl"),i=e.outerHeight()-t.outerHeight();t.outerHeight()>100&&(i-=22),$("#existingDialogueControl").find(".panel-collapse.in").length&&(i+=17);var n=e.find(".edtContainer.existingDocContainer");return(i=n.length?i-n.outerHeight()-10:i-(n=$(".letterChatMode")).outerHeight()-20)<1&&(i*=-1),i}function getHeightForChatEditorWhenExpanded(e){var t=e.find("#existingDialogueControl");return e.outerHeight()-t.outerHeight()-10}function calculateFullDialogueChatHeight(){var e,t=$("#rightPane");e=t.find(".editor-collapsed-btn").length?getHeightForChatEditorWhenExpanded(t):getHeightForChatEditor(t);var i=t.find(".message-wrap.active.existWrapperMsg");i.hasClass("hide")?t.find(".edtContainer").hasClass("fixed-chat-screen")?t.find(".edtContainer").height(e):t.find(".edtContainer").closest(".letterChatMode").height(e):i.height(e).niceScroll({cursorcolor:"#000",cursorborder:"0",cursorborderradius:"0",cursorwidth:"4px",background:"rgba(0,0,0,.15)"})}function addNewUser(e){var t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return""!=$.trim(e)&&(!!t.test(e)&&(autoCompleteOnSelect({key:e,value:e,userFullName:e,userInitialName:"t",userProfileImage:"public/img/guest-user.jpg",is_new_user:1}),void ChatdialogueModule.addParticipants()))}function autoCompleteOnSelect(e){mydummyParticipantObj=[],$("#individual_user_id").val(e.key),$("#individual_user_list").val(e.value),$("#individual_user_name").val(e.userFullName),$("#individual_user_initial_name").val(e.userInitialName),$("#individual_user_image").val(e.userProfileImage),e.is_new_user?$("#is_new_user").val(1):$("#is_new_user").val(""),mydummyParticipantObj.push({key:e.key,value:e.value,userFullName:e.userFullName,userProfileImage:e.userProfileImage,userInitialName:e.userInitialName,is_new_user:e.is_new_user})}function responseDeleteInstanceFolderDocumentProperty(e,t){var i=$("#FolderList").find("li.active").find("span").attr("data-id");$.post(domainUrl+"documents/folderDetails",{order_by:"node_instance_id",order:"DESC",type:"no-pagination",mode:"Normal",class_node_id:i},responseCallFolderDetailsAction,"html")}function setWidth(){DialogueFlyout(),searchInfo(),$(".nano").nanoScroller({preventPageScrolling:!0}),$("#main").find(".description").load("readme.html",function(){$(".nano").nanoScroller(),$("#main").find("img").load(function(){$(".nano").nanoScroller()})}),$headerHeight=$("header").outerHeight(!0),$breadcrumbWrap=$(".breadcrumb-wrap").outerHeight(!0),$winWidth=$(window).width(),$rightOne=$("div.display-wrapper"),$leftOne=$("div.main"),$sidebar=$(".sidebar-wrapper"),$sidebarWrap=$(".sidebar_wrap"),$contentWrap=$(".content-wrapper-new"),$availHeight=window.innerHeight-($headerHeight+$breadcrumbWrap+1);$(window).outerWidth(),$(window).outerHeight();var e=null,t=$(".sidebar_wrap"),i=($("div.sidebar_wrap ul:first ul.menu-items"),$("ul.menu-main-wrap > li")),n=t.find(".menu-wrapper");i.on("click",function(s,a){if($(".form_active").length)$(".form_active").length&&$(".Cancel-icon").trigger("click");else{if($this=$(this),$disabledLinkArr=["icon invoice","icon profile","icon setting main-icon-setting_ ","icon checklist"],-1!=$disabledLinkArr.indexOf($this.find("i").attr("class"))||$this.hasClass("inactive"))return!1;if(!isUserLoggedIn())return!1;if(0!=inprocess)return;e=t.find("ul:first > li").index(this);var o=$(".change_breadcrumb").text();if(o=o.toLowerCase().slice(0,-1),$("#edit-"+o+"-form .profile-detail").length>0||$(".edit-form-data").is(":visible"))(r=$(".menu-main-wrap li._active")).find(".menu-wrapper").show();else if($("table .clone").length>0){var r=$(".menu-main-wrap li._active");r.find(".menu-wrapper").show()}else{i.removeClass("_active"),$this.addClass("_active");var l=$this.offset().top-t.offset().top+1;n.hide(0),$(".compactanchor").removeClass("last-active"),$menu_wrapper=$this.find(".menu-wrapper").css({top:1-l+"px"}).show(0),$menu_wrapper.find("ul.menu-items:not(._sub-menu)").css({minHeight:$availHeight-$breadcrumbWrap})}$("#1_classes").hasClass("_active")&&$(".DeleteClasses_li").addClass("inactive")}}),$(".sidebar_wrap .menu-wrapper").css({height:$availHeight}),$(".user-action-wrap").css({height:$availHeight}),$sidebarWrap.height($availHeight);var s=$(".sidebar_wrap").outerWidth()+$(".user-action-wrap").outerWidth();$(".content-wrapper-new").css("width",$winWidth-s),$(".content-wrapper-new").css("height",$availHeight);$(".listing-wrapper").width();$sidebarWrap.height($availHeight),$(".set-height").height($availHeight),contentHeaderWidth(),setColumnsH();var a=$(".dashboard").width();splitDashboardWidth=a/2;var o=splitDashboardWidth*$(".active .dashSlider").length;$(".total-width-pane").width(o),$(".dashSlider").outerWidth(splitDashboardWidth),$(".nextShow").removeClass("disabled"),$(".prevShow").addClass("disabled");var r=$(".breadcrumb li.active").first().outerWidth()+$(".breadcrumb li.active").last().outerWidth();$(".image-slider").width(r),$(".breadcrumb-down").click(function(e){$(".breadcrumb-wrap").addClass("breadcrumb-up"),$headerHeight=$("header").outerHeight(!0),$availHeight=window.innerHeight-($headerHeight+10),$(".sidebar_wrap .menu-wrapper").animate({height:$availHeight},"fast"),$(".user-action-wrap").animate({height:$availHeight},"fast"),$(".sidebar_wrap").animate({height:$availHeight},"fast"),$(".content-wrapper-new").animate({height:$availHeight},"fast"),$(".set-height").animate({height:$availHeight},"fast"),setWidthInitialy(),$(".breadcrumb-down").hide(),e.stopPropagation()}),$(".btn-toggle").click(function(){$(this).find(".btn").toggleClass("active"),$(this).find(".btn-primary").size()>0&&$(this).find(".btn").toggleClass("btn-primary"),$(this).find(".btn-danger").size()>0&&$(this).find(".btn").toggleClass("btn-danger"),$(this).find(".btn-success").size()>0&&$(this).find(".btn").toggleClass("btn-success"),$(this).find(".btn").toggleClass("btn-default")}),$("form").submit(function(){return!1})}function displayRightMenuContent(e){}function getCenterContent(e,t,i){var n=$(".courseNotification-panel");if(n.hasClass("show")&&n.removeClass("show"),$(".search-item-wrap #dashboard_search_id").val(""),$(".Newcourse_li").removeClass("inactive"),"bydialogue"!=i.toLowerCase()&&"byactor"!=i.toLowerCase()||$(".Newcourse_li").addClass("inactive"),"newcourse"==i.toLowerCase()){if(localStorage.removeItem("dialogue_node_id"),$("#react-button-add-new-course").click(),$(".breadcrumb-wrap").hasClass("breadcrumb-up")){$breadcrumbWrap=10;s=$(window).height()-$("header").outerHeight()-$(".dialogue-container").outerHeight()-$breadcrumbWrap;$(".existingSelectedCourseWrap.HalfPaneHeight").height(s)}else{$breadcrumbWrap=51;var s=$(window).height()-$("header").outerHeight()-$(".dialogue-container").outerHeight()-$breadcrumbWrap;$(".existingSelectedCourseWrap.HalfPaneHeight").height(s)}return manageDialogueHT(),$(window).trigger("resize"),!0}if($("#temp_node_span").remove(),$("#tempNodeId").val(""),hitName=i,"Addevent"==i||"Grid"==i||"List"==i);else if("All"==i||"Draft"==i||"Published"==i||"Disabled"==i||"NodeX"==i||"NodeY"==i||"NodeZ"==i){var a=$.trim($(e).closest(".panel-collapse").siblings(".item-title").text());if("All"!=i&&"Draft"!=i&&"Published"!=i||"Status"!=a){if(("All"==i||"NodeX"==i||"NodeY"==i||"NodeZ"==i)&&"Node Type"==a){if($("#filter_operator").attr("value",i),$("#filter_type").attr("value","pagination"),$("#filter_field").attr("value","node_type_id"),$(e).closest("li").siblings("li").removeClass("active"),$(e).closest("li").addClass("active"),"NodeX"==i)var o="equals",r="X";else if("NodeY"==i)var o="equals",r="Y";else if("NodeZ"==i)var o="equals",r="Z";else var o="not_equal",r="A";var l=$("#filter_type").val(),d=$("#filter_field").val();if(""!=$.trim(r)){NProgress.start();u=$("#temp_item_per_page").val();$.post(domainUrl+"classes/index",{hit_by:"left_section",page:1,order_by:"node_class_id",order:"DESC",type:l,filter_operator:o,filter_field:d,search_text:r,itemPerPage:u},responseFilter,"html")}}}else if($(e).closest("li").siblings("li").removeClass("active"),$(e).closest("li").addClass("active"),"N"==$("#is_instance").val()){if($("#filter_operator").attr("value",i),$("#filter_type").attr("value","pagination"),$("#filter_field").attr("value","status"),"All"==i)var o="not_equal",r="blank";else{o="begins_with";if("Draft"==i)r="d";if("Published"==i)r="p"}var l=$("#filter_type").val(),d=$("#filter_field").val();if(""!=$.trim(r)){NProgress.start();u=$("#temp_item_per_page").val();$.post(domainUrl+"classes/index",{hit_by:"left_section",page:1,order_by:"node_class_id",order:"DESC",type:l,filter_operator:o,filter_field:d,search_text:r,itemPerPage:u},responseFilter,"html")}}else{if($("#filter_operator_instance").attr("value",i),$("#filter_type_instance").attr("value","pagination"),$("#filter_field_instance").attr("value","status"),"All"==i)var o="not_equal",r="blank";else{o="begins_with";if("Draft"==i)r="d";if("Published"==i)r="p"}var l=$("#filter_type_instance").val(),d=$("#filter_field_instance").val();if(""!=$.trim(r)){NProgress.start();var c=$("#node_y_class_id").val(),u=$("#temp_item_per_page_instance").val();$.post(domainUrl+"classes/getClassInstance",{page:1,order_by:"node_instance_id",order:"DESC",class_id:c,mode:l,filter_operator:o,filter_field:d,search_text:r,itemPerPage:u},responseInstanceFilter,"html")}}}else"Actions"==(a=$.trim($(e).closest(".panel-collapse").siblings(".item-title").text()))||($(".my-profile").removeClass("active"),$(e).closest("li").addClass("active")),["bycourse","bydialogue","byactor"].indexOf(i.toLowerCase())>-1||$.post(domainUrl+"classes/createAction",{id:t},responseCenterContent,"json");["Bycourse","Bydialogue","Byactor"].indexOf(i)>-1&&highlightActionMenuAccordingly($(e).attr("data-original-title"))}function responseNodex(e,t){}function responseCenterContent(e,t){null!=e&&callFunction(e)}function callFunction(e){if("N"==$("#firstTime").val()&&NProgress.start(),$("#tempControler").attr("value",e.controler),$("#tempAction").attr("value",e.action),e.new_node_id&&($("#tempNodeId").length?$("#tempNodeId").val(e.new_node_id):$("#tempAction").after('<input type="hidden" id="tempNodeId" value="'+e.new_node_id+'" />')),"addNewInstance"==e.action){t=$("#node_y_class_id").val();"N"==$("#is_instance").val()?$.post(domainUrl+e.controler+"/"+e.action,{node_class_id:t},responseCallAction,"html"):$.post(domainUrl+e.controler+"/"+e.action,{node_class_id:t,is_instance:"Yes"},responseCallAction,"html")}else if("exportInstanceData"==e.action){t=$("#node_y_class_id").val();$.post(domainUrl+e.controler+"/"+e.action,{node_class_id:t},responseExportInstanceCallAction,"json")}else if("generateInstanceTemplate"==e.action){var t=$("#node_y_class_id").val();$.post(domainUrl+e.controler+"/"+e.action,{node_class_id:t},responseExportInstanceCallAction,"json")}else"importInstanceData"==e.action?NProgress.done():"deleteClass"==e.action?(NProgress.done(),deleteClassProperty()):($.post(domainUrl+e.controler+"/"+e.action,{},responseCallAction,"html"),"classes"==e.controler&&"index"==e.action&&$.post(domainUrl+"classes/createFileOfUser",{},responseOfUser,"json"))}function ucfirst(e){return(e+="").charAt(0).toUpperCase()+e.substr(1)}function responseCallAction(e,t){$(".checkOperations").removeClass("checkOperations"),hitName="";var i=$("#tempControler").val(),n=$("#tempAction").val(),s=$("#tempNodeId").val(),a="";if($("#temp_node_span").remove(),$(".main-title-wrap").children("#temp_node_span").remove(),$(".main-title-wrap").children("#temp_node_span").html(""),a="grid"==i?"Process":"addNewInstance"==n&&"classes"==i?"Instance: List":i,$(".left-side-heading").html(ucfirst(a)),$(".manifest-tab").remove(),$(".content-wrapper-new").siblings(".user-action-wrap").hide(),$("#main_action_menu").show(),"grid"!=i&&"associations"!=i&&"accounts"!=i&&"process"!=i&&"workflow"!=i&&"menudashboard"!=i&&"calendar"!=i&&"actors"!=i&&"email"!=i&&i!=dashboardMenuName.toLowerCase()&&"testing"!=i&&"documents"!=i&&"group"!=i&&i!=marketMenuName.toLowerCase()){if($("#center-screen, #ControlBar, #menudashboard, #calender-screen, #actors-screen, #documents-screen, #main-screen, #canvas-screen, #organization-screen").hide(),$(".pui_center_content").show(),"addNewClass"==n)NProgress.done(),ajaxDataFirst=e,$("#common_name_first").val(""),$("#commonPopupFirstDiv").trigger("click"),$("#commonPopupFirst").on("shown.bs.modal",function(){$(this).find('input[type="text"]').focus(),$(this).find(".modal-footer button:first").addClass("inactiveLink"),$(".content-wrapper-new").siblings(".user-action-wrap").show()});else if("addNewInstance"==n){loadDataNewIns=e;var o=$("#node_y_class_id").val();parseInt(o)>0&&(hitByIns=!0,NProgress.start(),$.post(domainUrl+"classes/getClassInstance",{class_id:o,mode:"pagination",filter_field:"status",filter_operator:"not_equal",itemPerPage:"25",order:"DESC",order_by:"node_instance_id",search_text:"blank",page:"1"},responseNInstance,"html"))}else $(".pui_center_content").html(e),NProgress.done(),$(".first_class_structure").click(),$(".my-profile").removeClass("active"),$(".All_li").addClass("active"),addArrow();$(".content-wrapper-new").siblings(".user-action-wrap").hide(),$("#main_action_menu").show(),$("#parti_action_div_id").show(),$("#firstTime").attr("value","N")}else{if("grid"==i||"process"==i)$(".list-tab a").addClass("active"),$(".pui_center_content, #menudashboard, #calender-screen, #actors-screen, #documents-screen, #main-screen, #canvas-screen, #organization-screen").hide(),$("#center-screen").show(),$("#ControlBar").show(),$("#center-screen").html(""),responceGridButton(e,t),$(".content-wrapper-new").siblings(".user-action-wrap").hide(),void 0!==s&&($(".main-title-wrap").children("#temp_node_span").remove(),$(".main-title-wrap").children("#temp_node_span").html(""),"( ... )"==$("#temp_node_span").html()&&"undefined"===$("#temp_node_span").html()||$("#course_text_add").after('<span class="nodeIdCount" id="temp_node_span"><span>( ... )</span><span class="colon">:</span><span class="refCourseTitle"><span class="refCourseTitleEdit"><input type="text" value="" name="productiontitle" class="production_title form-control input-field" placeholder="Undefined" data-value="entr-process-title"><i class="icon tick entr-process-title"></i></span><span class="refCourseTitleView hide"><label>Undefined</label><i class="icon sm-edit"></i></span></span></span>')),$("#association_action_menu").hide(),$("#process_action_menu").show(),$("#ControlBar .list-tab").addClass("active"),$("#procces-tab").removeClass("hide"),coursePathNumbering(),cellFlyout(),manageCourseTitle(),$("#operationPaneFlyout").animate({right:"-100%"}).removeClass("in"),$("#scheduleBuilder").animate({right:"-100%"},300,function(){$("#scheduleBuilder").removeClass("in"),$(".structuredSche.openthreepane").removeClass("openthreepane")});else if("accounts"==i)$(".list-tab a").addClass("active"),$(".pui_center_content, #menudashboard, #calender-screen, #actors-screen, #documents-screen, #main-screen, #canvas-screen, #organization-screen").hide(),$("#center-screen").show(),$("#ControlBar").show(),$("#center-screen").html(""),$("#newDocumentFlyout").animate({right:"-100%"},300).removeClass("in"),$("#openCourseFlyout").animate({left:0},300).removeClass("in"),$(".loadder").hide(),$("#operationPaneFlyout").animate({right:"-100%"}).removeClass("in"),$("#scheduleBuilder").animate({right:"-100%"},300,function(){$("#scheduleBuilder").removeClass("in"),$(".structuredSche.openthreepane").removeClass("openthreepane")}),responceAccountingGridButton(e,t),$("#ControlBar .list-tab").addClass("active"),$(".content-wrapper-new").siblings(".user-action-wrap").hide(),$("#accounts_action_menu").show(),$("#procces-tab").removeClass("hide");else if("resources"!=i&&"documents"!=i||"index"!=n)if("resources"!=i&&"documents"!=i||"folderList"!=n)if("menudashboard"==i&&"index"==n){$(".list-tab a").addClass("active"),$("#center-screen, #ControlBar, .pui_center_content, #actors-screen, #calender-screen, #documents-screen, #canvas-screen, #main-screen, #organization-screen").hide(),$("#menudashboard").show(),$("#menudashboard").html(e),$(".content-wrapper-new").siblings(".user-action-wrap").hide(),$("#course_action_menu").show(),$(".courseDetailSection textarea.resizeTextarea").each(function(){autosize(this)}).on("autosize:resized",function(){$(".nano").nanoScroller()}),$("#newDocumentFlyout").animate({right:"-100%"},300).removeClass("in"),$("#openCourseFlyout").animate({left:0},300).removeClass("in"),dashboardInitalLoad(),setColumnsH(),$(".no-record").length||NProgress.start({position:"middle"});r=$(".courseboard-table.ActiveRow tr.current").attr("data-id");$(".HalfPaneHeight").height($(window).height()-$("header").outerHeight()-45-$breadcrumbWrap-$(".calendar-table-head").outerHeight()),$(".setListWrapHeight").height($(window).height()-$("header").outerHeight()-45-$breadcrumbWrap-$(".calendar-table-head").outerHeight()),$(".nano").nanoScroller(),$("#scheduleBuilder").animate({right:"-100%"},300,function(){$("#scheduleBuilder").removeClass("in"),$(".structuredSche.openthreepane").removeClass("openthreepane")}),$("#documents-screen").children().remove(),$("#hidden_document_type_id").val("Letter"),$("#course-instance-list-div .nano").on("update",function(){$(this).find(".dropdown.dialogue-drp").hasClass("open")&&$(this).find(".dropdown.dialogue-drp").removeClass("open")})}else if("menudashboard"!=i||"newCourse"!=n&&"underConstruction"!=n)"calendar"==i&&"index"==n?($(".list-tab a").addClass("active"),$("#center-screen, #ControlBar, .pui_center_content, #menudashboard, #actors-screen, #documents-screen, #canvas-screen, #organization-screen").hide(),$("#main-screen").hide(),$("#calender-screen").html(e),$("#calender-screen").show(),calenderWidthHeight(),$(".content-wrapper-new").siblings(".user-action-wrap").hide(),$("#calendar_action_menu").show(),$("#newDocumentFlyout").animate({right:"-100%"},300).removeClass("in"),$("#openCourseFlyout").animate({left:0},300).removeClass("in"),$(".loadder").hide(),setColumnsH(),dualPaneHeight(),$("textarea.resizeTextarea").each(function(){autosize(this)}).on("autosize:resized",function(){$(".nano").nanoScroller()}),dashboardInitalLoad(),calenderWidthHeight(),$("#scheduleBuilder").animate({right:"-100%"},300,function(){$("#scheduleBuilder").removeClass("in"),$(".structuredSche.openthreepane").removeClass("openthreepane")}),setTimeout("myFunction()",1e3)):"actors"==i&&"index"==n?($(".Byindividual_li").addClass("active"),$(".list-tab a").addClass("active"),$("#center-screen, #ControlBar, .pui_center_content, #menudashboard, #calender-screen, #documents-screen, #canvas-screen, #organization-screen").hide(),$("#main-screen").hide(),$("#actors-screen").html(e),$("#actors-screen").show(),$(".content-wrapper-new").siblings(".user-action-wrap").hide(),$("#actors_action_menu").show(),$("#newDocumentFlyout").animate({right:"-100%"},300).removeClass("in"),$("#openCourseFlyout").animate({left:0},300).removeClass("in"),$(".loadder").hide(),setColumnsH(),openActor(),dualPaneHeight(),sideFlyoutHeight(),$("#scheduleBuilder").animate({right:"-100%"},300,function(){$("#scheduleBuilder").removeClass("in"),$(".structuredSche.openthreepane").removeClass("openthreepane")})):"email"==i&&"index"==n?($(".Byindividual_li").addClass("active"),$(".list-tab a").addClass("active"),$("#center-screen, #ControlBar, .pui_center_content, #menudashboard, #calender-screen, #documents-screen, #canvas-screen, #actors-screen, #organization-screen").hide(),$("#main-screen").hide(),$("#email-screen").html(e),$("#email-screen").show(),$(".content-wrapper-new").siblings(".user-action-wrap").hide(),$("#email_action_menu").show(),$("#newDocumentFlyout").animate({right:"-100%"},300).removeClass("in"),$("#openCourseFlyout").animate({left:0},300).removeClass("in"),$(".loadder").hide(),setColumnsH(),dualPaneHeight(),sideFlyoutHeight(),$("#scheduleBuilder").animate({right:"-100%"},300,function(){$("#scheduleBuilder").removeClass("in"),$(".structuredSche.openthreepane").removeClass("openthreepane")})):"testing"==i&&"index"==n?($(".list-tab a").addClass("active"),$("#center-screen, #ControlBar, .pui_center_content, #menudashboard, #actors-screen, #documents-screen, #canvas-screen, #main-screen, #organization-screen").hide(),$("#calender-screen").html(e),$("#calender-screen").show(),$(".content-wrapper-new").siblings(".user-action-wrap").hide(),$("#calendar_action_menu").show(),setColumnsH(),dualPaneHeight(),$("#newDocumentFlyout").animate({right:"-100%"},300).removeClass("in"),$("#openCourseFlyout").animate({left:0},300).removeClass("in"),$(".loadder").hide(),$("textarea.resizeTextarea").each(function(){autosize(this)}).on("autosize:resized",function(){$(".nano").nanoScroller()}),dashboardInitalLoad(),calenderWidthHeight()):"associations"==i&&"index"==n?($(".list-tab a").addClass("active"),$(".pui_center_content, #menudashboard, #calender-screen, #actors-screen, #documents-screen, #canvas-screen, #main-screen, #organization-screen").hide(),$("#center-screen, #ControlBar").show(),$("#center-screen").html(""),$(".content-wrapper-new").siblings(".user-action-wrap").hide(),void 0!==s&&($(".main-title-wrap").children("#temp_node_span").remove(),$(".main-title-wrap").children("#temp_node_span").html(""),"( ... )"==$("#temp_node_span").html()&&"undefined"===$("#temp_node_span").html()||$("#course_text_add").after('<span class="nodeIdCount" id="temp_node_span"><span>( ... )</span><span class="colon">:</span><span class="refCourseTitle"><span class="refCourseTitleEdit"><input type="text" value="" name="productiontitle" class="production_title form-control input-field" placeholder="Undefined" data-value="entr-association-title"><i class="icon tick entr-association-title"></i></span><span class="refCourseTitleView hide"><label>Undefined</label><i class="icon sm-edit"></i></span></span></span>')),$("#process_action_menu").hide(),$("#association_action_menu").show(),$("#association_action_menu .user-roles").css("display","none"),$(".draft-association, .publish-association, .cancel-association").css("display","block"),$("#newDocumentFlyout").animate({right:"-100%"},300).removeClass("in"),$("#openCourseFlyout").animate({left:0},300).removeClass("in"),$(".loadder").hide(),$("#operationPaneFlyout").animate({right:"-100%"}).removeClass("in"),$("#scheduleBuilder").animate({right:"-100%"},300,function(){$("#scheduleBuilder").removeClass("in"),$(".structuredSche.openthreepane").removeClass("openthreepane")}),responceAssociationGridButton(e,t),$("#ControlBar .list-tab").addClass("active"),coursePathNumbering(),cellFlyout(),manageCourseTitle(),$("#procces-tab").removeClass("hide")):"workflow"==i&&"index"==n?($(".pui_center_content").show().html(e),NProgress.done(),$(".user-action-wrap").hide(),$("#workflow_action_menu").show(),$("#workflow_action_menu").find("a").show()):"store"==i&&"market"==n?($("#center-screen, #ControlBar, .pui_center_content, #actors-screen, #calender-screen, #documents-screen, #canvas-screen, #main-screen, #organization-screen").hide(),$("#menudashboard").show(),$("#menudashboard").html(e),$(".content-wrapper-new").siblings(".user-action-wrap").hide(),$("#course_action_menu").show(),NProgress.done()):"store"==i&&"mycourse"==n?($("#menudashboard").html(e),NProgress.done()):"group"==i&&"index"==n?($("#center-screen, #ControlBar, .pui_center_content, #actors-screen, #calender-screen, #documents-screen, #canvas-screen, #main-screen, #menudashboard").hide(),$("#organization-screen").show(),$("#organization-screen").html(e),$(".content-wrapper-new").siblings(".user-action-wrap").hide(),$("#organization_action_menu").show(),NProgress.done()):($(".list-tab a").addClass("active"),$(".pui_center_content, #menudashboard, #calender-screen, #actors-screen, #documents-screen, #canvas-screen, #main-screen, #organization-screen").hide(),$("#center-screen").show(),$("#ControlBar").show(),$("#center-screen").html(""),responceAssociationGridButton(e,t));else{if(edtTagArray=[],$(".list-tab a").addClass("active"),$("#center-screen, #ControlBar, .pui_center_content, #calender-screen, #actors-screen, #documents-screen, #canvas-screen, #main-screen, #organization-screen").hide(),globalNewDialog>0||$("#menudashboard").html(e),$("#menudashboard").show(),$(".content-wrapper-new").siblings(".user-action-wrap").hide(),$("#new_course_action_menu").show(),$("#course_action_menu").hide(),$("#documents-screen").children().remove(),setColumnsH(),$("#newDocumentFlyout").animate({right:"-100%"},300).removeClass("in"),$("#openCourseFlyout").animate({left:0},300).removeClass("in"),$(".loadder").hide(),globalNewDialog>0)r=globalNewDialog;else var r=$(".courseboard-table tr.current").attr("data-id");void 0==r&&(r=""),$.post(domainUrl+"menudashboard/courseView",{node_instance_id:r,load_editor:1},responseCallcourseViewAction,"html"),dualPaneHeight(),hitName="",dashboardInitalLoad(),$("#add-new-course-value").val("no"),$("#hidden_document_type_id").val("Letter"),NProgress.done()}else{if($(".list-tab a").addClass("active"),$("#center-screen, #ControlBar, .pui_center_content, #menudashboard, #documents-screen, #canvas-screen, #main-screen, #calender-screen, #actors-screen, #organization-screen").hide(),$("#documents-screen").html(e),$("#documents-screen").show(),folderSection(),caretInsert(),rangeInitialize(),indexing(),setDocNiceScroll(),ChangeAlignment(),$(".unstructuredIcon").hide(),setColumnsH(),sideFlyoutHeight(),AddUserEntry(),$(".content-wrapper-new").siblings(".user-action-wrap").hide(),$("#main-screen").hide(),$("#folderList_action_menu").show(),$(".loadder").hide(),$("#helpNoderAnchor").show(),$("#newDocumentFlyout").animate({right:"-100%"},300).removeClass("in"),$("#openCourseFlyout").animate({left:0},300).removeClass("in"),$(".loadder").hide(),$("#newDocumentFlyout #File").removeClass("in"),$(".edtHeader  #File").removeClass("in"),$("#document_title").val(globalTitle),""==!$("#document_title").val()){var l=$("#document_title").val().length;$(".charCount").text(l)}$("#FolderList").find("li:eq(0)").addClass("active"),DragDropFolder();var d=$("#FolderList").find("li:eq(0)").find("span").attr("data-id");globalFolderInstanceID=d,parentFolderInstanceID=$("#FolderList").find("li.active").closest(".move-parent-folder").attr("id"),DragDropFolderCall(),NProgress.start(),$("#FolderList li.active").trigger("click"),oddEvenColor(),$("#scheduleBuilder").animate({right:"-100%"},300,function(){$("#scheduleBuilder").removeClass("in"),$(".structuredSche.openthreepane").removeClass("openthreepane")})}else $(".list-tab a").addClass("active"),$("#center-screen, #ControlBar, .pui_center_content, #menudashboard, #documents-screen, #canvas-screen, #main-screen, #calender-screen, #actors-screen, #organization-screen").hide(),$("#documents-screen").html(e),$("#documents-screen").show(),editorLoadTags(),caretInsert(),rangeInitialize(),indexing(),autoEDTHeightCheck(),manageDocEdtHig(),setDocNiceScroll(),ChangeAlignment(),$(".unstructuredIcon").hide(),setColumnsH(),sideFlyoutHeight(),$(".content-wrapper-new").siblings(".user-action-wrap").hide(),$("#main-screen").hide(),$("#document_action_menu").show(),$(".loadder").hide(),$("#helpNoderAnchor").show(),$("#newDocumentFlyout").animate({right:"-100%"},300,function(){}).removeClass("in"),$(".edtHeader  #File").removeClass("in"),""!=globalTitle&&(closeDocumentFlyout(),$("#document_title").val(globalTitle)),"saveDocument('D');"==$("#document_action_menu").find("#save-document-data").attr("onclick")&&(globalDocumentSaveStatus=1),$("#openCourseFlyout").animate({left:0},300).removeClass("in"),$("#scheduleBuilder").animate({right:"-100%"},300,function(){$("#scheduleBuilder").removeClass("in"),$(".structuredSche.openthreepane").removeClass("openthreepane")});var c=$(".filter-list-wrap").find(".active").find("a");c.length?"By dialogue"!=c.attr("data-original-title")&&(NProgress.done(),NProgress.done()):(NProgress.done(),NProgress.done())}var u=$("#hostory_object").data("id");u&&"actors"!==i&&"menudashboard"!==i&&"addNewInstance"!==n&&(u.trigger("click"),u=$("#hostory_object").data("id","")),setInitalBreadCrumb(i,n),StopTabBreak("class_structure_form"),StopTabBreak("instance_structure_form"),setNumberPrint("second_instance_div"),manageNiceScroll(),$(".leftScroll").niceScroll({cursorcolor:"#000",cursorborder:"0",cursorborderradius:"0",cursorwidth:"0px",background:"rgba(0,0,0,.15)"}),$(".niceScrollDiv").scroll(function(e){$("#tableContextMenu").hide(),$("#edtHyperlinkPopup").hide(),$("#edtHyperlinkPreview").hide(),$("#edtformElementsTextProperties").hide(),$("#tableContextMenu").hide()}),$(".edtHeader #sNumbers").is(":checked")?$(".statementNums").addClass("active"):$(".statementNums").removeClass("active")}function getAvailableHeight(){var e=$(".header-wrapper").outerHeight(),t=$(".breadcrumb-wrap"),i=t.outerHeight();return t.hasClass("breadcrumb-up")&&(i=10),$(window).height()-(e+i)}function responseNInstance(e,t){$("#sub_nav_39 li").removeClass("active"),$("#sub_nav_39 .All_li").addClass("active"),$("#first_instance_div").html(e),$("#second_instance_div").html(loadDataNewIns),setPaperBckgrnd(),manageRightMenuIcon("add","classes"),NProgress.done(),hitByIns=!1,loadDataNewIns="",setNumberPrint("second_instance_div"),$('.class-table .single_i_check,.class-table .all_i_check,.class-table .default_row_instance input[type="checkbox"]').attr("disabled",!0)}function manageRightMenuIcon(e,t){$(".Disabled_li").addClass("inactive"),$(".Disabled_li").find("a").css("pointer-events","none");var i=$("#is_instance").val();if("N"==i&&($(".DeleteClasses_li").addClass("inactive"),$(".DeleteClasses_li").find("a").css("pointer-events","none")),"classes"==t){if($(".tooltip-item").hide(),"listing"==e){n=$(".NodeX_li").parents()[3];if($(n).closest("div").show(),$(".Edit-icon").show(),"N"==i)$(".DeleteClasses_li").find("a").html("Delete Classes"),$(".class-table :checkbox:checked").length>0?($(".DeleteClasses_li").removeClass("inactive"),$(".DeleteClasses_li").find("a").css("pointer-events","all")):($(".DeleteClasses_li").addClass("inactive"),$(".DeleteClasses_li").find("a").css("pointer-events","none"));else{$(".DeleteClasses_li").find("a").html("Delete Instances"),$(".DeleteClasses_li").find("a").css("pointer-events","none"),$(".ExportInstanceData_li").removeClass("inactive"),$(".ExportInstanceData_li").find("a").css("pointer-events","all"),$(".GenerateInstanceTemplate_li").removeClass("inactive"),$(".GenerateInstanceTemplate_li").find("a").css("pointer-events","all"),$(".ImportInstanceData_li").removeClass("inactive"),$(".ImportInstanceData_li").find("a").css("pointer-events","all");var n=$(".NodeX_li").parents()[3];$(n).closest("div").hide()}}if("add"==e)if($(".Save-icon").show(),$(".Cancel-icon").show(),"N"==i){$(".Subclass-icon").show();var s=$("#class_status").val();1==parseInt(s)?$(".saveDraft").hide():$(".saveDraft").show()}else $(".saveDraft").show(),$(".DeleteClasses_li").addClass("inactive"),$(".DeleteClasses_li").find("a").css("pointer-events","none"),$(".ExportInstanceData_li").addClass("inactive"),$(".ExportInstanceData_li").find("a").css("pointer-events","none"),$(".GenerateInstanceTemplate_li").addClass("inactive"),$(".GenerateInstanceTemplate_li").find("a").css("pointer-events","none"),$(".ImportInstanceData_li").addClass("inactive"),$(".ImportInstanceData_li").find("a").css("pointer-events","none");if("N"==(i=$("#is_instance").val())&&"Published"==$(".list-row.current").find("td:last").html()&&1==$(".list-row.current").data("versiontype")?($(".Version-icon").show(),$(".Edit-icon").addClass("inactiveLink"),$("a.Edit-icon").css("pointer-events","none"),$(".saveDraft").hide()):($(".Version-icon").hide(),$(".Edit-icon").removeClass("inactiveLink"),$("a.Edit-icon").css("pointer-events","all")),"N"==i&&"listing"==e){var a=$("#second-class-div #class_status").val(),o=$("#second-class-div #node_type_id").val(),r=$("#second-class-div #discendant_name").val();1==parseInt(o)||3==parseInt(o)?($(".Instance-icon").hide(),$(".Instance-icon").addClass("inactiveLink"),$(".Instance-icon").css("pointer-events","none"),$(".Instance-Class-icon").hide(),$(".Instance-Class-icon").addClass("inactiveLink"),$(".Instance-Class-icon").css("pointer-events","none")):1==parseInt(a)?"Instance"==r?($(".Instance-icon").show(),$(".Instance-icon").removeClass("inactiveLink"),$(".Instance-icon").css("pointer-events","all")):"Instance Class"==r?($(".Instance-Class-icon").show(),$(".Instance-Class-icon").removeClass("inactiveLink"),$(".Instance-Class-icon").css("pointer-events","all")):"Both"==r&&($(".Instance-icon").show(),$(".Instance-icon").removeClass("inactiveLink"),$(".Instance-icon").css("pointer-events","all"),$(".Instance-Class-icon").show(),$(".Instance-Class-icon").removeClass("inactiveLink"),$(".Instance-Class-icon").css("pointer-events","all")):($(".Instance-icon").hide(),$(".Instance-icon").addClass("inactiveLink"),$(".Instance-icon").css("pointer-events","none"),$(".Instance-Class-icon").hide(),$(".Instance-Class-icon").addClass("inactiveLink"),$(".Instance-Class-icon").css("pointer-events","none"))}0==parseInt(nodeCounter)&&($(".Nodex-icon").show(),$(".Nodez-icon").show(),nodeCounter=1),manageNodeXIcon()}if(1==$("#node_y_class_id").attr("version-id")){$("#version").html("<a style='display:block;' onclick='deleteClassPropertyVersion();' class='tooltip-item user-roles Cancel1-icon version-draft-icon' data-original-title='Cancel'><i class='icon cancel'></i><br><span>Cancel</span></a>"),$(".Cancel-icon").hide()}dualPaneHeight()}function StopTabBreak(e){$(".nano-content").removeAttr("tabindex");var t=$("#"+e+" li").last().children().find("input").last().attr("id"),i=$("#"+e+" li").first().children().find("input").first().attr("id");$("#"+t+", #"+i).keydown(function(e){9==(e.keyCode||e.which)&&e.preventDefault()})}function nodeXShow(){selectedNodeYId=0;var e=$("#second-class-div #prop_number").val();if($(".image-slider a").length>2)"Node Z"==$("#node-x-li a").html()&&($(".Nodez-icon").show(),$(".Nodex-icon").hide(),$("#node-x-li a").text("Node X"),$("#node-x-li-properties a").text("Node X - Properties"),"Class Properties"==$(".image-slider a:first").text()?($(".image-slider a:last").prev().text("Node X"),$(".image-slider a:last").text("Node X - Properties")):$(".image-slider a:last").text("Node X"));else{$("#node-x-li").show(),$(".Nodex-icon").hide(),$(".dashboard").animate({"margin-left":"-="+splitDashboardWidth}),$(".listing-wrapper").removeClass("active"),$("#div-node-x").addClass("active"),$("#div-node-x-property").addClass("active");var t=$(".content-wrapper-new").width()/3;$(".content-wrapper-new").find(".dashSlider.active").animate({width:t},"3000"),$(".breadcrumb li:first").removeClass("active"),$("#node-x-li").addClass("active"),$("#node-x-li-properties").addClass("active"),$("#node-x-li a").text("Node X"),$("#node-x-li-properties a").text("Node X - Properties");$(".image-slider").append('<a href="javascript:void(0);">Node X properties</a>');var i=0;$(".breadcrumb li.active").each(function(e,t){i+=$(t).outerWidth(),$(".image-slider a").eq(e).text($(".breadcrumb-wrap li.active a").eq(e).text())});var n=$(".breadcrumb-wrap li:first").outerWidth();$(".image-slider").animate({marginLeft:"+="+n},200),$(".image-slider").css("width",i),setTimeout(function(){var e=$("#second-class-div").find(".node-selected .hidden-node-x").attr("nodey-value");if(void 0!=e)for(pp=e.split(","),l=0;l<pp.length;l++)$("span[id="+pp[l]+"]").css("visibility","visible");if(void 0!=e)for(pp=e.split(","),l=0;l<pp.length;l++)$("#third-class-div input[value="+pp[l]+"]").prop("checked","checked");$("#third-class-div li:first").addClass("thirdPaneActive")},500),removeString()}$("#changeNodeType1").html("Node X (Class): List");var s=$(".node-selected input").not(".self_count_class").val(),a=$("#second-class-div").find("div.node-selected .node-input span").html(),o=$("#second-class-div").find("div.node-selected .node-circle").hasClass("node-white-circle");void 0==e?$.post(domainUrl+"classes/getNodeX",{mode:"Display",nodeTypeId:1,node_id:s,nodeType:"Node X",nodeName:a,nodeIsChild:o},responseGetNodeX,"html"):void 0==$("#second-class-div .node-selected .is_ins_class").val()?$.post(domainUrl+"classes/getNodeX",{mode:"Edit",nodeTypeId:1,node_id:s,nodeType:"Node X",nodeName:a,nodeIsChild:o},responseGetNodeX,"html"):$.post(domainUrl+"classes/getNodeX",{mode:"Display",nodeTypeId:1,node_id:s,nodeType:"Node X",nodeName:a,nodeIsChild:o},responseGetNodeX,"html");$("#is_instance").val();"Published"==$(".list-row.current").find("td:last").html()&&1==$(".list-row.current").data("versiontype")?($(".Version-icon").show(),$(".Edit-icon").addClass("inactiveLink"),$(".Edit-icon").css("pointer-events","none"),$(".saveDraft").hide()):($(".Version-icon").hide(),$(".Edit-icon").removeClass("inactiveLink"),$(".Edit-icon").css("pointer-events","all"));for(var r=["paneNum1","paneNum2","paneNum3","paneNum4","paneNum5"],l=0;l<=r.length;l++)$(".dashSlider").each(function(e,t){$(t).addClass(r[e])});$(".dashSlider").hasClass("customPaneSpanWidth")&&$(".dashSlider").removeClass("customPaneSpanWidth"),addArrow()}function nodeZShow(){selectedNodeYId=0;var e=$("#second-class-div #prop_number").val();if($(".image-slider a").length>2)"Node X"==$("#node-x-li a").html()&&($(".Nodez-icon").hide(),$(".Nodex-icon").show(),$("#node-x-li a").text("Node Z"),$("#node-x-li-properties a").text("Node Z - Properties"),"Class Properties"==$(".image-slider a:first").text()?($(".image-slider a:last").prev().text("Node Z"),$(".image-slider a:last").text("Node Z - Properties")):$(".image-slider a:last").text("Node Z"));else{$("#node-x-li").show(),$(".Nodez-icon").hide(),$(".Nodex-icon").show(),$(".dashboard").animate({"margin-left":"-="+splitDashboardWidth}),$(".listing-wrapper").removeClass("active"),$("#div-node-x").addClass("active"),$("#div-node-x-property").addClass("active");var t=$(".content-wrapper-new").width()/3;$(".content-wrapper-new").find(".dashSlider.active").animate({width:t},"3000"),$(".breadcrumb li:first").removeClass("active"),$("#node-x-li").addClass("active"),$("#node-x-li-properties").addClass("active"),$("#node-x-li a").text("Node Z"),$("#node-x-li-properties a").text("Node Z - Properties");$(".image-slider").append('<a href="javascript:void(0);">Node Z - Properties</a>');var i=0;$(".breadcrumb li.active").each(function(e,t){i+=$(t).outerWidth(),$(".image-slider a").eq(e).text($(".breadcrumb-wrap li.active a").eq(e).text())});var n=$(".breadcrumb-wrap li:first").outerWidth();$(".image-slider").animate({marginLeft:"+="+n},200),$(".image-slider").css("width",i),setTimeout(function(){var e=$("#second-class-div").find(".node-selected .hidden-node-x").attr("nodey-value");if(void 0!=e)for(pp=e.split(","),l=0;l<pp.length;l++)$("span[id="+pp[l]+"]").css("visibility","visible");if(void 0!=e)for(pp=e.split(","),l=0;l<pp.length;l++)$("#third-class-div input[value="+pp[l]+"]").prop("checked","checked");$("#third-class-div li:first").addClass("thirdPaneActive")},500),removeString()}var s=$("#second-class-div").find("div.node-selected .node-input span").html(),a=$(".node-selected input").not(".self_count_class").val(),o=$("#second-class-div").find("div.node-selected .node-circle").hasClass("node-white-circle");void 0==e?$.post(domainUrl+"classes/getNodeX",{mode:"Display",nodeTypeId:3,node_id:a,nodeType:"Node Z",nodeName:s,nodeIsChild:o},responseGetNodeX,"html"):void 0==$("#second-class-div .node-selected .is_ins_class").val()?$.post(domainUrl+"classes/getNodeX",{mode:"Edit",nodeTypeId:3,node_id:a,nodeType:"Node Z",nodeName:s,nodeIsChild:o},responseGetNodeX,"html"):$.post(domainUrl+"classes/getNodeX",{mode:"Display",nodeTypeId:3,node_id:a,nodeType:"Node Z",nodeName:s,nodeIsChild:o},responseGetNodeX,"html"),$("#changeNodeType1").html("Node Z (Class): List"),"N"==$("#is_instance").val()&&"Published"==$(".list-row.current").find("td:last").html()&&1==$(".list-row.current").data("versiontype")?($(".Version-icon").show(),$(".Edit-icon").addClass("inactiveLink"),$(".Edit-icon").css("pointer-events","none"),$(".saveDraft").hide()):($(".Version-icon").hide(),$(".Edit-icon").removeClass("inactiveLink"),$(".Edit-icon").css("pointer-events","all"));for(var r=["paneNum1","paneNum2","paneNum3","paneNum4","paneNum5"],l=0;l<=r.length;l++)$(".dashSlider").each(function(e,t){$(t).addClass(r[e])});$(".dashSlider").hasClass("customPaneSpanWidth")&&$(".dashSlider").removeClass("customPaneSpanWidth"),addArrow()}function openDialogPopup(){var e=$("#import_instance_file").val();e=e.split("."),"csv"==$.trim(e[e.length-1])?$("#filePopup").modal("show"):($("#csvfilePopup").find(".series-content p").text("This file format is not in a proper format. Please use csv file format."),$("#csvfilePopup").modal("show"))}function responseExportInstanceCallAction(e,t){NProgress.start(),window.location.href=e.path,NProgress.done()}function manageNodeXIcon(){"N"==$("#is_instance").val()?($("#div-node-x").hasClass("active")?$(".Nodex-icon").hide():($(".Nodex-icon").show(),$(".Nodez-icon").show(),$("#node-x-li").hide()),"Node X"==$("#node-x-li a").html()?$(".Nodez-icon").show():$(".Nodex-icon").show()):($(".Nodez-icon").hide(),$(".Nodex-icon").hide(),$("#node-x-li").hide()),removeString()}function removeString(){var e="Y";if(""==$.trim($("#node_y_class_id").val())){e=1==initalNodeType?"X":2==initalNodeType?"Y":"Z";var t=$("#post_name").text();$("#second-class-div-heading").html("Node "+e+" (Properties): "+t),$(".display-wrapper #second-class-div-heading").attr("alt","Node "+e+" (Properties): "+t)}var i=$(".display-wrapper #second-class-div-heading").attr("alt");if(""!=$.trim(i)){var n=$(".image-slider a").length,s="",a="";s=i.split(":"),n>2?""!=s[1]&&void 0!=s[1]&&(s[1].length>7?(newVar=s[1].substr(0,7),a=s[0]+": "+newVar+"...",$("#second-class-div-heading").html(a)):(a=s[0]+": "+s[1],$("#second-class-div-heading").html(a))):""!=s[1]&&void 0!=s[1]&&(s[1].length>37?(newVar=s[1].substr(0,37),a=s[0]+": "+newVar+"...",$("#second-class-div-heading").html(a)):(a=s[0]+": "+s[1],$("#second-class-div-heading").html(a)))}}function setInitalBreadCrumb(e,t){if("addNewInstance"!=t){$(".image-slider").css("marginLeft","0px"),$(".image-slider a").each(function(e,t){e>1&&$(t).remove()}),$(".breadcrumb li").removeClass("active").hide(),$(".breadcrumb li.non-ins").addClass("active").show();var i=0;"menudashboard"==e&&"index"==t&&($(".non-ins a:first").text("Course List"),$(".non-ins a:last").text("Course Detail")),"classes"==e&&"index"==t&&($(".non-ins a:first").text("Class List"),$(".non-ins a:last").text("Class Properties")),$(".breadcrumb li.active").each(function(e,t){i+=$(t).outerWidth(),$(".image-slider a").eq(e).text($(".breadcrumb-wrap li.active a").eq(e).text())}),$(".image-slider").css("width",i)}}function DragDropFolderCall(){var e=$("#dragandrophandler");$("#dragandrophandler li").on("dragover",function(e){var t=e.target;$("#FolderList li").removeClass("folder-hover-active"),$(t).closest("li.drag-folder").addClass("folder-hover-active"),e.stopPropagation(),e.preventDefault()}),e.on("dragenter",function(e){e.stopPropagation(),e.preventDefault(),$(this).css("border","2px solid #0B85A1")}),e.on("dragover",function(e){e.stopPropagation(),e.preventDefault()}),e.on("drop",function(t){t.preventDefault();var i=t.target,n=t.originalEvent.dataTransfer.files;n.length>0?($("#FolderList li").removeClass("active folder-hover-active"),$(i).closest("li.drag-folder").addClass("active"),oddEvenColor()):$("#FolderList li").removeClass("folder-hover-active"),handleFileUpload(n,e)}),$(document).on("dragenter",function(e){var t=e.originalEvent.dataTransfer;t.effectAllowed=t.dropEffect="none",e.stopPropagation(),e.preventDefault()}),$(document).on("dragover",function(t){$(".document-table").find(".statusbar").remove();var i=t.originalEvent.dataTransfer;i.effectAllowed=i.dropEffect="none",$("#FolderList li").removeClass("folder-hover-active"),t.stopPropagation(),t.preventDefault(),e.css("border","2px dotted #0B85A1")}),$(document).on("drop",function(e){e.stopPropagation(),e.preventDefault()})}function sendFileToServer(e,t){var i=$("#FolderList").find("li.active").find("span").attr("data-id");e.append("folderId",i);var n=$.ajax({xhr:function(){var e=$.ajaxSettings.xhr();return e.upload&&e.upload.addEventListener("progress",function(e){var i=0,n=e.loaded||e.position,s=e.total||e.totalSize;i=Math.round(n/s*100),t.setProgress(i)},!1),e},url:domainUrl+"documents/saveFolderFile",type:"POST",contentType:!1,processData:!1,cache:!1,data:e,success:function(e){t.setProgress(200),$("#status1").append("File upload Done1<br>")}});t.setAbort(n)}function createStatusbar(e){var t="odd";++documentrowCount%2==0&&(t="even"),this.statusbar=$("<div class='statusbar "+t+"'></div>"),this.filename=$("<div class='filename'></div>").appendTo(this.statusbar),this.size=$("<div class='filesize'></div>").appendTo(this.statusbar),this.progressBar=$("<div class='progressBar'><div></div></div>").appendTo(this.statusbar),this.abort=$("<div class='abort icon close'></div>").appendTo(this.statusbar),$(".document-table").find("#status2").after(this.statusbar),$("#folderDocumentModal").modal("show"),this.setFileNameSize=function(e,t,i){popNotHide=!0,$("#folderDocumentModal").find(".btn-black").addClass("hide");var n="",s=t/1024;n=parseInt(s)>1024?(s/1024).toFixed(2)+" MB":s.toFixed(2)+" KB";var a=e.split(".");e.indexOf(".")>=0?"docx"==a[1].toLowerCase()||"doc"==a[1].toLowerCase()?(this.filename.html(e),this.size.html(n)):"xlsx"==a[1].toLowerCase()||"xls"==a[1].toLowerCase()?(this.filename.html(e),this.size.html(n)):"csv"==a[1].toLowerCase()?(this.filename.html(e),this.size.html(n)):"pdf"==a[1].toLowerCase()?(this.filename.html(e),this.size.html(n)):"ppt"==a[1].toLowerCase()?(this.filename.html(e),this.size.html(n)):"jpeg"==a[1].toLowerCase()||"jpg"==a[1].toLowerCase()?(this.filename.html(e),this.size.html(n)):"png"==a[1].toLowerCase()?(this.filename.html(e),this.size.html(n)):"gif"==a[1].toLowerCase()?(this.filename.html(e),this.size.html(n)):"zip"==a[1].toLowerCase()?(this.filename.html(e),this.size.html(n)):"rar"==a[1].toLowerCase()?(this.filename.html(e),this.size.html(n)):(allInvalidFileCount++,1!=i&&i!=allInvalidFileCount||(popNotHide=!1,$("#folderDocumentModal").find(".btn-black").removeClass("hide")),this.filename.html(e),this.size.html("Invalid File Format"),this.progressBar.remove(),this.statusbar[0].classList.add("Invalidfile")):(allInvalidFileCount++,1==i||i==allInvalidFileCount?(popNotHide=!1,$("#folderDocumentModal").find(".btn-black").removeClass("hide"),completestatusCount=0):completestatusCount++,this.filename.html(e),this.size.html("Invalid File Format"),this.progressBar.remove(),this.statusbar[0].classList.add("Invalidfile"),NProgress.done()),$("#folderDocumentModal .niceScrollDivModal").niceScroll({cursorcolor:"#000",cursorborder:"0",cursorborderradius:"0",cursorwidth:"2px",background:"rgba(0,0,0,.15)"})},this.setProgress=function(e){var t=e*this.progressBar.width()/100;this.progressBar.find("div").animate({width:t},10,function(){++documentcount==2*documentrowCount&&setTimeout(function(){0!=popNotHide&&($("#folderDocumentModal").find(".btn-black").addClass("hide"),popNotHide=!0,allInvalidFileCount=0)},2e3)}).html(NaN),parseInt(e)>=200&&(completestatusCount++,this.statusbar[0].classList.length<3&&(this.progressBar.remove(),this.abort.remove(),this.completedstatus=$("<div class='completestatus'>Uploaded</div>").appendTo(this.statusbar)),$(".statusbar").length==completestatusCount&&setTimeout(function(){completestatusCount=0,0!=popNotHide&&($("#folderDocumentModal").modal("hide"),setTimeout(function(){var e=$("#FolderList").find("li.active").find("span").attr("data-id");NProgress.start(),$.post(domainUrl+"documents/folderDetails",{order_by:"node_instance_id",order:"DESC",type:"no-pagination",mode:"Normal",class_node_id:e},responseCallFolderDetailsAction,"html")},500),popNotHide=!0)},500))},this.setAbort=function(e){var t=this.statusbar;this.abort.click(function(){e.abort(),t.remove(),$(".statusbar").length<1&&($("#folderDocumentModal").modal("hide"),completestatusCount=0)})}}function handleFileUpload(e,t){$(".document-table").find("#status2").html(""),allInvalidFileCount=0,documentrowCount=0,documentcount=0;for(var i=0;i<e.length;i++){var n=new FormData;n.append("file",e[i]);var s=new createStatusbar(t);s.setFileNameSize(e[i].name,e[i].size,e.length),sendFileToServer(n,s)}}function DragDropFolderDocumentDetailsCall(){var e=$("#dragandrophandler1");e.on("dragenter",function(e){e.stopPropagation(),e.preventDefault(),$(this).css("border","2px solid #0B85A1")}),e.on("dragover",function(e){$("#FolderList li").removeClass("folder-hover-active"),$(".document-table").find(".statusbar").remove(),e.stopPropagation(),e.preventDefault()}),e.on("drop",function(t){$(this).css("border","2px dotted #0B85A1"),t.preventDefault(),handleFileUploadFolderDocument(t.originalEvent.dataTransfer.files,e)}),$(document).on("dragenter",function(e){e.stopPropagation(),e.preventDefault()}),$(document).on("dragover",function(t){t.stopPropagation(),t.preventDefault(),e.css("border","2px dotted #0B85A1")}),$(document).on("drop",function(e){e.stopPropagation(),e.preventDefault()})}function sendFileToServerFolderDocument(e,t){var i=$("#FolderList").find("li.active").find("span").attr("data-id");e.append("folderId",i);var n=$.ajax({xhr:function(){var e=$.ajaxSettings.xhr();return e.upload&&e.upload.addEventListener("progress",function(e){var i=0,n=e.loaded||e.position,s=e.total||e.totalSize;i=Math.round(n/s*100),t.setProgress(i)},!1),e},url:domainUrl+"documents/saveFolderFile",type:"POST",contentType:!1,processData:!1,cache:!1,data:e,success:function(e){t.setProgress(200)}});t.setAbort(n)}function createStatusbarFolderDocument(e){var t="odd";++documentrowCount%2==0&&(t="even"),this.statusbar=$("<div class='statusbar "+t+"'></div>"),this.filename=$("<div class='filename'></div>").appendTo(this.statusbar),this.size=$("<div class='filesize'></div>").appendTo(this.statusbar),this.progressBar=$("<div class='progressBar'><div></div></div>").appendTo(this.statusbar),this.abort=$("<div class='abort icon close'></div>").appendTo(this.statusbar),e.after(this.statusbar),$(".document-table").find("#status2").after(this.statusbar),$("#folderDocumentModal").modal("show"),this.setFileNameSize=function(e,t,i){$("#folderDocumentModal").find(".btn-black").addClass("hide"),popNotHide=!0;var n="",s=t/1024;n=parseInt(s)>1024?(s/1024).toFixed(2)+" MB":s.toFixed(2)+" KB";var a=e.split(".");e.indexOf(".")>=0?"docx"==a[1].toLowerCase()||"doc"==a[1].toLowerCase()?(this.filename.html(e),this.size.html(n)):"xlsx"==a[1].toLowerCase()||"xls"==a[1].toLowerCase()?(this.filename.html(e),this.size.html(n)):"csv"==a[1].toLowerCase()?(this.filename.html(e),this.size.html(n)):"pdf"==a[1].toLowerCase()?(this.filename.html(e),this.size.html(n)):"ppt"==a[1].toLowerCase()?(this.filename.html(e),this.size.html(n)):"jpeg"==a[1].toLowerCase()||"jpg"==a[1].toLowerCase()?(this.filename.html(e),this.size.html(n)):"png"==a[1].toLowerCase()?(this.filename.html(e),this.size.html(n)):"gif"==a[1].toLowerCase()?(this.filename.html(e),this.size.html(n)):"zip"==a[1].toLowerCase()?(this.filename.html(e),this.size.html(n)):"rar"==a[1].toLowerCase()?(this.filename.html(e),this.size.html(n)):(allInvalidFileCount++,1!=i&&i!=allInvalidFileCount||(popNotHide=!1,$("#folderDocumentModal").find(".btn-black").removeClass("hide")),this.filename.html(e),this.size.html("Invalid File Format"),this.progressBar.remove(),this.statusbar[0].classList.add("Invalidfile")):(allInvalidFileCount++,1==i||i==allInvalidFileCount?(popNotHide=!1,$("#folderDocumentModal").find(".btn-black").removeClass("hide"),completestatusCount=0):completestatusCount++,this.filename.html(e),this.size.html("Invalid File Format"),this.progressBar.remove(),this.statusbar[0].classList.add("Invalidfile"),NProgress.done()),$("#folderDocumentModal .niceScrollDivModal").niceScroll({cursorcolor:"#000",cursorborder:"0",cursorborderradius:"0",cursorwidth:"2px",background:"rgba(0,0,0,.15)"})},this.setProgress=function(e){var t=e*this.progressBar.width()/100;if(this.progressBar.find("div").animate({width:t},10,function(){++documentcount==2*documentrowCount&&setTimeout(function(){0!=popNotHide&&($("#folderDocumentModal").find(".btn-black").addClass("hide"),popNotHide=!0,allInvalidFileCount=0)},2e3)}).html(NaN),parseInt(e)>=200){var i=this.statusbar[0].classList.length;completestatusCount++,i<3&&(this.progressBar.remove(),this.abort.remove(),this.completedstatus=$("<div class='completestatus'>Uploaded</div>").appendTo(this.statusbar)),$(".statusbar").length==completestatusCount&&setTimeout(function(){completestatusCount=0,0!=popNotHide&&($("#folderDocumentModal").modal("hide"),setTimeout(function(){var e=$("#FolderList").find("li.active").find("span").attr("data-id");NProgress.start(),$.post(domainUrl+"documents/folderDetails",{order_by:"node_instance_id",order:"DESC",type:"no-pagination",mode:"Normal",class_node_id:e},responseCallFolderDetailsAction,"html")},500))},500)}},this.setAbort=function(e){var t=this.statusbar;this.abort.click(function(){e.abort(),t.remove(),$(".statusbar").length<1&&($("#folderDocumentModal").modal("hide"),completestatusCount=0)})}}function handleFileUploadFolderDocument(e,t){allInvalidFileCount=0,documentrowCount=0,documentcount=0;for(var i=0;i<e.length;i++){var n=new FormData;n.append("file",e[i]);var s=new createStatusbarFolderDocument(t);s.setFileNameSize(e[i].name,e[i].size,e.length),sendFileToServerFolderDocument(n,s)}}function createSubfolder(e){$("#createSubFolder").modal("show").on("shown.bs.modal",function(){$(this).find('input[type="text"]').focus(),$("#createSubFolder .btn ").first().addClass("inactiveLink")}),$("body").on("keyup","#Folder_sub_name",function(){if($(this).val().length>0&&""!=$.trim($(this).val())?$("#createSubFolder .btn ").removeClass("inactiveLink"):$("#createSubFolder .btn").first().addClass("inactiveLink"),$(this).val().length<51){var e=$(this).val().length;$(this).siblings(".char-limit").find(".charCount").text(e)}}),$("#Folder_sub_name").val(""),$(".charCount").text(0)}function createRootfolder(){$("#createRootFolder").modal("show").on("shown.bs.modal",function(){$(this).find('input[type="text"]').focus(),$("#createRootFolder .btn").first().addClass("inactiveLink")}),$("body").on("keyup","#Folder_root_name",function(){if($(this).val().length>0&&""!=$.trim($(this).val())?$("#createRootFolder .btn ").removeClass("inactiveLink"):$("#createRootFolder .btn").first().addClass("inactiveLink"),$(this).val().length<51){var e=$(this).val().length;$(this).siblings(".char-limit").find(".charCount").text(e)}}),$("#Folder_root_name").val(""),$(".charCount").text(0)}function responsecourseDisplayList(){$(".list-tab a").addClass("active"),$("#center-screen, #ControlBar, .pui_center_content, #calender-screen, #actors-screen, #documents-screen, #canvas-screen, #main-screen").hide(),$("#menudashboard").html(data).show(),$(".content-wrapper-new").siblings(".user-action-wrap").hide(),$("#new_course_action_menu").show(),$("#course_action_menu").hide(),setColumnsH(),$("#newDocumentFlyout").animate({right:"-100%"},300).removeClass("in"),$("#openCourseFlyout").animate({left:0},300).removeClass("in"),$(".loadder").hide();var e=$(".courseboard-table tr.current").attr("data-id");void 0==e&&(e=""),$.post(domainUrl+"menudashboard/courseView",{node_instance_id:e},responseCallcourseViewAction,"html"),dualPaneHeight(),hitName="",dashboardInitalLoad(),NProgress.done()}function editorLoadTags(){edtTagArray=[];var e=[];$("#edt .actor").each(function(t,i){var n=$.trim($(this).text());-1==e.indexOf(n)&&(edtTagArray.push({type:"Actor",tag:n}),e.push(n))}),$("#edt .role").each(function(t,i){var n=$.trim($(this).text());-1==e.indexOf(n)&&(edtTagArray.push({type:"Role",tag:n}),e.push(n))}),$("#edt .terms").each(function(t,i){var n=$.trim($(this).text());-1==e.indexOf(n)&&(edtTagArray.push({type:"Terms",tag:n}),e.push(n))}),highlightText(tagStatus)}function responseGetNodeYClass(e,t){$(".childClassDivFlyout").html(e),$(".blackOverlay_subClass").remove(),sideFlyoutHeight(),$(".nano").nanoScroller()}function saveChildClass(){var e="",t=(parseInt($("#node_y_class_id").val())?parseInt($("#node_y_class_id").val()):parseInt($("#class_caption").val()),""),i="",n="",s="",a=[],o=[],r=[],l=[],d=[],c=0,u=[],h=0,p=$.trim($("#search-subclass").val()),f=$.trim($("#child_ids_of_class").val());if($("li.parent-sub-class-list").each(function(e){a[e]=$(this).find("div.node-input span > input").attr("class").split("temp-sub-class-"),r[e]=parseInt($.trim(a[e][1]))}),u[c]=parseInt($("span.number_print").length)+1,c++,$("#customPopUp .child_class_ids").each(function(s){$(this).prop("checked")?"add_new_sub"!==$(this).val()&&(e=e+","+parseInt($(this).val()),i=parseInt($.trim($(this).val())),o[s]=i,n=$(this).closest("li").find(".node_subclass").val(),d[h]=n,h++,-1!==$.inArray(i,r)||(t=t+'<li class="parent-sub-class-list"><div class="node-content clearfix" onclick="getSubClassStructure('+n+", "+i+', this)"><span class="number_print1 testsi-'+n+'"></span><input type="hidden" class="self_count_class" value=""/><div class="node-left"><div class="node-circle node-white-circle-expanded">N</div><div class="node-head node-input"><span class="sub-class-style"><input type="hidden" class="temp-sub-class-'+i+'">'+$(this).attr("alt").toUpperCase()+" ("+$(this).val()+')</span></div></div><div class="node-right-sub clearfix"><a class="action-move act-mov-sub"><span><i class="fa fa-angle-up"></i></span></a><span><a class="action-move act-mov-sub-cross delete-icon" onclick="deleteSubClass(this,\'\',event,'+i+')"><span><i class="icon close-small"></i></span></a></span></div></div></li>',u++)):l[s]=parseInt($(this).val())}),""===p){var m=[];for(jQuery.grep(r,function(e){-1==jQuery.inArray(e,o)&&m.push(e)}),k=0;k<m.length;k++)s=parseInt($.trim(m[k])),$(".temp-sub-class-"+s).closest("li").remove()}else{if(l.length>0)for(var g=0;g<l.length;g++){var v=","+parseInt(l[g]);f.indexOf(v)>-1&&(f=f.replace(v,""),$(".temp-sub-class-"+parseInt(l[g])).closest("li").remove())}e=f.indexOf(e)>-1?f:f+e}$("#child_ids_of_class").attr("value",e),0==$("li.parent-sub-class-list").length?($(".sub_class_list_view").remove(),$(".addplus").after('<li class="sub_class_list_view"><ol class="sortable-list">'+t+"</ol></li>"),$(".sortable-list").sortable({placeholder:"ui-sortable-placeholder",start:function(e,t){startIndex=$(t.item).index()},stop:function(e,t){var i=$(t.item).index();numberPrintDrag($(this),startIndex,i)}})):$("li.sub_class_list_view > ol").append(t);var b=0,_=[];for(b=0;b<=d.length;b++){var y=d[b];if(1==c){if(b<d.length){parseInt($("#node_y_class_id").val());var w=parseInt($("span.number_print").length)+1;$(".testsi-"+d[parseInt(b)]).html(parseInt(w));var C=$(".testsi-"+y).siblings().find("span.sub-class-style").children().attr("class").split("temp-sub-class-")[1];$(".testsi-"+y).parent().attr("onclick","getSubClassStructure("+y+", "+C+", this, "+w+")")}}else{var x=d[parseInt(b)-1];_.push({class_id:x,next_class_id:y,checked_class_id:y})}c++}if(1!=c){var T=JSON.stringify(_);$.ajax({url:domainUrl+"classes/countClassesData",type:"POST",data:{mypostData:T},dataType:"json",async:!1,beforeSend:function(){},success:function(e){for(var t=0;t<e.length;t++){var i=e[t],n=i.next_class_id,s=i.class_id,a=i.number_array[0];if(y=_[t].checked_class_id,null!=n){var o=parseInt(i.number_print.length)-1;w=parseInt(i.number_print[o])+parseInt($(".testsi-"+s).text())+1,w=parseInt(a)+parseInt($(".testsi-"+s).text())-1,$(".testsi-"+y).html(parseInt(w));var r=$(".testsi-"+y).siblings().find("span.sub-class-style").children().attr("class").split("temp-sub-class-")[1];$(".testsi-"+y).parent().attr("onclick","getSubClassStructure("+y+", "+r+", this, "+w+")")}$(".testsi-"+s).siblings(".self_count_class").val(parseInt(a))}}})}$("#main_action_menu").show(),$("#sub_class_action_menu").hide(),$(".sub_class_action_menu1").hide(),$(".customPopUp").modal("hide"),$(".customPopUp").removeClass("in"),$(".customPopUp").css("height","100%")}function responseAutoSave(e,t){$("#second-class-div").html(e),setPaperBckgrnd(),$.post(domainUrl+"classes/index",{page:1,order_by:"node_class_id",order:"DESC",type:"pagination",itemPerPage:$("#temp_item_per_page").val(),auto:"auto"},responseAutoSaveAgain,"html")}function responseAutoSaveAgain(e,t){$("#first-class-div").html(e)}function openNodeRightsOfZ(){$(thisObj).toggleClass("openflyout");$(thisObj).hasClass("openflyout")?($(".node_rights_open_class").removeClass("openflyout"),$(".rightFlyout").animate({right:"-100%"}).removeClass("in"),$("#nodeRightFlyout.rightFlyout").animate({right:"0px"}).addClass("in"),setTimeout(function(){sideFlyoutHeight()},300),$(".nano").nanoScroller()):$("#nodeRightFlyout.rightFlyout").animate({right:"-100%"}).removeClass("in"),thisObj=""}function responseIndividualUsers(e,t){$(".node-rights-users-list").html(e),0==$(".tick-icon").length&&"open_flyout_for_View"==selectedViewIcon&&($("#participant_id").val("").val(setUserID),addParticipant()),openNodeRightsOfZ()}function responseParticipant(e,t){var i=0;$.each(e,function(e,t){parseInt(t.node_id)>0&&i++}),parseInt(i)>0&&($.each(e,function(e,t){participant.push({key:t.node_id,value:t.email_address})}),$("#is_participant_list").val("Y"))}function responseRolescb(e,t){var i=0;$.each(e,function(e,t){parseInt(t.role_id)>0&&i++}),parseInt(i)>0&&($.each(e,function(e,t){rolescb.push({key:t.role_id,value:t.role})}),$("#is_rolecb_list").val("Y"))}function addParticipant(){var e=$(".nodeRightsTypeForSelection").val();if("Actor"==e){t=$("#participant_id").val();$("#participant_list").val(""),$("#participant_id").val(""),$("#parti_"+t).length?($("#participant_list").val(""),$("#participant_id").val("")):($("#participant_list").val(""),$("#participant_id").val(""),$.post(domainUrl+"classes/addParticipant",{id:t,rightsType:e},responseAddParticipant,"json"))}else if("Role"==e){var t=$("#role_cb_id").val();$("#rolescb_list").val(""),$("#role_cb_id").val(""),$("#parti_"+t).length?($("#rolescb_list").val(""),$("#role_cb_id").val("")):($("#rolescb_list").val(""),$("#role_cb_id").val(""),$.post(domainUrl+"classes/addParticipant",{id:t,rightsType:e},responseAddRole,"json"))}}function responseAddParticipant(e,t){$("#no_user_select").hide();var i='<tr id="row_parti_'+e.node_id+'"><td><div class="custom-checkbox"><input type="checkbox" id="parti_'+e.node_id+'" class="parti_c" value="'+e.node_id+'" ></div></td><td>'+e.first_name+" "+e.last_name+"</td><td>"+e.email_address+"</td><td>"+e.domain+"</td></tr>";$("#no_user_select").before(i)}function responseAddRole(e,t){$("#no_user_select").hide();var i='<tr id="row_parti_'+e.role_id+'"><td><div class="custom-checkbox"><input type="checkbox" id="parti_'+e.role_id+'" class="parti_c" value="'+e.role_id+'" ></div></td><td>'+e.role+"</td></tr>";$("#no_user_select").before(i)}function saveUsersOfRights(){var e="";$(".parti_c").each(function(){e=$(this).val()+","+e}),parti_user_property_id=$("#parti_user_property_id").val(),$("#instance_property_caption"+parti_user_property_id).val(e),$("#parti_user_property_id").val("")}function deleteUsersOfRights(){var e=0;$(".parti_c").each(function(){1==$(this).prop("checked")&&(e=parseInt(e)+1)});var t=$(".nodeRightsTypeForSelection").val(),i="";"Actor"==t?i="Are you sure you want to delete users from list?":"Role"==t&&(i="Are you sure you want to delete roles from list?"),parseInt(e)>0&&bootbox.confirm({title:"Warning",message:i,buttons:{cancel:{label:"No",className:"btn-default"},confirm:{label:"Yes",className:"btn-primary"}},callback:function(e){if(e){$(".parti_c").each(function(){1==$(this).prop("checked")&&$("#row_parti_"+$(this).val()).remove()});var t="";$(".parti_c").each(function(){t=$(this).val()+","+t}),parti_user_property_id=$("#parti_user_property_id").val(),$("#instance_property_caption"+parti_user_property_id).val(t),$("#parti_user_property_id").val(""),$("#delete_user_parti").addClass("inactive")}$("#nodeRightFlyout.node_rights_open_class").removeClass("openflyout"),$("#nodeRightFlyout.rightFlyout").animate({right:"-100%"}).removeClass("in")}})}function searchingOnFile(e,t){var i="",n="",s="";$(".parti_c").each(function(){i=i+$(this).val()+",",1==$(this).prop("checked")&&(n=n+$(this).val()+","),0==$(this).prop("checked")&&(s=s+$(this).val()+",")});var a=$("#parti_user_property_id_mode").val();""!=i&&$.post(domainUrl+"classes/filterUsers",{userIds:i,selUserIds:n,dselUserIds:s,type:e,field_name:t,mode:a},responsefilterUsers,"html")}function responsefilterUsers(e,t){$("ul.multi-menu ").removeClass("show"),$("ul.multi-menu ").siblings("span").removeClass("active"),$("#tableDataParticipantFilter").html(e)}function responseCountClassesData(e,t){$.parseJSON(e)}function getClassesOfCourseBuilder(){$.post(domainUrl+"dashboard/getCourseBuilderClasses",{isCall:"Y",user_id:setUserID},responseClassesOfCourseBuilder,"json")}function responseClassesOfCourseBuilder(e,t){var n="";for(i=0;i<e.list.length;i++)n+='<li onClick="getActiveRolesFromProduction(this)" data-productionId="'+e.list[i].production_id+'" data-classNodeId="'+e.list[i].class_node_id+'"><div class="left"><div class="node-content"><span class="app-icon"><img src="'+e.list[i].icon+'"></span><span class="app-name"><span>'+e.list[i].title1+'</span><span class="red sm-text hide">Expired</span></span><span class="btn-box hide"><button class="btn btn-bdr-blue" type="button">Renew</button></span></div></div></li>';$("#courseTemplateFlyoutList").html(n)}function getActiveRolesFromProduction(e){$(e).siblings("li").removeClass("active"),$(e).addClass("active");$("#courseTemplateFlyoutList").find("li.active").attr("data-productionId"),$("#courseTemplateFlyoutList").find("li.active").attr("data-classNodeId");$("#react-button-add-new-template-course").trigger("click"),$('.menu-flyout-close[data-flyout="nav"]').click(),$("#courseTemplateFlyout.LeftFlyoutClose").trigger("click")}function getEditCourse(e){$.post(domainUrl+"dashboard/getCourse",{course_instance_id:e},responseEditCourse,"json")}function responseEditCourse(e,t){console.log(e)}function saveNodeData(e){"Statement"==e.type&&$("#add-text").blur(),$.ajax({url:domainUrlApi+"code.php",type:"post",data:{data:JSON.stringify(e),action:"chat",type:"saveStatement"},success:function(t){t&&("Statement"==e.type&&$("#add-text").focus(),runTimeNotification(e.messageto,t,1,"updatePropertyId",e.user_node,e.random_id,e.type),$(".nano").nanoScroller())}})}function getStatement(e,t,i,n,s,a,o,r,l,d){0!=$(".ref_add_new_title_bar").length&&$(".ref_add_new_title_bar").remove(),$.ajax({url:domainUrlApi+"code.php",type:"post",data:{dialog_instance_node_id:e,date_obj:t,action:"chat",type:"getStatement",random:Math.random()},success:function(i){if(""==t||null==t){domainUrlApi;$("#chatWindows").html(i),myDropzone.options.url=domainUrlApi+"upload.php?messageTo="+e,setTimeout(function(){$(".online_users.active .notif_count_box").addClass("hide"),$(".online_users.active .notification-count").text(0)},500)}else $(".chat_wrapper.active .message_box").prepend(i),$(".nano").nanoScroller()},complete:function(){"addActor"!=l&&"removeActor"!=l&&"updateDialogTitle"!=l||($(".right-bar-tab.ref_add_right_tab").css("display","none"),$(".ref-min-center-dialogue .right-bar-tab.default-view-tab").show(),changeDialogueTitle($(".online_users:first")),$(".ref-min-center-dialogue .rename-title-mini .dialog-tilte-node-id").removeClass("hide"),$(".ref-min-center-dialogue .rename-title-mini .title-icon").removeClass("hide"),$(".ref-min-center-dialogue .rename-title-mini .rename-edit-cover-box").removeClass("hide"),$(".default-view-tab").find(".angle-collapse-up").removeClass("hide"),$(".online_users").removeClass("selected"),$(".online_users:first").addClass("selected"),divStructure(i,n,s,a,o,r,l,d),$("body").on("click",".append-top",function(){var e=$(".mini-dialogue-flyout").height();$(".ref-textarea-HT").height();$(".dialogue-section.ref-min-center-dialogue").height(e),$(".mini-type-textarea, .mini-type-textarea .ref-textarea-HT").height("67px");var t=$(".mini-type-textarea, .mini-type-textarea .ref-textarea-HT").height();$(".mini-dialogue-flyout .ref-set-height").height(e-($(".right-bar-tab").height()+t))}),$(".new_view_wrapper").hide(),$(".mini-type-textarea .animate-div").removeClass("manage-opacity"),$(".tab-pane .ref-set-height").removeClass("hide")),setTimeout(function(){$(".mini-dialogue-flyout .dialogue-section .nano").nanoScroller(),$(".mini-dialogue-flyout .dialogue-section .nano").nanoScroller({scrollBottom:0})},2e3),Dropzone.autoDiscover=!1,$("img.dz-clickable").css("display","block")}})}function changeDialogueTitle(e){var t=e.find(".dialog-title").text(),i=e.attr("id"),n=e.closest(".dialog-accordion").siblings(".panel-heading").find(".mini-course-title").text();$(".dialog-random-title").text(t),$(".dialog-tilte-node-id").text(i),$(".edit-dialog-random-title").val(t),$(".edit-dialog-random-title").data("id",e.data("id"));var s=$(".new_view_wrapper");s.find(".existing_viewform_field .course-detail-title").text(n),s.find(".new_col_add_wrap .ref_add_title_id").text(i),s.find(".existing_viewform_field .dialogue-detail-title").text(t),s.find(".course_node_id").text(e.find(".course-title").data("id")),s.find(".new_col_add_wrap .user-name-data").text(e.find(".dialog-admin-email").val())}function updateDialogTitle(e){objChatfn=!1;var t=e.siblings("span").find(".edit-dialog-random-title").val();$(".dialog-random-title").text(t),$(".online_users.active").find(".dialog-title").text(t);var i=$(".panel-heading.panel_active").data("id"),n=$(".chat_wrapper.active").data("id");""==t&&(t="Untitled"),$(".mini-overlay-wrapper").removeClass("hide");var s={node_instance_property_id:e.siblings("span").find(".edit-dialog-random-title").data("id"),dialog_title:t,dialog_instance_node_id:n,course_instance_node_id:i};JSON.stringify(s),$.ajax({url:domainUrlApi+"code.php",type:"post",data:{variable_data:s,action:"chat",type:"saveDialogTitle",random:Math.random()},success:function(e){if(e>0){$(".new_view_wrapper").find(".collapse_title_view").text(t),$(".new_view_wrapper").find(".collapse-input-field").val(t),$(".dialog-random-title").text(t),$(".save_dialogue_title").siblings("span").find(".edit-dialog-random-title").val(t);var i=$(".chat_wrapper.active").attr("data-group"),n=$(".chat_wrapper.active").data("id"),s=$("#"+n).find(".user-node-id").data("id");void 0==i&&(i=0),runTimeNotification(n,t,i,"updateDialogTitle",s)}else $(".dialog-random-title").text(t),$(".mini-overlay-wrapper").addClass("hide")}})}function getAllDialogueActors(e){$.ajax({url:domainUrlApi+"code.php",type:"post",data:{dialog_instance_node_id:e,action:"chat",type:"getDialogActor",random:Math.random()},success:function(e){$(".new_view_wrapper .email_input_field_ui").siblings(".participant_scroll_height_ui").html(e),$(".nano").nanoScroller()},complete:function(){var t=$(".new_view_wrapper .email_input_field_ui").siblings(".participant_scroll_height_ui").find(".old_user_list"),i="";t.length?(t.each(function(){i+=$(this).data("id")+","}),getUserList(setUserID+","+i.replace(/,+$/,""),e)):getUserList(setUserID,e)}})}function getUserList(e,t){var i={user_instance_node_id:e,dialog_instance_node_id:t,add_type:"New"};JSON.stringify(i),$.ajax({url:domainUrlApi+"code.php",type:"post",data:{variable_data:i,action:"chat",type:"getAllUserList"},dataType:"json",success:function(e){e&&(t?setResponseUserList(e):responseUserList(e))}})}function removeUserFromFile(e,t,i){var n=$(".panel-heading.panel_active").data("id"),s=$(i).closest(".old_user_list").find(".user-name-val").val().trim();$(".loader-actor-box").removeClass("hide");var a="";$(".dilaog_actor_list").each(function(){a+=$(this).data("id")+","});var o=$(".participant_scroll_height_ui .admin-user-id").data("id");a=o+","+a.replace(/,+$/,"");var r={dialog_instance_node_id:e,user_instance_node_id:t,course_instance_node_id:n,current_user_node_id:setUserID,total_users:a};JSON.stringify(r),$.ajax({url:domainUrlApi+"code.php",type:"post",data:{dialog_data:r,action:"chat",type:"removeUserFromFile"},success:function(n){if(n){if($(i).closest(".old_user_list").remove(),t==setUserID)o="self";else var o=s;var r=$(".chat_wrapper.active").attr("data-group");void 0==r&&(r=0);runTimeNotification(e,o,r,"removeActor",a),$(".mini-type-textarea .animate-div").removeClass("manage-opacity"),$(".tab-pane .ref-set-height").removeClass("hide")}},complete:function(){$(".loader-actor-box").addClass("hide"),$(".new_view_wrapper").hide(),getUserList(t,e),$(".tab-pane .ref-set-height").removeClass("hide")}})}function saveNewActor(){var e=$(".add_participant_user input").val(),t=$(".add_participant_user input").data("id");if(void 0!==t&&""!=t&&""!=e){var i="<div class='form-label part_id_block new_user_list dilaog_actor_list' data-id ='"+t+"'  ><span class='ref_span_left'><i class='icon admin-user'></i> </span><span class='user-name-data'>"+e+"</span><input type='hidden' class='user-name-val' value='"+e.split("(")[0]+"'><span class='ui_close_icon_block close-participant-id'><i class='icon close'></i></span></div>";$(".new_view_wrapper .email_input_field_ui").siblings(".participant_scroll_height_ui").prepend(i),$(".add_participant_user input").val(""),$(".add_participant_user input").data("id","")}var n=$(".online_users.selected").attr("id"),s="";$(".dilaog_actor_list").each(function(){s+=$(this).data("id")+","});var a=$(".new_user_list").length;$(".close-actor-dialogue").trigger("click");var o=$(".panel-heading.panel_active").data("id"),r=$(".participant_scroll_height_ui .new_user_list .user-name-val").val().trim(),l={dialog_instance_node_id:n,user_instance_node_id:s,course_instance_node_id:o,current_user_node_id:setUserID};JSON.stringify(l),a>0&&($(".mini-overlay-wrapper").removeClass("hide"),$.ajax({url:domainUrlApi+"code.php",type:"post",data:{dialog_data:l,action:"chat",type:"saveNewActor"},success:function(e){if(a>0){var t=$(".participant_scroll_height_ui .admin-user-id").data("id");user_node_id=s+t;var i=setUsername+", "+r;runTimeNotification(n,i,1,"addActor",user_node_id),$(".new_view_wrapper").hide()}},complete:function(){$(".mini-overlay-wrapper").addClass("hide"),$(".tab-pane .ref-set-height").removeClass("hide")}})),$(".mini-dialogue-flyout .mini-type-textarea .append-top").length&&$(".mini-dialogue-flyout .expand-collapse-box:visible").trigger("click")}function runTimeNotification(e,t,i,n,s,a){var o={message:t,sender:setUserID,messageto:e,username:setUsername,timestamp:getTime(),isGroupMessage:i,action:n,user_node:s,random_id:a};websocket.send(JSON.stringify(o))}function ucwords(e){return e.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})}function MiniDialogueContextMenu(){var e=$("#viewCourseContextMenu");$(".mini-drp .right-drp").on("contextmenu",function(t){return e.css({display:"block",left:t.pageX,top:t.pageY}),!1}),$(".right-context").on("update",function(){$("#viewCourseContextMenu").hide()}),e.on("click","a",function(){$("#viewCourseContextMenu").hide()}),$("body").click(function(){$("#viewCourseContextMenu").hide()}),$(window).scroll(function(){$("#viewCourseContextMenu").hide()}),$(".mini-set-height").on("update",function(){$("#viewCourseContextMenu").hide()});var t=$("#descCourseContextMenu");$("body").on("contextmenu",".desc_drop",function(e){var i=$(this).data("instance_id");return t.find(".delete-statement").data("id",i),t.find(".edit-statement").data("id",i),t.css({display:"block",left:e.pageX,top:e.pageY}),checkContextMenu(),!1});var i=$("#imgContextMenu");$("body").on("contextmenu",".atch-img-border, .anchor-box",function(e){var t=$(this).closest(".common-class").data("instance_id");return i.find(".delete-statement").data("id",t),i.css({display:"block",left:e.pageX,top:e.pageY}),checkContextMenu(),!1}),$(".message_box").on("update",function(){$("#descCourseContextMenu").hide()}),t.on("click","a",function(){$("#descCourseContextMenu").hide()}),$("body").click(function(){$("#descCourseContextMenu").hide()}),$(".ref_top_chat_box .ref-set-height").on("update",function(){$("#descCourseContextMenu").hide()}),$(window).scroll(function(){$("#descCourseContextMenu").hide()}),$(".message_box").on("update",function(){$("#imgContextMenu").hide()}),i.on("click","a",function(){$("#imgContextMenu").hide()}),$("body").click(function(){$("#imgContextMenu").hide()}),$(".ref_top_chat_box .ref-set-height, .mini-type-textarea").on("update",function(){$("#imgContextMenu").hide()}),$(window).scroll(function(){$("#imgContextMenu").hide()})}function miniDialogueAddTitleBar(){$("body").on("click",".ref_hide_top_arrow i",function(){$(".ref_hide_top_arrow i.mini_arrow_up").addClass("angle-rotate-down"),$(".ref_add_right_tab").hide(),$(".collapsed_dialogue").show(),$(".select-drop-existing").html("Existing")}),$("body").on("click",".collapse_title_view",function(){$(".mini_arrow_up.angle-collapse-up").addClass("abc"),$("input.collapse-input-field").removeClass("hide"),$(".ref-hideTick").removeClass("hide"),$(".collapse_title_view").hide(),$(".ref_mini_drop_box.show_collapse_title_view").removeClass("hide"),$(".ref_mini_drop_box.hide_collapsed_title").addClass("hide"),$(".rename-title-mini").addClass("hide"),$(".edit-rename-title-mini").removeClass("hide")}),$("body").on("click",".ref-hideTick",function(){$("input.collapse-input-field").addClass("hide"),$(".ref-hideTick").addClass("hide"),$(".collapse_title_view").show(),$(".collapsed_dialogue .ref_mini_input_box .collapse_title_view").removeClass("hide"),$(".ref_mini_drop_box.hide_collapsed_title").removeClass("hide"),$(".ref_mini_drop_box.show_collapse_title_view").addClass("hide"),$(".mini_arrow_up.angle-collapse-up").removeClass("abc"),$(".rename-title-mini").removeClass("hide"),$(".edit-rename-title-mini").addClass("hide")}),$("body").on("click",".select-end-user-role li a",function(){"Existing"==$(this).html()?($(".dropMenuCourse").html("Existing"),$(".existing_user_titlefield").show(),$(".new_user_titlefield").hide(),$(".part_id_block").remove(),$(".search-existing-course").focus()):($(".dropMenuCourse").html("New"),$(".existing_user_titlefield").hide(),$(".new_user_titlefield").show(),$(".part_id_block").remove(),$(".course_info").focus())}),$("body").on("click",".participant-user-role li a",function(){"Participant2"==$(this).html()?($(".participant").html("Participant2"),$(".user-search").focus()):($(".participant").html("Participant1"),$(".user-search").focus())}),$("body").on("click",".collapse_select_drop li a",function(){"New"==$(this).html()?$(".select-drop-existing").html("New"):$(".select-drop-existing").html("Existing")}),$("body").on("click",".angle-collapse-up",function(){if($("#add-text").focus(),$(".mini-type-textarea").css("border-top","1px solid #dbdbdb"),$(this).hasClass("abc"))$(".ref_hide_top_arrow i.mini_arrow_up").addClass("angle-rotate-down"),$(".right-bar-tab.new_view_wrapper").show(),$(".ref-min-center-dialogue .right-bar-tab.default-view-tab").hide(),$(".collapsed_dialogue .ref_top_head_box1").css("display","block"),$(".ref_mini_drop_box.show_collapse_title_view").removeClass("hide"),$("input.collapse-input-field").removeClass("hide"),$(".ref-hideTick").removeClass("hide"),$(".collapsed_dialogue .ref_mini_drop_box.hide_collapsed_title").addClass("hide"),$(".collapsed_dialogue .ref_mini_input_box .collapse_title_view").addClass("hide"),$(".mini-type-textarea").css("margin-top","0px");else{if($(".collapsed_dialogue").show(),$(".add_participant_user .existing-user-search").focus(),$(".tab-pane .ref-set-height").addClass("hide"),$(".collapsed_dialogue .ref_hide_top_arrow i.mini_arrow_up").addClass("angle-rotate-down"),$(".collapsed_dialogue .ref_top_head_box1").show(),$(".ref_top_chat_box .nano .nano-pane").css("display","none"),$(".collapsed_dialogue .ref_mini_drop_box.hide_collapsed_title").removeClass("hide"),$(".collapsed_dialogue .ref_mini_input_box .collapse_title_view").removeClass("hide"),$(".collapsed_dialogue .ref_mini_input_box .collapse_title_view").show(),$(".ref_mini_drop_box.show_collapse_title_view").addClass("hide"),$(".ref_hover_show_edit .collapse-input-field").addClass("hide"),$(".ref_mini_input_box .save_dialogue_title").addClass("hide"),$(".expand-collapse-box").hasClass("append-top")){if($(".right-bar-tab.collapsed_dialogue").is(":visible")){$(".ref-min-center-dialogue .right-bar-tab.default-view-tab").hide();var e=$(".mini-dialogue-flyout").height()-$(".ref-min-center-dialogue .right-bar-tab").last(":visible").outerHeight();$(".mini-type-textarea").css({height:e,"border-top":"none"})}$("body").on("click",".online_users",function(e){$(".ref-min-center-dialogue .right-bar-tab.default-view-tab").show();var t=$(".mini-dialogue-flyout").height()-$(".ref-min-center-dialogue .right-bar-tab").outerHeight();$(".mini-type-textarea, .mini-dialogue-flyout .ref-textarea-HT").css({height:t,"border-top":"none"})})}else $(".expand-collapse-box").hasClass("expanded-box")?$("body").on("click",".expanded-box",function(){if($(".right-bar-tab.collapsed_dialogue").is(":visible")){$(".ref-min-center-dialogue .right-bar-tab.default-view-tab").hide();var e=$(".mini-dialogue-flyout").height()-$(".ref-min-center-dialogue .right-bar-tab").last(":visible").outerHeight();$(".mini-type-textarea").css({height:e,"border-top":"none"})}}):($(".ref-min-center-dialogue .right-bar-tab.default-view-tab").show(),$(".tab-pane .ref-set-height").removeClass("hide"));getAllDialogueActors($(".online_users.selected").attr("id"))}}),$("body").on("click",".collapsed_dialogue .angle-rotate-down",function(){$("#add-text").focus(),$(".collapsed_dialogue").hide(),$(".ref-min-center-dialogue .right-bar-tab.default-view-tab").show(),$(".tab-pane .ref-set-height").removeClass("hide"),$(".ref_top_chat_box .nano .nano-pane").css("display","block"),$(".mini-type-textarea").css("border-top","1px solid #dbdbdb");var e=$(".mini-dialogue-flyout").height()-$(".ref-min-center-dialogue .right-bar-tab:visible").outerHeight();$(".expand-collapse-box").hasClass("append-top")?$(".mini-type-textarea").css({height:e,"border-top":"none"}):$(".expand-collapse-box").hasClass("expanded-box")&&$("body").on("click",".expanded-box",function(){$(".ref-min-center-dialogue .right-bar-tab.default-view-tab").show();var e=$(".mini-dialogue-flyout").height()-$(".ref-min-center-dialogue .right-bar-tab").first(":visible").outerHeight();$(".mini-type-textarea").css({height:e,"border-top":"none"})})}),$("body").on("keyup",".mini-type-textarea #add-text",function(){$(".collapsed_dialogue").hide(),$(".ref-min-center-dialogue .right-bar-tab.default-view-tab").show(),$(".tab-pane .ref-set-height").removeClass("hide");var e=$(".mini-dialogue-flyout").height()-$(".ref-min-center-dialogue .right-bar-tab:visible").outerHeight();$(".expand-collapse-box").hasClass("append-top")&&$(".mini-type-textarea").css({height:e})})}function saveNewCourse(e,t,i){$("#add-text").blur();var n=$(".new_untitled_wrap").find(".dropMenuCourse").text();if("New"==n)var s=$(".new_untitled_wrap .course-new-drop").find(".course_info").val(),a="",o=$(".new_untitled_wrap .course-new-drop").find(".course_info").val(),r=$(".new_untitled_wrap .ref_mini_input_box").find(".dialogue_info").val();else{var s=$(".new_untitled_wrap .existing_user_titlefield").find(".course_info").data("id"),a=$(".new_untitled_wrap .new_add_wrap").find(".ref_add_title_id").text(),o=$(".new_untitled_wrap .existing_user_titlefield").find(".course_info").val();MiniDialogueContextMenu();r=$(".new_untitled_wrap .existing_user_titlefield").find(".dialogue_info").val()}var l={course_value:s,dialogue_title:r,dialogue_instance_node_id:a,course_title:o,save_type:n,creator_instance_node_id:setUserID,user_instance_node_id:e,user_name:setUsername,other_user_name:t};JSON.stringify(l),""!=s&&void 0!=s?($(".save_course_detail").attr("disabled","disabled"),$(".new_untitled_wrap .course-new-drop").find(".course_req").addClass("hide"),$(".new_untitled_wrap .course_info").removeClass("required_border"),$(".new_untitled_wrap").find(".course_req").addClass("hide"),$(".mini-overlay-wrapper").removeClass("hide"),$.ajax({url:domainUrlApi+"code.php",type:"post",data:{dialog_data:l,action:"chat",type:"saveNewDialog"},success:function(e){e&&($(".new_untitled_wrap .course-new-drop").find(".course_info").val(""),$(".new_untitled_wrap .existing-search").find(".course_info").data(""),$(".new_untitled_wrap .existing-search").find(".course_info").val(""),$(".new_untitled_wrap .ref_mini_input_box").find(".dialogue_info").val(""),$(".new_untitled_wrap .existing_user_titlefield").find(".dialogue_info").val(""),$(".ref_add_new_title_bar").replaceWith(e),$(".ref_top_head_box").hide(),$(".new_user_list").remove())},complete:function(){$("#add-text").focus(),$(".mini-overlay-wrapper").addClass("hide"),$(".right-bar-tab.ref_add_right_tab").css("display","none"),$(".ref-min-center-dialogue .right-bar-tab.default-view-tab").show(),$(".right-bar-tab.default-view-tab").css("display","block")&&$(".expand-collapse-box").click(function(){$(".mini-type-textarea").css("margin-top","0px")}),MiniDialogueContextMenu(),$(".ref-textarea-HT textarea").height("");var i=$(".mini-dialogue-flyout").height()-$(".ref-min-center-dialogue .right-bar-tab:visible").outerHeight();$(".expand-collapse-box").hasClass("append-top")&&$(".mini-type-textarea").css({height:i,"border-top":"none"});runTimeNotification($(".online_users.selected").attr("id"),t,1,"addActor",e),$(".new_view_wrapper").hide(),$(".mini-type-textarea .animate-div").removeClass("manage-opacity"),$(".tab-pane .ref-set-height").removeClass("hide")}})):($(".new_untitled_wrap").find(".course_req").removeClass("hide"),$(".ref_add_right_tab .course_info").addClass("required_border"))}function searchCourseByTitle(){var e={user_instance_node_id:setUserID};JSON.stringify(e),$.ajax({url:domainUrlApi+"code.php",type:"post",data:{search_data:e,action:"chat",type:"searchCourseByTitle"},dataType:"json",success:function(e){e&&responseCourseTitle(e)}})}function responseCourseTitle(e,t){courseTitle=[],$.each(e,function(e,t){courseTitle.push({key:t.course_instance_node_id,value:t.course_title})}),$(".search-existing-course").autocomplete({lookup:courseTitle,appendTo:".addAutoCompleteBox",onSelect:function(e){$(".search-existing-course").data("id",e.key),$(".search-existing-course").val(e.value)}}),$("body").on("click",".pu_plugin_mini_dialogue .addAutoCompleteBox .autocomplete-suggestions .autocomplete-suggestion",function(){$(".search-existing-course").focus()})}function responseUserList(e,t){userList=[],$.each(e,function(e,t){userList.push({key:t.user_instance_node_id,value:t.user_name})}),$(".user-search").autocomplete({lookup:userList,appendTo:"#add_participant_new_user",onSelect:function(e){$(".user-search").data("id",e.key),$(".user-search").val(e.value)}});var i=$(".pu_plugin_mini_dialogue .autosuggest_dropdown_width").width();$(".pu_plugin_mini_dialogue .email_input_field_ui .autocomplete-suggestions").width(i),$(".pu_plugin_mini_dialogue .email_input_field_ui .autocomplete-suggestions").niceScroll({zindex:"auto",cursorcolor:"#000",cursorborder:"0",cursorborderradius:"0",cursorwidth:"2px",background:"rgba(0,0,0,.15)"}),$("body").on("click",".pu_plugin_mini_dialogue .email_input_field_ui .autocomplete-suggestions .autocomplete-suggestion",function(){$(".user-search").focus()})}function setResponseUserList(e,t){userListdata=[],$.each(e,function(e,t){userListdata.push({key:t.user_instance_node_id,value:t.user_name})}),$(".add_participant_user .existing-user-search").autocomplete({lookup:userListdata,appendTo:".add_participant_user",onSelect:function(e){$(".add_participant_user .existing-user-search").data("id",e.key),$(".add_participant_user .existing-user-search").val(e.value)}});var i=$(".pu_plugin_mini_dialogue .existing-user-search").width();$(".pu_plugin_mini_dialogue .add_participant_user .autocomplete-suggestions").width(i),$(".pu_plugin_mini_dialogue .add_participant_user .autocomplete-suggestions").niceScroll({zindex:"auto",cursorcolor:"#000",cursorborder:"0",cursorborderradius:"0",cursorwidth:"2px",background:"rgba(0,0,0,.15)"}),$("body").on("click",".pu_plugin_mini_dialogue .add_participant_user .autocomplete-suggestions .autocomplete-suggestion",function(){$(".existing-user-search").focus()})}function getRandomNodeId(){$.ajax({url:domainUrlApi+"code.php",type:"post",data:{action:"chat",type:"getRandomNodeId"},dataType:"json",success:function(e){e&&$(".new_untitled_wrap .random_node_id").text(e)}})}function deleteStatement(e){var t=$(e).data("id");$("#confirmPopup").find(".confirm-delete").data("id",t),$("#confirmPopup").modal("show")?($("body").removeClass("modal-open"),$("body").find(".modal-backdrop").addClass("mini-confirm-backdrop"),$(".mini-overlay-white-wrapper.white-overlay").removeClass("hide").addClass("show"),$("#confirmPopup .modal-footer .btn, #confirmPopup button.close").click(function(){$(".mini-overlay-white-wrapper.white-overlay").removeClass("show").addClass("hide")})):$(".mini-overlay-white-wrapper.white-overlay").removeClass("show").addClass("hide")}function deleteStatementConfirm(e){$(".mini-overlay-wrapper").removeClass("hide");var t=$(e).data("id"),i=$(".chat_wrapper.active").data("id"),n={node_instance_id:t,dialog_instance_node_id:i};JSON.stringify(n),$.ajax({url:domainUrlApi+"code.php",type:"post",data:{action:"chat",type:"deleteStatement",delete_data:n},success:function(e){$(".mini-overlay-wrapper").addClass("hide");var n=$(".chat_wrapper.active").attr("data-group");void 0==n&&(n=0);var s=$("#"+i).find(".user-node-id").data("id");runTimeNotification(i,t,n,"deleteMessage",s)}})}function checkContextMenu(){$("body").on("mousedown",".desc_drop",function(){$(this).closest("li").data("id")==setUserID?$(this).addClass("desc_drop"):($(this).removeClass("desc_drop"),$("#descCourseContextMenu").hide())}),$("body").on("mousedown",".atch-img-border, .anchor-box",function(){$(this).closest("li").data("id")==setUserID?($(this).addClass("atch-img-border"),$(this).addClass("anchor-box")):($(this).removeClass("atch-img-border"),$(this).removeClass("anchor-box"),$("#imgContextMenu").hide())})}function searchDialogDetail(){var e=$(".sb-search-input-text").val(),t={user_instance_node_id:setUserID,search_string:e};JSON.stringify(t),$.ajax({url:domainUrlApi+"code.php",type:"post",data:{action:"chat",type:"searchDialogDetail",dialog_data:t},success:function(t){$("#accordion").html(t),$(".online_users:first").addClass("selected"),MiniDialogueContextMenu();var i=e;i=i.replace(/\s\s+/g," "),i=i.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var n=new RegExp(i,"gi");$("#accordion .highlight_class").each(function(){i?$(this).html($(this).text().replace(n,function(e){return'<span class="highlight">'+e+"</span>"})):$(this).html($(this).text())})}})}function deleteNotification(e,t){var i={user_instance_node_id:t,dialog_instance_node_id:e};JSON.stringify(i),$.ajax({url:domainUrlApi+"code.php",type:"post",data:{action:"chat",type:"deleteNotification",dialog_data:i}})}function deleteDilaogue(e,t,i){var n={user_instance_node_id:i,dialog_instance_node_id:t};JSON.stringify(n)}function getAllSystemActor(){var e={user_instance_node_id:setUserID};$.ajax({url:domainUrlApi+"code.php",type:"post",data:{action:"chat",type:"getAllSystemActor",dialog_data:e}})}function getAllCourse(e,t,i,n,s,a,o,r,l,d){if("1"!=$(".mini-dialogue-flyout.opened").length&&"true"!=t){void 0==w_popout?$(".loader-box").show():w_popout.closed&&$(".loader-box").show();u={user_instance_node_id:c=$("#node_id").val()};$.ajax({url:domainUrlApi+"code.php",type:"post",data:{action:"chat",type:"getAllCourse",variable_data:u},success:function(e){0!=e?($("#accordion").html(e),$(".panel-heading:first").addClass("panel_active"),$(".mini-type-textarea .animate-div").removeClass("manage-opacity"),$("#add-text").focus()):($("#accordion").html(""),$(".mini-type-textarea .animate-div").addClass("manage-opacity"),$("#add-text").blur()),manageRightHeader("hide"),$(".loader-box").hide(),$(".mini-type-textarea .textarea-icon-wrap").css("display","block"),$("img.dz-clickable").css("display","block"),$(".mini-type-textarea").css("display","block")},complete:function(){$(".mini_accordion_wrap .panel-heading:first a").trigger("click");$(".online_users:first").attr("id");if(setTimeout(function(){0==$(".panel-heading.panel_active").siblings(".dialog-accordion").find(".online_users").length&&($(".mini-type-textarea .animate-div").addClass("manage-opacity"),$("#add-text").blur())},1e3),void 0==w_popout?$(".mini-dialogue-flyout").animate({"margin-right":"0"},function(){objChatfn&&(chatWidthHeight(),objChatfn=!1)}).addClass("opened"):w_popout.closed?$(".mini-dialogue-flyout").animate({"margin-right":"0"},function(){objChatfn&&(chatWidthHeight(),objChatfn=!1)}).addClass("opened"):$(".mini-dialogue-flyout").removeClass("opened"),$(".mini-dialogue-flyout.opened .textarea-icon-wrap .expand-collapse-box").hasClass("append-top")){$(".mini-dialogue-flyout").height();var e=$(".mini-type-textarea").height();$("#add-text").focus(),$(".append-top").trigger("click"),$(".ref-set-height").height(-($(".right-bar-tab").height()+e))}$("#add-text").focus(),miniDialogue(),$(".mini-type-textarea .textarea-icon-wrap").css("display","block"),$("img.dz-clickable").css("display","block"),$("#add-text").focus(),renameTitleMiniDialogue(),MiniDialogueContextMenu(),miniDialogueResizeShrink(),$(".mini-set-height.nano").nanoScroller()}})}else if("true"==t&&"1"==$(".mini-dialogue-flyout.opened").length){var c=e,u={user_instance_node_id:c};$.ajax({url:domainUrlApi+"code.php",type:"post",data:{action:"chat",type:"getAllCourse",variable_data:u},success:function(e){0!=e?($("#accordion").html(e),$(".panel-heading:first").addClass("panel_active"),$(".mini_accordion_wrap .panel:first .dialog-accordion").addClass("in"),manageRightHeader("hide"),$(".mini-type-textarea .textarea-icon-wrap").css("display","block")):$("#accordion").html(""),$(".loader-box").hide(),$(".mini-type-textarea .textarea-icon-wrap").css("display","block"),$("img.dz-clickable").css("display","block"),$(".mini-type-textarea").css("display","block")},complete:function(){getAllDialogue($(".panel-heading:first"),e,t,i,n,s,a,o,r,l,d);$(".online_users:first").attr("id");void 0==w_popout?$(".mini-dialogue-flyout").animate({"margin-right":"0"},function(){objChatfn&&(chatWidthHeight(),objChatfn=!1)}).addClass("opened"):w_popout.closed?$(".mini-dialogue-flyout").animate({"margin-right":"0"},function(){objChatfn&&(chatWidthHeight(),objChatfn=!1)}).addClass("opened"):$(".mini-dialogue-flyout").removeClass("opened"),MiniDialogueContextMenu()}})}messageBoxImgPaste("#chatMsgBox","#add-text","divEditableChat"),$(".ref-min-center-dialogue .right-bar-tab.default-view-tab").show()}function getAllDialogue(e,t,i,n,s,a,o,r,l,d,c){var u={user_instance_node_id:$("#node_id").val(),course_instance_node_id:$(e).closest(".panel-heading").data("id"),acc_count:$(e).closest(".panel-heading").data("count")};$(".panel-heading").removeClass("panel_active"),$(e).addClass("panel_active"),manageRightHeader("hide"),$("#chatWindows").html(""),$(e).removeClass("notification-color"),0!=$(".ref_add_new_title_bar").length&&$(".ref_add_new_title_bar").remove();var h="";setTimeout(function(){0==$(".panel-heading.panel_active").siblings(".dialog-accordion").find(".online_users").length&&($(".mini-type-textarea .animate-div").addClass("manage-opacity"),$("#add-text").blur())},1e3),$.ajax({url:domainUrlApi+"code.php",type:"post",data:{variable_data:u,action:"chat",type:"getDialog",random:Math.random()},success:function(t){0!=t?($(e).siblings(".dialog-accordion").find("ul").html(t),h="1",$(".mini-type-textarea .animate-div").removeClass("manage-opacity")):($(e).siblings(".dialog-accordion").find("ul").html(""),h="0"),$(".mini-type-textarea .textarea-icon-wrap").css("display","block"),$("img.dz-clickable").css("display","block"),$(".mini-type-textarea").css("display","block")},complete:function(){if("0"!=h){var t=$(".online_users:first").attr("id");if("true"==i){getStatement(t,"",n,s,a,o,r,l,d,c)}else $(e).siblings(".dialog-accordion").find("ul .online_users:first").trigger("click");$("#add-text").focus(),$(".mini-type-textarea .textarea-icon-wrap").css("display","block"),$("img.dz-clickable").css("display","block"),$("#add-text").focus(),renameTitleMiniDialogue(),MiniDialogueContextMenu(),miniDialogueResizeShrink(),$(".mini-set-height.nano").nanoScroller()}}}),messageBoxImgPaste("#chatMsgBox","#add-text","divEditableChat"),$(".ref-min-center-dialogue .right-bar-tab.default-view-tab").show(),$(".right_bar_tab_new_ui").hide()}function manageRightHeader(e){$(".ref-min-center-dialogue .rename-title-mini .dialog-tilte-node-id").addClass(e),$(".ref-min-center-dialogue .rename-title-mini .title-icon").addClass(e),$(".ref-min-center-dialogue .rename-title-mini .rename-edit-cover-box").addClass(e),$(".default-view-tab").find(".angle-collapse-up").addClass(e)}function editStatement(e){var t=$(e).data("id"),i={node_instance_id:t,dialog_instance_node_id:$(".chat_wrapper.active").data("id")};JSON.stringify(i);var n=$(".desc_drop."+t).text();$("#add-text").val(n.trim()),$("#add-text").data("id",t),$("#add-text").addClass("edited-statement")}function toggleAddCourseSection(e,t){var i=e,n=i.closest(".block-head"),s=n.find(".chat-toggle");n.closest(".display-wrapper").find(".edtHeader.doc-wrap");i.hasClass("collapse-down")?(s.addClass("hide"),i.removeClass("collapse-down").addClass("collapse-up")):(s.removeClass("hide"),i.addClass("collapse-down").removeClass("collapse-up")),$("#react-toggleRecipientBtn").trigger("click"),void 0===t&&n.find("#course-title-value").focus()}function autoScrollDown(e){setTimeout(function(){var e=$("#miniDialogue .nano.ref-set-height");e.nanoScroller(),e.nanoScroller({scrollBottom:-50})},500)}function whiteCircle(e){for(_ref=e.previewElement.querySelectorAll("[data-dz-uploadprogress]"),_i=0,_len=_ref.length;_i<_len;_i++){node=_ref[_i];var t=node.getContext("2d")}t.lineWidth=2,t.fillStyle="#aaa",t.strokeStyle="#aaa",t.beginPath(),t.arc(20,20,15,0,2*Math.PI),t.stroke()}function progressSim(e,t){for(_ref=t.previewElement.querySelectorAll("[data-dz-uploadprogress]"),_i=0,_len=_ref.length;_i<_len;_i++){node=_ref[_i];var i=node.getContext("2d")}i.canvas.height=40,i.canvas.width=40;var n;n=(e/100*Math.PI*2*10).toFixed(2),i.clearRect(10,10,10,10),i.lineWidth=2,i.fillStyle="#6e6c6c",i.strokeStyle="#6e6c6c",i.textAlign="center",i.beginPath(),i.arc(20,20,15,4.72,n/10+4.72,!1),i.stroke(),firstTime=e>=100?1:0,t.type.match(/image.*/)&&$(function(){i.canvas.height=90,i.canvas.width=90,i.clearRect(10,10,10,10),i.lineWidth=2,i.fillStyle="#999",i.strokeStyle="#999",i.textAlign="center",i.beginPath(),i.arc(45,45,15,4.72,n/10+4.72,!1),i.stroke()})}function messageBoxImgPaste(e,t,i,n){var s=document.querySelector(t);FileReaderJS.setupClipboard(s,{accept:{"image/*":"DataURL"},on:{load:function(n,s){var a=new Image;replaceTextAreaToEditableDiv(e,t,i),a.height=100,a.width=100,a.onload=function(){imgOnPast(i,a,s)},a.src=n.target.result},loadend:function(){n&&setTimeout(function(){$(n).getNiceScroll(0).doScrollTop($(n)[0].scrollHeight,100)},1e3)}}}),$("body").on("keyup","#"+i,function(){$("#"+i).find("img").length||replaceTextAreaToEditableDiv(e,t,i)})}function imgOnPast(e,t,i){$("#"+e).append(t),$("#"+e).trigger("focus"),paste_printScreen_case=!0,fileObj=i;var n=$(".mini-type-textarea #chatMsgBox").height();$("#"+e).height(n)}function replaceTextAreaToEditableDiv(e,t,i){var n=$(e+":first");if(textAreaContainer){var s=$("#"+i).text();$("#"+i).remove(),n.append(textAreaContainer),textAreaContainer=null,$(t).val(s).focus()}else textArea=$(t),textAreaContainer=textArea.detach(),n.html('<div id="'+i+'"  class="form-control message" rows="2" placeholder="Type here" contenteditable="true"></div>')}!function(e,t){function i(e){var t=e.length,i=le.type(e);return!le.isWindow(e)&&(!(1!==e.nodeType||!t)||("array"===i||"function"!==i&&(0===t||"number"==typeof t&&t>0&&t-1 in e)))}function n(e){var t=Ce[e]={};return le.each(e.match(ce)||[],function(e,i){t[i]=!0}),t}function s(e,i,n,s){if(le.acceptData(e)){var a,o,r=le.expando,l=e.nodeType,d=l?le.cache:e,c=l?e[r]:e[r]&&r;if(c&&d[c]&&(s||d[c].data)||n!==t||"string"!=typeof i)return c||(c=l?e[r]=ee.pop()||le.guid++:r),d[c]||(d[c]=l?{}:{toJSON:le.noop}),"object"!=typeof i&&"function"!=typeof i||(s?d[c]=le.extend(d[c],i):d[c].data=le.extend(d[c].data,i)),o=d[c],s||(o.data||(o.data={}),o=o.data),n!==t&&(o[le.camelCase(i)]=n),"string"==typeof i?null==(a=o[i])&&(a=o[le.camelCase(i)]):a=o,a}}function a(e,t,i){if(le.acceptData(e)){var n,s,a=e.nodeType,o=a?le.cache:e,l=a?e[le.expando]:le.expando;if(o[l]){if(t&&(n=i?o[l]:o[l].data)){s=(t=le.isArray(t)?t.concat(le.map(t,le.camelCase)):t in n?[t]:(t=le.camelCase(t))in n?[t]:t.split(" ")).length;for(;s--;)delete n[t[s]];if(i?!r(n):!le.isEmptyObject(n))return}(i||(delete o[l].data,r(o[l])))&&(a?le.cleanData([e],!0):le.support.deleteExpando||o!=o.window?delete o[l]:o[l]=null)}}}function o(e,i,n){if(n===t&&1===e.nodeType){var s="data-"+i.replace(ke,"-$1").toLowerCase();if("string"==typeof(n=e.getAttribute(s))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:xe.test(n)?le.parseJSON(n):n)}catch(e){}le.data(e,i,n)}else n=t}return n}function r(e){var t;for(t in e)if(("data"!==t||!le.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function l(){return!0}function d(){return!1}function c(){try{return G.activeElement}catch(e){}}function u(e,t){do{e=e[t]}while(e&&1!==e.nodeType);return e}function h(e,t,i){if(le.isFunction(t))return le.grep(e,function(e,n){return!!t.call(e,n,e)!==i});if(t.nodeType)return le.grep(e,function(e){return e===t!==i});if("string"==typeof t){if(ze.test(t))return le.filter(t,e,i);t=le.filter(t,e)}return le.grep(e,function(e){return le.inArray(e,t)>=0!==i})}function p(e){var t=Be.split("|"),i=e.createDocumentFragment();if(i.createElement)for(;t.length;)i.createElement(t.pop());return i}function f(e,t){return le.nodeName(e,"table")&&le.nodeName(1===t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function m(e){return e.type=(null!==le.find.attr(e,"type"))+"/"+e.type,e}function g(e){var t=it.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function v(e,t){for(var i,n=0;null!=(i=e[n]);n++)le._data(i,"globalEval",!t||le._data(t[n],"globalEval"))}function b(e,t){if(1===t.nodeType&&le.hasData(e)){var i,n,s,a=le._data(e),o=le._data(t,a),r=a.events;if(r){delete o.handle,o.events={};for(i in r)for(n=0,s=r[i].length;n<s;n++)le.event.add(t,i,r[i][n])}o.data&&(o.data=le.extend({},o.data))}}function _(e,t){var i,n,s;if(1===t.nodeType){if(i=t.nodeName.toLowerCase(),!le.support.noCloneEvent&&t[le.expando]){s=le._data(t);for(n in s.events)le.removeEvent(t,n,s.handle);t.removeAttribute(le.expando)}"script"===i&&t.text!==e.text?(m(t).text=e.text,g(t)):"object"===i?(t.parentNode&&(t.outerHTML=e.outerHTML),le.support.html5Clone&&e.innerHTML&&!le.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===i&&Ze.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===i?t.defaultSelected=t.selected=e.defaultSelected:"input"!==i&&"textarea"!==i||(t.defaultValue=e.defaultValue)}}function $(e,i){var n,s,a=0,o=typeof e.getElementsByTagName!==V?e.getElementsByTagName(i||"*"):typeof e.querySelectorAll!==V?e.querySelectorAll(i||"*"):t;if(!o)for(o=[],n=e.childNodes||e;null!=(s=n[a]);a++)!i||le.nodeName(s,i)?o.push(s):le.merge(o,$(s,i));return i===t||i&&le.nodeName(e,i)?le.merge([e],o):o}function y(e){Ze.test(e.type)&&(e.defaultChecked=e.checked)}function w(e,t){if(t in e)return t;for(var i=t.charAt(0).toUpperCase()+t.slice(1),n=t,s=yt.length;s--;)if((t=yt[s]+i)in e)return t;return n}function C(e,t){return e=t||e,"none"===le.css(e,"display")||!le.contains(e.ownerDocument,e)}function x(e,t){for(var i,n,s,a=[],o=0,r=e.length;o<r;o++)(n=e[o]).style&&(a[o]=le._data(n,"olddisplay"),i=n.style.display,t?(a[o]||"none"!==i||(n.style.display=""),""===n.style.display&&C(n)&&(a[o]=le._data(n,"olddisplay",S(n.nodeName)))):a[o]||(s=C(n),(i&&"none"!==i||!s)&&le._data(n,"olddisplay",s?i:le.css(n,"display"))));for(o=0;o<r;o++)(n=e[o]).style&&(t&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=t?a[o]||"":"none"));return e}function k(e,t,i){var n=ft.exec(t);return n?Math.max(0,n[1]-(i||0))+(n[2]||"px"):t}function T(e,t,i,n,s){for(var a=i===(n?"border":"content")?4:"width"===t?1:0,o=0;a<4;a+=2)"margin"===i&&(o+=le.css(e,i+$t[a],!0,s)),n?("content"===i&&(o-=le.css(e,"padding"+$t[a],!0,s)),"margin"!==i&&(o-=le.css(e,"border"+$t[a]+"Width",!0,s))):(o+=le.css(e,"padding"+$t[a],!0,s),"padding"!==i&&(o+=le.css(e,"border"+$t[a]+"Width",!0,s)));return o}function N(e,t,i){var n=!0,s="width"===t?e.offsetWidth:e.offsetHeight,a=rt(e),o=le.support.boxSizing&&"border-box"===le.css(e,"boxSizing",!1,a);if(s<=0||null==s){if(((s=lt(e,t,a))<0||null==s)&&(s=e.style[t]),mt.test(s))return s;n=o&&(le.support.boxSizingReliable||s===e.style[t]),s=parseFloat(s)||0}return s+T(e,t,i||(o?"border":"content"),n,a)+"px"}function S(e){var t=G,i=vt[e];return i||("none"!==(i=D(e,t))&&i||((t=((ot=(ot||le("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement))[0].contentWindow||ot[0].contentDocument).document).write("<!doctype html><html><body>"),t.close(),i=D(e,t),ot.detach()),vt[e]=i),i}function D(e,t){var i=le(t.createElement(e)).appendTo(t.body),n=le.css(i[0],"display");return i.remove(),n}function I(e,t,i,n){var s;if(le.isArray(t))le.each(t,function(t,s){i||Ct.test(e)?n(e,s):I(e+"["+("object"==typeof s?t:"")+"]",s,i,n)});else if(i||"object"!==le.type(t))n(e,t);else for(s in t)I(e+"["+s+"]",t[s],i,n)}function P(e){return function(t,i){"string"!=typeof t&&(i=t,t="*");var n,s=0,a=t.toLowerCase().match(ce)||[];if(le.isFunction(i))for(;n=a[s++];)"+"===n[0]?(n=n.slice(1)||"*",(e[n]=e[n]||[]).unshift(i)):(e[n]=e[n]||[]).push(i)}}function E(e,t,i,n){function s(r){var l;return a[r]=!0,le.each(e[r]||[],function(e,r){var d=r(t,i,n);return"string"!=typeof d||o||a[d]?o?!(l=d):void 0:(t.dataTypes.unshift(d),s(d),!1)}),l}var a={},o=e===zt;return s(t.dataTypes[0])||!a["*"]&&s("*")}function A(e,i){var n,s,a=le.ajaxSettings.flatOptions||{};for(s in i)i[s]!==t&&((a[s]?e:n||(n={}))[s]=i[s]);return n&&le.extend(!0,e,n),e}function M(e,i,n){for(var s,a,o,r,l=e.contents,d=e.dataTypes;"*"===d[0];)d.shift(),a===t&&(a=e.mimeType||i.getResponseHeader("Content-Type"));if(a)for(r in l)if(l[r]&&l[r].test(a)){d.unshift(r);break}if(d[0]in n)o=d[0];else{for(r in n){if(!d[0]||e.converters[r+" "+d[0]]){o=r;break}s||(s=r)}o=o||s}if(o)return o!==d[0]&&d.unshift(o),n[o]}function L(e,t,i,n){var s,a,o,r,l,d={},c=e.dataTypes.slice();if(c[1])for(o in e.converters)d[o.toLowerCase()]=e.converters[o];for(a=c.shift();a;)if(e.responseFields[a]&&(i[e.responseFields[a]]=t),!l&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=a,a=c.shift())if("*"===a)a=l;else if("*"!==l&&l!==a){if(!(o=d[l+" "+a]||d["* "+a]))for(s in d)if((r=s.split(" "))[1]===a&&(o=d[l+" "+r[0]]||d["* "+r[0]])){!0===o?o=d[s]:!0!==d[s]&&(a=r[0],c.unshift(r[1]));break}if(!0!==o)if(o&&e.throws)t=o(t);else try{t=o(t)}catch(e){return{state:"parsererror",error:o?e:"No conversion from "+l+" to "+a}}}return{state:"success",data:t}}function O(){try{return new e.XMLHttpRequest}catch(e){}}function R(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}function F(){return setTimeout(function(){Xt=t}),Xt=le.now()}function H(e,t,i){for(var n,s=(ei[t]||[]).concat(ei["*"]),a=0,o=s.length;a<o;a++)if(n=s[a].call(i,t,e))return n}function z(e,t,i){var n,s,a=0,o=Zt.length,r=le.Deferred().always(function(){delete l.elem}),l=function(){if(s)return!1;for(var t=Xt||F(),i=Math.max(0,d.startTime+d.duration-t),n=1-(i/d.duration||0),a=0,o=d.tweens.length;a<o;a++)d.tweens[a].run(n);return r.notifyWith(e,[d,n,i]),n<1&&o?i:(r.resolveWith(e,[d]),!1)},d=r.promise({elem:e,props:le.extend({},t),opts:le.extend(!0,{specialEasing:{}},i),originalProperties:t,originalOptions:i,startTime:Xt||F(),duration:i.duration,tweens:[],createTween:function(t,i){var n=le.Tween(e,d.opts,t,i,d.opts.specialEasing[t]||d.opts.easing);return d.tweens.push(n),n},stop:function(t){var i=0,n=t?d.tweens.length:0;if(s)return this;for(s=!0;i<n;i++)d.tweens[i].run(1);return t?r.resolveWith(e,[d,t]):r.rejectWith(e,[d,t]),this}}),c=d.props;for(j(c,d.opts.specialEasing);a<o;a++)if(n=Zt[a].call(d,e,c,d.opts))return n;return le.map(c,H,d),le.isFunction(d.opts.start)&&d.opts.start.call(e,d),le.fx.timer(le.extend(l,{elem:e,anim:d,queue:d.opts.queue})),d.progress(d.opts.progress).done(d.opts.done,d.opts.complete).fail(d.opts.fail).always(d.opts.always)}function j(e,t){var i,n,s,a,o;for(i in e)if(n=le.camelCase(i),s=t[n],a=e[i],le.isArray(a)&&(s=a[1],a=e[i]=a[0]),i!==n&&(e[n]=a,delete e[i]),(o=le.cssHooks[n])&&"expand"in o){a=o.expand(a),delete e[n];for(i in a)i in e||(e[i]=a[i],t[i]=s)}else t[n]=s}function W(e,t,i,n,s){return new W.prototype.init(e,t,i,n,s)}function U(e,t){var i,n={height:e},s=0;for(t=t?1:0;s<4;s+=2-t)n["margin"+(i=$t[s])]=n["padding"+i]=e;return t&&(n.opacity=n.width=e),n}function B(e){return le.isWindow(e)?e:9===e.nodeType&&(e.defaultView||e.parentWindow)}var q,Y,V=typeof t,X=e.location,G=e.document,K=G.documentElement,Q=e.jQuery,J=e.$,Z={},ee=[],te=ee.concat,ie=ee.push,ne=ee.slice,se=ee.indexOf,ae=Z.toString,oe=Z.hasOwnProperty,re="1.10.1".trim,le=function(e,t){return new le.fn.init(e,t,Y)},de=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ce=/\S+/g,ue=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,he=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,pe=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,fe=/^[\],:{}\s]*$/,me=/(?:^|:|,)(?:\s*\[)+/g,ge=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,ve=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,be=/^-ms-/,_e=/-([\da-z])/gi,$e=function(e,t){return t.toUpperCase()},ye=function(e){(G.addEventListener||"load"===e.type||"complete"===G.readyState)&&(we(),le.ready())},we=function(){G.addEventListener?(G.removeEventListener("DOMContentLoaded",ye,!1),e.removeEventListener("load",ye,!1)):(G.detachEvent("onreadystatechange",ye),e.detachEvent("onload",ye))};le.fn=le.prototype={jquery:"1.10.1",constructor:le,init:function(e,i,n){var s,a;if(!e)return this;if("string"==typeof e){if(!(s="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:he.exec(e))||!s[1]&&i)return!i||i.jquery?(i||n).find(e):this.constructor(i).find(e);if(s[1]){if(i=i instanceof le?i[0]:i,le.merge(this,le.parseHTML(s[1],i&&i.nodeType?i.ownerDocument||i:G,!0)),pe.test(s[1])&&le.isPlainObject(i))for(s in i)le.isFunction(this[s])?this[s](i[s]):this.attr(s,i[s]);return this}if((a=G.getElementById(s[2]))&&a.parentNode){if(a.id!==s[2])return n.find(e);this.length=1,this[0]=a}return this.context=G,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):le.isFunction(e)?n.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),le.makeArray(e,this))},selector:"",length:0,toArray:function(){return ne.call(this)},get:function(e){return null==e?this.toArray():e<0?this[this.length+e]:this[e]},pushStack:function(e){var t=le.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return le.each(this,e,t)},ready:function(e){return le.ready.promise().done(e),this},slice:function(){return this.pushStack(ne.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,i=+e+(e<0?t:0);return this.pushStack(i>=0&&i<t?[this[i]]:[])},map:function(e){return this.pushStack(le.map(this,function(t,i){return e.call(t,i,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:ie,sort:[].sort,splice:[].splice},le.fn.init.prototype=le.fn,le.extend=le.fn.extend=function(){var e,i,n,s,a,o,r=arguments[0]||{},l=1,d=arguments.length,c=!1;for("boolean"==typeof r&&(c=r,r=arguments[1]||{},l=2),"object"==typeof r||le.isFunction(r)||(r={}),d===l&&(r=this,--l);l<d;l++)if(null!=(a=arguments[l]))for(s in a)e=r[s],r!==(n=a[s])&&(c&&n&&(le.isPlainObject(n)||(i=le.isArray(n)))?(i?(i=!1,o=e&&le.isArray(e)?e:[]):o=e&&le.isPlainObject(e)?e:{},r[s]=le.extend(c,o,n)):n!==t&&(r[s]=n));return r},le.extend({expando:"jQuery"+("1.10.1"+Math.random()).replace(/\D/g,""),noConflict:function(t){return e.$===le&&(e.$=J),t&&e.jQuery===le&&(e.jQuery=Q),le},isReady:!1,readyWait:1,holdReady:function(e){e?le.readyWait++:le.ready(!0)},ready:function(e){if(!0===e?!--le.readyWait:!le.isReady){if(!G.body)return setTimeout(le.ready);le.isReady=!0,!0!==e&&--le.readyWait>0||(q.resolveWith(G,[le]),le.fn.trigger&&le(G).trigger("ready").off("ready"))}},isFunction:function(e){return"function"===le.type(e)},isArray:Array.isArray||function(e){return"array"===le.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?String(e):"object"==typeof e||"function"==typeof e?Z[ae.call(e)]||"object":typeof e},isPlainObject:function(e){var i;if(!e||"object"!==le.type(e)||e.nodeType||le.isWindow(e))return!1;try{if(e.constructor&&!oe.call(e,"constructor")&&!oe.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}if(le.support.ownLast)for(i in e)return oe.call(e,i);for(i in e);return i===t||oe.call(e,i)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw new Error(e)},parseHTML:function(e,t,i){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(i=t,t=!1),t=t||G;var n=pe.exec(e),s=!i&&[];return n?[t.createElement(n[1])]:(n=le.buildFragment([e],t,s),s&&le(s).remove(),le.merge([],n.childNodes))},parseJSON:function(t){return e.JSON&&e.JSON.parse?e.JSON.parse(t):null===t?t:"string"==typeof t&&(t=le.trim(t))&&fe.test(t.replace(ge,"@").replace(ve,"]").replace(me,""))?new Function("return "+t)():void le.error("Invalid JSON: "+t)},parseXML:function(i){var n,s;if(!i||"string"!=typeof i)return null;try{e.DOMParser?(s=new DOMParser,n=s.parseFromString(i,"text/xml")):((n=new ActiveXObject("Microsoft.XMLDOM")).async="false",n.loadXML(i))}catch(e){n=t}return n&&n.documentElement&&!n.getElementsByTagName("parsererror").length||le.error("Invalid XML: "+i),n},noop:function(){},globalEval:function(t){t&&le.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(be,"ms-").replace(_e,$e)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var s=0,a=e.length,o=i(e);if(n){if(o)for(;s<a&&!1!==t.apply(e[s],n);s++);else for(s in e)if(!1===t.apply(e[s],n))break}else if(o)for(;s<a&&!1!==t.call(e[s],s,e[s]);s++);else for(s in e)if(!1===t.call(e[s],s,e[s]))break;return e},trim:re&&!re.call("\ufeff ")?function(e){return null==e?"":re.call(e)}:function(e){return null==e?"":(e+"").replace(ue,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(i(Object(e))?le.merge(n,"string"==typeof e?[e]:e):ie.call(n,e)),n},inArray:function(e,t,i){var n;if(t){if(se)return se.call(t,e,i);for(n=t.length,i=i?i<0?Math.max(0,n+i):i:0;i<n;i++)if(i in t&&t[i]===e)return i}return-1},merge:function(e,i){var n=i.length,s=e.length,a=0;if("number"==typeof n)for(;a<n;a++)e[s++]=i[a];else for(;i[a]!==t;)e[s++]=i[a++];return e.length=s,e},grep:function(e,t,i){var n=[],s=0,a=e.length;for(i=!!i;s<a;s++)i!==!!t(e[s],s)&&n.push(e[s]);return n},map:function(e,t,n){var s,a=0,o=e.length,r=[];if(i(e))for(;a<o;a++)null!=(s=t(e[a],a,n))&&(r[r.length]=s);else for(a in e)null!=(s=t(e[a],a,n))&&(r[r.length]=s);return te.apply([],r)},guid:1,proxy:function(e,i){var n,s,a;return"string"==typeof i&&(a=e[i],i=e,e=a),le.isFunction(e)?(n=ne.call(arguments,2),s=function(){return e.apply(i||this,n.concat(ne.call(arguments)))},s.guid=e.guid=e.guid||le.guid++,s):t},access:function(e,i,n,s,a,o,r){var l=0,d=e.length,c=null==n;if("object"===le.type(n)){a=!0;for(l in n)le.access(e,i,l,n[l],!0,o,r)}else if(s!==t&&(a=!0,le.isFunction(s)||(r=!0),c&&(r?(i.call(e,s),i=null):(c=i,i=function(e,t,i){return c.call(le(e),i)})),i))for(;l<d;l++)i(e[l],n,r?s:s.call(e[l],l,i(e[l],n)));return a?e:c?i.call(e):d?i(e[0],n):o},now:function(){return(new Date).getTime()},swap:function(e,t,i,n){var s,a,o={};for(a in t)o[a]=e.style[a],e.style[a]=t[a];s=i.apply(e,n||[]);for(a in t)e.style[a]=o[a];return s}}),le.ready.promise=function(t){if(!q)if(q=le.Deferred(),"complete"===G.readyState)setTimeout(le.ready);else if(G.addEventListener)G.addEventListener("DOMContentLoaded",ye,!1),e.addEventListener("load",ye,!1);else{G.attachEvent("onreadystatechange",ye),e.attachEvent("onload",ye);var i=!1;try{i=null==e.frameElement&&G.documentElement}catch(e){}i&&i.doScroll&&function e(){if(!le.isReady){try{i.doScroll("left")}catch(t){return setTimeout(e,50)}we(),le.ready()}}()}return q.promise(t)},le.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){Z["[object "+t+"]"]=t.toLowerCase()}),Y=le(G),function(e,t){function i(e,t,i,n){var s,a,o,r,l,d,c,u,h,m;if((t?t.ownerDocument||t:W)!==M&&A(t),t=t||M,i=i||[],!e||"string"!=typeof e)return i;if(1!==(r=t.nodeType)&&9!==r)return[];if(O&&!n){if(s=$e.exec(e))if(o=s[1]){if(9===r){if(!(a=t.getElementById(o))||!a.parentNode)return i;if(a.id===o)return i.push(a),i}else if(t.ownerDocument&&(a=t.ownerDocument.getElementById(o))&&z(t,a)&&a.id===o)return i.push(a),i}else{if(s[2])return te.apply(i,t.getElementsByTagName(e)),i;if((o=s[3])&&k.getElementsByClassName&&t.getElementsByClassName)return te.apply(i,t.getElementsByClassName(o)),i}if(k.qsa&&(!R||!R.test(e))){if(u=c=j,h=t,m=9===r&&e,1===r&&"object"!==t.nodeName.toLowerCase()){for(d=p(e),(c=t.getAttribute("id"))?u=c.replace(Ce,"\\$&"):t.setAttribute("id",u),u="[id='"+u+"'] ",l=d.length;l--;)d[l]=u+f(d[l]);h=fe.test(e)&&t.parentNode||t,m=d.join(",")}if(m)try{return te.apply(i,h.querySelectorAll(m)),i}catch(e){}finally{c||t.removeAttribute("id")}}}return w(e.replace(ue,"$1"),t,i,n)}function n(e){return _e.test(e+"")}function s(){function e(i,n){return t.push(i+=" ")>N.cacheLength&&delete e[t.shift()],e[i]=n}var t=[];return e}function a(e){return e[j]=!0,e}function o(e){var t=M.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function r(e,t,i){for(var n,s=(e=e.split("|")).length,a=i?null:t;s--;)(n=N.attrHandle[e[s]])&&n!==t||(N.attrHandle[e[s]]=a)}function l(e,t){var i=e.getAttributeNode(t);return i&&i.specified?i.value:!0===e[t]?t.toLowerCase():null}function d(e,t){return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}function c(e){if("input"===e.nodeName.toLowerCase())return e.defaultValue}function u(e,t){var i=t&&e,n=i&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||K)-(~e.sourceIndex||K);if(n)return n;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return e?1:-1}function h(e){return a(function(t){return t=+t,a(function(i,n){for(var s,a=e([],i.length,t),o=a.length;o--;)i[s=a[o]]&&(i[s]=!(n[s]=i[s]))})})}function p(e,t){var n,s,a,o,r,l,d,c=Y[e+" "];if(c)return t?0:c.slice(0);for(r=e,l=[],d=N.preFilter;r;){n&&!(s=he.exec(r))||(s&&(r=r.slice(s[0].length)||r),l.push(a=[])),n=!1,(s=pe.exec(r))&&(n=s.shift(),a.push({value:n,type:s[0].replace(ue," ")}),r=r.slice(n.length));for(o in N.filter)!(s=be[o].exec(r))||d[o]&&!(s=d[o](s))||(n=s.shift(),a.push({value:n,type:o,matches:s}),r=r.slice(n.length));if(!n)break}return t?r.length:r?i.error(e):Y(e,l).slice(0)}function f(e){for(var t=0,i=e.length,n="";t<i;t++)n+=e[t].value;return n}function m(e,t,i){var n=t.dir,s=i&&"parentNode"===n,a=B++;return t.first?function(t,i,a){for(;t=t[n];)if(1===t.nodeType||s)return e(t,i,a)}:function(t,i,o){var r,l,d,c=U+" "+a;if(o){for(;t=t[n];)if((1===t.nodeType||s)&&e(t,i,o))return!0}else for(;t=t[n];)if(1===t.nodeType||s)if(d=t[j]||(t[j]={}),(l=d[n])&&l[0]===c){if(!0===(r=l[1])||r===T)return!0===r}else if(l=d[n]=[c],l[1]=e(t,i,o)||T,!0===l[1])return!0}}function g(e){return e.length>1?function(t,i,n){for(var s=e.length;s--;)if(!e[s](t,i,n))return!1;return!0}:e[0]}function v(e,t,i,n,s){for(var a,o=[],r=0,l=e.length,d=null!=t;r<l;r++)(a=e[r])&&(i&&!i(a,n,s)||(o.push(a),d&&t.push(r)));return o}function b(e,t,i,n,s,o){return n&&!n[j]&&(n=b(n)),s&&!s[j]&&(s=b(s,o)),a(function(a,o,r,l){var d,c,u,h=[],p=[],f=o.length,m=a||y(t||"*",r.nodeType?[r]:r,[]),g=!e||!a&&t?m:v(m,h,e,r,l),b=i?s||(a?e:f||n)?[]:o:g;if(i&&i(g,b,r,l),n)for(d=v(b,p),n(d,[],r,l),c=d.length;c--;)(u=d[c])&&(b[p[c]]=!(g[p[c]]=u));if(a){if(s||e){if(s){for(d=[],c=b.length;c--;)(u=b[c])&&d.push(g[c]=u);s(null,b=[],d,l)}for(c=b.length;c--;)(u=b[c])&&(d=s?ne.call(a,u):h[c])>-1&&(a[d]=!(o[d]=u))}}else b=v(b===o?b.splice(f,b.length):b),s?s(null,o,b,l):te.apply(o,b)})}function _(e){for(var t,i,n,s=e.length,a=N.relative[e[0].type],o=a||N.relative[" "],r=a?1:0,l=m(function(e){return e===t},o,!0),d=m(function(e){return ne.call(t,e)>-1},o,!0),c=[function(e,i,n){return!a&&(n||i!==P)||((t=i).nodeType?l(e,i,n):d(e,i,n))}];r<s;r++)if(i=N.relative[e[r].type])c=[m(g(c),i)];else{if((i=N.filter[e[r].type].apply(null,e[r].matches))[j]){for(n=++r;n<s&&!N.relative[e[n].type];n++);return b(r>1&&g(c),r>1&&f(e.slice(0,r-1).concat({value:" "===e[r-2].type?"*":""})).replace(ue,"$1"),i,r<n&&_(e.slice(r,n)),n<s&&_(e=e.slice(n)),n<s&&f(e))}c.push(i)}return g(c)}function $(e,t){var n=0,s=t.length>0,o=e.length>0,r=function(a,r,l,d,c){var u,h,p,f=[],m=0,g="0",b=a&&[],_=null!=c,$=P,y=a||o&&N.find.TAG("*",c&&r.parentNode||r),w=U+=null==$?1:Math.random()||.1;for(_&&(P=r!==M&&r,T=n);null!=(u=y[g]);g++){if(o&&u){for(h=0;p=e[h++];)if(p(u,r,l)){d.push(u);break}_&&(U=w,T=++n)}s&&((u=!p&&u)&&m--,a&&b.push(u))}if(m+=g,s&&g!==m){for(h=0;p=t[h++];)p(b,f,r,l);if(a){if(m>0)for(;g--;)b[g]||f[g]||(f[g]=Z.call(d));f=v(f)}te.apply(d,f),_&&!a&&f.length>0&&m+t.length>1&&i.uniqueSort(d)}return _&&(U=w,P=$),b};return s?a(r):r}function y(e,t,n){for(var s=0,a=t.length;s<a;s++)i(e,t[s],n);return n}function w(e,t,i,n){var s,a,o,r,l,d=p(e);if(!n&&1===d.length){if((a=d[0]=d[0].slice(0)).length>2&&"ID"===(o=a[0]).type&&k.getById&&9===t.nodeType&&O&&N.relative[a[1].type]){if(!(t=(N.find.ID(o.matches[0].replace(xe,ke),t)||[])[0]))return i;e=e.slice(a.shift().value.length)}for(s=be.needsContext.test(e)?0:a.length;s--&&(o=a[s],!N.relative[r=o.type]);)if((l=N.find[r])&&(n=l(o.matches[0].replace(xe,ke),fe.test(a[0].type)&&t.parentNode||t))){if(a.splice(s,1),!(e=n.length&&f(a)))return te.apply(i,n),i;break}}return I(e,d)(n,t,!O,i,fe.test(e)),i}function C(){}var x,k,T,N,S,D,I,P,E,A,M,L,O,R,F,H,z,j="sizzle"+-new Date,W=e.document,U=0,B=0,q=s(),Y=s(),V=s(),X=!1,G=function(){return 0},K=1<<31,Q={}.hasOwnProperty,J=[],Z=J.pop,ee=J.push,te=J.push,ie=J.slice,ne=J.indexOf||function(e){for(var t=0,i=this.length;t<i;t++)if(this[t]===e)return t;return-1},se="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ae="[\\x20\\t\\r\\n\\f]",oe="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",re=oe.replace("w","w#"),de="\\["+ae+"*("+oe+")"+ae+"*(?:([*^$|!~]?=)"+ae+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+re+")|)|)"+ae+"*\\]",ce=":("+oe+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+de.replace(3,8)+")*)|.*)\\)|)",ue=new RegExp("^"+ae+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ae+"+$","g"),he=new RegExp("^"+ae+"*,"+ae+"*"),pe=new RegExp("^"+ae+"*([>+~]|"+ae+")"+ae+"*"),fe=new RegExp(ae+"*[+~]"),me=new RegExp("="+ae+"*([^\\]'\"]*)"+ae+"*\\]","g"),ge=new RegExp(ce),ve=new RegExp("^"+re+"$"),be={ID:new RegExp("^#("+oe+")"),CLASS:new RegExp("^\\.("+oe+")"),TAG:new RegExp("^("+oe.replace("w","w*")+")"),ATTR:new RegExp("^"+de),PSEUDO:new RegExp("^"+ce),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ae+"*(even|odd|(([+-]|)(\\d*)n|)"+ae+"*(?:([+-]|)"+ae+"*(\\d+)|))"+ae+"*\\)|)","i"),bool:new RegExp("^(?:"+se+")$","i"),needsContext:new RegExp("^"+ae+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ae+"*((?:-\\d)?\\d*)"+ae+"*\\)|)(?=[^-]|$)","i")},_e=/^[^{]+\{\s*\[native \w/,$e=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ye=/^(?:input|select|textarea|button)$/i,we=/^h\d$/i,Ce=/'|\\/g,xe=new RegExp("\\\\([\\da-f]{1,6}"+ae+"?|("+ae+")|.)","ig"),ke=function(e,t,i){var n="0x"+t-65536;return n!==n||i?t:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)};try{te.apply(J=ie.call(W.childNodes),W.childNodes),J[W.childNodes.length].nodeType}catch(e){te={apply:J.length?function(e,t){ee.apply(e,ie.call(t))}:function(e,t){for(var i=e.length,n=0;e[i++]=t[n++];);e.length=i-1}}}D=i.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},k=i.support={},A=i.setDocument=function(e){var t=e?e.ownerDocument||e:W,i=t.parentWindow;return t!==M&&9===t.nodeType&&t.documentElement?(M=t,L=t.documentElement,O=!D(t),i&&i.frameElement&&i.attachEvent("onbeforeunload",function(){A()}),k.attributes=o(function(e){return e.innerHTML="<a href='#'></a>",r("type|href|height|width",d,"#"===e.firstChild.getAttribute("href")),r(se,l,null==e.getAttribute("disabled")),e.className="i",!e.getAttribute("className")}),k.input=o(function(e){return e.innerHTML="<input>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")}),r("value",c,k.attributes&&k.input),k.getElementsByTagName=o(function(e){return e.appendChild(t.createComment("")),!e.getElementsByTagName("*").length}),k.getElementsByClassName=o(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),k.getById=o(function(e){return L.appendChild(e).id=j,!t.getElementsByName||!t.getElementsByName(j).length}),k.getById?(N.find.ID=function(e,t){if(void 0!==t.getElementById&&O){var i=t.getElementById(e);return i&&i.parentNode?[i]:[]}},N.filter.ID=function(e){var t=e.replace(xe,ke);return function(e){return e.getAttribute("id")===t}}):(delete N.find.ID,N.filter.ID=function(e){var t=e.replace(xe,ke);return function(e){var i=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return i&&i.value===t}}),N.find.TAG=k.getElementsByTagName?function(e,t){if(void 0!==t.getElementsByTagName)return t.getElementsByTagName(e)}:function(e,t){var i,n=[],s=0,a=t.getElementsByTagName(e);if("*"===e){for(;i=a[s++];)1===i.nodeType&&n.push(i);return n}return a},N.find.CLASS=k.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&O)return t.getElementsByClassName(e)},F=[],R=[],(k.qsa=n(t.querySelectorAll))&&(o(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||R.push("\\["+ae+"*(?:value|"+se+")"),e.querySelectorAll(":checked").length||R.push(":checked")}),o(function(e){var i=t.createElement("input");i.setAttribute("type","hidden"),e.appendChild(i).setAttribute("t",""),e.querySelectorAll("[t^='']").length&&R.push("[*^$]="+ae+"*(?:''|\"\")"),e.querySelectorAll(":enabled").length||R.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),R.push(",.*:")})),(k.matchesSelector=n(H=L.webkitMatchesSelector||L.mozMatchesSelector||L.oMatchesSelector||L.msMatchesSelector))&&o(function(e){k.disconnectedMatch=H.call(e,"div"),H.call(e,"[s!='']:x"),F.push("!=",ce)}),R=R.length&&new RegExp(R.join("|")),F=F.length&&new RegExp(F.join("|")),z=n(L.contains)||L.compareDocumentPosition?function(e,t){var i=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},k.sortDetached=o(function(e){return 1&e.compareDocumentPosition(t.createElement("div"))}),G=L.compareDocumentPosition?function(e,i){if(e===i)return X=!0,0;var n=i.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(i);return n?1&n||!k.sortDetached&&i.compareDocumentPosition(e)===n?e===t||z(W,e)?-1:i===t||z(W,i)?1:E?ne.call(E,e)-ne.call(E,i):0:4&n?-1:1:e.compareDocumentPosition?-1:1}:function(e,i){var n,s=0,a=e.parentNode,o=i.parentNode,r=[e],l=[i];if(e===i)return X=!0,0;if(!a||!o)return e===t?-1:i===t?1:a?-1:o?1:E?ne.call(E,e)-ne.call(E,i):0;if(a===o)return u(e,i);for(n=e;n=n.parentNode;)r.unshift(n);for(n=i;n=n.parentNode;)l.unshift(n);for(;r[s]===l[s];)s++;return s?u(r[s],l[s]):r[s]===W?-1:l[s]===W?1:0},t):M},i.matches=function(e,t){return i(e,null,null,t)},i.matchesSelector=function(e,t){if((e.ownerDocument||e)!==M&&A(e),t=t.replace(me,"='$1']"),k.matchesSelector&&O&&(!F||!F.test(t))&&(!R||!R.test(t)))try{var n=H.call(e,t);if(n||k.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){}return i(t,M,null,[e]).length>0},i.contains=function(e,t){return(e.ownerDocument||e)!==M&&A(e),z(e,t)},i.attr=function(e,t){(e.ownerDocument||e)!==M&&A(e);var i=N.attrHandle[t.toLowerCase()],n=i&&Q.call(N.attrHandle,t.toLowerCase())?i(e,t,!O):void 0;return void 0===n?k.attributes||!O?e.getAttribute(t):(n=e.getAttributeNode(t))&&n.specified?n.value:null:n},i.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},i.uniqueSort=function(e){var t,i=[],n=0,s=0;if(X=!k.detectDuplicates,E=!k.sortStable&&e.slice(0),e.sort(G),X){for(;t=e[s++];)t===e[s]&&(n=i.push(s));for(;n--;)e.splice(i[n],1)}return e},S=i.getText=function(e){var t,i="",n=0,s=e.nodeType;if(s){if(1===s||9===s||11===s){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=S(e)}else if(3===s||4===s)return e.nodeValue}else for(;t=e[n];n++)i+=S(t);return i},N=i.selectors={cacheLength:50,createPseudo:a,match:be,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(xe,ke),e[3]=(e[4]||e[5]||"").replace(xe,ke),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||i.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&i.error(e[0]),e},PSEUDO:function(e){var t,i=!e[5]&&e[2];return be.CHILD.test(e[0])?null:(e[3]&&void 0!==e[4]?e[2]=e[4]:i&&ge.test(i)&&(t=p(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(xe,ke).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=q[e+" "];return t||(t=new RegExp("(^|"+ae+")"+e+"("+ae+"|$)"))&&q(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(s){var a=i.attr(s,e);return null==a?"!="===t:!t||(a+="","="===t?a===n:"!="===t?a!==n:"^="===t?n&&0===a.indexOf(n):"*="===t?n&&a.indexOf(n)>-1:"$="===t?n&&a.slice(-n.length)===n:"~="===t?(" "+a+" ").indexOf(n)>-1:"|="===t&&(a===n||a.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,i,n,s){var a="nth"!==e.slice(0,3),o="last"!==e.slice(-4),r="of-type"===t;return 1===n&&0===s?function(e){return!!e.parentNode}:function(t,i,l){var d,c,u,h,p,f,m=a!==o?"nextSibling":"previousSibling",g=t.parentNode,v=r&&t.nodeName.toLowerCase(),b=!l&&!r;if(g){if(a){for(;m;){for(u=t;u=u[m];)if(r?u.nodeName.toLowerCase()===v:1===u.nodeType)return!1;f=m="only"===e&&!f&&"nextSibling"}return!0}if(f=[o?g.firstChild:g.lastChild],o&&b){for(p=(d=(c=g[j]||(g[j]={}))[e]||[])[0]===U&&d[1],h=d[0]===U&&d[2],u=p&&g.childNodes[p];u=++p&&u&&u[m]||(h=p=0)||f.pop();)if(1===u.nodeType&&++h&&u===t){c[e]=[U,p,h];break}}else if(b&&(d=(t[j]||(t[j]={}))[e])&&d[0]===U)h=d[1];else for(;(u=++p&&u&&u[m]||(h=p=0)||f.pop())&&((r?u.nodeName.toLowerCase()!==v:1!==u.nodeType)||!++h||(b&&((u[j]||(u[j]={}))[e]=[U,h]),u!==t)););return(h-=s)===n||h%n==0&&h/n>=0}}},PSEUDO:function(e,t){var n,s=N.pseudos[e]||N.setFilters[e.toLowerCase()]||i.error("unsupported pseudo: "+e);return s[j]?s(t):s.length>1?(n=[e,e,"",t],N.setFilters.hasOwnProperty(e.toLowerCase())?a(function(e,i){for(var n,a=s(e,t),o=a.length;o--;)e[n=ne.call(e,a[o])]=!(i[n]=a[o])}):function(e){return s(e,0,n)}):s}},pseudos:{not:a(function(e){var t=[],i=[],n=I(e.replace(ue,"$1"));return n[j]?a(function(e,t,i,s){for(var a,o=n(e,null,s,[]),r=e.length;r--;)(a=o[r])&&(e[r]=!(t[r]=a))}):function(e,s,a){return t[0]=e,n(t,null,a,i),!i.pop()}}),has:a(function(e){return function(t){return i(e,t).length>0}}),contains:a(function(e){return function(t){return(t.textContent||t.innerText||S(t)).indexOf(e)>-1}}),lang:a(function(e){return ve.test(e||"")||i.error("unsupported lang: "+e),e=e.replace(xe,ke).toLowerCase(),function(t){var i;do{if(i=O?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(i=i.toLowerCase())===e||0===i.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var i=e.location&&e.location.hash;return i&&i.slice(1)===t.id},root:function(e){return e===L},focus:function(e){return e===M.activeElement&&(!M.hasFocus||M.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!N.pseudos.empty(e)},header:function(e){return we.test(e.nodeName)},input:function(e){return ye.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},first:h(function(){return[0]}),last:h(function(e,t){return[t-1]}),eq:h(function(e,t,i){return[i<0?i+t:i]}),even:h(function(e,t){for(var i=0;i<t;i+=2)e.push(i);return e}),odd:h(function(e,t){for(var i=1;i<t;i+=2)e.push(i);return e}),lt:h(function(e,t,i){for(var n=i<0?i+t:i;--n>=0;)e.push(n);return e}),gt:h(function(e,t,i){for(var n=i<0?i+t:i;++n<t;)e.push(n);return e})}};for(x in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})N.pseudos[x]=function(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}(x);for(x in{submit:!0,reset:!0})N.pseudos[x]=function(e){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===e}}(x);I=i.compile=function(e,t){var i,n=[],s=[],a=V[e+" "];if(!a){for(t||(t=p(e)),i=t.length;i--;)(a=_(t[i]))[j]?n.push(a):s.push(a);a=V(e,$(s,n))}return a},N.pseudos.nth=N.pseudos.eq,C.prototype=N.filters=N.pseudos,N.setFilters=new C,k.sortStable=j.split("").sort(G).join("")===j,A(),[0,0].sort(G),k.detectDuplicates=X,le.find=i,le.expr=i.selectors,le.expr[":"]=le.expr.pseudos,le.unique=i.uniqueSort,le.text=i.getText,le.isXMLDoc=i.isXML,le.contains=i.contains}(e);var Ce={};le.Callbacks=function(e){var i,s,a,o,r,l,d=[],c=!(e="string"==typeof e?Ce[e]||n(e):le.extend({},e)).once&&[],u=function(t){for(s=e.memory&&t,a=!0,r=l||0,l=0,o=d.length,i=!0;d&&r<o;r++)if(!1===d[r].apply(t[0],t[1])&&e.stopOnFalse){s=!1;break}i=!1,d&&(c?c.length&&u(c.shift()):s?d=[]:h.disable())},h={add:function(){if(d){var t=d.length;!function t(i){le.each(i,function(i,n){var s=le.type(n);"function"===s?e.unique&&h.has(n)||d.push(n):n&&n.length&&"string"!==s&&t(n)})}(arguments),i?o=d.length:s&&(l=t,u(s))}return this},remove:function(){return d&&le.each(arguments,function(e,t){for(var n;(n=le.inArray(t,d,n))>-1;)d.splice(n,1),i&&(n<=o&&o--,n<=r&&r--)}),this},has:function(e){return e?le.inArray(e,d)>-1:!(!d||!d.length)},empty:function(){return d=[],o=0,this},disable:function(){return d=c=s=t,this},disabled:function(){return!d},lock:function(){return c=t,s||h.disable(),this},locked:function(){return!c},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],!d||a&&!c||(i?c.push(t):u(t)),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!a}};return h},le.extend({Deferred:function(e){var t=[["resolve","done",le.Callbacks("once memory"),"resolved"],["reject","fail",le.Callbacks("once memory"),"rejected"],["notify","progress",le.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},then:function(){var e=arguments;return le.Deferred(function(i){le.each(t,function(t,a){var o=a[0],r=le.isFunction(e[t])&&e[t];s[a[1]](function(){var e=r&&r.apply(this,arguments);e&&le.isFunction(e.promise)?e.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[o+"With"](this===n?i.promise():this,r?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?le.extend(e,n):n}},s={};return n.pipe=n.then,le.each(t,function(e,a){var o=a[2],r=a[3];n[a[1]]=o.add,r&&o.add(function(){i=r},t[1^e][2].disable,t[2][2].lock),s[a[0]]=function(){return s[a[0]+"With"](this===s?n:this,arguments),this},s[a[0]+"With"]=o.fireWith}),n.promise(s),e&&e.call(s,s),s},when:function(e){var t,i,n,s=0,a=ne.call(arguments),o=a.length,r=1!==o||e&&le.isFunction(e.promise)?o:0,l=1===r?e:le.Deferred(),d=function(e,i,n){return function(s){i[e]=this,n[e]=arguments.length>1?ne.call(arguments):s,n===t?l.notifyWith(i,n):--r||l.resolveWith(i,n)}};if(o>1)for(t=new Array(o),i=new Array(o),n=new Array(o);s<o;s++)a[s]&&le.isFunction(a[s].promise)?a[s].promise().done(d(s,n,a)).fail(l.reject).progress(d(s,i,t)):--r;return r||l.resolveWith(n,a),l.promise()}}),le.support=function(t){var i,n,s,a,o,r,l,d,c,u=G.createElement("div");if(u.setAttribute("className","t"),u.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",i=u.getElementsByTagName("*")||[],!(n=u.getElementsByTagName("a")[0])||!n.style||!i.length)return t;r=(a=G.createElement("select")).appendChild(G.createElement("option")),s=u.getElementsByTagName("input")[0],n.style.cssText="top:1px;float:left;opacity:.5",t.getSetAttribute="t"!==u.className,t.leadingWhitespace=3===u.firstChild.nodeType,t.tbody=!u.getElementsByTagName("tbody").length,t.htmlSerialize=!!u.getElementsByTagName("link").length,t.style=/top/.test(n.getAttribute("style")),t.hrefNormalized="/a"===n.getAttribute("href"),t.opacity=/^0.5/.test(n.style.opacity),t.cssFloat=!!n.style.cssFloat,t.checkOn=!!s.value,t.optSelected=r.selected,t.enctype=!!G.createElement("form").enctype,t.html5Clone="<:nav></:nav>"!==G.createElement("nav").cloneNode(!0).outerHTML,t.inlineBlockNeedsLayout=!1,t.shrinkWrapBlocks=!1,t.pixelPosition=!1,t.deleteExpando=!0,t.noCloneEvent=!0,t.reliableMarginRight=!0,t.boxSizingReliable=!0,s.checked=!0,t.noCloneChecked=s.cloneNode(!0).checked,a.disabled=!0,t.optDisabled=!r.disabled;try{delete u.test}catch(e){t.deleteExpando=!1}(s=G.createElement("input")).setAttribute("value",""),t.input=""===s.getAttribute("value"),s.value="t",s.setAttribute("type","radio"),t.radioValue="t"===s.value,s.setAttribute("checked","t"),s.setAttribute("name","t"),(o=G.createDocumentFragment()).appendChild(s),t.appendChecked=s.checked,t.checkClone=o.cloneNode(!0).cloneNode(!0).lastChild.checked,u.attachEvent&&(u.attachEvent("onclick",function(){t.noCloneEvent=!1}),u.cloneNode(!0).click());for(c in{submit:!0,change:!0,focusin:!0})u.setAttribute(l="on"+c,"t"),t[c+"Bubbles"]=l in e||!1===u.attributes[l].expando;u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle="content-box"===u.style.backgroundClip;for(c in le(t))break;return t.ownLast="0"!==c,le(function(){var i,n,s,a="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",o=G.getElementsByTagName("body")[0];o&&((i=G.createElement("div")).style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",o.appendChild(i).appendChild(u),u.innerHTML="<table><tr><td></td><td>t</td></tr></table>",(s=u.getElementsByTagName("td"))[0].style.cssText="padding:0;margin:0;border:0;display:none",d=0===s[0].offsetHeight,s[0].style.display="",s[1].style.display="none",t.reliableHiddenOffsets=d&&0===s[0].offsetHeight,u.innerHTML="",u.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",le.swap(o,null!=o.style.zoom?{zoom:1}:{},function(){t.boxSizing=4===u.offsetWidth}),e.getComputedStyle&&(t.pixelPosition="1%"!==(e.getComputedStyle(u,null)||{}).top,t.boxSizingReliable="4px"===(e.getComputedStyle(u,null)||{width:"4px"}).width,(n=u.appendChild(G.createElement("div"))).style.cssText=u.style.cssText=a,n.style.marginRight=n.style.width="0",u.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(n,null)||{}).marginRight)),typeof u.style.zoom!==V&&(u.innerHTML="",u.style.cssText=a+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=3===u.offsetWidth,u.style.display="block",u.innerHTML="<div></div>",u.firstChild.style.width="5px",t.shrinkWrapBlocks=3!==u.offsetWidth,t.inlineBlockNeedsLayout&&(o.style.zoom=1)),o.removeChild(i),i=u=s=n=null)}),i=a=o=r=n=s=null,t}({});var xe=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,ke=/([A-Z])/g;le.extend({cache:{},noData:{applet:!0,embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return!!(e=e.nodeType?le.cache[e[le.expando]]:e[le.expando])&&!r(e)},data:function(e,t,i){return s(e,t,i)},removeData:function(e,t){return a(e,t)},_data:function(e,t,i){return s(e,t,i,!0)},_removeData:function(e,t){return a(e,t,!0)},acceptData:function(e){if(e.nodeType&&1!==e.nodeType&&9!==e.nodeType)return!1;var t=e.nodeName&&le.noData[e.nodeName.toLowerCase()];return!t||!0!==t&&e.getAttribute("classid")===t}}),le.fn.extend({data:function(e,i){var n,s,a=null,r=0,l=this[0];if(e===t){if(this.length&&(a=le.data(l),1===l.nodeType&&!le._data(l,"parsedAttrs"))){for(n=l.attributes;r<n.length;r++)0===(s=n[r].name).indexOf("data-")&&o(l,s=le.camelCase(s.slice(5)),a[s]);le._data(l,"parsedAttrs",!0)}return a}return"object"==typeof e?this.each(function(){le.data(this,e)}):arguments.length>1?this.each(function(){le.data(this,e,i)}):l?o(l,e,le.data(l,e)):null},removeData:function(e){return this.each(function(){le.removeData(this,e)})}}),le.extend({queue:function(e,t,i){var n;if(e)return t=(t||"fx")+"queue",n=le._data(e,t),i&&(!n||le.isArray(i)?n=le._data(e,t,le.makeArray(i)):n.push(i)),n||[]},dequeue:function(e,t){t=t||"fx";var i=le.queue(e,t),n=i.length,s=i.shift(),a=le._queueHooks(e,t);"inprogress"===s&&(s=i.shift(),n--),s&&("fx"===t&&i.unshift("inprogress"),delete a.stop,s.call(e,function(){le.dequeue(e,t)},a)),!n&&a&&a.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return le._data(e,i)||le._data(e,i,{empty:le.Callbacks("once memory").add(function(){le._removeData(e,t+"queue"),le._removeData(e,i)})})}}),le.fn.extend({queue:function(e,i){var n=2;return"string"!=typeof e&&(i=e,e="fx",n--),arguments.length<n?le.queue(this[0],e):i===t?this:this.each(function(){var t=le.queue(this,e,i);le._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&le.dequeue(this,e)})},dequeue:function(e){return this.each(function(){le.dequeue(this,e)})},delay:function(e,t){return e=le.fx?le.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,i){var n=setTimeout(t,e);i.stop=function(){clearTimeout(n)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,i){var n,s=1,a=le.Deferred(),o=this,r=this.length,l=function(){--s||a.resolveWith(o,[o])};for("string"!=typeof e&&(i=e,e=t),e=e||"fx";r--;)(n=le._data(o[r],e+"queueHooks"))&&n.empty&&(s++,n.empty.add(l));return l(),a.promise(i)}});var Te,Ne,Se=/[\t\r\n\f]/g,De=/\r/g,Ie=/^(?:input|select|textarea|button|object)$/i,Pe=/^(?:a|area)$/i,Ee=/^(?:checked|selected)$/i,Ae=le.support.getSetAttribute,Me=le.support.input;le.fn.extend({attr:function(e,t){return le.access(this,le.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){le.removeAttr(this,e)})},prop:function(e,t){return le.access(this,le.prop,e,t,arguments.length>1)},removeProp:function(e){return e=le.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(e){}})},addClass:function(e){var t,i,n,s,a,o=0,r=this.length,l="string"==typeof e&&e;if(le.isFunction(e))return this.each(function(t){le(this).addClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(ce)||[];o<r;o++)if(i=this[o],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(Se," "):" ")){for(a=0;s=t[a++];)n.indexOf(" "+s+" ")<0&&(n+=s+" ");i.className=le.trim(n)}return this},removeClass:function(e){var t,i,n,s,a,o=0,r=this.length,l=0===arguments.length||"string"==typeof e&&e;if(le.isFunction(e))return this.each(function(t){le(this).removeClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(ce)||[];o<r;o++)if(i=this[o],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(Se," "):"")){for(a=0;s=t[a++];)for(;n.indexOf(" "+s+" ")>=0;)n=n.replace(" "+s+" "," ");i.className=e?le.trim(n):""}return this},toggleClass:function(e,t){var i=typeof e,n="boolean"==typeof t;return le.isFunction(e)?this.each(function(i){le(this).toggleClass(e.call(this,i,this.className,t),t)}):this.each(function(){if("string"===i)for(var s,a=0,o=le(this),r=t,l=e.match(ce)||[];s=l[a++];)o[(r=n?r:!o.hasClass(s))?"addClass":"removeClass"](s);else i!==V&&"boolean"!==i||(this.className&&le._data(this,"__className__",this.className),this.className=this.className||!1===e?"":le._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",i=0,n=this.length;i<n;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(Se," ").indexOf(t)>=0)return!0;return!1},val:function(e){var i,n,s,a=this[0];{if(arguments.length)return s=le.isFunction(e),this.each(function(i){var a;1===this.nodeType&&(null==(a=s?e.call(this,i,le(this).val()):e)?a="":"number"==typeof a?a+="":le.isArray(a)&&(a=le.map(a,function(e){return null==e?"":e+""})),(n=le.valHooks[this.type]||le.valHooks[this.nodeName.toLowerCase()])&&"set"in n&&n.set(this,a,"value")!==t||(this.value=a))});if(a)return(n=le.valHooks[a.type]||le.valHooks[a.nodeName.toLowerCase()])&&"get"in n&&(i=n.get(a,"value"))!==t?i:"string"==typeof(i=a.value)?i.replace(De,""):null==i?"":i}}}),le.extend({valHooks:{option:{get:function(e){var t=le.find.attr(e,"value");return null!=t?t:e.text}},select:{get:function(e){for(var t,i,n=e.options,s=e.selectedIndex,a="select-one"===e.type||s<0,o=a?null:[],r=a?s+1:n.length,l=s<0?r:a?s:0;l<r;l++)if(((i=n[l]).selected||l===s)&&(le.support.optDisabled?!i.disabled:null===i.getAttribute("disabled"))&&(!i.parentNode.disabled||!le.nodeName(i.parentNode,"optgroup"))){if(t=le(i).val(),a)return t;o.push(t)}return o},set:function(e,t){for(var i,n,s=e.options,a=le.makeArray(t),o=s.length;o--;)((n=s[o]).selected=le.inArray(le(n).val(),a)>=0)&&(i=!0);return i||(e.selectedIndex=-1),a}}},attr:function(e,i,n){var s,a,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return typeof e.getAttribute===V?le.prop(e,i,n):(1===o&&le.isXMLDoc(e)||(i=i.toLowerCase(),s=le.attrHooks[i]||(le.expr.match.bool.test(i)?Ne:Te)),n===t?s&&"get"in s&&null!==(a=s.get(e,i))?a:null==(a=le.find.attr(e,i))?t:a:null!==n?s&&"set"in s&&(a=s.set(e,n,i))!==t?a:(e.setAttribute(i,n+""),n):void le.removeAttr(e,i))},removeAttr:function(e,t){var i,n,s=0,a=t&&t.match(ce);if(a&&1===e.nodeType)for(;i=a[s++];)n=le.propFix[i]||i,le.expr.match.bool.test(i)?Me&&Ae||!Ee.test(i)?e[n]=!1:e[le.camelCase("default-"+i)]=e[n]=!1:le.attr(e,i,""),e.removeAttribute(Ae?i:n)},attrHooks:{type:{set:function(e,t){if(!le.support.radioValue&&"radio"===t&&le.nodeName(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}},propFix:{for:"htmlFor",class:"className"},prop:function(e,i,n){var s,a,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return(1!==o||!le.isXMLDoc(e))&&(i=le.propFix[i]||i,a=le.propHooks[i]),n!==t?a&&"set"in a&&(s=a.set(e,n,i))!==t?s:e[i]=n:a&&"get"in a&&null!==(s=a.get(e,i))?s:e[i]},propHooks:{tabIndex:{get:function(e){var t=le.find.attr(e,"tabindex");return t?parseInt(t,10):Ie.test(e.nodeName)||Pe.test(e.nodeName)&&e.href?0:-1}}}}),Ne={set:function(e,t,i){return!1===t?le.removeAttr(e,i):Me&&Ae||!Ee.test(i)?e.setAttribute(!Ae&&le.propFix[i]||i,i):e[le.camelCase("default-"+i)]=e[i]=!0,i}},le.each(le.expr.match.bool.source.match(/\w+/g),function(e,i){var n=le.expr.attrHandle[i]||le.find.attr;le.expr.attrHandle[i]=Me&&Ae||!Ee.test(i)?function(e,i,s){var a=le.expr.attrHandle[i],o=s?t:(le.expr.attrHandle[i]=t)!=n(e,i,s)?i.toLowerCase():null;return le.expr.attrHandle[i]=a,o}:function(e,i,n){return n?t:e[le.camelCase("default-"+i)]?i.toLowerCase():null}}),Me&&Ae||(le.attrHooks.value={set:function(e,t,i){if(!le.nodeName(e,"input"))return Te&&Te.set(e,t,i);e.defaultValue=t}}),Ae||(Te={set:function(e,i,n){var s=e.getAttributeNode(n);return s||e.setAttributeNode(s=e.ownerDocument.createAttribute(n)),s.value=i+="","value"===n||i===e.getAttribute(n)?i:t}},le.expr.attrHandle.id=le.expr.attrHandle.name=le.expr.attrHandle.coords=function(e,i,n){var s;return n?t:(s=e.getAttributeNode(i))&&""!==s.value?s.value:null},le.valHooks.button={get:function(e,i){var n=e.getAttributeNode(i);return n&&n.specified?n.value:t},set:Te.set},le.attrHooks.contenteditable={set:function(e,t,i){Te.set(e,""!==t&&t,i)}},le.each(["width","height"],function(e,t){le.attrHooks[t]={set:function(e,i){if(""===i)return e.setAttribute(t,"auto"),i}}})),le.support.hrefNormalized||le.each(["href","src"],function(e,t){le.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),le.support.style||(le.attrHooks.style={get:function(e){return e.style.cssText||t},set:function(e,t){return e.style.cssText=t+""}}),le.support.optSelected||(le.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),le.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){le.propFix[this.toLowerCase()]=this}),le.support.enctype||(le.propFix.enctype="encoding"),le.each(["radio","checkbox"],function(){le.valHooks[this]={set:function(e,t){if(le.isArray(t))return e.checked=le.inArray(le(e).val(),t)>=0}},le.support.checkOn||(le.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var Le=/^(?:input|select|textarea)$/i,Oe=/^key/,Re=/^(?:mouse|contextmenu)|click/,Fe=/^(?:focusinfocus|focusoutblur)$/,He=/^([^.]*)(?:\.(.+)|)$/;le.event={global:{},add:function(e,i,n,s,a){var o,r,l,d,c,u,h,p,f,m,g,v=le._data(e);if(v){for(n.handler&&(n=(d=n).handler,a=d.selector),n.guid||(n.guid=le.guid++),(r=v.events)||(r=v.events={}),(u=v.handle)||((u=v.handle=function(e){return typeof le===V||e&&le.event.triggered===e.type?t:le.event.dispatch.apply(u.elem,arguments)}).elem=e),l=(i=(i||"").match(ce)||[""]).length;l--;)f=g=(o=He.exec(i[l])||[])[1],m=(o[2]||"").split(".").sort(),f&&(c=le.event.special[f]||{},f=(a?c.delegateType:c.bindType)||f,c=le.event.special[f]||{},h=le.extend({type:f,origType:g,data:s,handler:n,guid:n.guid,selector:a,needsContext:a&&le.expr.match.needsContext.test(a),namespace:m.join(".")},d),(p=r[f])||((p=r[f]=[]).delegateCount=0,c.setup&&!1!==c.setup.call(e,s,m,u)||(e.addEventListener?e.addEventListener(f,u,!1):e.attachEvent&&e.attachEvent("on"+f,u))),c.add&&(c.add.call(e,h),h.handler.guid||(h.handler.guid=n.guid)),a?p.splice(p.delegateCount++,0,h):p.push(h),le.event.global[f]=!0);e=null}},remove:function(e,t,i,n,s){var a,o,r,l,d,c,u,h,p,f,m,g=le.hasData(e)&&le._data(e);if(g&&(c=g.events)){for(d=(t=(t||"").match(ce)||[""]).length;d--;)if(r=He.exec(t[d])||[],p=m=r[1],f=(r[2]||"").split(".").sort(),p){for(u=le.event.special[p]||{},h=c[p=(n?u.delegateType:u.bindType)||p]||[],r=r[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=a=h.length;a--;)o=h[a],!s&&m!==o.origType||i&&i.guid!==o.guid||r&&!r.test(o.namespace)||n&&n!==o.selector&&("**"!==n||!o.selector)||(h.splice(a,1),o.selector&&h.delegateCount--,u.remove&&u.remove.call(e,o));l&&!h.length&&(u.teardown&&!1!==u.teardown.call(e,f,g.handle)||le.removeEvent(e,p,g.handle),delete c[p])}else for(p in c)le.event.remove(e,p+t[d],i,n,!0);le.isEmptyObject(c)&&(delete g.handle,le._removeData(e,"events"))}},trigger:function(i,n,s,a){var o,r,l,d,c,u,h,p=[s||G],f=oe.call(i,"type")?i.type:i,m=oe.call(i,"namespace")?i.namespace.split("."):[];if(l=u=s=s||G,3!==s.nodeType&&8!==s.nodeType&&!Fe.test(f+le.event.triggered)&&(f.indexOf(".")>=0&&(f=(m=f.split(".")).shift(),m.sort()),r=f.indexOf(":")<0&&"on"+f,i=i[le.expando]?i:new le.Event(f,"object"==typeof i&&i),i.isTrigger=a?2:3,i.namespace=m.join("."),i.namespace_re=i.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,i.result=t,i.target||(i.target=s),n=null==n?[i]:le.makeArray(n,[i]),c=le.event.special[f]||{},a||!c.trigger||!1!==c.trigger.apply(s,n))){if(!a&&!c.noBubble&&!le.isWindow(s)){for(d=c.delegateType||f,Fe.test(d+f)||(l=l.parentNode);l;l=l.parentNode)p.push(l),u=l;u===(s.ownerDocument||G)&&p.push(u.defaultView||u.parentWindow||e)}for(h=0;(l=p[h++])&&!i.isPropagationStopped();)i.type=h>1?d:c.bindType||f,(o=(le._data(l,"events")||{})[i.type]&&le._data(l,"handle"))&&o.apply(l,n),(o=r&&l[r])&&le.acceptData(l)&&o.apply&&!1===o.apply(l,n)&&i.preventDefault();if(i.type=f,!a&&!i.isDefaultPrevented()&&(!c._default||!1===c._default.apply(p.pop(),n))&&le.acceptData(s)&&r&&s[f]&&!le.isWindow(s)){(u=s[r])&&(s[r]=null),le.event.triggered=f;try{s[f]()}catch(e){}le.event.triggered=t,u&&(s[r]=u)}return i.result}},dispatch:function(e){e=le.event.fix(e);var i,n,s,a,o,r=[],l=ne.call(arguments),d=(le._data(this,"events")||{})[e.type]||[],c=le.event.special[e.type]||{};if(l[0]=e,e.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,e)){for(r=le.event.handlers.call(this,e,d),i=0;(a=r[i++])&&!e.isPropagationStopped();)for(e.currentTarget=a.elem,o=0;(s=a.handlers[o++])&&!e.isImmediatePropagationStopped();)e.namespace_re&&!e.namespace_re.test(s.namespace)||(e.handleObj=s,e.data=s.data,(n=((le.event.special[s.origType]||{}).handle||s.handler).apply(a.elem,l))!==t&&!1===(e.result=n)&&(e.preventDefault(),e.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,i){var n,s,a,o,r=[],l=i.delegateCount,d=e.target;if(l&&d.nodeType&&(!e.button||"click"!==e.type))for(;d!=this;d=d.parentNode||this)if(1===d.nodeType&&(!0!==d.disabled||"click"!==e.type)){for(a=[],o=0;o<l;o++)a[n=(s=i[o]).selector+" "]===t&&(a[n]=s.needsContext?le(n,this).index(d)>=0:le.find(n,this,null,[d]).length),a[n]&&a.push(s);a.length&&r.push({elem:d,handlers:a})}return l<i.length&&r.push({elem:this,handlers:i.slice(l)}),r},fix:function(e){if(e[le.expando])return e;var t,i,n,s=e.type,a=e,o=this.fixHooks[s];for(o||(this.fixHooks[s]=o=Re.test(s)?this.mouseHooks:Oe.test(s)?this.keyHooks:{}),n=o.props?this.props.concat(o.props):this.props,e=new le.Event(a),t=n.length;t--;)e[i=n[t]]=a[i];return e.target||(e.target=a.srcElement||G),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,o.filter?o.filter(e,a):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,i){var n,s,a,o=i.button,r=i.fromElement;return null==e.pageX&&null!=i.clientX&&(a=(s=e.target.ownerDocument||G).documentElement,n=s.body,e.pageX=i.clientX+(a&&a.scrollLeft||n&&n.scrollLeft||0)-(a&&a.clientLeft||n&&n.clientLeft||0),e.pageY=i.clientY+(a&&a.scrollTop||n&&n.scrollTop||0)-(a&&a.clientTop||n&&n.clientTop||0)),!e.relatedTarget&&r&&(e.relatedTarget=r===e.target?i.toElement:r),e.which||o===t||(e.which=1&o?1:2&o?3:4&o?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==c()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){if(this===c()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(le.nodeName(this,"input")&&"checkbox"===this.type&&this.click)return this.click(),!1},_default:function(e){return le.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,i,n){var s=le.extend(new le.Event,i,{type:e,isSimulated:!0,originalEvent:{}});n?le.event.trigger(s,null,t):le.event.dispatch.call(t,s),s.isDefaultPrevented()&&i.preventDefault()}},le.removeEvent=G.removeEventListener?function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i,!1)}:function(e,t,i){var n="on"+t;e.detachEvent&&(typeof e[n]===V&&(e[n]=null),e.detachEvent(n,i))},le.Event=function(e,t){if(!(this instanceof le.Event))return new le.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||!1===e.returnValue||e.getPreventDefault&&e.getPreventDefault()?l:d):this.type=e,t&&le.extend(this,t),this.timeStamp=e&&e.timeStamp||le.now(),this[le.expando]=!0},le.Event.prototype={isDefaultPrevented:d,isPropagationStopped:d,isImmediatePropagationStopped:d,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=l,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=l,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=l,this.stopPropagation()}},le.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){le.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,n=this,s=e.relatedTarget,a=e.handleObj;return s&&(s===n||le.contains(n,s))||(e.type=a.origType,i=a.handler.apply(this,arguments),e.type=t),i}}}),le.support.submitBubbles||(le.event.special.submit={setup:function(){if(le.nodeName(this,"form"))return!1;le.event.add(this,"click._submit keypress._submit",function(e){var i=e.target,n=le.nodeName(i,"input")||le.nodeName(i,"button")?i.form:t;n&&!le._data(n,"submitBubbles")&&(le.event.add(n,"submit._submit",function(e){e._submit_bubble=!0}),le._data(n,"submitBubbles",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&le.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){if(le.nodeName(this,"form"))return!1;le.event.remove(this,"._submit")}}),le.support.changeBubbles||(le.event.special.change={setup:function(){if(Le.test(this.nodeName))return"checkbox"!==this.type&&"radio"!==this.type||(le.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),le.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),le.event.simulate("change",this,e,!0)})),!1;le.event.add(this,"beforeactivate._change",function(e){var t=e.target;Le.test(t.nodeName)&&!le._data(t,"changeBubbles")&&(le.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||le.event.simulate("change",this.parentNode,e,!0)}),le._data(t,"changeBubbles",!0))})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type)return e.handleObj.handler.apply(this,arguments)},teardown:function(){return le.event.remove(this,"._change"),!Le.test(this.nodeName)}}),le.support.focusinBubbles||le.each({focus:"focusin",blur:"focusout"},function(e,t){var i=0,n=function(e){le.event.simulate(t,e.target,le.event.fix(e),!0)};le.event.special[t]={setup:function(){0==i++&&G.addEventListener(e,n,!0)},teardown:function(){0==--i&&G.removeEventListener(e,n,!0)}}}),le.fn.extend({on:function(e,i,n,s,a){var o,r;if("object"==typeof e){"string"!=typeof i&&(n=n||i,i=t);for(o in e)this.on(o,i,n,e[o],a);return this}if(null==n&&null==s?(s=i,n=i=t):null==s&&("string"==typeof i?(s=n,n=t):(s=n,n=i,i=t)),!1===s)s=d;else if(!s)return this;return 1===a&&(r=s,(s=function(e){return le().off(e),r.apply(this,arguments)}).guid=r.guid||(r.guid=le.guid++)),this.each(function(){le.event.add(this,e,s,n,i)})},one:function(e,t,i,n){return this.on(e,t,i,n,1)},off:function(e,i,n){var s,a;if(e&&e.preventDefault&&e.handleObj)return s=e.handleObj,le(e.delegateTarget).off(s.namespace?s.origType+"."+s.namespace:s.origType,s.selector,s.handler),this;if("object"==typeof e){for(a in e)this.off(a,i,e[a]);return this}return!1!==i&&"function"!=typeof i||(n=i,i=t),!1===n&&(n=d),this.each(function(){le.event.remove(this,e,n,i)})},trigger:function(e,t){return this.each(function(){le.event.trigger(e,t,this)})},triggerHandler:function(e,t){var i=this[0];if(i)return le.event.trigger(e,t,i,!0)}});var ze=/^.[^:#\[\.,]*$/,je=/^(?:parents|prev(?:Until|All))/,We=le.expr.match.needsContext,Ue={children:!0,contents:!0,next:!0,prev:!0};le.fn.extend({find:function(e){var t,i=[],n=this,s=n.length;if("string"!=typeof e)return this.pushStack(le(e).filter(function(){for(t=0;t<s;t++)if(le.contains(n[t],this))return!0}));for(t=0;t<s;t++)le.find(e,n[t],i);return i=this.pushStack(s>1?le.unique(i):i),i.selector=this.selector?this.selector+" "+e:e,i},has:function(e){var t,i=le(e,this),n=i.length;return this.filter(function(){for(t=0;t<n;t++)if(le.contains(this,i[t]))return!0})},not:function(e){return this.pushStack(h(this,e||[],!0))},filter:function(e){return this.pushStack(h(this,e||[],!1))},is:function(e){return!!h(this,"string"==typeof e&&We.test(e)?le(e):e||[],!1).length},closest:function(e,t){for(var i,n=0,s=this.length,a=[],o=We.test(e)||"string"!=typeof e?le(e,t||this.context):0;n<s;n++)for(i=this[n];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(o?o.index(i)>-1:1===i.nodeType&&le.find.matchesSelector(i,e))){i=a.push(i);break}return this.pushStack(a.length>1?le.unique(a):a)},index:function(e){return e?"string"==typeof e?le.inArray(this[0],le(e)):le.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var i="string"==typeof e?le(e,t):le.makeArray(e&&e.nodeType?[e]:e),n=le.merge(this.get(),i);return this.pushStack(le.unique(n))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),le.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return le.dir(e,"parentNode")},parentsUntil:function(e,t,i){return le.dir(e,"parentNode",i)},next:function(e){return u(e,"nextSibling")},prev:function(e){return u(e,"previousSibling")},nextAll:function(e){return le.dir(e,"nextSibling")},prevAll:function(e){return le.dir(e,"previousSibling")},nextUntil:function(e,t,i){return le.dir(e,"nextSibling",i)},prevUntil:function(e,t,i){return le.dir(e,"previousSibling",i)},siblings:function(e){return le.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return le.sibling(e.firstChild)},contents:function(e){return le.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:le.merge([],e.childNodes)}},function(e,t){le.fn[e]=function(i,n){var s=le.map(this,t,i);return"Until"!==e.slice(-5)&&(n=i),n&&"string"==typeof n&&(s=le.filter(n,s)),this.length>1&&(Ue[e]||(s=le.unique(s)),je.test(e)&&(s=s.reverse())),this.pushStack(s)}}),le.extend({filter:function(e,t,i){var n=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?le.find.matchesSelector(n,e)?[n]:[]:le.find.matches(e,le.grep(t,function(e){return 1===e.nodeType}))},dir:function(e,i,n){for(var s=[],a=e[i];a&&9!==a.nodeType&&(n===t||1!==a.nodeType||!le(a).is(n));)1===a.nodeType&&s.push(a),a=a[i];return s},sibling:function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i}});var Be="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",qe=/ jQuery\d+="(?:null|\d+)"/g,Ye=new RegExp("<(?:"+Be+")[\\s/>]","i"),Ve=/^\s+/,Xe=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Ge=/<([\w:]+)/,Ke=/<tbody/i,Qe=/<|&#?\w+;/,Je=/<(?:script|style|link)/i,Ze=/^(?:checkbox|radio)$/i,et=/checked\s*(?:[^=]|=\s*.checked.)/i,tt=/^$|\/(?:java|ecma)script/i,it=/^true\/(.*)/,nt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,st={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:le.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},at=p(G).appendChild(G.createElement("div"));st.optgroup=st.option,st.tbody=st.tfoot=st.colgroup=st.caption=st.thead,st.th=st.td,le.fn.extend({text:function(e){return le.access(this,function(e){return e===t?le.text(this):this.empty().append((this[0]&&this[0].ownerDocument||G).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||f(this,e).appendChild(e)})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=f(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var i,n=e?le.filter(e,this):this,s=0;null!=(i=n[s]);s++)t||1!==i.nodeType||le.cleanData($(i)),i.parentNode&&(t&&le.contains(i.ownerDocument,i)&&v($(i,"script")),i.parentNode.removeChild(i));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&le.cleanData($(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&le.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return le.clone(this,e,t)})},html:function(e){return le.access(this,function(e){var i=this[0]||{},n=0,s=this.length;if(e===t)return 1===i.nodeType?i.innerHTML.replace(qe,""):t;if("string"==typeof e&&!Je.test(e)&&(le.support.htmlSerialize||!Ye.test(e))&&(le.support.leadingWhitespace||!Ve.test(e))&&!st[(Ge.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(Xe,"<$1></$2>");try{for(;n<s;n++)1===(i=this[n]||{}).nodeType&&(le.cleanData($(i,!1)),i.innerHTML=e);i=0}catch(e){}}i&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=le.map(this,function(e){return[e.nextSibling,e.parentNode]}),t=0;return this.domManip(arguments,function(i){var n=e[t++],s=e[t++];s&&(n&&n.parentNode!==s&&(n=this.nextSibling),le(this).remove(),s.insertBefore(i,n))},!0),t?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t,i){e=te.apply([],e);var n,s,a,o,r,l,d=0,c=this.length,u=this,h=c-1,p=e[0],f=le.isFunction(p);if(f||!(c<=1||"string"!=typeof p||le.support.checkClone)&&et.test(p))return this.each(function(n){var s=u.eq(n);f&&(e[0]=p.call(this,n,s.html())),s.domManip(e,t,i)});if(c&&(l=le.buildFragment(e,this[0].ownerDocument,!1,!i&&this),n=l.firstChild,1===l.childNodes.length&&(l=n),n)){for(a=(o=le.map($(l,"script"),m)).length;d<c;d++)s=l,d!==h&&(s=le.clone(s,!0,!0),a&&le.merge(o,$(s,"script"))),t.call(this[d],s,d);if(a)for(r=o[o.length-1].ownerDocument,le.map(o,g),d=0;d<a;d++)s=o[d],tt.test(s.type||"")&&!le._data(s,"globalEval")&&le.contains(r,s)&&(s.src?le._evalUrl(s.src):le.globalEval((s.text||s.textContent||s.innerHTML||"").replace(nt,"")));l=n=null}return this}}),le.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){le.fn[e]=function(e){for(var i,n=0,s=[],a=le(e),o=a.length-1;n<=o;n++)i=n===o?this:this.clone(!0),le(a[n])[t](i),ie.apply(s,i.get());return this.pushStack(s)}}),le.extend({clone:function(e,t,i){var n,s,a,o,r,l=le.contains(e.ownerDocument,e);if(le.support.html5Clone||le.isXMLDoc(e)||!Ye.test("<"+e.nodeName+">")?a=e.cloneNode(!0):(at.innerHTML=e.outerHTML,at.removeChild(a=at.firstChild)),!(le.support.noCloneEvent&&le.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||le.isXMLDoc(e)))for(n=$(a),r=$(e),o=0;null!=(s=r[o]);++o)n[o]&&_(s,n[o]);if(t)if(i)for(r=r||$(e),n=n||$(a),o=0;null!=(s=r[o]);o++)b(s,n[o]);else b(e,a);return(n=$(a,"script")).length>0&&v(n,!l&&$(e,"script")),n=r=s=null,a},buildFragment:function(e,t,i,n){for(var s,a,o,r,l,d,c,u=e.length,h=p(t),f=[],m=0;m<u;m++)if((a=e[m])||0===a)if("object"===le.type(a))le.merge(f,a.nodeType?[a]:a);else if(Qe.test(a)){for(r=r||h.appendChild(t.createElement("div")),l=(Ge.exec(a)||["",""])[1].toLowerCase(),c=st[l]||st._default,r.innerHTML=c[1]+a.replace(Xe,"<$1></$2>")+c[2],s=c[0];s--;)r=r.lastChild;if(!le.support.leadingWhitespace&&Ve.test(a)&&f.push(t.createTextNode(Ve.exec(a)[0])),!le.support.tbody)for(s=(a="table"!==l||Ke.test(a)?"<table>"!==c[1]||Ke.test(a)?0:r:r.firstChild)&&a.childNodes.length;s--;)le.nodeName(d=a.childNodes[s],"tbody")&&!d.childNodes.length&&a.removeChild(d);for(le.merge(f,r.childNodes),r.textContent="";r.firstChild;)r.removeChild(r.firstChild);r=h.lastChild}else f.push(t.createTextNode(a));for(r&&h.removeChild(r),le.support.appendChecked||le.grep($(f,"input"),y),m=0;a=f[m++];)if((!n||-1===le.inArray(a,n))&&(o=le.contains(a.ownerDocument,a),r=$(h.appendChild(a),"script"),o&&v(r),i))for(s=0;a=r[s++];)tt.test(a.type||"")&&i.push(a);return r=null,h},cleanData:function(e,t){for(var i,n,s,a,o=0,r=le.expando,l=le.cache,d=le.support.deleteExpando,c=le.event.special;null!=(i=e[o]);o++)if((t||le.acceptData(i))&&(s=i[r],a=s&&l[s])){if(a.events)for(n in a.events)c[n]?le.event.remove(i,n):le.removeEvent(i,n,a.handle);l[s]&&(delete l[s],d?delete i[r]:typeof i.removeAttribute!==V?i.removeAttribute(r):i[r]=null,ee.push(s))}},_evalUrl:function(e){return le.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})}}),le.fn.extend({wrapAll:function(e){if(le.isFunction(e))return this.each(function(t){le(this).wrapAll(e.call(this,t))});if(this[0]){var t=le(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return le.isFunction(e)?this.each(function(t){le(this).wrapInner(e.call(this,t))}):this.each(function(){var t=le(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)})},wrap:function(e){var t=le.isFunction(e);return this.each(function(i){le(this).wrapAll(t?e.call(this,i):e)})},unwrap:function(){return this.parent().each(function(){le.nodeName(this,"body")||le(this).replaceWith(this.childNodes)}).end()}});var ot,rt,lt,dt=/alpha\([^)]*\)/i,ct=/opacity\s*=\s*([^)]*)/,ut=/^(top|right|bottom|left)$/,ht=/^(none|table(?!-c[ea]).+)/,pt=/^margin/,ft=new RegExp("^("+de+")(.*)$","i"),mt=new RegExp("^("+de+")(?!px)[a-z%]+$","i"),gt=new RegExp("^([+-])=("+de+")","i"),vt={BODY:"block"},bt={position:"absolute",visibility:"hidden",display:"block"},_t={letterSpacing:0,fontWeight:400},$t=["Top","Right","Bottom","Left"],yt=["Webkit","O","Moz","ms"];le.fn.extend({css:function(e,i){return le.access(this,function(e,i,n){var s,a,o={},r=0;if(le.isArray(i)){for(a=rt(e),s=i.length;r<s;r++)o[i[r]]=le.css(e,i[r],!1,a);return o}return n!==t?le.style(e,i,n):le.css(e,i)},e,i,arguments.length>1)},show:function(){return x(this,!0)},hide:function(){return x(this)},toggle:function(e){var t="boolean"==typeof e;return this.each(function(){(t?e:C(this))?le(this).show():le(this).hide()})}}),le.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=lt(e,"opacity");return""===i?"1":i}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:le.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,i,n,s){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var a,o,r,l=le.camelCase(i),d=e.style;if(i=le.cssProps[l]||(le.cssProps[l]=w(d,l)),r=le.cssHooks[i]||le.cssHooks[l],n===t)return r&&"get"in r&&(a=r.get(e,!1,s))!==t?a:d[i];if(!("string"==(o=typeof n)&&(a=gt.exec(n))&&(n=(a[1]+1)*a[2]+parseFloat(le.css(e,i)),o="number"),null==n||"number"===o&&isNaN(n)||("number"!==o||le.cssNumber[l]||(n+="px"),le.support.clearCloneStyle||""!==n||0!==i.indexOf("background")||(d[i]="inherit"),r&&"set"in r&&(n=r.set(e,n,s))===t)))try{d[i]=n}catch(e){}}},css:function(e,i,n,s){var a,o,r,l=le.camelCase(i);return i=le.cssProps[l]||(le.cssProps[l]=w(e.style,l)),(r=le.cssHooks[i]||le.cssHooks[l])&&"get"in r&&(o=r.get(e,!0,n)),o===t&&(o=lt(e,i,s)),"normal"===o&&i in _t&&(o=_t[i]),""===n||n?(a=parseFloat(o),!0===n||le.isNumeric(a)?a||0:o):o}}),e.getComputedStyle?(rt=function(t){return e.getComputedStyle(t,null)},lt=function(e,i,n){var s,a,o,r=n||rt(e),l=r?r.getPropertyValue(i)||r[i]:t,d=e.style;return r&&(""!==l||le.contains(e.ownerDocument,e)||(l=le.style(e,i)),mt.test(l)&&pt.test(i)&&(s=d.width,a=d.minWidth,o=d.maxWidth,d.minWidth=d.maxWidth=d.width=l,l=r.width,d.width=s,d.minWidth=a,d.maxWidth=o)),l}):G.documentElement.currentStyle&&(rt=function(e){return e.currentStyle},lt=function(e,i,n){var s,a,o,r=n||rt(e),l=r?r[i]:t,d=e.style;return null==l&&d&&d[i]&&(l=d[i]),mt.test(l)&&!ut.test(i)&&(s=d.left,(o=(a=e.runtimeStyle)&&a.left)&&(a.left=e.currentStyle.left),d.left="fontSize"===i?"1em":l,l=d.pixelLeft+"px",d.left=s,o&&(a.left=o)),""===l?"auto":l}),le.each(["height","width"],function(e,t){le.cssHooks[t]={get:function(e,i,n){if(i)return 0===e.offsetWidth&&ht.test(le.css(e,"display"))?le.swap(e,bt,function(){return N(e,t,n)}):N(e,t,n)},set:function(e,i,n){var s=n&&rt(e);return k(0,i,n?T(e,t,n,le.support.boxSizing&&"border-box"===le.css(e,"boxSizing",!1,s),s):0)}}}),le.support.opacity||(le.cssHooks.opacity={get:function(e,t){return ct.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var i=e.style,n=e.currentStyle,s=le.isNumeric(t)?"alpha(opacity="+100*t+")":"",a=n&&n.filter||i.filter||"";i.zoom=1,(t>=1||""===t)&&""===le.trim(a.replace(dt,""))&&i.removeAttribute&&(i.removeAttribute("filter"),""===t||n&&!n.filter)||(i.filter=dt.test(a)?a.replace(dt,s):a+" "+s)}}),le(function(){le.support.reliableMarginRight||(le.cssHooks.marginRight={get:function(e,t){if(t)return le.swap(e,{display:"inline-block"},lt,[e,"marginRight"])}}),!le.support.pixelPosition&&le.fn.position&&le.each(["top","left"],function(e,t){le.cssHooks[t]={get:function(e,i){if(i)return i=lt(e,t),mt.test(i)?le(e).position()[t]+"px":i}}})}),le.expr&&le.expr.filters&&(le.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||!le.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||le.css(e,"display"))},le.expr.filters.visible=function(e){return!le.expr.filters.hidden(e)}),le.each({margin:"",padding:"",border:"Width"},function(e,t){le.cssHooks[e+t]={expand:function(i){for(var n=0,s={},a="string"==typeof i?i.split(" "):[i];n<4;n++)s[e+$t[n]+t]=a[n]||a[n-2]||a[0];return s}},pt.test(e)||(le.cssHooks[e+t].set=k)});var wt=/%20/g,Ct=/\[\]$/,xt=/\r?\n/g,kt=/^(?:submit|button|image|reset|file)$/i,Tt=/^(?:input|select|textarea|keygen)/i;le.fn.extend({serialize:function(){return le.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=le.prop(this,"elements");return e?le.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!le(this).is(":disabled")&&Tt.test(this.nodeName)&&!kt.test(e)&&(this.checked||!Ze.test(e))}).map(function(e,t){var i=le(this).val();return null==i?null:le.isArray(i)?le.map(i,function(e){return{name:t.name,value:e.replace(xt,"\r\n")}}):{name:t.name,value:i.replace(xt,"\r\n")}}).get()}}),le.param=function(e,i){var n,s=[],a=function(e,t){t=le.isFunction(t)?t():null==t?"":t,s[s.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(i===t&&(i=le.ajaxSettings&&le.ajaxSettings.traditional),le.isArray(e)||e.jquery&&!le.isPlainObject(e))le.each(e,function(){a(this.name,this.value)});else for(n in e)I(n,e[n],i,a);return s.join("&").replace(wt,"+")},le.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){le.fn[t]=function(e,i){return arguments.length>0?this.on(t,null,e,i):this.trigger(t)}}),le.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)}});var Nt,St,Dt=le.now(),It=/\?/,Pt=/#.*$/,Et=/([?&])_=[^&]*/,At=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Mt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Lt=/^(?:GET|HEAD)$/,Ot=/^\/\//,Rt=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Ft=le.fn.load,Ht={},zt={},jt="*/".concat("*");try{St=X.href}catch(e){(St=G.createElement("a")).href="",St=St.href}Nt=Rt.exec(St.toLowerCase())||[],le.fn.load=function(e,i,n){if("string"!=typeof e&&Ft)return Ft.apply(this,arguments);var s,a,o,r=this,l=e.indexOf(" ");return l>=0&&(s=e.slice(l,e.length),e=e.slice(0,l)),le.isFunction(i)?(n=i,i=t):i&&"object"==typeof i&&(o="POST"),r.length>0&&le.ajax({url:e,type:o,dataType:"html",data:i}).done(function(e){a=arguments,r.html(s?le("<div>").append(le.parseHTML(e)).find(s):e)}).complete(n&&function(e,t){r.each(n,a||[e.responseText,t,e])}),this},le.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){le.fn[t]=function(e){return this.on(t,e)}}),le.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:St,type:"GET",isLocal:Mt.test(Nt[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":jt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":le.parseJSON,"text xml":le.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?A(A(e,le.ajaxSettings),t):A(le.ajaxSettings,e)},ajaxPrefilter:P(Ht),ajaxTransport:P(zt),ajax:function(e,i){function n(e,i,n,s){var a,u,b,_,y,C=i;2!==$&&($=2,l&&clearTimeout(l),c=t,r=s||"",w.readyState=e>0?4:0,a=e>=200&&e<300||304===e,n&&(_=M(h,w,n)),_=L(h,_,w,a),a?(h.ifModified&&((y=w.getResponseHeader("Last-Modified"))&&(le.lastModified[o]=y),(y=w.getResponseHeader("etag"))&&(le.etag[o]=y)),204===e||"HEAD"===h.type?C="nocontent":304===e?C="notmodified":(C=_.state,u=_.data,a=!(b=_.error))):(b=C,!e&&C||(C="error",e<0&&(e=0))),w.status=e,w.statusText=(i||C)+"",a?m.resolveWith(p,[u,C,w]):m.rejectWith(p,[w,C,b]),w.statusCode(v),v=t,d&&f.trigger(a?"ajaxSuccess":"ajaxError",[w,h,a?u:b]),g.fireWith(p,[w,C]),d&&(f.trigger("ajaxComplete",[w,h]),--le.active||le.event.trigger("ajaxStop")))}"object"==typeof e&&(i=e,e=t),i=i||{};var s,a,o,r,l,d,c,u,h=le.ajaxSetup({},i),p=h.context||h,f=h.context&&(p.nodeType||p.jquery)?le(p):le.event,m=le.Deferred(),g=le.Callbacks("once memory"),v=h.statusCode||{},b={},_={},$=0,y="canceled",w={readyState:0,getResponseHeader:function(e){var t;if(2===$){if(!u)for(u={};t=At.exec(r);)u[t[1].toLowerCase()]=t[2];t=u[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===$?r:null},setRequestHeader:function(e,t){var i=e.toLowerCase();return $||(e=_[i]=_[i]||e,b[e]=t),this},overrideMimeType:function(e){return $||(h.mimeType=e),this},statusCode:function(e){var t;if(e)if($<2)for(t in e)v[t]=[v[t],e[t]];else w.always(e[w.status]);return this},abort:function(e){var t=e||y;return c&&c.abort(t),n(0,t),this}};if(m.promise(w).complete=g.add,w.success=w.done,w.error=w.fail,h.url=((e||h.url||St)+"").replace(Pt,"").replace(Ot,Nt[1]+"//"),h.type=i.method||i.type||h.method||h.type,h.dataTypes=le.trim(h.dataType||"*").toLowerCase().match(ce)||[""],null==h.crossDomain&&(s=Rt.exec(h.url.toLowerCase()),h.crossDomain=!(!s||s[1]===Nt[1]&&s[2]===Nt[2]&&(s[3]||("http:"===s[1]?"80":"443"))===(Nt[3]||("http:"===Nt[1]?"80":"443")))),h.data&&h.processData&&"string"!=typeof h.data&&(h.data=le.param(h.data,h.traditional)),E(Ht,h,i,w),2===$)return w;(d=h.global)&&0==le.active++&&le.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!Lt.test(h.type),o=h.url,h.hasContent||(h.data&&(o=h.url+=(It.test(o)?"&":"?")+h.data,delete h.data),!1===h.cache&&(h.url=Et.test(o)?o.replace(Et,"$1_="+Dt++):o+(It.test(o)?"&":"?")+"_="+Dt++)),h.ifModified&&(le.lastModified[o]&&w.setRequestHeader("If-Modified-Since",le.lastModified[o]),le.etag[o]&&w.setRequestHeader("If-None-Match",le.etag[o])),(h.data&&h.hasContent&&!1!==h.contentType||i.contentType)&&w.setRequestHeader("Content-Type",h.contentType),w.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+jt+"; q=0.01":""):h.accepts["*"]);for(a in h.headers)w.setRequestHeader(a,h.headers[a]);if(h.beforeSend&&(!1===h.beforeSend.call(p,w,h)||2===$))return w.abort();y="abort";for(a in{success:1,error:1,complete:1})w[a](h[a]);if(c=E(zt,h,i,w)){w.readyState=1,d&&f.trigger("ajaxSend",[w,h]),h.async&&h.timeout>0&&(l=setTimeout(function(){w.abort("timeout")},h.timeout));try{$=1,c.send(b,n)}catch(e){if(!($<2))throw e;n(-1,e)}}else n(-1,"No Transport");return w},getJSON:function(e,t,i){return le.get(e,t,i,"json")},getScript:function(e,i){return le.get(e,t,i,"script")}}),le.each(["get","post"],function(e,i){le[i]=function(e,n,s,a){return le.isFunction(n)&&(a=a||s,s=n,n=t),le.ajax({url:e,type:i,dataType:a,data:n,success:s})}}),le.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return le.globalEval(e),e}}}),le.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),le.ajaxTransport("script",function(e){if(e.crossDomain){var i,n=G.head||le("head")[0]||G.documentElement;return{send:function(t,s){(i=G.createElement("script")).async=!0,e.scriptCharset&&(i.charset=e.scriptCharset),i.src=e.url,i.onload=i.onreadystatechange=function(e,t){(t||!i.readyState||/loaded|complete/.test(i.readyState))&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),i=null,t||s(200,"success"))},n.insertBefore(i,n.firstChild)},abort:function(){i&&i.onload(t,!0)}}}});var Wt=[],Ut=/(=)\?(?=&|$)|\?\?/;le.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Wt.pop()||le.expando+"_"+Dt++;return this[e]=!0,e}}),le.ajaxPrefilter("json jsonp",function(i,n,s){var a,o,r,l=!1!==i.jsonp&&(Ut.test(i.url)?"url":"string"==typeof i.data&&!(i.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ut.test(i.data)&&"data");if(l||"jsonp"===i.dataTypes[0])return a=i.jsonpCallback=le.isFunction(i.jsonpCallback)?i.jsonpCallback():i.jsonpCallback,l?i[l]=i[l].replace(Ut,"$1"+a):!1!==i.jsonp&&(i.url+=(It.test(i.url)?"&":"?")+i.jsonp+"="+a),i.converters["script json"]=function(){return r||le.error(a+" was not called"),r[0]},i.dataTypes[0]="json",o=e[a],e[a]=function(){r=arguments},s.always(function(){e[a]=o,i[a]&&(i.jsonpCallback=n.jsonpCallback,Wt.push(a)),r&&le.isFunction(o)&&o(r[0]),r=o=t}),"script"});var Bt,qt,Yt=0,Vt=e.ActiveXObject&&function(){var e;for(e in Bt)Bt[e](t,!0)};le.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&O()||R()}:O,qt=le.ajaxSettings.xhr(),le.support.cors=!!qt&&"withCredentials"in qt,(qt=le.support.ajax=!!qt)&&le.ajaxTransport(function(i){if(!i.crossDomain||le.support.cors){var n;return{send:function(s,a){var o,r,l=i.xhr();if(i.username?l.open(i.type,i.url,i.async,i.username,i.password):l.open(i.type,i.url,i.async),i.xhrFields)for(r in i.xhrFields)l[r]=i.xhrFields[r];i.mimeType&&l.overrideMimeType&&l.overrideMimeType(i.mimeType),i.crossDomain||s["X-Requested-With"]||(s["X-Requested-With"]="XMLHttpRequest");try{for(r in s)l.setRequestHeader(r,s[r])}catch(e){}l.send(i.hasContent&&i.data||null),n=function(e,s){var r,d,c,u;try{if(n&&(s||4===l.readyState))if(n=t,o&&(l.onreadystatechange=le.noop,Vt&&delete Bt[o]),s)4!==l.readyState&&l.abort();else{u={},r=l.status,d=l.getAllResponseHeaders(),"string"==typeof l.responseText&&(u.text=l.responseText);try{c=l.statusText}catch(e){c=""}r||!i.isLocal||i.crossDomain?1223===r&&(r=204):r=u.text?200:404}}catch(e){s||a(-1,e)}u&&a(r,c,u,d)},i.async?4===l.readyState?setTimeout(n):(o=++Yt,Vt&&(Bt||(Bt={},le(e).unload(Vt)),Bt[o]=n),l.onreadystatechange=n):n()},abort:function(){n&&n(t,!0)}}}});var Xt,Gt,Kt=/^(?:toggle|show|hide)$/,Qt=new RegExp("^(?:([+-])=|)("+de+")([a-z%]*)$","i"),Jt=/queueHooks$/,Zt=[function(e,t,i){var n,s,a,o,r,l,d=this,c={},u=e.style,h=e.nodeType&&C(e),p=le._data(e,"fxshow");i.queue||(null==(r=le._queueHooks(e,"fx")).unqueued&&(r.unqueued=0,l=r.empty.fire,r.empty.fire=function(){r.unqueued||l()}),r.unqueued++,d.always(function(){d.always(function(){r.unqueued--,le.queue(e,"fx").length||r.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(i.overflow=[u.overflow,u.overflowX,u.overflowY],"inline"===le.css(e,"display")&&"none"===le.css(e,"float")&&(le.support.inlineBlockNeedsLayout&&"inline"!==S(e.nodeName)?u.zoom=1:u.display="inline-block")),i.overflow&&(u.overflow="hidden",le.support.shrinkWrapBlocks||d.always(function(){u.overflow=i.overflow[0],u.overflowX=i.overflow[1],u.overflowY=i.overflow[2]}));for(n in t)if(s=t[n],Kt.exec(s)){if(delete t[n],a=a||"toggle"===s,s===(h?"hide":"show"))continue;c[n]=p&&p[n]||le.style(e,n)}if(!le.isEmptyObject(c)){p?"hidden"in p&&(h=p.hidden):p=le._data(e,"fxshow",{}),a&&(p.hidden=!h),h?le(e).show():d.done(function(){le(e).hide()}),d.done(function(){var t;le._removeData(e,"fxshow");for(t in c)le.style(e,t,c[t])});for(n in c)o=H(h?p[n]:0,n,d),n in p||(p[n]=o.start,h&&(o.end=o.start,o.start="width"===n||"height"===n?1:0))}}],ei={"*":[function(e,t){var i=this.createTween(e,t),n=i.cur(),s=Qt.exec(t),a=s&&s[3]||(le.cssNumber[e]?"":"px"),o=(le.cssNumber[e]||"px"!==a&&+n)&&Qt.exec(le.css(i.elem,e)),r=1,l=20;if(o&&o[3]!==a){a=a||o[3],s=s||[],o=+n||1;do{o/=r=r||".5",le.style(i.elem,e,o+a)}while(r!==(r=i.cur()/n)&&1!==r&&--l)}return s&&(o=i.start=+o||+n||0,i.unit=a,i.end=s[1]?o+(s[1]+1)*s[2]:+s[2]),i}]};le.Animation=le.extend(z,{tweener:function(e,t){le.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var i,n=0,s=e.length;n<s;n++)i=e[n],ei[i]=ei[i]||[],ei[i].unshift(t)},prefilter:function(e,t){t?Zt.unshift(e):Zt.push(e)}}),le.Tween=W,W.prototype={constructor:W,init:function(e,t,i,n,s,a){this.elem=e,this.prop=i,this.easing=s||"swing",this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=a||(le.cssNumber[i]?"":"px")},cur:function(){var e=W.propHooks[this.prop];return e&&e.get?e.get(this):W.propHooks._default.get(this)},run:function(e){var t,i=W.propHooks[this.prop];return this.options.duration?this.pos=t=le.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):W.propHooks._default.set(this),this}},W.prototype.init.prototype=W.prototype,W.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=le.css(e.elem,e.prop,""))&&"auto"!==t?t:0:e.elem[e.prop]},set:function(e){le.fx.step[e.prop]?le.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[le.cssProps[e.prop]]||le.cssHooks[e.prop])?le.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},W.propHooks.scrollTop=W.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},le.each(["toggle","show","hide"],function(e,t){var i=le.fn[t];le.fn[t]=function(e,n,s){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(U(t,!0),e,n,s)}}),le.fn.extend({fadeTo:function(e,t,i,n){return this.filter(C).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(e,t,i,n){var s=le.isEmptyObject(e),a=le.speed(t,i,n),o=function(){var t=z(this,le.extend({},e),a);(s||le._data(this,"finish"))&&t.stop(!0)};return o.finish=o,s||!1===a.queue?this.each(o):this.queue(a.queue,o)},stop:function(e,i,n){var s=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=i,i=e,e=t),i&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",a=le.timers,o=le._data(this);if(i)o[i]&&o[i].stop&&s(o[i]);else for(i in o)o[i]&&o[i].stop&&Jt.test(i)&&s(o[i]);for(i=a.length;i--;)a[i].elem!==this||null!=e&&a[i].queue!==e||(a[i].anim.stop(n),t=!1,a.splice(i,1));!t&&n||le.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,i=le._data(this),n=i[e+"queue"],s=i[e+"queueHooks"],a=le.timers,o=n?n.length:0;for(i.finish=!0,le.queue(this,e,[]),s&&s.stop&&s.stop.call(this,!0),t=a.length;t--;)a[t].elem===this&&a[t].queue===e&&(a[t].anim.stop(!0),a.splice(t,1));for(t=0;t<o;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete i.finish})}}),le.each({slideDown:U("show"),slideUp:U("hide"),slideToggle:U("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){le.fn[e]=function(e,i,n){return this.animate(t,e,i,n)}}),le.speed=function(e,t,i){var n=e&&"object"==typeof e?le.extend({},e):{complete:i||!i&&t||le.isFunction(e)&&e,duration:e,easing:i&&t||t&&!le.isFunction(t)&&t};return n.duration=le.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in le.fx.speeds?le.fx.speeds[n.duration]:le.fx.speeds._default,null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){le.isFunction(n.old)&&n.old.call(this),n.queue&&le.dequeue(this,n.queue)},n},le.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},le.timers=[],le.fx=W.prototype.init,le.fx.tick=function(){var e,i=le.timers,n=0;for(Xt=le.now();n<i.length;n++)(e=i[n])()||i[n]!==e||i.splice(n--,1);i.length||le.fx.stop(),Xt=t},le.fx.timer=function(e){e()&&le.timers.push(e)&&le.fx.start()},le.fx.interval=13,le.fx.start=function(){Gt||(Gt=setInterval(le.fx.tick,le.fx.interval))},le.fx.stop=function(){clearInterval(Gt),Gt=null},le.fx.speeds={slow:600,fast:200,_default:400},le.fx.step={},le.expr&&le.expr.filters&&(le.expr.filters.animated=function(e){return le.grep(le.timers,function(t){return e===t.elem}).length}),le.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){le.offset.setOffset(this,e,t)});var i,n,s={top:0,left:0},a=this[0],o=a&&a.ownerDocument;if(o)return i=o.documentElement,le.contains(i,a)?(typeof a.getBoundingClientRect!==V&&(s=a.getBoundingClientRect()),n=B(o),{top:s.top+(n.pageYOffset||i.scrollTop)-(i.clientTop||0),left:s.left+(n.pageXOffset||i.scrollLeft)-(i.clientLeft||0)}):s},le.offset={setOffset:function(e,t,i){var n=le.css(e,"position");"static"===n&&(e.style.position="relative");var s,a,o=le(e),r=o.offset(),l=le.css(e,"top"),d=le.css(e,"left"),c={},u={};("absolute"===n||"fixed"===n)&&le.inArray("auto",[l,d])>-1?(s=(u=o.position()).top,a=u.left):(s=parseFloat(l)||0,a=parseFloat(d)||0),le.isFunction(t)&&(t=t.call(e,i,r)),null!=t.top&&(c.top=t.top-r.top+s),null!=t.left&&(c.left=t.left-r.left+a),"using"in t?t.using.call(e,c):o.css(c)}},le.fn.extend({position:function(){if(this[0]){var e,t,i={top:0,left:0},n=this[0];return"fixed"===le.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),le.nodeName(e[0],"html")||(i=e.offset()),i.top+=le.css(e[0],"borderTopWidth",!0),i.left+=le.css(e[0],"borderLeftWidth",!0)),{top:t.top-i.top-le.css(n,"marginTop",!0),left:t.left-i.left-le.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||K;e&&!le.nodeName(e,"html")&&"static"===le.css(e,"position");)e=e.offsetParent;return e||K})}}),le.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,i){var n=/Y/.test(i);le.fn[e]=function(s){return le.access(this,function(e,s,a){var o=B(e);if(a===t)return o?i in o?o[i]:o.document.documentElement[s]:e[s];o?o.scrollTo(n?le(o).scrollLeft():a,n?a:le(o).scrollTop()):e[s]=a},e,s,arguments.length,null)}}),le.each({Height:"height",Width:"width"},function(e,i){le.each({padding:"inner"+e,content:i,"":"outer"+e},function(n,s){le.fn[s]=function(s,a){var o=arguments.length&&(n||"boolean"!=typeof s),r=n||(!0===s||!0===a?"margin":"border");return le.access(this,function(i,n,s){var a;return le.isWindow(i)?i.document.documentElement["client"+e]:9===i.nodeType?(a=i.documentElement,Math.max(i.body["scroll"+e],a["scroll"+e],i.body["offset"+e],a["offset"+e],a["client"+e])):s===t?le.css(i,n,r):le.style(i,n,s,r)},i,o?s:t,o,null)}})}),le.fn.size=function(){return this.length},le.fn.andSelf=le.fn.addBack,"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=le:(e.jQuery=e.$=le,"function"==typeof define&&define.amd&&define("jquery",[],function(){return le}))}(window),window.puJsFileLoadCounter++,function(e,t){function i(t,i){var s,a,o,r=t.nodeName.toLowerCase();return"area"===r?(s=t.parentNode,a=s.name,!(!t.href||!a||"map"!==s.nodeName.toLowerCase())&&(!!(o=e("img[usemap=#"+a+"]")[0])&&n(o))):(/input|select|textarea|button|object/.test(r)?!t.disabled:"a"===r?t.href||i:i)&&n(t)}function n(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}var s=0,a=/^ui-id-\d+$/;e.ui=e.ui||{},e.extend(e.ui,{version:"1.10.2",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({focus:function(t){return function(i,n){return"number"==typeof i?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),n&&n.call(t)},i)}):t.apply(this,arguments)}}(e.fn.focus),scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(t){if(void 0!==t)return this.css("zIndex",t);if(this.length)for(var i,n,s=e(this[0]);s.length&&s[0]!==document;){if(("absolute"===(i=s.css("position"))||"relative"===i||"fixed"===i)&&(n=parseInt(s.css("zIndex"),10),!isNaN(n)&&0!==n))return n;s=s.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++s)})},removeUniqueId:function(){return this.each(function(){a.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,n){return!!e.data(t,n[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var n=e.attr(t,"tabindex"),s=isNaN(n);return(s||n>=0)&&i(t,!s)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(t,i){function n(t,i,n,a){return e.each(s,function(){i-=parseFloat(e.css(t,"padding"+this))||0,n&&(i-=parseFloat(e.css(t,"border"+this+"Width"))||0),a&&(i-=parseFloat(e.css(t,"margin"+this))||0)}),i}var s="Width"===i?["Left","Right"]:["Top","Bottom"],a=i.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+i]=function(t){return void 0===t?o["inner"+i].call(this):this.each(function(){e(this).css(a,n(this,t)+"px")})},e.fn["outer"+i]=function(t,s){return"number"!=typeof t?o["outer"+i].call(this,t):this.each(function(){e(this).css(a,n(this,t,!0,s)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,e.camelCase(i)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,i,n){var s,a=e.ui[t].prototype;for(s in n)a.plugins[s]=a.plugins[s]||[],a.plugins[s].push([i,n[s]])},call:function(e,t,i){var n,s=e.plugins[t];if(s&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(n=0;n<s.length;n++)e.options[s[n][0]]&&s[n][1].apply(e.element,i)}},hasScroll:function(t,i){if("hidden"===e(t).css("overflow"))return!1;var n=i&&"left"===i?"scrollLeft":"scrollTop",s=!1;return t[n]>0||(t[n]=1,s=t[n]>0,t[n]=0,s)}})}(jQuery),function(e,t){var i=0,n=Array.prototype.slice,s=e.cleanData;e.cleanData=function(t){for(var i,n=0;null!=(i=t[n]);n++)try{e(i).triggerHandler("remove")}catch(e){}s(t)},e.widget=function(t,i,n){var s,a,o,r,l={},d=t.split(".")[0];t=t.split(".")[1],s=d+"-"+t,n||(n=i,i=e.Widget),e.expr[":"][s.toLowerCase()]=function(t){return!!e.data(t,s)},e[d]=e[d]||{},a=e[d][t],o=e[d][t]=function(e,t){if(!this._createWidget)return new o(e,t);arguments.length&&this._createWidget(e,t)},e.extend(o,a,{version:n.version,_proto:e.extend({},n),_childConstructors:[]}),(r=new i).options=e.widget.extend({},r.options),e.each(n,function(t,n){e.isFunction(n)?l[t]=function(){var e=function(){return i.prototype[t].apply(this,arguments)},s=function(e){return i.prototype[t].apply(this,e)};return function(){var t,i=this._super,a=this._superApply;return this._super=e,this._superApply=s,t=n.apply(this,arguments),this._super=i,this._superApply=a,t}}():l[t]=n}),o.prototype=e.widget.extend(r,{widgetEventPrefix:a?r.widgetEventPrefix:t},l,{constructor:o,namespace:d,widgetName:t,widgetFullName:s}),a?(e.each(a._childConstructors,function(t,i){var n=i.prototype;e.widget(n.namespace+"."+n.widgetName,o,i._proto)}),delete a._childConstructors):i._childConstructors.push(o),e.widget.bridge(t,o)},e.widget.extend=function(t){for(var i,s,a=n.call(arguments,1),o=0,r=a.length;o<r;o++)for(i in a[o])s=a[o][i],a[o].hasOwnProperty(i)&&void 0!==s&&(e.isPlainObject(s)?t[i]=e.isPlainObject(t[i])?e.widget.extend({},t[i],s):e.widget.extend({},s):t[i]=s);return t},e.widget.bridge=function(t,i){var s=i.prototype.widgetFullName||t;e.fn[t]=function(a){var o="string"==typeof a,r=n.call(arguments,1),l=this;return a=!o&&r.length?e.widget.extend.apply(null,[a].concat(r)):a,o?this.each(function(){var i,n=e.data(this,s);return n?e.isFunction(n[a])&&"_"!==a.charAt(0)?(i=n[a].apply(n,r))!==n&&void 0!==i?(l=i&&i.jquery?l.pushStack(i.get()):i,!1):void 0:e.error("no such method '"+a+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+a+"'")}):this.each(function(){var t=e.data(this,s);t?t.option(a||{})._init():e.data(this,s,new i(a,this))}),l}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,n){n=e(n||this.defaultElement||this)[0],this.element=e(n),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),n!==this&&(e.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===n&&this.destroy()}}),this.document=e(n.style?n.ownerDocument:n.document||n),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(t,i){var n,s,a,o=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(o={},n=t.split("."),t=n.shift(),n.length){for(s=o[t]=e.widget.extend({},this.options[t]),a=0;a<n.length-1;a++)s[n[a]]=s[n[a]]||{},s=s[n[a]];if(t=n.pop(),void 0===i)return void 0===s[t]?null:s[t];s[t]=i}else{if(void 0===i)return void 0===this.options[t]?null:this.options[t];o[t]=i}return this._setOptions(o),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,i,n){var s,a=this;"boolean"!=typeof t&&(n=i,i=t,t=!1),n?(i=s=e(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,s=this.widget()),e.each(n,function(n,o){function r(){if(t||!0!==a.options.disabled&&!e(this).hasClass("ui-state-disabled"))return("string"==typeof o?a[o]:o).apply(a,arguments)}"string"!=typeof o&&(r.guid=o.guid=o.guid||r.guid||e.guid++);var l=n.match(/^(\w+)\s*(.*)$/),d=l[1]+a.eventNamespace,c=l[2];c?s.delegate(c,d,r):i.bind(d,r)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){var i=this;return setTimeout(function(){return("string"==typeof e?i[e]:e).apply(i,arguments)},t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,n){var s,a,o=this.options[t];if(n=n||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],a=i.originalEvent)for(s in a)s in i||(i[s]=a[s]);return this.element.trigger(i,n),!(e.isFunction(o)&&!1===o.apply(this.element[0],[i].concat(n))||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(n,s,a){"string"==typeof s&&(s={effect:s});var o,r=s?!0===s||"number"==typeof s?i:s.effect||i:t;"number"==typeof(s=s||{})&&(s={duration:s}),o=!e.isEmptyObject(s),s.complete=a,s.delay&&n.delay(s.delay),o&&e.effects&&e.effects.effect[r]?n[t](s):r!==t&&n[r]?n[r](s.duration,s.easing,a):n.queue(function(i){e(this)[t](),a&&a.call(n[0]),i()})}})}(jQuery),function(e,t){var i=!1;e(document).mouseup(function(){i=!1}),e.widget("ui.mouse",{version:"1.10.2",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(i){if(!0===e.data(i.target,t.widgetName+".preventClickEvent"))return e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!i){this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var n=this,s=1===t.which,a=!("string"!=typeof this.options.cancel||!t.target.nodeName)&&e(t.target).closest(this.options.cancel).length;return!(s&&!a&&this._mouseCapture(t))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(t),!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return n._mouseMove(e)},this._mouseUpDelegate=function(e){return n._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),i=!0,!0))}},_mouseMove:function(t){return e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,t),this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(e,t){e.widget("ui.draggable",e.ui.mouse,{version:"1.10.2",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(t){var i=this.options;return!(this.helper||i.disabled||e(t.target).closest(".ui-resizable-handle").length>0)&&(this.handle=this._getHandle(t),!!this.handle&&(e(!0===i.iframeFix?"iframe":i.iframeFix).each(function(){e("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0))},_mouseStart:function(t){var i=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),i.containment&&this._setContainment(),!1===this._trigger("start",t)?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,i){if(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),!i){var n=this._uiHash();if(!1===this._trigger("drag",t,n))return this._mouseUp({}),!1;this.position=n.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var i,n=this,s=!1,a=!1;for(e.ui.ddmanager&&!this.options.dropBehaviour&&(a=e.ui.ddmanager.drop(this,t)),this.dropped&&(a=this.dropped,this.dropped=!1),i=this.element[0];i&&(i=i.parentNode);)i===document&&(s=!0);return!(!s&&"original"===this.options.helper)&&("invalid"===this.options.revert&&!a||"valid"===this.options.revert&&a||!0===this.options.revert||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,a)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==n._trigger("stop",t)&&n._clear()}):!1!==this._trigger("stop",t)&&this._clear(),!1)},_mouseUp:function(t){return e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return!this.options.handle||!!e(t.target).closest(this.element.find(this.options.handle)).length},_createHelper:function(t){var i=this.options,n=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return n.parents("body").length||n.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),n[0]===this.element[0]||/(fixed|absolute)/.test(n.css("position"))||n.css("position","absolute"),n},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,n,s=this.options;if("parent"===s.containment&&(s.containment=this.helper[0].parentNode),"document"!==s.containment&&"window"!==s.containment||(this.containment=["document"===s.containment?0:e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"===s.containment?0:e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"===s.containment?0:e(window).scrollLeft())+e("document"===s.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"===s.containment?0:e(window).scrollTop())+(e("document"===s.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(s.containment)||s.containment.constructor===Array)s.containment.constructor===Array&&(this.containment=s.containment);else{if(i=e(s.containment),!(n=i[0]))return;t="hidden"!==e(n).css("overflow"),this.containment=[(parseInt(e(n).css("borderLeftWidth"),10)||0)+(parseInt(e(n).css("paddingLeft"),10)||0),(parseInt(e(n).css("borderTopWidth"),10)||0)+(parseInt(e(n).css("paddingTop"),10)||0),(t?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(e(n).css("borderRightWidth"),10)||0)-(parseInt(e(n).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(e(n).css("borderBottomWidth"),10)||0)-(parseInt(e(n).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=i}},_convertPositionTo:function(t,i){i||(i=this.position);var n="absolute"===t?1:-1,s="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(s[0].tagName);return{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():a?0:s.scrollTop())*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():a?0:s.scrollLeft())*n}},_generatePosition:function(t){var i,n,s,a,o=this.options,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(r[0].tagName),d=t.pageX,c=t.pageY;return this.originalPosition&&(this.containment&&(this.relative_container?(n=this.relative_container.offset(),i=[this.containment[0]+n.left,this.containment[1]+n.top,this.containment[2]+n.left,this.containment[3]+n.top]):i=this.containment,t.pageX-this.offset.click.left<i[0]&&(d=i[0]+this.offset.click.left),t.pageY-this.offset.click.top<i[1]&&(c=i[1]+this.offset.click.top),t.pageX-this.offset.click.left>i[2]&&(d=i[2]+this.offset.click.left),t.pageY-this.offset.click.top>i[3]&&(c=i[3]+this.offset.click.top)),o.grid&&(s=o.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,c=i?s-this.offset.click.top>=i[1]||s-this.offset.click.top>i[3]?s:s-this.offset.click.top>=i[1]?s-o.grid[1]:s+o.grid[1]:s,a=o.grid[0]?this.originalPageX+Math.round((d-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,d=i?a-this.offset.click.left>=i[0]||a-this.offset.click.left>i[2]?a:a-this.offset.click.left>=i[0]?a-o.grid[0]:a+o.grid[0]:a)),{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:r.scrollTop()),left:d-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:r.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,i,n){return n=n||this._uiHash(),e.ui.plugin.call(this,t,[i,n]),"drag"===t&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,i,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,i){var n=e(this).data("ui-draggable"),s=n.options,a=e.extend({},i,{item:n.element});n.sortables=[],e(s.connectToSortable).each(function(){var i=e.data(this,"ui-sortable");i&&!i.options.disabled&&(n.sortables.push({instance:i,shouldRevert:i.options.revert}),i.refreshPositions(),i._trigger("activate",t,a))})},stop:function(t,i){var n=e(this).data("ui-draggable"),s=e.extend({},i,{item:n.element});e.each(n.sortables,function(){this.instance.isOver?(this.instance.isOver=0,n.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,"original"===n.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,s))})},drag:function(t,i){var n=e(this).data("ui-draggable"),s=this;e.each(n.sortables,function(){var a=!1,o=this;this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(a=!0,e.each(n.sortables,function(){return this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this!==o&&this.instance._intersectsWith(this.instance.containerCache)&&e.contains(o.instance.element[0],this.instance.element[0])&&(a=!1),a})),a?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(s).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=n.offset.click.top,this.instance.offset.click.left=n.offset.click.left,this.instance.offset.parent.left-=n.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=n.offset.parent.top-this.instance.offset.parent.top,n._trigger("toSortable",t),n.dropped=this.instance.element,n.currentItem=n.element,this.instance.fromOutside=n),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),n._trigger("fromSortable",t),n.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(){var t=e("body"),i=e(this).data("ui-draggable").options;t.css("cursor")&&(i._cursor=t.css("cursor")),t.css("cursor",i.cursor)},stop:function(){var t=e(this).data("ui-draggable").options;t._cursor&&e("body").css("cursor",t._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,i){var n=e(i.helper),s=e(this).data("ui-draggable").options;n.css("opacity")&&(s._opacity=n.css("opacity")),n.css("opacity",s.opacity)},stop:function(t,i){var n=e(this).data("ui-draggable").options;n._opacity&&e(i.helper).css("opacity",n._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(){var t=e(this).data("ui-draggable");t.scrollParent[0]!==document&&"HTML"!==t.scrollParent[0].tagName&&(t.overflowOffset=t.scrollParent.offset())},drag:function(t){var i=e(this).data("ui-draggable"),n=i.options,s=!1;i.scrollParent[0]!==document&&"HTML"!==i.scrollParent[0].tagName?(n.axis&&"x"===n.axis||(i.overflowOffset.top+i.scrollParent[0].offsetHeight-t.pageY<n.scrollSensitivity?i.scrollParent[0].scrollTop=s=i.scrollParent[0].scrollTop+n.scrollSpeed:t.pageY-i.overflowOffset.top<n.scrollSensitivity&&(i.scrollParent[0].scrollTop=s=i.scrollParent[0].scrollTop-n.scrollSpeed)),n.axis&&"y"===n.axis||(i.overflowOffset.left+i.scrollParent[0].offsetWidth-t.pageX<n.scrollSensitivity?i.scrollParent[0].scrollLeft=s=i.scrollParent[0].scrollLeft+n.scrollSpeed:t.pageX-i.overflowOffset.left<n.scrollSensitivity&&(i.scrollParent[0].scrollLeft=s=i.scrollParent[0].scrollLeft-n.scrollSpeed))):(n.axis&&"x"===n.axis||(t.pageY-e(document).scrollTop()<n.scrollSensitivity?s=e(document).scrollTop(e(document).scrollTop()-n.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<n.scrollSensitivity&&(s=e(document).scrollTop(e(document).scrollTop()+n.scrollSpeed))),n.axis&&"y"===n.axis||(t.pageX-e(document).scrollLeft()<n.scrollSensitivity?s=e(document).scrollLeft(e(document).scrollLeft()-n.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<n.scrollSensitivity&&(s=e(document).scrollLeft(e(document).scrollLeft()+n.scrollSpeed)))),!1!==s&&e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(i,t)}}),e.ui.plugin.add("draggable","snap",{start:function(){var t=e(this).data("ui-draggable"),i=t.options;t.snapElements=[],e(i.snap.constructor!==String?i.snap.items||":data(ui-draggable)":i.snap).each(function(){var i=e(this),n=i.offset();this!==t.element[0]&&t.snapElements.push({item:this,width:i.outerWidth(),height:i.outerHeight(),top:n.top,left:n.left})})},drag:function(t,i){var n,s,a,o,r,l,d,c,u,h,p=e(this).data("ui-draggable"),f=p.options,m=f.snapTolerance,g=i.offset.left,v=g+p.helperProportions.width,b=i.offset.top,_=b+p.helperProportions.height;for(u=p.snapElements.length-1;u>=0;u--)l=(r=p.snapElements[u].left)+p.snapElements[u].width,c=(d=p.snapElements[u].top)+p.snapElements[u].height,r-m<g&&g<l+m&&d-m<b&&b<c+m||r-m<g&&g<l+m&&d-m<_&&_<c+m||r-m<v&&v<l+m&&d-m<b&&b<c+m||r-m<v&&v<l+m&&d-m<_&&_<c+m?("inner"!==f.snapMode&&(n=Math.abs(d-_)<=m,s=Math.abs(c-b)<=m,a=Math.abs(r-v)<=m,o=Math.abs(l-g)<=m,n&&(i.position.top=p._convertPositionTo("relative",{top:d-p.helperProportions.height,left:0}).top-p.margins.top),s&&(i.position.top=p._convertPositionTo("relative",{top:c,left:0}).top-p.margins.top),a&&(i.position.left=p._convertPositionTo("relative",{top:0,left:r-p.helperProportions.width}).left-p.margins.left),o&&(i.position.left=p._convertPositionTo("relative",{top:0,left:l}).left-p.margins.left)),h=n||s||a||o,"outer"!==f.snapMode&&(n=Math.abs(d-b)<=m,s=Math.abs(c-_)<=m,a=Math.abs(r-g)<=m,o=Math.abs(l-v)<=m,n&&(i.position.top=p._convertPositionTo("relative",{top:d,left:0}).top-p.margins.top),s&&(i.position.top=p._convertPositionTo("relative",{top:c-p.helperProportions.height,left:0}).top-p.margins.top),a&&(i.position.left=p._convertPositionTo("relative",{top:0,left:r}).left-p.margins.left),o&&(i.position.left=p._convertPositionTo("relative",{top:0,left:l-p.helperProportions.width}).left-p.margins.left)),!p.snapElements[u].snapping&&(n||s||a||o||h)&&p.options.snap.snap&&p.options.snap.snap.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[u].item})),p.snapElements[u].snapping=n||s||a||o||h):(p.snapElements[u].snapping&&p.options.snap.release&&p.options.snap.release.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[u].item})),p.snapElements[u].snapping=!1)}}),e.ui.plugin.add("draggable","stack",{start:function(){var t,i=this.data("ui-draggable").options,n=e.makeArray(e(i.stack)).sort(function(t,i){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(i).css("zIndex"),10)||0)});n.length&&(t=parseInt(e(n[0]).css("zIndex"),10)||0,e(n).each(function(i){e(this).css("zIndex",t+i)}),this.css("zIndex",t+n.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,i){var n=e(i.helper),s=e(this).data("ui-draggable").options;n.css("zIndex")&&(s._zIndex=n.css("zIndex")),n.css("zIndex",s.zIndex)},stop:function(t,i){var n=e(this).data("ui-draggable").options;n._zIndex&&e(i.helper).css("zIndex",n._zIndex)}})}(jQuery),function(e,t){function i(e,t,i){return e>t&&e<t+i}e.widget("ui.droppable",{version:"1.10.2",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t=this.options,i=t.accept;this.isover=!1,this.isout=!0,this.accept=e.isFunction(i)?i:function(e){return e.is(i)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},e.ui.ddmanager.droppables[t.scope]=e.ui.ddmanager.droppables[t.scope]||[],e.ui.ddmanager.droppables[t.scope].push(this),t.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var t=0,i=e.ui.ddmanager.droppables[this.options.scope];t<i.length;t++)i[t]===this&&i.splice(t,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,i){"accept"===t&&(this.accept=e.isFunction(i)?i:function(e){return e.is(i)}),e.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),i&&this._trigger("activate",t,this.ui(i))},_deactivate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),i&&this._trigger("deactivate",t,this.ui(i))},_over:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(i)))},_out:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(i)))},_drop:function(t,i){var n=i||e.ui.ddmanager.current,s=!1;return!(!n||(n.currentItem||n.element)[0]===this.element[0])&&(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var t=e.data(this,"ui-droppable");if(t.options.greedy&&!t.options.disabled&&t.options.scope===n.options.scope&&t.accept.call(t.element[0],n.currentItem||n.element)&&e.ui.intersect(n,e.extend(t,{offset:t.element.offset()}),t.options.tolerance))return s=!0,!1}),!s&&(!!this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(n)),this.element)))},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.ui.intersect=function(e,t,n){if(!t.offset)return!1;var s,a,o=(e.positionAbs||e.position.absolute).left,r=o+e.helperProportions.width,l=(e.positionAbs||e.position.absolute).top,d=l+e.helperProportions.height,c=t.offset.left,u=c+t.proportions.width,h=t.offset.top,p=h+t.proportions.height;switch(n){case"fit":return c<=o&&r<=u&&h<=l&&d<=p;case"intersect":return c<o+e.helperProportions.width/2&&r-e.helperProportions.width/2<u&&h<l+e.helperProportions.height/2&&d-e.helperProportions.height/2<p;case"pointer":return s=(e.positionAbs||e.position.absolute).left+(e.clickOffset||e.offset.click).left,a=(e.positionAbs||e.position.absolute).top+(e.clickOffset||e.offset.click).top,i(a,h,t.proportions.height)&&i(s,c,t.proportions.width);case"touch":return(l>=h&&l<=p||d>=h&&d<=p||l<h&&d>p)&&(o>=c&&o<=u||r>=c&&r<=u||o<c&&r>u);default:return!1}},e.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(t,i){var n,s,a=e.ui.ddmanager.droppables[t.options.scope]||[],o=i?i.type:null,r=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(n=0;n<a.length;n++)if(!(a[n].options.disabled||t&&!a[n].accept.call(a[n].element[0],t.currentItem||t.element))){for(s=0;s<r.length;s++)if(r[s]===a[n].element[0]){a[n].proportions.height=0;continue e}a[n].visible="none"!==a[n].element.css("display"),a[n].visible&&("mousedown"===o&&a[n]._activate.call(a[n],i),a[n].offset=a[n].element.offset(),a[n].proportions={width:a[n].element[0].offsetWidth,height:a[n].element[0].offsetHeight})}},drop:function(t,i){var n=!1;return e.each((e.ui.ddmanager.droppables[t.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance)&&(n=this._drop.call(this,i)||n),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,i)))}),n},dragStart:function(t,i){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)})},drag:function(t,i){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,i),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var n,s,a,o=e.ui.intersect(t,this,this.options.tolerance),r=!o&&this.isover?"isout":o&&!this.isover?"isover":null;r&&(this.options.greedy&&(s=this.options.scope,(a=this.element.parents(":data(ui-droppable)").filter(function(){return e.data(this,"ui-droppable").options.scope===s})).length&&((n=e.data(a[0],"ui-droppable")).greedyChild="isover"===r)),n&&"isover"===r&&(n.isover=!1,n.isout=!0,n._out.call(n,i)),this[r]=!0,this["isout"===r?"isover":"isout"]=!1,this["isover"===r?"_over":"_out"].call(this,i),n&&"isout"===r&&(n.isout=!1,n.isover=!0,n._over.call(n,i)))}})},dragStop:function(t,i){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)}}}(jQuery),function(e,t){function i(e){return parseInt(e,10)||0}function n(e){return!isNaN(parseInt(e,10))}e.widget("ui.resizable",e.ui.mouse,{version:"1.10.2",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var t,i,n,s,a=this,o=this.options;if(this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!o.aspectRatio,aspectRatio:o.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:o.helper||o.ghost||o.animate?o.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=o.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),t=this.handles.split(","),this.handles={},i=0;i<t.length;i++)n=e.trim(t[i]),(s=e("<div class='ui-resizable-handle "+("ui-resizable-"+n)+"'></div>")).css({zIndex:o.zIndex}),"se"===n&&s.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[n]=".ui-resizable-"+n,this.element.append(s);this._renderAxis=function(t){var i,n,s,a;t=t||this.element;for(i in this.handles)this.handles[i].constructor===String&&(this.handles[i]=e(this.handles[i],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(n=e(this.handles[i],this.element),a=/sw|ne|nw|se|n|s/.test(i)?n.outerHeight():n.outerWidth(),s=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),t.css(s,a),this._proportionallyResize()),e(this.handles[i]).length},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){a.resizing||(this.className&&(s=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),a.axis=s&&s[1]?s[1]:"se")}),o.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){o.disabled||(e(this).removeClass("ui-resizable-autohide"),a._handles.show())}).mouseleave(function(){o.disabled||a.resizing||(e(this).addClass("ui-resizable-autohide"),a._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,i=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_mouseCapture:function(t){var i,n,s=!1;for(i in this.handles)((n=e(this.handles[i])[0])===t.target||e.contains(n,t.target))&&(s=!0);return!this.options.disabled&&s},_mouseStart:function(t){var n,s,a,o=this.options,r=this.element.position(),l=this.element;return this.resizing=!0,/absolute/.test(l.css("position"))?l.css({position:"absolute",top:l.css("top"),left:l.css("left")}):l.is(".ui-draggable")&&l.css({position:"absolute",top:r.top,left:r.left}),this._renderProxy(),n=i(this.helper.css("left")),s=i(this.helper.css("top")),o.containment&&(n+=e(o.containment).scrollLeft()||0,s+=e(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:n,top:s},this.size=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()},this.originalSize=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()},this.originalPosition={left:n,top:s},this.sizeDiff={width:l.outerWidth()-l.width(),height:l.outerHeight()-l.height()},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof o.aspectRatio?o.aspectRatio:this.originalSize.width/this.originalSize.height||1,a=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===a?this.axis+"-resize":a),l.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var i,n=this.helper,s={},a=this.originalMousePosition,o=this.axis,r=this.position.top,l=this.position.left,d=this.size.width,c=this.size.height,u=t.pageX-a.left||0,h=t.pageY-a.top||0,p=this._change[o];return!!p&&(i=p.apply(this,[t,u,h]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(i=this._updateRatio(i,t)),i=this._respectSize(i,t),this._updateCache(i),this._propagate("resize",t),this.position.top!==r&&(s.top=this.position.top+"px"),this.position.left!==l&&(s.left=this.position.left+"px"),this.size.width!==d&&(s.width=this.size.width+"px"),this.size.height!==c&&(s.height=this.size.height+"px"),n.css(s),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(s)||this._trigger("resize",t,this.ui()),!1)},_mouseStop:function(t){this.resizing=!1;var i,n,s,a,o,r,l,d=this.options,c=this;return this._helper&&(s=(n=(i=this._proportionallyResizeElements).length&&/textarea/i.test(i[0].nodeName))&&e.ui.hasScroll(i[0],"left")?0:c.sizeDiff.height,a=n?0:c.sizeDiff.width,o={width:c.helper.width()-a,height:c.helper.height()-s},r=parseInt(c.element.css("left"),10)+(c.position.left-c.originalPosition.left)||null,l=parseInt(c.element.css("top"),10)+(c.position.top-c.originalPosition.top)||null,d.animate||this.element.css(e.extend(o,{top:l,left:r})),c.helper.height(c.size.height),c.helper.width(c.size.width),this._helper&&!d.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(e){var t,i,s,a,o,r=this.options;o={minWidth:n(r.minWidth)?r.minWidth:0,maxWidth:n(r.maxWidth)?r.maxWidth:1/0,minHeight:n(r.minHeight)?r.minHeight:0,maxHeight:n(r.maxHeight)?r.maxHeight:1/0},(this._aspectRatio||e)&&(t=o.minHeight*this.aspectRatio,s=o.minWidth/this.aspectRatio,i=o.maxHeight*this.aspectRatio,a=o.maxWidth/this.aspectRatio,t>o.minWidth&&(o.minWidth=t),s>o.minHeight&&(o.minHeight=s),i<o.maxWidth&&(o.maxWidth=i),a<o.maxHeight&&(o.maxHeight=a)),this._vBoundaries=o},_updateCache:function(e){this.offset=this.helper.offset(),n(e.left)&&(this.position.left=e.left),n(e.top)&&(this.position.top=e.top),n(e.height)&&(this.size.height=e.height),n(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,i=this.size,s=this.axis;return n(e.height)?e.width=e.height*this.aspectRatio:n(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===s&&(e.left=t.left+(i.width-e.width),e.top=null),"nw"===s&&(e.top=t.top+(i.height-e.height),e.left=t.left+(i.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,i=this.axis,s=n(e.width)&&t.maxWidth&&t.maxWidth<e.width,a=n(e.height)&&t.maxHeight&&t.maxHeight<e.height,o=n(e.width)&&t.minWidth&&t.minWidth>e.width,r=n(e.height)&&t.minHeight&&t.minHeight>e.height,l=this.originalPosition.left+this.originalSize.width,d=this.position.top+this.size.height,c=/sw|nw|w/.test(i),u=/nw|ne|n/.test(i);return o&&(e.width=t.minWidth),r&&(e.height=t.minHeight),s&&(e.width=t.maxWidth),a&&(e.height=t.maxHeight),o&&c&&(e.left=l-t.minWidth),s&&c&&(e.left=l-t.maxWidth),r&&u&&(e.top=d-t.minHeight),a&&u&&(e.top=d-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var e,t,i,n,s,a=this.helper||this.element;for(e=0;e<this._proportionallyResizeElements.length;e++){if(s=this._proportionallyResizeElements[e],!this.borderDif)for(this.borderDif=[],i=[s.css("borderTopWidth"),s.css("borderRightWidth"),s.css("borderBottomWidth"),s.css("borderLeftWidth")],n=[s.css("paddingTop"),s.css("paddingRight"),s.css("paddingBottom"),s.css("paddingLeft")],t=0;t<i.length;t++)this.borderDif[t]=(parseInt(i[t],10)||0)+(parseInt(n[t],10)||0);s.css({height:a.height()-this.borderDif[0]-this.borderDif[2]||0,width:a.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var t=this.element,i=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var i=this.originalSize;return{left:this.originalPosition.left+t,width:i.width-t}},n:function(e,t,i){var n=this.originalSize;return{top:this.originalPosition.top+i,height:n.height-i}},s:function(e,t,i){return{height:this.originalSize.height+i}},se:function(t,i,n){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,i,n]))},sw:function(t,i,n){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,i,n]))},ne:function(t,i,n){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,i,n]))},nw:function(t,i,n){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,i,n]))}},_propagate:function(t,i){e.ui.plugin.call(this,t,[i,this.ui()]),"resize"!==t&&this._trigger(t,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var i=e(this).data("ui-resizable"),n=i.options,s=i._proportionallyResizeElements,a=s.length&&/textarea/i.test(s[0].nodeName),o=a&&e.ui.hasScroll(s[0],"left")?0:i.sizeDiff.height,r=a?0:i.sizeDiff.width,l={width:i.size.width-r,height:i.size.height-o},d=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,c=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(e.extend(l,c&&d?{top:c,left:d}:{}),{duration:n.animateDuration,easing:n.animateEasing,step:function(){var n={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};s&&s.length&&e(s[0]).css({width:n.width,height:n.height}),i._updateCache(n),i._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var t,n,s,a,o,r,l,d=e(this).data("ui-resizable"),c=d.options,u=d.element,h=c.containment,p=h instanceof e?h.get(0):/parent/.test(h)?u.parent().get(0):h;p&&(d.containerElement=e(p),/document/.test(h)||h===document?(d.containerOffset={left:0,top:0},d.containerPosition={left:0,top:0},d.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(t=e(p),n=[],e(["Top","Right","Left","Bottom"]).each(function(e,s){n[e]=i(t.css("padding"+s))}),d.containerOffset=t.offset(),d.containerPosition=t.position(),d.containerSize={height:t.innerHeight()-n[3],width:t.innerWidth()-n[1]},s=d.containerOffset,a=d.containerSize.height,o=d.containerSize.width,r=e.ui.hasScroll(p,"left")?p.scrollWidth:o,l=e.ui.hasScroll(p)?p.scrollHeight:a,d.parentData={element:p,left:s.left,top:s.top,width:r,height:l}))},resize:function(t){var i,n,s,a,o=e(this).data("ui-resizable"),r=o.options,l=o.containerOffset,d=o.position,c=o._aspectRatio||t.shiftKey,u={top:0,left:0},h=o.containerElement;h[0]!==document&&/static/.test(h.css("position"))&&(u=l),d.left<(o._helper?l.left:0)&&(o.size.width=o.size.width+(o._helper?o.position.left-l.left:o.position.left-u.left),c&&(o.size.height=o.size.width/o.aspectRatio),o.position.left=r.helper?l.left:0),d.top<(o._helper?l.top:0)&&(o.size.height=o.size.height+(o._helper?o.position.top-l.top:o.position.top),c&&(o.size.width=o.size.height*o.aspectRatio),o.position.top=o._helper?l.top:0),o.offset.left=o.parentData.left+o.position.left,o.offset.top=o.parentData.top+o.position.top,i=Math.abs((o._helper,o.offset.left-u.left+o.sizeDiff.width)),n=Math.abs((o._helper?o.offset.top-u.top:o.offset.top-l.top)+o.sizeDiff.height),s=o.containerElement.get(0)===o.element.parent().get(0),a=/relative|absolute/.test(o.containerElement.css("position")),s&&a&&(i-=o.parentData.left),i+o.size.width>=o.parentData.width&&(o.size.width=o.parentData.width-i,c&&(o.size.height=o.size.width/o.aspectRatio)),n+o.size.height>=o.parentData.height&&(o.size.height=o.parentData.height-n,c&&(o.size.width=o.size.height*o.aspectRatio))},stop:function(){var t=e(this).data("ui-resizable"),i=t.options,n=t.containerOffset,s=t.containerPosition,a=t.containerElement,o=e(t.helper),r=o.offset(),l=o.outerWidth()-t.sizeDiff.width,d=o.outerHeight()-t.sizeDiff.height;t._helper&&!i.animate&&/relative/.test(a.css("position"))&&e(this).css({left:r.left-s.left-n.left,width:l,height:d}),t._helper&&!i.animate&&/static/.test(a.css("position"))&&e(this).css({left:r.left-s.left-n.left,width:l,height:d})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).data("ui-resizable").options,i=function(t){e(t).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};"object"!=typeof t.alsoResize||t.alsoResize.parentNode?i(t.alsoResize):t.alsoResize.length?(t.alsoResize=t.alsoResize[0],i(t.alsoResize)):e.each(t.alsoResize,function(e){i(e)})},resize:function(t,i){var n=e(this).data("ui-resizable"),s=n.options,a=n.originalSize,o=n.originalPosition,r={height:n.size.height-a.height||0,width:n.size.width-a.width||0,top:n.position.top-o.top||0,left:n.position.left-o.left||0},l=function(t,n){e(t).each(function(){var t=e(this),s=e(this).data("ui-resizable-alsoresize"),a={},o=n&&n.length?n:t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(o,function(e,t){var i=(s[t]||0)+(r[t]||0);i&&i>=0&&(a[t]=i||null)}),t.css(a)})};"object"!=typeof s.alsoResize||s.alsoResize.nodeType?l(s.alsoResize):e.each(s.alsoResize,function(e,t){l(e,t)})},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).data("ui-resizable"),i=t.options,n=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:n.height,width:n.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).data("ui-resizable");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).data("ui-resizable");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t=e(this).data("ui-resizable"),i=t.options,n=t.size,s=t.originalSize,a=t.originalPosition,o=t.axis,r="number"==typeof i.grid?[i.grid,i.grid]:i.grid,l=r[0]||1,d=r[1]||1,c=Math.round((n.width-s.width)/l)*l,u=Math.round((n.height-s.height)/d)*d,h=s.width+c,p=s.height+u,f=i.maxWidth&&i.maxWidth<h,m=i.maxHeight&&i.maxHeight<p,g=i.minWidth&&i.minWidth>h,v=i.minHeight&&i.minHeight>p;i.grid=r,g&&(h+=l),v&&(p+=d),f&&(h-=l),m&&(p-=d),/^(se|s|e)$/.test(o)?(t.size.width=h,t.size.height=p):/^(ne)$/.test(o)?(t.size.width=h,t.size.height=p,t.position.top=a.top-u):/^(sw)$/.test(o)?(t.size.width=h,t.size.height=p,t.position.left=a.left-c):(t.size.width=h,t.size.height=p,t.position.top=a.top-u,t.position.left=a.left-c)}})}(jQuery),function(e,t){e.widget("ui.selectable",e.ui.mouse,{version:"1.10.2",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t,i=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){(t=e(i.options.filter,i.element[0])).addClass("ui-selectee"),t.each(function(){var t=e(this),i=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:i.left,top:i.top,right:i.left+t.outerWidth(),bottom:i.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=t.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(t){var i=this,n=this.options;this.opos=[t.pageX,t.pageY],this.options.disabled||(this.selectees=e(n.filter,this.element[0]),this._trigger("start",t),e(n.appendTo).append(this.helper),this.helper.css({left:t.pageX,top:t.pageY,width:0,height:0}),n.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var n=e.data(this,"selectable-item");n.startselected=!0,t.metaKey||t.ctrlKey||(n.$element.removeClass("ui-selected"),n.selected=!1,n.$element.addClass("ui-unselecting"),n.unselecting=!0,i._trigger("unselecting",t,{unselecting:n.element}))}),e(t.target).parents().addBack().each(function(){var n,s=e.data(this,"selectable-item");if(s)return n=!t.metaKey&&!t.ctrlKey||!s.$element.hasClass("ui-selected"),s.$element.removeClass(n?"ui-unselecting":"ui-selected").addClass(n?"ui-selecting":"ui-unselecting"),s.unselecting=!n,s.selecting=n,s.selected=n,n?i._trigger("selecting",t,{selecting:s.element}):i._trigger("unselecting",t,{unselecting:s.element}),!1}))},_mouseDrag:function(t){if(this.dragged=!0,!this.options.disabled){var i,n=this,s=this.options,a=this.opos[0],o=this.opos[1],r=t.pageX,l=t.pageY;return a>r&&(i=r,r=a,a=i),o>l&&(i=l,l=o,o=i),this.helper.css({left:a,top:o,width:r-a,height:l-o}),this.selectees.each(function(){var i=e.data(this,"selectable-item"),d=!1;i&&i.element!==n.element[0]&&("touch"===s.tolerance?d=!(i.left>r||i.right<a||i.top>l||i.bottom<o):"fit"===s.tolerance&&(d=i.left>a&&i.right<r&&i.top>o&&i.bottom<l),d?(i.selected&&(i.$element.removeClass("ui-selected"),i.selected=!1),i.unselecting&&(i.$element.removeClass("ui-unselecting"),i.unselecting=!1),i.selecting||(i.$element.addClass("ui-selecting"),i.selecting=!0,n._trigger("selecting",t,{selecting:i.element}))):(i.selecting&&((t.metaKey||t.ctrlKey)&&i.startselected?(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.$element.addClass("ui-selected"),i.selected=!0):(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.startselected&&(i.$element.addClass("ui-unselecting"),i.unselecting=!0),n._trigger("unselecting",t,{unselecting:i.element}))),i.selected&&(t.metaKey||t.ctrlKey||i.startselected||(i.$element.removeClass("ui-selected"),i.selected=!1,i.$element.addClass("ui-unselecting"),i.unselecting=!0,n._trigger("unselecting",t,{unselecting:i.element})))))}),!1}},_mouseStop:function(t){var i=this;return this.dragged=!1,e(".ui-unselecting",this.element[0]).each(function(){var n=e.data(this,"selectable-item");n.$element.removeClass("ui-unselecting"),n.unselecting=!1,n.startselected=!1,i._trigger("unselected",t,{unselected:n.element})}),e(".ui-selecting",this.element[0]).each(function(){var n=e.data(this,"selectable-item");n.$element.removeClass("ui-selecting").addClass("ui-selected"),n.selecting=!1,n.selected=!0,n.startselected=!0,i._trigger("selected",t,{selected:n.element})}),this._trigger("stop",t),this.helper.remove(),!1}})}(jQuery),function(e,t){function i(e,t,i){return e>t&&e<t+i}function n(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))}e.widget("ui.sortable",e.ui.mouse,{version:"1.10.2",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=!!this.items.length&&("x"===e.axis||n(this.items[0].item)),this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,i){"disabled"===t?(this.options[t]=i,this.widget().toggleClass("ui-sortable-disabled",!!i)):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,i){var n=null,s=!1,a=this;return!this.reverting&&(!this.options.disabled&&"static"!==this.options.type&&(this._refreshItems(t),e(t.target).parents().each(function(){if(e.data(this,a.widgetName+"-item")===a)return n=e(this),!1}),e.data(t.target,a.widgetName+"-item")===a&&(n=e(t.target)),!!n&&(!(this.options.handle&&!i&&(e(this.options.handle,n).find("*").addBack().each(function(){this===t.target&&(s=!0)}),!s))&&(this.currentItem=n,this._removeCurrentsFromItems(),!0))))},_mouseStart:function(t,i,n){var s,a,o=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&"auto"!==o.cursor&&(a=this.document.find("body"),this.storedCursor=a.css("cursor"),a.css("cursor",o.cursor),this.storedStylesheet=e("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(a)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!n)for(s=this.containers.length-1;s>=0;s--)this.containers[s]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var i,n,s,a,o=this.options,r=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+o.scrollSpeed:t.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+o.scrollSpeed:t.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(t.pageY-e(document).scrollTop()<o.scrollSensitivity?r=e(document).scrollTop(e(document).scrollTop()-o.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<o.scrollSensitivity&&(r=e(document).scrollTop(e(document).scrollTop()+o.scrollSpeed)),t.pageX-e(document).scrollLeft()<o.scrollSensitivity?r=e(document).scrollLeft(e(document).scrollLeft()-o.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<o.scrollSensitivity&&(r=e(document).scrollLeft(e(document).scrollLeft()+o.scrollSpeed))),!1!==r&&e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(n=this.items[i],s=n.item[0],(a=this._intersectsWithPointer(n))&&n.instance===this.currentContainer&&!(s===this.currentItem[0]||this.placeholder[1===a?"next":"prev"]()[0]===s||e.contains(this.placeholder[0],s)||"semi-dynamic"===this.options.type&&e.contains(this.element[0],s))){if(this.direction=1===a?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(n))break;this._rearrange(t,n),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,i){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var n=this,s=this.placeholder.offset(),a=this.options.axis,o={};a&&"x"!==a||(o.left=s.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),a&&"y"!==a||(o.top=s.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(o,parseInt(this.options.revert,10)||500,function(){n._clear(t)})}else this._clear(t,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var i=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},e(i).each(function(){var i=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);i&&n.push((t.key||i[1]+"[]")+"="+(t.key&&t.expression?i[1]:i[2]))}),!n.length&&t.key&&n.push(t.key+"="),n.join("&")},toArray:function(t){var i=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},i.each(function(){n.push(e(t.item||this).attr(t.attribute||"id")||"")}),n},_intersectsWith:function(e){var t=this.positionAbs.left,i=t+this.helperProportions.width,n=this.positionAbs.top,s=n+this.helperProportions.height,a=e.left,o=a+e.width,r=e.top,l=r+e.height,d=this.offset.click.top,c=this.offset.click.left,u=n+d>r&&n+d<l&&t+c>a&&t+c<o;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?u:a<t+this.helperProportions.width/2&&i-this.helperProportions.width/2<o&&r<n+this.helperProportions.height/2&&s-this.helperProportions.height/2<l},_intersectsWithPointer:function(e){var t="x"===this.options.axis||i(this.positionAbs.top+this.offset.click.top,e.top,e.height),n="y"===this.options.axis||i(this.positionAbs.left+this.offset.click.left,e.left,e.width),s=t&&n,a=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return!!s&&(this.floating?o&&"right"===o||"down"===a?2:1:a&&("down"===a?2:1))},_intersectsWithSides:function(e){var t=i(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),n=i(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),s=this._getDragVerticalDirection(),a=this._getDragHorizontalDirection();return this.floating&&a?"right"===a&&n||"left"===a&&!n:s&&("down"===s&&t||"up"===s&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var i,n,s,a,o=[],r=[],l=this._connectWith();if(l&&t)for(i=l.length-1;i>=0;i--)for(n=(s=e(l[i])).length-1;n>=0;n--)(a=e.data(s[n],this.widgetFullName))&&a!==this&&!a.options.disabled&&r.push([e.isFunction(a.options.items)?a.options.items.call(a.element):e(a.options.items,a.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),a]);for(r.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),i=r.length-1;i>=0;i--)r[i][0].each(function(){o.push(this)});return e(o)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var i=0;i<t.length;i++)if(t[i]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var i,n,s,a,o,r,l,d,c=this.items,u=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],h=this._connectWith();if(h&&this.ready)for(i=h.length-1;i>=0;i--)for(n=(s=e(h[i])).length-1;n>=0;n--)(a=e.data(s[n],this.widgetFullName))&&a!==this&&!a.options.disabled&&(u.push([e.isFunction(a.options.items)?a.options.items.call(a.element[0],t,{item:this.currentItem}):e(a.options.items,a.element),a]),this.containers.push(a));for(i=u.length-1;i>=0;i--)for(o=u[i][1],n=0,d=(r=u[i][0]).length;n<d;n++)(l=e(r[n])).data(this.widgetName+"-item",o),c.push({item:l,instance:o,width:0,height:0,left:0,top:0})},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var i,n,s,a;for(i=this.items.length-1;i>=0;i--)(n=this.items[i]).instance!==this.currentContainer&&this.currentContainer&&n.item[0]!==this.currentItem[0]||(s=this.options.toleranceElement?e(this.options.toleranceElement,n.item):n.item,t||(n.width=s.outerWidth(),n.height=s.outerHeight()),a=s.offset(),n.left=a.left,n.top=a.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)a=this.containers[i].element.offset(),this.containers[i].containerCache.left=a.left,this.containers[i].containerCache.top=a.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(t){var i,n=(t=t||this).options;n.placeholder&&n.placeholder.constructor!==String||(i=n.placeholder,n.placeholder={element:function(){var n=t.currentItem[0].nodeName.toLowerCase(),s=e(t.document[0].createElement(n)).addClass(i||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===n?s.append("<td colspan='99'>&#160;</td>"):"img"===n&&s.attr("src",t.currentItem.attr("src")),i||s.css("visibility","hidden"),s},update:function(e,s){i&&!n.forcePlaceholderSize||(s.height()||s.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),s.width()||s.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(n.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),n.placeholder.update(t,t.placeholder)},_contactContainers:function(t){var s,a,o,r,l,d,c,u,h,p,f=null,m=null;for(s=this.containers.length-1;s>=0;s--)if(!e.contains(this.currentItem[0],this.containers[s].element[0]))if(this._intersectsWith(this.containers[s].containerCache)){if(f&&e.contains(this.containers[s].element[0],f.element[0]))continue;f=this.containers[s],m=s}else this.containers[s].containerCache.over&&(this.containers[s]._trigger("out",t,this._uiHash(this)),this.containers[s].containerCache.over=0);if(f)if(1===this.containers.length)this.containers[m].containerCache.over||(this.containers[m]._trigger("over",t,this._uiHash(this)),this.containers[m].containerCache.over=1);else{for(o=1e4,r=null,l=(p=f.floating||n(this.currentItem))?"left":"top",d=p?"width":"height",c=this.positionAbs[l]+this.offset.click[l],a=this.items.length-1;a>=0;a--)e.contains(this.containers[m].element[0],this.items[a].item[0])&&this.items[a].item[0]!==this.currentItem[0]&&(p&&!i(this.positionAbs.top+this.offset.click.top,this.items[a].top,this.items[a].height)||(u=this.items[a].item.offset()[l],h=!1,Math.abs(u-c)>Math.abs(u+this.items[a][d]-c)&&(h=!0,u+=this.items[a][d]),Math.abs(u-c)<o&&(o=Math.abs(u-c),r=this.items[a],this.direction=h?"up":"down")));if(!r&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[m])return;r?this._rearrange(t,r,null,!0):this._rearrange(t,null,this.containers[m].element,!0),this._trigger("change",t,this._uiHash()),this.containers[m]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[m],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[m]._trigger("over",t,this._uiHash(this)),this.containers[m].containerCache.over=1}},_createHelper:function(t){var i=this.options,n=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return n.parents("body").length||e("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(n[0]),n[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),n[0].style.width&&!i.forceHelperSize||n.width(this.currentItem.width()),n[0].style.height&&!i.forceHelperSize||n.height(this.currentItem.height()),n},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,n,s=this.options;"parent"===s.containment&&(s.containment=this.helper[0].parentNode),"document"!==s.containment&&"window"!==s.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e("document"===s.containment?document:window).width()-this.helperProportions.width-this.margins.left,(e("document"===s.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(s.containment)||(t=e(s.containment)[0],i=e(s.containment).offset(),n="hidden"!==e(t).css("overflow"),this.containment=[i.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,i.left+(n?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(n?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,i){i||(i=this.position);var n="absolute"===t?1:-1,s="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(s[0].tagName);return{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():a?0:s.scrollTop())*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():a?0:s.scrollLeft())*n}},_generatePosition:function(t){var i,n,s=this.options,a=t.pageX,o=t.pageY,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(r[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(a=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(a=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),s.grid&&(i=this.originalPageY+Math.round((o-this.originalPageY)/s.grid[1])*s.grid[1],o=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-s.grid[1]:i+s.grid[1]:i,n=this.originalPageX+Math.round((a-this.originalPageX)/s.grid[0])*s.grid[0],a=this.containment?n-this.offset.click.left>=this.containment[0]&&n-this.offset.click.left<=this.containment[2]?n:n-this.offset.click.left>=this.containment[0]?n-s.grid[0]:n+s.grid[0]:n)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:r.scrollTop()),left:a-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:r.scrollLeft())}},_rearrange:function(e,t,i,n){i?i[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var s=this.counter;this._delay(function(){s===this.counter&&this.refreshPositions(!n)})},_clear:function(e,t){this.reverting=!1;var i,n=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)"auto"!==this._storedCSS[i]&&"static"!==this._storedCSS[i]||(this._storedCSS[i]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&n.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||n.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(n.push(function(e){this._trigger("remove",e,this._uiHash())}),n.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),n.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),i=this.containers.length-1;i>=0;i--)t||n.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over&&(n.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!t){for(this._trigger("beforeStop",e,this._uiHash()),i=0;i<n.length;i++)n[i].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!1}if(t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!t){for(i=0;i<n.length;i++)n[i].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){!1===e.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(t){var i=t||this;return{helper:i.helper,placeholder:i.placeholder||e([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:t?t.element:null}}})}(jQuery),function(e,t){e.effects={effect:{}},function(e,t){function i(e,t,i){var n=c[t.type]||{};return null==e?i||!t.def?null:t.def:(e=n.floor?~~e:parseFloat(e),isNaN(e)?t.def:n.mod?(e+n.mod)%n.mod:0>e?0:n.max<e?n.max:e)}function n(t){var i=l(),n=i._rgba=[];return t=t.toLowerCase(),p(r,function(e,s){var a,o=s.re.exec(t),r=o&&s.parse(o),l=s.space||"rgba";if(r)return a=i[l](r),i[d[l].cache]=a[d[l].cache],n=i._rgba=a._rgba,!1}),n.length?("0,0,0,0"===n.join()&&e.extend(n,a.transparent),i):a[t]}function s(e,t,i){return 6*(i=(i+1)%1)<1?e+(t-e)*i*6:2*i<1?t:3*i<2?e+(t-e)*(2/3-i)*6:e}var a,o=/^([\-+])=\s*(\d+\.?\d*)/,r=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],l=e.Color=function(t,i,n,s){return new e.Color.fn.parse(t,i,n,s)},d={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},c={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},u=l.support={},h=e("<p>")[0],p=e.each;h.style.cssText="background-color:rgba(1,1,1,.5)",u.rgba=h.style.backgroundColor.indexOf("rgba")>-1,p(d,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),l.fn=e.extend(l.prototype,{parse:function(t,s,o,r){if(void 0===t)return this._rgba=[null,null,null,null],this;(t.jquery||t.nodeType)&&(t=e(t).css(s),s=void 0);var c=this,u=e.type(t),h=this._rgba=[];return void 0!==s&&(t=[t,s,o,r],u="array"),"string"===u?this.parse(n(t)||a._default):"array"===u?(p(d.rgba.props,function(e,n){h[n.idx]=i(t[n.idx],n)}),this):"object"===u?(t instanceof l?p(d,function(e,i){t[i.cache]&&(c[i.cache]=t[i.cache].slice())}):p(d,function(n,s){var a=s.cache;p(s.props,function(e,n){if(!c[a]&&s.to){if("alpha"===e||null==t[e])return;c[a]=s.to(c._rgba)}c[a][n.idx]=i(t[e],n,!0)}),c[a]&&e.inArray(null,c[a].slice(0,3))<0&&(c[a][3]=1,s.from&&(c._rgba=s.from(c[a])))}),this):void 0},is:function(e){var t=l(e),i=!0,n=this;return p(d,function(e,s){var a,o=t[s.cache];return o&&(a=n[s.cache]||s.to&&s.to(n._rgba)||[],p(s.props,function(e,t){if(null!=o[t.idx])return i=o[t.idx]===a[t.idx]})),i}),i},_space:function(){var e=[],t=this;return p(d,function(i,n){t[n.cache]&&e.push(i)}),e.pop()},transition:function(e,t){var n=l(e),s=n._space(),a=d[s],o=0===this.alpha()?l("transparent"):this,r=o[a.cache]||a.to(o._rgba),u=r.slice();return n=n[a.cache],p(a.props,function(e,s){var a=s.idx,o=r[a],l=n[a],d=c[s.type]||{};null!==l&&(null===o?u[a]=l:(d.mod&&(l-o>d.mod/2?o+=d.mod:o-l>d.mod/2&&(o-=d.mod)),u[a]=i((l-o)*t+o,s)))}),this[s](u)},blend:function(t){if(1===this._rgba[3])return this;var i=this._rgba.slice(),n=i.pop(),s=l(t)._rgba;return l(e.map(i,function(e,t){return(1-n)*s[t]+n*e}))},toRgbaString:function(){var t="rgba(",i=e.map(this._rgba,function(e,t){return null==e?t>2?1:0:e});return 1===i[3]&&(i.pop(),t="rgb("),t+i.join()+")"},toHslaString:function(){var t="hsla(",i=e.map(this.hsla(),function(e,t){return null==e&&(e=t>2?1:0),t&&t<3&&(e=Math.round(100*e)+"%"),e});return 1===i[3]&&(i.pop(),t="hsl("),t+i.join()+")"},toHexString:function(t){var i=this._rgba.slice(),n=i.pop();return t&&i.push(~~(255*n)),"#"+e.map(i,function(e){return 1===(e=(e||0).toString(16)).length?"0"+e:e}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),l.fn.parse.prototype=l.fn,d.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,i,n=e[0]/255,s=e[1]/255,a=e[2]/255,o=e[3],r=Math.max(n,s,a),l=Math.min(n,s,a),d=r-l,c=r+l,u=.5*c;return t=l===r?0:n===r?60*(s-a)/d+360:s===r?60*(a-n)/d+120:60*(n-s)/d+240,i=0===d?0:u<=.5?d/c:d/(2-c),[Math.round(t)%360,i,u,null==o?1:o]},d.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,i=e[1],n=e[2],a=e[3],o=n<=.5?n*(1+i):n+i-n*i,r=2*n-o;return[Math.round(255*s(r,o,t+1/3)),Math.round(255*s(r,o,t)),Math.round(255*s(r,o,t-1/3)),a]},p(d,function(t,n){var s=n.props,a=n.cache,r=n.to,d=n.from;l.fn[t]=function(t){if(r&&!this[a]&&(this[a]=r(this._rgba)),void 0===t)return this[a].slice();var n,o=e.type(t),c="array"===o||"object"===o?t:arguments,u=this[a].slice();return p(s,function(e,t){var n=c["object"===o?e:t.idx];null==n&&(n=u[t.idx]),u[t.idx]=i(n,t)}),d?(n=l(d(u)),n[a]=u,n):l(u)},p(s,function(i,n){l.fn[i]||(l.fn[i]=function(s){var a,r=e.type(s),l="alpha"===i?this._hsla?"hsla":"rgba":t,d=this[l](),c=d[n.idx];return"undefined"===r?c:("function"===r&&(s=s.call(this,c),r=e.type(s)),null==s&&n.empty?this:("string"===r&&(a=o.exec(s))&&(s=c+parseFloat(a[2])*("+"===a[1]?1:-1)),d[n.idx]=s,this[l](d)))})})}),l.hook=function(t){var i=t.split(" ");p(i,function(t,i){e.cssHooks[i]={set:function(t,s){var a,o,r="";if("transparent"!==s&&("string"!==e.type(s)||(a=n(s)))){if(s=l(a||s),!u.rgba&&1!==s._rgba[3]){for(o="backgroundColor"===i?t.parentNode:t;(""===r||"transparent"===r)&&o&&o.style;)try{r=e.css(o,"backgroundColor"),o=o.parentNode}catch(e){}s=s.blend(r&&"transparent"!==r?r:"_default")}s=s.toRgbaString()}try{t.style[i]=s}catch(e){}}},e.fx.step[i]=function(t){t.colorInit||(t.start=l(t.elem,i),t.end=l(t.end),t.colorInit=!0),e.cssHooks[i].set(t.elem,t.start.transition(t.end,t.pos))}})},l.hook("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor"),e.cssHooks.borderColor={expand:function(e){var t={};return p(["Top","Right","Bottom","Left"],function(i,n){t["border"+n+"Color"]=e}),t}},a=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function t(t){var i,n,s=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,a={};if(s&&s.length&&s[0]&&s[s[0]])for(n=s.length;n--;)"string"==typeof s[i=s[n]]&&(a[e.camelCase(i)]=s[i]);else for(i in s)"string"==typeof s[i]&&(a[i]=s[i]);return a}function i(t,i){var n,a,o={};for(n in i)a=i[n],t[n]!==a&&(s[n]||!e.fx.step[n]&&isNaN(parseFloat(a))||(o[n]=a));return o}var n=["add","remove","toggle"],s={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,i){e.fx.step[i]=function(e){("none"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr)&&(jQuery.style(e.elem,i,e.end),e.setAttr=!0)}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e.effects.animateClass=function(s,a,o,r){var l=e.speed(a,o,r);return this.queue(function(){var a,o=e(this),r=o.attr("class")||"",d=l.children?o.find("*").addBack():o;d=d.map(function(){return{el:e(this),start:t(this)}}),(a=function(){e.each(n,function(e,t){s[t]&&o[t+"Class"](s[t])})})(),d=d.map(function(){return this.end=t(this.el[0]),this.diff=i(this.start,this.end),this}),o.attr("class",r),d=d.map(function(){var t=this,i=e.Deferred(),n=e.extend({},l,{queue:!1,complete:function(){i.resolve(t)}});return this.el.animate(this.diff,n),i.promise()}),e.when.apply(e,d.get()).done(function(){a(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})}),l.complete.call(o[0])})})},e.fn.extend({addClass:function(t){return function(i,n,s,a){return n?e.effects.animateClass.call(this,{add:i},n,s,a):t.apply(this,arguments)}}(e.fn.addClass),removeClass:function(t){return function(i,n,s,a){return arguments.length>1?e.effects.animateClass.call(this,{remove:i},n,s,a):t.apply(this,arguments)}}(e.fn.removeClass),toggleClass:function(t){return function(i,n,s,a,o){return"boolean"==typeof n||void 0===n?s?e.effects.animateClass.call(this,n?{add:i}:{remove:i},s,a,o):t.apply(this,arguments):e.effects.animateClass.call(this,{toggle:i},n,s,a)}}(e.fn.toggleClass),switchClass:function(t,i,n,s,a){return e.effects.animateClass.call(this,{add:i,remove:t},n,s,a)}})}(),function(){function t(t,i,n,s){return e.isPlainObject(t)&&(i=t,t=t.effect),t={effect:t},null==i&&(i={}),e.isFunction(i)&&(s=i,n=null,i={}),("number"==typeof i||e.fx.speeds[i])&&(s=n,n=i,i={}),e.isFunction(n)&&(s=n,n=null),i&&e.extend(t,i),n=n||i.duration,t.duration=e.fx.off?0:"number"==typeof n?n:n in e.fx.speeds?e.fx.speeds[n]:e.fx.speeds._default,t.complete=s||i.complete,t}function i(t){return!(t&&"number"!=typeof t&&!e.fx.speeds[t])||("string"==typeof t&&!e.effects.effect[t]||(!!e.isFunction(t)||"object"==typeof t&&!t.effect))}e.extend(e.effects,{version:"1.10.2",save:function(e,t){for(var i=0;i<t.length;i++)null!==t[i]&&e.data("ui-effects-"+t[i],e[0].style[t[i]])},restore:function(e,t){var i,n;for(n=0;n<t.length;n++)null!==t[n]&&(void 0===(i=e.data("ui-effects-"+t[n]))&&(i=""),e.css(t[n],i))},setMode:function(e,t){return"toggle"===t&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var i,n;switch(e[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=e[0]/t.height}switch(e[1]){case"left":n=0;break;case"center":n=.5;break;case"right":n=1;break;default:n=e[1]/t.width}return{x:n,y:i}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var i={width:t.outerWidth(!0),height:t.outerHeight(!0),float:t.css("float")},n=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),s={width:t.width(),height:t.height()},a=document.activeElement;try{a.id}catch(e){a=document.body}return t.wrap(n),(t[0]===a||e.contains(t[0],a))&&e(a).focus(),n=t.parent(),"static"===t.css("position")?(n.css({position:"relative"}),t.css({position:"relative"})):(e.extend(i,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,n){i[n]=t.css(n),isNaN(parseInt(i[n],10))&&(i[n]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(s),n.css(i).show()},removeWrapper:function(t){var i=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===i||e.contains(t[0],i))&&e(i).focus()),t},setTransition:function(t,i,n,s){return s=s||{},e.each(i,function(e,i){var a=t.cssUnit(i);a[0]>0&&(s[i]=a[0]*n+a[1])}),s}}),e.fn.extend({effect:function(){function i(t){function i(){e.isFunction(a)&&a.call(s[0]),e.isFunction(t)&&t()}var s=e(this),a=n.complete,r=n.mode;(s.is(":hidden")?"hide"===r:"show"===r)?(s[r](),i()):o.call(s[0],n,i)}var n=t.apply(this,arguments),s=n.mode,a=n.queue,o=e.effects.effect[n.effect];return e.fx.off||!o?s?this[s](n.duration,n.complete):this.each(function(){n.complete&&n.complete.call(this)}):!1===a?this.each(i):this.queue(a||"fx",i)},show:function(e){return function(n){if(i(n))return e.apply(this,arguments);var s=t.apply(this,arguments);return s.mode="show",this.effect.call(this,s)}}(e.fn.show),hide:function(e){return function(n){if(i(n))return e.apply(this,arguments);var s=t.apply(this,arguments);return s.mode="hide",this.effect.call(this,s)}}(e.fn.hide),toggle:function(e){return function(n){if(i(n)||"boolean"==typeof n)return e.apply(this,arguments);var s=t.apply(this,arguments);return s.mode="toggle",this.effect.call(this,s)}}(e.fn.toggle),cssUnit:function(t){var i=this.css(t),n=[];return e.each(["em","px","%","pt"],function(e,t){i.indexOf(t)>0&&(n=[parseFloat(i),t])}),n}})}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,i){t[i]=function(t){return Math.pow(t,e+2)}}),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,i=4;e<((t=Math.pow(2,--i))-1)/11;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*t-2)/22-e,2)}}),e.each(t,function(t,i){e.easing["easeIn"+t]=i,e.easing["easeOut"+t]=function(e){return 1-i(1-e)},e.easing["easeInOut"+t]=function(e){return e<.5?i(2*e)/2:1-i(-2*e+2)/2}})}()}(jQuery),function(e,t){var i=0,n={},s={};n.height=n.paddingTop=n.paddingBottom=n.borderTopWidth=n.borderBottomWidth="hide",s.height=s.paddingTop=s.paddingBottom=s.borderTopWidth=s.borderBottomWidth="show",e.widget("ui.accordion",{version:"1.10.2",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var t=this.options;this.prevShow=this.prevHide=e(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),t.collapsible||!1!==t.active&&null!=t.active||(t.active=0),this._processPanels(),t.active<0&&(t.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():e(),content:this.active.length?this.active.next():e()}},_createIcons:function(){var t=this.options.icons;t&&(e("<span>").addClass("ui-accordion-header-icon ui-icon "+t.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this._destroyIcons(),e=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),"content"!==this.options.heightStyle&&e.css("height","")},_setOption:function(e,t){"active"!==e?("event"===e&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t)),this._super(e,t),"collapsible"!==e||t||!1!==this.options.active||this._activate(0),"icons"===e&&(this._destroyIcons(),t&&this._createIcons()),"disabled"===e&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!t)):this._activate(t)},_keydown:function(t){if(!t.altKey&&!t.ctrlKey){var i=e.ui.keyCode,n=this.headers.length,s=this.headers.index(t.target),a=!1;switch(t.keyCode){case i.RIGHT:case i.DOWN:a=this.headers[(s+1)%n];break;case i.LEFT:case i.UP:a=this.headers[(s-1+n)%n];break;case i.SPACE:case i.ENTER:this._eventHandler(t);break;case i.HOME:a=this.headers[0];break;case i.END:a=this.headers[n-1]}a&&(e(t.target).attr("tabIndex",-1),e(a).attr("tabIndex",0),a.focus(),t.preventDefault())}},_panelKeyDown:function(t){t.keyCode===e.ui.keyCode.UP&&t.ctrlKey&&e(t.currentTarget).prev().focus()},refresh:function(){var t=this.options;this._processPanels(),(!1===t.active&&!0===t.collapsible||!this.headers.length)&&(t.active=!1,this.active=e()),!1===t.active?this._activate(0):this.active.length&&!e.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(t.active=!1,this.active=e()):this._activate(Math.max(0,t.active-1)):t.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide()},_refresh:function(){var t,n=this.options,s=n.heightStyle,a=this.element.parent(),o=this.accordionId="ui-accordion-"+(this.element.attr("id")||++i);this.active=this._findActive(n.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(t){var i=e(this),n=i.attr("id"),s=i.next(),a=s.attr("id");n||(n=o+"-header-"+t,i.attr("id",n)),a||(a=o+"-panel-"+t,s.attr("id",a)),i.attr("aria-controls",a),s.attr("aria-labelledby",n)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false","aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true",tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(n.event),"fill"===s?(t=a.height(),this.element.siblings(":visible").each(function(){var i=e(this),n=i.css("position");"absolute"!==n&&"fixed"!==n&&(t-=i.outerHeight(!0))}),this.headers.each(function(){t-=e(this).outerHeight(!0)}),this.headers.next().each(function(){e(this).height(Math.max(0,t-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===s&&(t=0,this.headers.next().each(function(){t=Math.max(t,e(this).css("height","").height())}).height(t))},_activate:function(t){var i=this._findActive(t)[0];i!==this.active[0]&&(i=i||this.active[0],this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop}))},_findActive:function(t){return"number"==typeof t?this.headers.eq(t):e()},_setupEvents:function(t){var i={keydown:"_keydown"};t&&e.each(t.split(" "),function(e,t){i[t]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,i),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(t){var i=this.options,n=this.active,s=e(t.currentTarget),a=s[0]===n[0],o=a&&i.collapsible,r=o?e():s.next(),l={oldHeader:n,oldPanel:n.next(),newHeader:o?e():s,newPanel:r};t.preventDefault(),a&&!i.collapsible||!1===this._trigger("beforeActivate",t,l)||(i.active=!o&&this.headers.index(s),this.active=a?e():s,this._toggle(l),n.removeClass("ui-accordion-header-active ui-state-active"),i.icons&&n.children(".ui-accordion-header-icon").removeClass(i.icons.activeHeader).addClass(i.icons.header),a||(s.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),i.icons&&s.children(".ui-accordion-header-icon").removeClass(i.icons.header).addClass(i.icons.activeHeader),s.next().addClass("ui-accordion-content-active")))},_toggle:function(t){var i=t.newPanel,n=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=i,this.prevHide=n,this.options.animate?this._animate(i,n,t):(n.hide(),i.show(),this._toggleComplete(t)),n.attr({"aria-expanded":"false","aria-hidden":"true"}),n.prev().attr("aria-selected","false"),i.length&&n.length?n.prev().attr("tabIndex",-1):i.length&&this.headers.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),i.attr({"aria-expanded":"true","aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0})},_animate:function(e,t,i){var a,o,r,l=this,d=0,c=e.length&&(!t.length||e.index()<t.index()),u=this.options.animate||{},h=c&&u.down||u,p=function(){l._toggleComplete(i)};return"number"==typeof h&&(r=h),"string"==typeof h&&(o=h),o=o||h.easing||u.easing,r=r||h.duration||u.duration,t.length?e.length?(a=e.show().outerHeight(),t.animate(n,{duration:r,easing:o,step:function(e,t){t.now=Math.round(e)}}),void e.hide().animate(s,{duration:r,easing:o,complete:p,step:function(e,i){i.now=Math.round(e),"height"!==i.prop?d+=i.now:"content"!==l.options.heightStyle&&(i.now=Math.round(a-t.outerHeight()-d),d=0)}})):t.animate(n,r,o,p):e.animate(s,r,o,p)},_toggleComplete:function(e){var t=e.oldPanel;t.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),t.length&&(t.parent()[0].className=t.parent()[0].className),this._trigger("activate",null,e)}})}(jQuery),function(e,t){var i=0;e.widget("ui.autocomplete",{version:"1.10.2",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var t,i,n,s=this.element[0].nodeName.toLowerCase(),a="textarea"===s,o="input"===s;this.isMultiLine=!!a||!o&&this.element.prop("isContentEditable"),this.valueMethod=this.element[a||o?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(s){if(this.element.prop("readOnly"))return t=!0,n=!0,void(i=!0);t=!1,n=!1,i=!1;var a=e.ui.keyCode;switch(s.keyCode){case a.PAGE_UP:t=!0,this._move("previousPage",s);break;case a.PAGE_DOWN:t=!0,this._move("nextPage",s);break;case a.UP:t=!0,this._keyEvent("previous",s);break;case a.DOWN:t=!0,this._keyEvent("next",s);break;case a.ENTER:case a.NUMPAD_ENTER:this.menu.active&&(t=!0,s.preventDefault(),this.menu.select(s));break;case a.TAB:this.menu.active&&this.menu.select(s);break;case a.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(s),s.preventDefault());break;default:i=!0,this._searchTimeout(s)}},keypress:function(n){if(t)return t=!1,void n.preventDefault();if(!i){var s=e.ui.keyCode;switch(n.keyCode){case s.PAGE_UP:this._move("previousPage",n);break;case s.PAGE_DOWN:this._move("nextPage",n);break;case s.UP:this._keyEvent("previous",n);break;case s.DOWN:this._keyEvent("next",n)}}},input:function(e){if(n)return n=!1,void e.preventDefault();this._searchTimeout(e)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){this.cancelBlur?delete this.cancelBlur:(clearTimeout(this.searching),this.close(e),this._change(e))}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({input:e(),role:null}).hide().data("ui-menu"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var i=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(n){n.target===t.element[0]||n.target===i||e.contains(i,n.target)||t.close()})})},menufocus:function(t,i){if(this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)});var n=i.item.data("ui-autocomplete-item");!1!==this._trigger("focus",t,{item:n})?t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(n.value):this.liveRegion.text(n.value)},menuselect:function(e,t){var i=t.item.data("ui-autocomplete-item"),n=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=n,this._delay(function(){this.previous=n,this.selectedItem=i})),!1!==this._trigger("select",e,{item:i})&&this._value(i.value),this.term=this._value(),this.close(e),this.selectedItem=i}}),this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertAfter(this.element),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_initSource:function(){var t,i,n=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(i,n){n(e.ui.autocomplete.filter(t,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(t,s){n.xhr&&n.xhr.abort(),n.xhr=e.ajax({url:i,data:t,dataType:"json",success:function(e){s(e)},error:function(){s([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):!1!==this._trigger("search",t)?this._search(e):void 0},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var e=this,t=++i;return function(n){t===i&&e.__response(n),e.pending--,e.pending||e.element.removeClass("ui-autocomplete-loading")}},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return"string"==typeof t?{label:t,value:t}:e.extend({label:t.label||t.value,value:t.value||t.label},t)})},_suggest:function(t){var i=this.menu.element.empty();this._renderMenu(i,t),this.isNewMenu=!0,this.menu.refresh(),i.show(),this._resizeMenu(),i.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,i){var n=this;e.each(i,function(e,i){n._renderItemData(t,i)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,i){return e("<li>").append(e("<a>").text(i.label)).appendTo(t)},_move:function(e,t){if(this.menu.element.is(":visible"))return this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this._value(this.term),void this.menu.blur()):void this.menu[e](t);this.search(null,t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){this.isMultiLine&&!this.menu.element.is(":visible")||(this._move(e,t),t.preventDefault())}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,i){var n=new RegExp(e.ui.autocomplete.escapeRegex(i),"i");return e.grep(t,function(e){return n.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var t;this._superApply(arguments),this.options.disabled||this.cancelSearch||(t=e&&e.length?this.options.messages.results(e.length):this.options.messages.noResults,this.liveRegion.text(t))}})}(jQuery),function(e,t){var i,n,s,a,o="ui-button ui-widget ui-state-default ui-corner-all",r="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",l=function(){var t=e(this).find(":ui-button");setTimeout(function(){t.button("refresh")},1)},d=function(t){var i=t.name,n=t.form,s=e([]);return i&&(i=i.replace(/'/g,"\\'"),s=n?e(n).find("[name='"+i+"']"):e("[name='"+i+"']",t.ownerDocument).filter(function(){return!this.form})),s};e.widget("ui.button",{version:"1.10.2",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,l),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var t=this,r=this.options,c="checkbox"===this.type||"radio"===this.type,u=c?"":"ui-state-active";null===r.label&&(r.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(o).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){r.disabled||this===i&&e(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){r.disabled||e(this).removeClass(u)}).bind("click"+this.eventNamespace,function(e){r.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this.element.bind("focus"+this.eventNamespace,function(){t.buttonElement.addClass("ui-state-focus")}).bind("blur"+this.eventNamespace,function(){t.buttonElement.removeClass("ui-state-focus")}),c&&(this.element.bind("change"+this.eventNamespace,function(){a||t.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(e){r.disabled||(a=!1,n=e.pageX,s=e.pageY)}).bind("mouseup"+this.eventNamespace,function(e){r.disabled||n===e.pageX&&s===e.pageY||(a=!0)})),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(r.disabled||a)return!1}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(r.disabled||a)return!1;e(this).addClass("ui-state-active"),t.buttonElement.attr("aria-pressed","true");var i=t.element[0];d(i).not(i).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){if(r.disabled)return!1;e(this).addClass("ui-state-active"),i=this,t.document.one("mouseup",function(){i=null})}).bind("mouseup"+this.eventNamespace,function(){if(r.disabled)return!1;e(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(t){if(r.disabled)return!1;t.keyCode!==e.ui.keyCode.SPACE&&t.keyCode!==e.ui.keyCode.ENTER||e(this).addClass("ui-state-active")}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){e(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()})),this._setOption("disabled",r.disabled),this._resetButton()},_determineButtonType:function(){var e,t,i;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button","checkbox"===this.type||"radio"===this.type?(e=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible"),(i=this.element.is(":checked"))&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",i)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(o+" ui-state-hover ui-state-active  "+r).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(e,t){this._super(e,t),"disabled"!==e?this._resetButton():t?this.element.prop("disabled",!0):this.element.prop("disabled",!1)},refresh:function(){var t=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t),"radio"===this.type?d(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"!==this.type){var t=this.buttonElement.removeClass(r),i=e("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),n=this.options.icons,s=n.primary&&n.secondary,a=[];n.primary||n.secondary?(this.options.text&&a.push("ui-button-text-icon"+(s?"s":n.primary?"-primary":"-secondary")),n.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+n.primary+"'></span>"),n.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+n.secondary+"'></span>"),this.options.text||(a.push(s?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",e.trim(i)))):a.push("ui-button-text-only"),t.addClass(a.join(" "))}else this.options.label&&this.element.val(this.options.label)}}),e.widget("ui.buttonset",{version:"1.10.2",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,t){"disabled"===e&&this.buttons.button("option",e,t),this._super(e,t)},refresh:function(){var t="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(jQuery),function(e,t){function i(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},e.extend(this._defaults,this.regional[""]),this.dpDiv=n(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function n(t){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.delegate(i,"mouseout",function(){e(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).removeClass("ui-datepicker-next-hover")}).delegate(i,"mouseover",function(){e.datepicker._isDisabledDatepicker(a.inline?t.parent()[0]:a.input[0])||(e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),e(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).addClass("ui-datepicker-next-hover"))})}function s(t,i){e.extend(t,i);for(var n in i)null==i[n]&&(t[n]=i[n]);return t}e.extend(e.ui,{datepicker:{version:"1.10.2"}});var a,o="datepicker",r=(new Date).getTime();e.extend(i.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return s(this._defaults,e||{}),this},_attachDatepicker:function(t,i){var n,s,a;s="div"===(n=t.nodeName.toLowerCase())||"span"===n,t.id||(this.uuid+=1,t.id="dp"+this.uuid),(a=this._newInst(e(t),s)).settings=e.extend({},i||{}),"input"===n?this._connectDatepicker(t,a):s&&this._inlineDatepicker(t,a)},_newInst:function(t,i){return{id:t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1"),input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?n(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,i){var n=e(t);i.append=e([]),i.trigger=e([]),n.hasClass(this.markerClassName)||(this._attachments(n,i),n.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(i),e.data(t,o,i),i.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,i){var n,s,a,o=this._get(i,"appendText"),r=this._get(i,"isRTL");i.append&&i.append.remove(),o&&(i.append=e("<span class='"+this._appendClass+"'>"+o+"</span>"),t[r?"before":"after"](i.append)),t.unbind("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),"focus"!==(n=this._get(i,"showOn"))&&"both"!==n||t.focus(this._showDatepicker),"button"!==n&&"both"!==n||(s=this._get(i,"buttonText"),a=this._get(i,"buttonImage"),i.trigger=e(this._get(i,"buttonImageOnly")?e("<img/>").addClass(this._triggerClass).attr({src:a,alt:s,title:s}):e("<button type='button'></button>").addClass(this._triggerClass).html(a?e("<img/>").attr({src:a,alt:s,title:s}):s)),t[r?"before":"after"](i.trigger),i.trigger.click(function(){return e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]?e.datepicker._hideDatepicker():e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]?(e.datepicker._hideDatepicker(),e.datepicker._showDatepicker(t[0])):e.datepicker._showDatepicker(t[0]),!1}))},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,i,n,s,a=new Date(2009,11,20),o=this._get(e,"dateFormat");o.match(/[DM]/)&&(t=function(e){for(i=0,n=0,s=0;s<e.length;s++)e[s].length>i&&(i=e[s].length,n=s);return n},a.setMonth(t(this._get(e,o.match(/MM/)?"monthNames":"monthNamesShort"))),a.setDate(t(this._get(e,o.match(/DD/)?"dayNames":"dayNamesShort"))+20-a.getDay())),e.input.attr("size",this._formatDate(e,a).length)}},_inlineDatepicker:function(t,i){var n=e(t);n.hasClass(this.markerClassName)||(n.addClass(this.markerClassName).append(i.dpDiv),e.data(t,o,i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(t),i.dpDiv.css("display","block"))},_dialogDatepicker:function(t,i,n,a,r){var l,d,c,u,h,p=this._dialogInst;return p||(this.uuid+=1,l="dp"+this.uuid,this._dialogInput=e("<input type='text' id='"+l+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),e("body").append(this._dialogInput),(p=this._dialogInst=this._newInst(this._dialogInput,!1)).settings={},e.data(this._dialogInput[0],o,p)),s(p.settings,a||{}),i=i&&i.constructor===Date?this._formatDate(p,i):i,this._dialogInput.val(i),this._pos=r?r.length?r:[r.pageX,r.pageY]:null,this._pos||(d=document.documentElement.clientWidth,c=document.documentElement.clientHeight,u=document.documentElement.scrollLeft||document.body.scrollLeft,h=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[d/2-100+u,c/2-150+h]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),p.settings.onSelect=n,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),e.blockUI&&e.blockUI(this.dpDiv),e.data(this._dialogInput[0],o,p),this},_destroyDatepicker:function(t){var i,n=e(t),s=e.data(t,o);n.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),e.removeData(t,o),"input"===i?(s.append.remove(),s.trigger.remove(),n.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):"div"!==i&&"span"!==i||n.removeClass(this.markerClassName).empty())},_enableDatepicker:function(t){var i,n,s=e(t),a=e.data(t,o);s.hasClass(this.markerClassName)&&("input"===(i=t.nodeName.toLowerCase())?(t.disabled=!1,a.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):"div"!==i&&"span"!==i||((n=s.children("."+this._inlineClass)).children().removeClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}))},_disableDatepicker:function(t){var i,n,s=e(t),a=e.data(t,o);s.hasClass(this.markerClassName)&&("input"===(i=t.nodeName.toLowerCase())?(t.disabled=!0,a.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):"div"!==i&&"span"!==i||((n=s.children("."+this._inlineClass)).children().addClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(t){try{return e.data(t,o)}catch(e){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(t,i,n){var a,o,r,l,d=this._getInst(t);if(2===arguments.length&&"string"==typeof i)return"defaults"===i?e.extend({},e.datepicker._defaults):d?"all"===i?e.extend({},d.settings):this._get(d,i):null;a=i||{},"string"==typeof i&&((a={})[i]=n),d&&(this._curInst===d&&this._hideDatepicker(),o=this._getDateDatepicker(t,!0),r=this._getMinMaxDate(d,"min"),l=this._getMinMaxDate(d,"max"),s(d.settings,a),null!==r&&void 0!==a.dateFormat&&void 0===a.minDate&&(d.settings.minDate=this._formatDate(d,r)),null!==l&&void 0!==a.dateFormat&&void 0===a.maxDate&&(d.settings.maxDate=this._formatDate(d,l)),"disabled"in a&&(a.disabled?this._disableDatepicker(t):this._enableDatepicker(t)),this._attachments(e(t),d),this._autoSize(d),this._setDate(d,o),this._updateAlternate(d),this._updateDatepicker(d))},_changeDatepicker:function(e,t,i){this._optionDatepicker(e,t,i)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var i=this._getInst(e);i&&(this._setDate(i,t),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(e,t){var i=this._getInst(e);return i&&!i.inline&&this._setDateFromField(i,t),i?this._getDate(i):null},_doKeyDown:function(t){var i,n,s,a=e.datepicker._getInst(t.target),o=!0,r=a.dpDiv.is(".ui-datepicker-rtl");if(a._keyEvent=!0,e.datepicker._datepickerShowing)switch(t.keyCode){case 9:e.datepicker._hideDatepicker(),o=!1;break;case 13:return(s=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",a.dpDiv))[0]&&e.datepicker._selectDay(t.target,a.selectedMonth,a.selectedYear,s[0]),(i=e.datepicker._get(a,"onSelect"))?(n=e.datepicker._formatDate(a),i.apply(a.input?a.input[0]:null,[n,a])):e.datepicker._hideDatepicker(),!1;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(a,"stepBigMonths"):-e.datepicker._get(a,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(a,"stepBigMonths"):+e.datepicker._get(a,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&e.datepicker._clearDate(t.target),o=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&e.datepicker._gotoToday(t.target),o=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,r?1:-1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(a,"stepBigMonths"):-e.datepicker._get(a,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,-7,"D"),o=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,r?-1:1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(a,"stepBigMonths"):+e.datepicker._get(a,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,7,"D"),o=t.ctrlKey||t.metaKey;break;default:o=!1}else 36===t.keyCode&&t.ctrlKey?e.datepicker._showDatepicker(this):o=!1;o&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var i,n,s=e.datepicker._getInst(t.target);if(e.datepicker._get(s,"constrainInput"))return i=e.datepicker._possibleChars(e.datepicker._get(s,"dateFormat")),n=String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),t.ctrlKey||t.metaKey||n<" "||!i||i.indexOf(n)>-1},_doKeyUp:function(t){var i=e.datepicker._getInst(t.target);if(i.input.val()!==i.lastVal)try{e.datepicker.parseDate(e.datepicker._get(i,"dateFormat"),i.input?i.input.val():null,e.datepicker._getFormatConfig(i))&&(e.datepicker._setDateFromField(i),e.datepicker._updateAlternate(i),e.datepicker._updateDatepicker(i))}catch(e){}return!0},_showDatepicker:function(t){if("input"!==(t=t.target||t).nodeName.toLowerCase()&&(t=e("input",t.parentNode)[0]),!e.datepicker._isDisabledDatepicker(t)&&e.datepicker._lastInput!==t){var i,n,a,o,r,l,d;i=e.datepicker._getInst(t),e.datepicker._curInst&&e.datepicker._curInst!==i&&(e.datepicker._curInst.dpDiv.stop(!0,!0),i&&e.datepicker._datepickerShowing&&e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])),!1!==(a=(n=e.datepicker._get(i,"beforeShow"))?n.apply(t,[t,i]):{})&&(s(i.settings,a),i.lastVal=null,e.datepicker._lastInput=t,e.datepicker._setDateFromField(i),e.datepicker._inDialog&&(t.value=""),e.datepicker._pos||(e.datepicker._pos=e.datepicker._findPos(t),e.datepicker._pos[1]+=t.offsetHeight),o=!1,e(t).parents().each(function(){return!(o|="fixed"===e(this).css("position"))}),r={left:e.datepicker._pos[0],top:e.datepicker._pos[1]},e.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),e.datepicker._updateDatepicker(i),r=e.datepicker._checkOffset(i,r,o),i.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":o?"fixed":"absolute",display:"none",left:r.left+"px",top:r.top+"px"}),i.inline||(l=e.datepicker._get(i,"showAnim"),d=e.datepicker._get(i,"duration"),i.dpDiv.zIndex(e(t).zIndex()+1),e.datepicker._datepickerShowing=!0,e.effects&&e.effects.effect[l]?i.dpDiv.show(l,e.datepicker._get(i,"showOptions"),d):i.dpDiv[l||"show"](l?d:null),i.input.is(":visible")&&!i.input.is(":disabled")&&i.input.focus(),e.datepicker._curInst=i))}},_updateDatepicker:function(t){this.maxRows=4,a=t,t.dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t),t.dpDiv.find("."+this._dayOverClass+" a").mouseover();var i,n=this._getNumberOfMonths(t),s=n[1];t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),s>1&&t.dpDiv.addClass("ui-datepicker-multi-"+s).css("width",17*s+"em"),t.dpDiv[(1!==n[0]||1!==n[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===e.datepicker._curInst&&e.datepicker._datepickerShowing&&t.input&&t.input.is(":visible")&&!t.input.is(":disabled")&&t.input[0]!==document.activeElement&&t.input.focus(),t.yearshtml&&(i=t.yearshtml,setTimeout(function(){i===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),i=t.yearshtml=null},0))},_getBorders:function(e){var t=function(e){return{thin:1,medium:2,thick:3}[e]||e};return[parseFloat(t(e.css("border-left-width"))),parseFloat(t(e.css("border-top-width")))]},_checkOffset:function(t,i,n){var s=t.dpDiv.outerWidth(),a=t.dpDiv.outerHeight(),o=t.input?t.input.outerWidth():0,r=t.input?t.input.outerHeight():0,l=document.documentElement.clientWidth+(n?0:e(document).scrollLeft()),d=document.documentElement.clientHeight+(n?0:e(document).scrollTop());return i.left-=this._get(t,"isRTL")?s-o:0,i.left-=n&&i.left===t.input.offset().left?e(document).scrollLeft():0,i.top-=n&&i.top===t.input.offset().top+r?e(document).scrollTop():0,i.left-=Math.min(i.left,i.left+s>l&&l>s?Math.abs(i.left+s-l):0),i.top-=Math.min(i.top,i.top+a>d&&d>a?Math.abs(a+r):0),i},_findPos:function(t){for(var i,n=this._getInst(t),s=this._get(n,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||e.expr.filters.hidden(t));)t=t[s?"previousSibling":"nextSibling"];return i=e(t).offset(),[i.left,i.top]},_hideDatepicker:function(t){var i,n,s,a,r=this._curInst;!r||t&&r!==e.data(t,o)||this._datepickerShowing&&(i=this._get(r,"showAnim"),n=this._get(r,"duration"),s=function(){e.datepicker._tidyDialog(r)},e.effects&&(e.effects.effect[i]||e.effects[i])?r.dpDiv.hide(i,e.datepicker._get(r,"showOptions"),n,s):r.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?n:null,s),i||s(),this._datepickerShowing=!1,(a=this._get(r,"onClose"))&&a.apply(r.input?r.input[0]:null,[r.input?r.input.val():"",r]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),e.blockUI&&(e.unblockUI(),e("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(e.datepicker._curInst){var i=e(t.target),n=e.datepicker._getInst(i[0]);(i[0].id===e.datepicker._mainDivId||0!==i.parents("#"+e.datepicker._mainDivId).length||i.hasClass(e.datepicker.markerClassName)||i.closest("."+e.datepicker._triggerClass).length||!e.datepicker._datepickerShowing||e.datepicker._inDialog&&e.blockUI)&&(!i.hasClass(e.datepicker.markerClassName)||e.datepicker._curInst===n)||e.datepicker._hideDatepicker()}},_adjustDate:function(t,i,n){var s=e(t),a=this._getInst(s[0]);this._isDisabledDatepicker(s[0])||(this._adjustInstDate(a,i+("M"===n?this._get(a,"showCurrentAtPos"):0),n),this._updateDatepicker(a))},_gotoToday:function(t){var i,n=e(t),s=this._getInst(n[0]);this._get(s,"gotoCurrent")&&s.currentDay?(s.selectedDay=s.currentDay,s.drawMonth=s.selectedMonth=s.currentMonth,s.drawYear=s.selectedYear=s.currentYear):(i=new Date,s.selectedDay=i.getDate(),s.drawMonth=s.selectedMonth=i.getMonth(),s.drawYear=s.selectedYear=i.getFullYear()),this._notifyChange(s),this._adjustDate(n)},_selectMonthYear:function(t,i,n){var s=e(t),a=this._getInst(s[0]);a["selected"+("M"===n?"Month":"Year")]=a["draw"+("M"===n?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(a),this._adjustDate(s)},_selectDay:function(t,i,n,s){var a,o=e(t);e(s).hasClass(this._unselectableClass)||this._isDisabledDatepicker(o[0])||((a=this._getInst(o[0])).selectedDay=a.currentDay=e("a",s).html(),a.selectedMonth=a.currentMonth=i,a.selectedYear=a.currentYear=n,this._selectDate(t,this._formatDate(a,a.currentDay,a.currentMonth,a.currentYear)))},_clearDate:function(t){var i=e(t);this._selectDate(i,"")},_selectDate:function(t,i){var n,s=e(t),a=this._getInst(s[0]);i=null!=i?i:this._formatDate(a),a.input&&a.input.val(i),this._updateAlternate(a),(n=this._get(a,"onSelect"))?n.apply(a.input?a.input[0]:null,[i,a]):a.input&&a.input.trigger("change"),a.inline?this._updateDatepicker(a):(this._hideDatepicker(),this._lastInput=a.input[0],"object"!=typeof a.input[0]&&a.input.focus(),this._lastInput=null)},_updateAlternate:function(t){var i,n,s,a=this._get(t,"altField");a&&(i=this._get(t,"altFormat")||this._get(t,"dateFormat"),n=this._getDate(t),s=this.formatDate(i,n,this._getFormatConfig(t)),e(a).each(function(){e(this).val(s)}))},noWeekends:function(e){var t=e.getDay();return[t>0&&t<6,""]},iso8601Week:function(e){var t,i=new Date(e.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),t=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((t-i)/864e5)/7)+1},parseDate:function(t,i,n){if(null==t||null==i)throw"Invalid arguments";if(""===(i="object"==typeof i?i.toString():i+""))return null;var s,a,o,r,l=0,d=(n?n.shortYearCutoff:null)||this._defaults.shortYearCutoff,c="string"!=typeof d?d:(new Date).getFullYear()%100+parseInt(d,10),u=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,h=(n?n.dayNames:null)||this._defaults.dayNames,p=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,f=(n?n.monthNames:null)||this._defaults.monthNames,m=-1,g=-1,v=-1,b=-1,_=!1,$=function(e){var i=s+1<t.length&&t.charAt(s+1)===e;return i&&s++,i},y=function(e){var t=$(e),n="@"===e?14:"!"===e?20:"y"===e&&t?4:"o"===e?3:2,s=new RegExp("^\\d{1,"+n+"}"),a=i.substring(l).match(s);if(!a)throw"Missing number at position "+l;return l+=a[0].length,parseInt(a[0],10)},w=function(t,n,s){var a=-1,o=e.map($(t)?s:n,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});if(e.each(o,function(e,t){var n=t[1];if(i.substr(l,n.length).toLowerCase()===n.toLowerCase())return a=t[0],l+=n.length,!1}),-1!==a)return a+1;throw"Unknown name at position "+l},C=function(){if(i.charAt(l)!==t.charAt(s))throw"Unexpected literal at position "+l;l++};for(s=0;s<t.length;s++)if(_)"'"!==t.charAt(s)||$("'")?C():_=!1;else switch(t.charAt(s)){case"d":v=y("d");break;case"D":w("D",u,h);break;case"o":b=y("o");break;case"m":g=y("m");break;case"M":g=w("M",p,f);break;case"y":m=y("y");break;case"@":m=(r=new Date(y("@"))).getFullYear(),g=r.getMonth()+1,v=r.getDate();break;case"!":m=(r=new Date((y("!")-this._ticksTo1970)/1e4)).getFullYear(),g=r.getMonth()+1,v=r.getDate();break;case"'":$("'")?C():_=!0;break;default:C()}if(l<i.length&&(o=i.substr(l),!/^\s+/.test(o)))throw"Extra/unparsed characters found in date: "+o;if(-1===m?m=(new Date).getFullYear():m<100&&(m+=(new Date).getFullYear()-(new Date).getFullYear()%100+(m<=c?0:-100)),b>-1)for(g=1,v=b;;){if(a=this._getDaysInMonth(m,g-1),v<=a)break;g++,v-=a}if((r=this._daylightSavingAdjust(new Date(m,g-1,v))).getFullYear()!==m||r.getMonth()+1!==g||r.getDate()!==v)throw"Invalid date";return r},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(e,t,i){if(!t)return"";var n,s=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,a=(i?i.dayNames:null)||this._defaults.dayNames,o=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,r=(i?i.monthNames:null)||this._defaults.monthNames,l=function(t){var i=n+1<e.length&&e.charAt(n+1)===t;return i&&n++,i},d=function(e,t,i){var n=""+t;if(l(e))for(;n.length<i;)n="0"+n;return n},c=function(e,t,i,n){return l(e)?n[t]:i[t]},u="",h=!1;if(t)for(n=0;n<e.length;n++)if(h)"'"!==e.charAt(n)||l("'")?u+=e.charAt(n):h=!1;else switch(e.charAt(n)){case"d":u+=d("d",t.getDate(),2);break;case"D":u+=c("D",t.getDay(),s,a);break;case"o":u+=d("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":u+=d("m",t.getMonth()+1,2);break;case"M":u+=c("M",t.getMonth(),o,r);break;case"y":u+=l("y")?t.getFullYear():(t.getYear()%100<10?"0":"")+t.getYear()%100;break;case"@":u+=t.getTime();break;case"!":u+=1e4*t.getTime()+this._ticksTo1970;break;case"'":l("'")?u+="'":h=!0;break;default:u+=e.charAt(n)}return u},_possibleChars:function(e){var t,i="",n=!1,s=function(i){var n=t+1<e.length&&e.charAt(t+1)===i;return n&&t++,n};for(t=0;t<e.length;t++)if(n)"'"!==e.charAt(t)||s("'")?i+=e.charAt(t):n=!1;else switch(e.charAt(t)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":s("'")?i+="'":n=!0;break;default:i+=e.charAt(t)}return i},_get:function(e,t){return void 0!==e.settings[t]?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()!==e.lastVal){var i=this._get(e,"dateFormat"),n=e.lastVal=e.input?e.input.val():null,s=this._getDefaultDate(e),a=s,o=this._getFormatConfig(e);try{a=this.parseDate(i,n,o)||s}catch(e){n=t?"":n}e.selectedDay=a.getDate(),e.drawMonth=e.selectedMonth=a.getMonth(),e.drawYear=e.selectedYear=a.getFullYear(),e.currentDay=n?a.getDate():0,e.currentMonth=n?a.getMonth():0,e.currentYear=n?a.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(t,i,n){var s=null==i||""===i?n:"string"==typeof i?function(i){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),i,e.datepicker._getFormatConfig(t))}catch(e){}for(var n=(i.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,s=n.getFullYear(),a=n.getMonth(),o=n.getDate(),r=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=r.exec(i);l;){switch(l[2]||"d"){case"d":case"D":o+=parseInt(l[1],10);break;case"w":case"W":o+=7*parseInt(l[1],10);break;case"m":case"M":a+=parseInt(l[1],10),o=Math.min(o,e.datepicker._getDaysInMonth(s,a));break;case"y":case"Y":s+=parseInt(l[1],10),o=Math.min(o,e.datepicker._getDaysInMonth(s,a))}l=r.exec(i)}return new Date(s,a,o)}(i):"number"==typeof i?isNaN(i)?n:function(e){var t=new Date;return t.setDate(t.getDate()+e),t}(i):new Date(i.getTime());return(s=s&&"Invalid Date"===s.toString()?n:s)&&(s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0)),this._daylightSavingAdjust(s)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,i){var n=!t,s=e.selectedMonth,a=e.selectedYear,o=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=o.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=o.getMonth(),e.drawYear=e.selectedYear=e.currentYear=o.getFullYear(),s===e.selectedMonth&&a===e.selectedYear||i||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(n?"":this._formatDate(e))},_getDate:function(e){return!e.currentYear||e.input&&""===e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay))},_attachHandlers:function(t){var i=this._get(t,"stepMonths"),n="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){window["DP_jQuery_"+r].datepicker._adjustDate(n,-i,"M")},next:function(){window["DP_jQuery_"+r].datepicker._adjustDate(n,+i,"M")},hide:function(){window["DP_jQuery_"+r].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+r].datepicker._gotoToday(n)},selectDay:function(){return window["DP_jQuery_"+r].datepicker._selectDay(n,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return window["DP_jQuery_"+r].datepicker._selectMonthYear(n,this,"M"),!1},selectYear:function(){return window["DP_jQuery_"+r].datepicker._selectMonthYear(n,this,"Y"),!1}};e(this).bind(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,i,n,s,a,o,r,l,d,c,u,h,p,f,m,g,v,b,_,$,y,w,C,x,k,T,N,S,D,I,P,E,A,M,L,O,R,F,H,z=new Date,j=this._daylightSavingAdjust(new Date(z.getFullYear(),z.getMonth(),z.getDate())),W=this._get(e,"isRTL"),U=this._get(e,"showButtonPanel"),B=this._get(e,"hideIfNoPrevNext"),q=this._get(e,"navigationAsDateFormat"),Y=this._getNumberOfMonths(e),V=this._get(e,"showCurrentAtPos"),X=this._get(e,"stepMonths"),G=1!==Y[0]||1!==Y[1],K=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),Q=this._getMinMaxDate(e,"min"),J=this._getMinMaxDate(e,"max"),Z=e.drawMonth-V,ee=e.drawYear;if(Z<0&&(Z+=12,ee--),J)for(t=this._daylightSavingAdjust(new Date(J.getFullYear(),J.getMonth()-Y[0]*Y[1]+1,J.getDate())),t=Q&&t<Q?Q:t;this._daylightSavingAdjust(new Date(ee,Z,1))>t;)--Z<0&&(Z=11,ee--);for(e.drawMonth=Z,e.drawYear=ee,i=this._get(e,"prevText"),i=q?this.formatDate(i,this._daylightSavingAdjust(new Date(ee,Z-X,1)),this._getFormatConfig(e)):i,n=this._canAdjustMonth(e,-1,ee,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(W?"e":"w")+"'>"+i+"</span></a>":B?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(W?"e":"w")+"'>"+i+"</span></a>",s=this._get(e,"nextText"),s=q?this.formatDate(s,this._daylightSavingAdjust(new Date(ee,Z+X,1)),this._getFormatConfig(e)):s,a=this._canAdjustMonth(e,1,ee,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+s+"'><span class='ui-icon ui-icon-circle-triangle-"+(W?"w":"e")+"'>"+s+"</span></a>":B?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+s+"'><span class='ui-icon ui-icon-circle-triangle-"+(W?"w":"e")+"'>"+s+"</span></a>",o=this._get(e,"currentText"),r=this._get(e,"gotoCurrent")&&e.currentDay?K:j,o=q?this.formatDate(o,r,this._getFormatConfig(e)):o,l=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",d=U?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(W?l:"")+(this._isInRange(e,r)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+o+"</button>":"")+(W?"":l)+"</div>":"",c=parseInt(this._get(e,"firstDay"),10),c=isNaN(c)?0:c,u=this._get(e,"showWeek"),h=this._get(e,"dayNames"),p=this._get(e,"dayNamesMin"),f=this._get(e,"monthNames"),m=this._get(e,"monthNamesShort"),g=this._get(e,"beforeShowDay"),v=this._get(e,"showOtherMonths"),b=this._get(e,"selectOtherMonths"),_=this._getDefaultDate(e),$="",w=0;w<Y[0];w++){for(C="",this.maxRows=4,x=0;x<Y[1];x++){if(k=this._daylightSavingAdjust(new Date(ee,Z,e.selectedDay)),T=" ui-corner-all",N="",G){if(N+="<div class='ui-datepicker-group",Y[1]>1)switch(x){case 0:N+=" ui-datepicker-group-first",T=" ui-corner-"+(W?"right":"left");break;case Y[1]-1:N+=" ui-datepicker-group-last",T=" ui-corner-"+(W?"left":"right");break;default:N+=" ui-datepicker-group-middle",T=""}N+="'>"}for(N+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+T+"'>"+(/all|left/.test(T)&&0===w?W?a:n:"")+(/all|right/.test(T)&&0===w?W?n:a:"")+this._generateMonthYearHeader(e,Z,ee,Q,J,w>0||x>0,f,m)+"</div><table class='ui-datepicker-calendar'><thead><tr>",S=u?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"",y=0;y<7;y++)D=(y+c)%7,S+="<th"+((y+c+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+h[D]+"'>"+p[D]+"</span></th>";for(N+=S+"</tr></thead><tbody>",I=this._getDaysInMonth(ee,Z),ee===e.selectedYear&&Z===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,I)),P=(this._getFirstDayOfMonth(ee,Z)-c+7)%7,E=Math.ceil((P+I)/7),A=G&&this.maxRows>E?this.maxRows:E,this.maxRows=A,M=this._daylightSavingAdjust(new Date(ee,Z,1-P)),L=0;L<A;L++){for(N+="<tr>",O=u?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(M)+"</td>":"",y=0;y<7;y++)R=g?g.apply(e.input?e.input[0]:null,[M]):[!0,""],H=(F=M.getMonth()!==Z)&&!b||!R[0]||Q&&M<Q||J&&M>J,O+="<td class='"+((y+c+6)%7>=5?" ui-datepicker-week-end":"")+(F?" ui-datepicker-other-month":"")+(M.getTime()===k.getTime()&&Z===e.selectedMonth&&e._keyEvent||_.getTime()===M.getTime()&&_.getTime()===k.getTime()?" "+this._dayOverClass:"")+(H?" "+this._unselectableClass+" ui-state-disabled":"")+(F&&!v?"":" "+R[1]+(M.getTime()===K.getTime()?" "+this._currentClass:"")+(M.getTime()===j.getTime()?" ui-datepicker-today":""))+"'"+(F&&!v||!R[2]?"":" title='"+R[2].replace(/'/g,"&#39;")+"'")+(H?"":" data-handler='selectDay' data-event='click' data-month='"+M.getMonth()+"' data-year='"+M.getFullYear()+"'")+">"+(F&&!v?"&#xa0;":H?"<span class='ui-state-default'>"+M.getDate()+"</span>":"<a class='ui-state-default"+(M.getTime()===j.getTime()?" ui-state-highlight":"")+(M.getTime()===K.getTime()?" ui-state-active":"")+(F?" ui-priority-secondary":"")+"' href='#'>"+M.getDate()+"</a>")+"</td>",M.setDate(M.getDate()+1),M=this._daylightSavingAdjust(M);N+=O+"</tr>"}++Z>11&&(Z=0,ee++),C+=N+="</tbody></table>"+(G?"</div>"+(Y[0]>0&&x===Y[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"")}$+=C}return $+=d,e._keyEvent=!1,$},_generateMonthYearHeader:function(e,t,i,n,s,a,o,r){var l,d,c,u,h,p,f,m,g=this._get(e,"changeMonth"),v=this._get(e,"changeYear"),b=this._get(e,"showMonthAfterYear"),_="<div class='ui-datepicker-title'>",$="";if(a||!g)$+="<span class='ui-datepicker-month'>"+o[t]+"</span>";else{for(l=n&&n.getFullYear()===i,d=s&&s.getFullYear()===i,$+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",c=0;c<12;c++)(!l||c>=n.getMonth())&&(!d||c<=s.getMonth())&&($+="<option value='"+c+"'"+(c===t?" selected='selected'":"")+">"+r[c]+"</option>");$+="</select>"}if(b||(_+=$+(!a&&g&&v?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",a||!v)_+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(u=this._get(e,"yearRange").split(":"),h=(new Date).getFullYear(),f=(p=function(e){var t=e.match(/c[+\-].*/)?i+parseInt(e.substring(1),10):e.match(/[+\-].*/)?h+parseInt(e,10):parseInt(e,10);return isNaN(t)?h:t})(u[0]),m=Math.max(f,p(u[1]||"")),f=n?Math.max(f,n.getFullYear()):f,m=s?Math.min(m,s.getFullYear()):m,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";f<=m;f++)e.yearshtml+="<option value='"+f+"'"+(f===i?" selected='selected'":"")+">"+f+"</option>";e.yearshtml+="</select>",_+=e.yearshtml,e.yearshtml=null}return _+=this._get(e,"yearSuffix"),b&&(_+=(!a&&g&&v?"":"&#xa0;")+$),_+="</div>"},_adjustInstDate:function(e,t,i){var n=e.drawYear+("Y"===i?t:0),s=e.drawMonth+("M"===i?t:0),a=Math.min(e.selectedDay,this._getDaysInMonth(n,s))+("D"===i?t:0),o=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(n,s,a)));e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),"M"!==i&&"Y"!==i||this._notifyChange(e)},_restrictMinMax:function(e,t){var i=this._getMinMaxDate(e,"min"),n=this._getMinMaxDate(e,"max"),s=i&&t<i?i:t;return n&&s>n?n:s},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,i,n){var s=this._getNumberOfMonths(e),a=this._daylightSavingAdjust(new Date(i,n+(t<0?t:s[0]*s[1]),1));return t<0&&a.setDate(this._getDaysInMonth(a.getFullYear(),a.getMonth())),this._isInRange(e,a)},_isInRange:function(e,t){var i,n,s=this._getMinMaxDate(e,"min"),a=this._getMinMaxDate(e,"max"),o=null,r=null,l=this._get(e,"yearRange");return l&&(i=l.split(":"),n=(new Date).getFullYear(),o=parseInt(i[0],10),r=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(o+=n),i[1].match(/[+\-].*/)&&(r+=n)),(!s||t.getTime()>=s.getTime())&&(!a||t.getTime()<=a.getTime())&&(!o||t.getFullYear()>=o)&&(!r||t.getFullYear()<=r)},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,i,n){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var s=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(n,i,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),s,this._getFormatConfig(e))}}),e.fn.datepicker=function(t){if(!this.length)return this;e.datepicker.initialized||(e(document).mousedown(e.datepicker._checkExternalClick),e.datepicker.initialized=!0),0===e("#"+e.datepicker._mainDivId).length&&e("body").append(e.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof t||"isDisabled"!==t&&"getDate"!==t&&"widget"!==t?"option"===t&&2===arguments.length&&"string"==typeof arguments[1]?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i)):this.each(function(){"string"==typeof t?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(i)):e.datepicker._attachDatepicker(this,t)}):e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i))},e.datepicker=new i,e.datepicker.initialized=!1,e.datepicker.uuid=(new Date).getTime(),e.datepicker.version="1.10.2",window["DP_jQuery_"+r]=e}(jQuery),function(e,t){var i={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},n={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};e.widget("ui.dialog",{version:"1.10.2",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var i=e(this).css(t).offset().top;i<0&&e(this).css("top",t.top-i)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&e.fn.draggable&&this._makeDraggable(),this.options.resizable&&e.fn.resizable&&this._makeResizable(),this._isOpen=!1},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?e(t):this.document.find(t||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),(e=t.parent.children().eq(t.index)).length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:e.noop,enable:e.noop,close:function(t){var i=this;this._isOpen&&!1!==this._trigger("beforeClose",t)&&(this._isOpen=!1,this._destroyOverlay(),this.opener.filter(":focusable").focus().length||e(this.document[0].activeElement).blur(),this._hide(this.uiDialog,this.options.hide,function(){i._trigger("close",t)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(e,t){var i=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;return i&&!t&&this._trigger("focus",e),i},open:function(){var t=this;this._isOpen?this._moveToTop()&&this._focusTabbable():(this._isOpen=!0,this.opener=e(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show,function(){t._focusTabbable(),t._trigger("focus")}),this._trigger("open"))},_focusTabbable:function(){var e=this.element.find("[autofocus]");e.length||(e=this.element.find(":tabbable")),e.length||(e=this.uiDialogButtonPane.find(":tabbable")),e.length||(e=this.uiDialogTitlebarClose.filter(":tabbable")),e.length||(e=this.uiDialog),e.eq(0).focus()},_keepFocus:function(t){function i(){var t=this.document[0].activeElement;this.uiDialog[0]===t||e.contains(this.uiDialog[0],t)||this._focusTabbable()}t.preventDefault(),i.call(this),this._delay(i)},_createWrapper:function(){this.uiDialog=e("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE)return t.preventDefault(),void this.close(t);if(t.keyCode===e.ui.keyCode.TAB){var i=this.uiDialog.find(":tabbable"),n=i.filter(":first"),s=i.filter(":last");t.target!==s[0]&&t.target!==this.uiDialog[0]||t.shiftKey?t.target!==n[0]&&t.target!==this.uiDialog[0]||!t.shiftKey||(s.focus(1),t.preventDefault()):(n.focus(1),t.preventDefault())}},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=e("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(t){e(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=e("<button></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e)}}),t=e("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(t),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(e){this.options.title||e.html("&#160;"),e.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=e("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=e("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var t=this,i=this.options.buttons;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),e.isEmptyObject(i)||e.isArray(i)&&!i.length?this.uiDialog.removeClass("ui-dialog-buttons"):(e.each(i,function(i,n){var s,a;n=e.isFunction(n)?{click:n,text:i}:n,n=e.extend({type:"button"},n),s=n.click,n.click=function(){s.apply(t.element[0],arguments)},a={icons:n.icons,text:n.showText},delete n.icons,delete n.showText,e("<button></button>",n).button(a).appendTo(t.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){function t(e){return{position:e.position,offset:e.offset}}var i=this,n=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(n,s){e(this).addClass("ui-dialog-dragging"),i._blockFrames(),i._trigger("dragStart",n,t(s))},drag:function(e,n){i._trigger("drag",e,t(n))},stop:function(s,a){n.position=[a.position.left-i.document.scrollLeft(),a.position.top-i.document.scrollTop()],e(this).removeClass("ui-dialog-dragging"),i._unblockFrames(),i._trigger("dragStop",s,t(a))}})},_makeResizable:function(){function t(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}var i=this,n=this.options,s=n.resizable,a=this.uiDialog.css("position"),o="string"==typeof s?s:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:n.maxWidth,maxHeight:n.maxHeight,minWidth:n.minWidth,minHeight:this._minHeight(),handles:o,start:function(n,s){e(this).addClass("ui-dialog-resizing"),i._blockFrames(),i._trigger("resizeStart",n,t(s))},resize:function(e,n){i._trigger("resize",e,t(n))},stop:function(s,a){n.height=e(this).height(),n.width=e(this).width(),e(this).removeClass("ui-dialog-resizing"),i._unblockFrames(),i._trigger("resizeStop",s,t(a))}}).css("position",a)},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show(),this.uiDialog.position(this.options.position),e||this.uiDialog.hide()},_setOptions:function(t){var s=this,a=!1,o={};e.each(t,function(e,t){s._setOption(e,t),e in i&&(a=!0),e in n&&(o[e]=t)}),a&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",o)},_setOption:function(e,t){var i,n,s=this.uiDialog;"dialogClass"===e&&s.removeClass(this.options.dialogClass).addClass(t),"disabled"!==e&&(this._super(e,t),"appendTo"===e&&this.uiDialog.appendTo(this._appendTo()),"buttons"===e&&this._createButtons(),"closeText"===e&&this.uiDialogTitlebarClose.button({label:""+t}),"draggable"===e&&((i=s.is(":data(ui-draggable)"))&&!t&&s.draggable("destroy"),!i&&t&&this._makeDraggable()),"position"===e&&this._position(),"resizable"===e&&((n=s.is(":data(ui-resizable)"))&&!t&&s.resizable("destroy"),n&&"string"==typeof t&&s.resizable("option","handles",t),n||!1===t||this._makeResizable()),"title"===e&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var e,t,i,n=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),n.minWidth>n.width&&(n.width=n.minWidth),e=this.uiDialog.css({height:"auto",width:n.width}).outerHeight(),t=Math.max(0,n.minHeight-e),i="number"==typeof n.maxHeight?Math.max(0,n.maxHeight-e):"none","auto"===n.height?this.element.css({minHeight:t,maxHeight:i,height:"auto"}):this.element.height(Math.max(0,n.height-e)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var t=e(this);return e("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(t){return!!e(t.target).closest(".ui-dialog").length||!!e(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var t=this,i=this.widgetFullName;e.ui.dialog.overlayInstances||this._delay(function(){e.ui.dialog.overlayInstances&&this.document.bind("focusin.dialog",function(n){t._allowInteraction(n)||(n.preventDefault(),e(".ui-dialog:visible:last .ui-dialog-content").data(i)._focusTabbable())})}),this.overlay=e("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),e.ui.dialog.overlayInstances++}},_destroyOverlay:function(){this.options.modal&&this.overlay&&(e.ui.dialog.overlayInstances--,e.ui.dialog.overlayInstances||this.document.unbind("focusin.dialog"),this.overlay.remove(),this.overlay=null)}}),e.ui.dialog.overlayInstances=0,!1!==e.uiBackCompat&&e.widget("ui.dialog",e.ui.dialog,{_position:function(){var t,i=this.options.position,n=[],s=[0,0];i?(("string"==typeof i||"object"==typeof i&&"0"in i)&&(1===(n=i.split?i.split(" "):[i[0],i[1]]).length&&(n[1]=n[0]),e.each(["left","top"],function(e,t){+n[e]===n[e]&&(s[e]=n[e],n[e]=t)}),i={my:n[0]+(s[0]<0?s[0]:"+"+s[0])+" "+n[1]+(s[1]<0?s[1]:"+"+s[1]),at:n.join(" ")}),i=e.extend({},e.ui.dialog.prototype.options.position,i)):i=e.ui.dialog.prototype.options.position,(t=this.uiDialog.is(":visible"))||this.uiDialog.show(),this.uiDialog.position(i),t||this.uiDialog.hide()}})}(jQuery),function(e,t){var i=/up|down|vertical/,n=/up|left|vertical|horizontal/;e.effects.effect.blind=function(t,s){var a,o,r,l=e(this),d=["position","top","bottom","left","right","height","width"],c=e.effects.setMode(l,t.mode||"hide"),u=t.direction||"up",h=i.test(u),p=h?"height":"width",f=h?"top":"left",m=n.test(u),g={},v="show"===c;l.parent().is(".ui-effects-wrapper")?e.effects.save(l.parent(),d):e.effects.save(l,d),l.show(),o=(a=e.effects.createWrapper(l).css({overflow:"hidden"}))[p](),r=parseFloat(a.css(f))||0,g[p]=v?o:0,m||(l.css(h?"bottom":"right",0).css(h?"top":"left","auto").css({position:"absolute"}),g[f]=v?r:o+r),v&&(a.css(p,0),m||a.css(f,r+o)),a.animate(g,{duration:t.duration,easing:t.easing,queue:!1,complete:function(){"hide"===c&&l.hide(),e.effects.restore(l,d),e.effects.removeWrapper(l),s()}})}}(jQuery),function(e,t){e.effects.effect.bounce=function(t,i){var n,s,a,o=e(this),r=["position","top","bottom","left","right","height","width"],l=e.effects.setMode(o,t.mode||"effect"),d="hide"===l,c="show"===l,u=t.direction||"up",h=t.distance,p=t.times||5,f=2*p+(c||d?1:0),m=t.duration/f,g=t.easing,v="up"===u||"down"===u?"top":"left",b="up"===u||"left"===u,_=o.queue(),$=_.length;for((c||d)&&r.push("opacity"),e.effects.save(o,r),o.show(),e.effects.createWrapper(o),h||(h=o["top"===v?"outerHeight":"outerWidth"]()/3),c&&((a={opacity:1})[v]=0,o.css("opacity",0).css(v,b?2*-h:2*h).animate(a,m,g)),d&&(h/=Math.pow(2,p-1)),(a={})[v]=0,n=0;n<p;n++)(s={})[v]=(b?"-=":"+=")+h,o.animate(s,m,g).animate(a,m,g),h=d?2*h:h/2;d&&((s={opacity:0})[v]=(b?"-=":"+=")+h,o.animate(s,m,g)),o.queue(function(){d&&o.hide(),e.effects.restore(o,r),e.effects.removeWrapper(o),i()}),$>1&&_.splice.apply(_,[1,0].concat(_.splice($,f+1))),o.dequeue()}}(jQuery),function(e,t){e.effects.effect.clip=function(t,i){var n,s,a,o=e(this),r=["position","top","bottom","left","right","height","width"],l="show"===e.effects.setMode(o,t.mode||"hide"),d="vertical"===(t.direction||"vertical"),c=d?"height":"width",u=d?"top":"left",h={};e.effects.save(o,r),o.show(),n=e.effects.createWrapper(o).css({overflow:"hidden"}),a=(s="IMG"===o[0].tagName?n:o)[c](),l&&(s.css(c,0),s.css(u,a/2)),h[c]=l?a:0,h[u]=l?0:a/2,s.animate(h,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){l||o.hide(),e.effects.restore(o,r),e.effects.removeWrapper(o),i()}})}}(jQuery),function(e,t){e.effects.effect.drop=function(t,i){var n,s=e(this),a=["position","top","bottom","left","right","opacity","height","width"],o=e.effects.setMode(s,t.mode||"hide"),r="show"===o,l=t.direction||"left",d="up"===l||"down"===l?"top":"left",c="up"===l||"left"===l?"pos":"neg",u={opacity:r?1:0};e.effects.save(s,a),s.show(),e.effects.createWrapper(s),n=t.distance||s["top"===d?"outerHeight":"outerWidth"](!0)/2,r&&s.css("opacity",0).css(d,"pos"===c?-n:n),u[d]=(r?"pos"===c?"+=":"-=":"pos"===c?"-=":"+=")+n,s.animate(u,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===o&&s.hide(),e.effects.restore(s,a),e.effects.removeWrapper(s),i()}})}}(jQuery),function(e,t){e.effects.effect.explode=function(t,i){function n(){h.css({visibility:"visible"}),e(v).remove(),p||h.hide(),i()}var s,a,o,r,l,d,c=t.pieces?Math.round(Math.sqrt(t.pieces)):3,u=c,h=e(this),p="show"===e.effects.setMode(h,t.mode||"hide"),f=h.show().css("visibility","hidden").offset(),m=Math.ceil(h.outerWidth()/u),g=Math.ceil(h.outerHeight()/c),v=[];for(s=0;s<c;s++)for(r=f.top+s*g,d=s-(c-1)/2,a=0;a<u;a++)o=f.left+a*m,l=a-(u-1)/2,h.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-a*m,top:-s*g}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:m,height:g,left:o+(p?l*m:0),top:r+(p?d*g:0),opacity:p?0:1}).animate({left:o+(p?0:l*m),top:r+(p?0:d*g),opacity:p?1:0},t.duration||500,t.easing,function(){v.push(this),v.length===c*u&&n()})}}(jQuery),function(e,t){e.effects.effect.fade=function(t,i){var n=e(this),s=e.effects.setMode(n,t.mode||"toggle");n.animate({opacity:s},{queue:!1,duration:t.duration,easing:t.easing,complete:i})}}(jQuery),function(e,t){e.effects.effect.fold=function(t,i){var n,s,a=e(this),o=["position","top","bottom","left","right","height","width"],r=e.effects.setMode(a,t.mode||"hide"),l="show"===r,d="hide"===r,c=t.size||15,u=/([0-9]+)%/.exec(c),h=!!t.horizFirst,p=l!==h,f=p?["width","height"]:["height","width"],m=t.duration/2,g={},v={};e.effects.save(a,o),a.show(),n=e.effects.createWrapper(a).css({overflow:"hidden"}),s=p?[n.width(),n.height()]:[n.height(),n.width()],u&&(c=parseInt(u[1],10)/100*s[d?0:1]),l&&n.css(h?{height:0,width:c}:{height:c,width:0}),g[f[0]]=l?s[0]:c,v[f[1]]=l?s[1]:0,n.animate(g,m,t.easing).animate(v,m,t.easing,function(){d&&a.hide(),e.effects.restore(a,o),e.effects.removeWrapper(a),i()})}}(jQuery),function(e,t){e.effects.effect.highlight=function(t,i){var n=e(this),s=["backgroundImage","backgroundColor","opacity"],a=e.effects.setMode(n,t.mode||"show"),o={backgroundColor:n.css("backgroundColor")};"hide"===a&&(o.opacity=0),e.effects.save(n,s),n.show().css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(o,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===a&&n.hide(),e.effects.restore(n,s),i()}})}}(jQuery),function(e,t){e.effects.effect.pulsate=function(t,i){var n,s=e(this),a=e.effects.setMode(s,t.mode||"show"),o="show"===a,r="hide"===a,l=o||"hide"===a,d=2*(t.times||5)+(l?1:0),c=t.duration/d,u=0,h=s.queue(),p=h.length;for(!o&&s.is(":visible")||(s.css("opacity",0).show(),u=1),n=1;n<d;n++)s.animate({opacity:u},c,t.easing),u=1-u;s.animate({opacity:u},c,t.easing),s.queue(function(){r&&s.hide(),i()}),p>1&&h.splice.apply(h,[1,0].concat(h.splice(p,d+1))),s.dequeue()}}(jQuery),function(e,t){e.effects.effect.puff=function(t,i){var n=e(this),s=e.effects.setMode(n,t.mode||"hide"),a="hide"===s,o=parseInt(t.percent,10)||150,r=o/100,l={height:n.height(),width:n.width(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth()};e.extend(t,{effect:"scale",queue:!1,fade:!0,mode:s,complete:i,percent:a?o:100,from:a?l:{height:l.height*r,width:l.width*r,outerHeight:l.outerHeight*r,outerWidth:l.outerWidth*r}}),n.effect(t)},e.effects.effect.scale=function(t,i){var n=e(this),s=e.extend(!0,{},t),a=e.effects.setMode(n,t.mode||"effect"),o=parseInt(t.percent,10)||(0===parseInt(t.percent,10)?0:"hide"===a?0:100),r=t.direction||"both",l=t.origin,d={height:n.height(),width:n.width(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth()},c={y:"horizontal"!==r?o/100:1,x:"vertical"!==r?o/100:1};s.effect="size",s.queue=!1,s.complete=i,"effect"!==a&&(s.origin=l||["middle","center"],s.restore=!0),s.from=t.from||("show"===a?{height:0,width:0,outerHeight:0,outerWidth:0}:d),s.to={height:d.height*c.y,width:d.width*c.x,outerHeight:d.outerHeight*c.y,outerWidth:d.outerWidth*c.x},s.fade&&("show"===a&&(s.from.opacity=0,s.to.opacity=1),"hide"===a&&(s.from.opacity=1,s.to.opacity=0)),n.effect(s)},e.effects.effect.size=function(t,i){var n,s,a,o=e(this),r=["position","top","bottom","left","right","width","height","overflow","opacity"],l=["position","top","bottom","left","right","overflow","opacity"],d=["width","height","overflow"],c=["fontSize"],u=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],h=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],p=e.effects.setMode(o,t.mode||"effect"),f=t.restore||"effect"!==p,m=t.scale||"both",g=t.origin||["middle","center"],v=o.css("position"),b=f?r:l,_={height:0,width:0,outerHeight:0,outerWidth:0};"show"===p&&o.show(),n={height:o.height(),width:o.width(),outerHeight:o.outerHeight(),outerWidth:o.outerWidth()},"toggle"===t.mode&&"show"===p?(o.from=t.to||_,o.to=t.from||n):(o.from=t.from||("show"===p?_:n),o.to=t.to||("hide"===p?_:n)),a={from:{y:o.from.height/n.height,x:o.from.width/n.width},to:{y:o.to.height/n.height,x:o.to.width/n.width}},"box"!==m&&"both"!==m||(a.from.y!==a.to.y&&(b=b.concat(u),o.from=e.effects.setTransition(o,u,a.from.y,o.from),o.to=e.effects.setTransition(o,u,a.to.y,o.to)),a.from.x!==a.to.x&&(b=b.concat(h),o.from=e.effects.setTransition(o,h,a.from.x,o.from),o.to=e.effects.setTransition(o,h,a.to.x,o.to))),"content"!==m&&"both"!==m||a.from.y!==a.to.y&&(b=b.concat(c).concat(d),o.from=e.effects.setTransition(o,c,a.from.y,o.from),o.to=e.effects.setTransition(o,c,a.to.y,o.to)),e.effects.save(o,b),o.show(),e.effects.createWrapper(o),o.css("overflow","hidden").css(o.from),g&&(s=e.effects.getBaseline(g,n),o.from.top=(n.outerHeight-o.outerHeight())*s.y,o.from.left=(n.outerWidth-o.outerWidth())*s.x,o.to.top=(n.outerHeight-o.to.outerHeight)*s.y,o.to.left=(n.outerWidth-o.to.outerWidth)*s.x),o.css(o.from),"content"!==m&&"both"!==m||(u=u.concat(["marginTop","marginBottom"]).concat(c),h=h.concat(["marginLeft","marginRight"]),d=r.concat(u).concat(h),o.find("*[width]").each(function(){var i=e(this),n={height:i.height(),width:i.width(),outerHeight:i.outerHeight(),outerWidth:i.outerWidth()};f&&e.effects.save(i,d),i.from={height:n.height*a.from.y,width:n.width*a.from.x,outerHeight:n.outerHeight*a.from.y,outerWidth:n.outerWidth*a.from.x},i.to={height:n.height*a.to.y,width:n.width*a.to.x,outerHeight:n.height*a.to.y,outerWidth:n.width*a.to.x},a.from.y!==a.to.y&&(i.from=e.effects.setTransition(i,u,a.from.y,i.from),i.to=e.effects.setTransition(i,u,a.to.y,i.to)),a.from.x!==a.to.x&&(i.from=e.effects.setTransition(i,h,a.from.x,i.from),i.to=e.effects.setTransition(i,h,a.to.x,i.to)),i.css(i.from),i.animate(i.to,t.duration,t.easing,function(){f&&e.effects.restore(i,d)})})),o.animate(o.to,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){0===o.to.opacity&&o.css("opacity",o.from.opacity),"hide"===p&&o.hide(),e.effects.restore(o,b),f||("static"===v?o.css({position:"relative",top:o.to.top,left:o.to.left}):e.each(["top","left"],function(e,t){o.css(t,function(t,i){var n=parseInt(i,10),s=e?o.to.left:o.to.top;return"auto"===i?s+"px":n+s+"px"})})),e.effects.removeWrapper(o),i()}})}}(jQuery),function(e,t){e.effects.effect.shake=function(t,i){var n,s=e(this),a=["position","top","bottom","left","right","height","width"],o=e.effects.setMode(s,t.mode||"effect"),r=t.direction||"left",l=t.distance||20,d=t.times||3,c=2*d+1,u=Math.round(t.duration/c),h="up"===r||"down"===r?"top":"left",p="up"===r||"left"===r,f={},m={},g={},v=s.queue(),b=v.length;for(e.effects.save(s,a),s.show(),e.effects.createWrapper(s),f[h]=(p?"-=":"+=")+l,m[h]=(p?"+=":"-=")+2*l,g[h]=(p?"-=":"+=")+2*l,s.animate(f,u,t.easing),n=1;n<d;n++)s.animate(m,u,t.easing).animate(g,u,t.easing);s.animate(m,u,t.easing).animate(f,u/2,t.easing).queue(function(){"hide"===o&&s.hide(),e.effects.restore(s,a),e.effects.removeWrapper(s),i()}),b>1&&v.splice.apply(v,[1,0].concat(v.splice(b,c+1))),s.dequeue()}}(jQuery),function(e,t){e.effects.effect.slide=function(t,i){var n,s=e(this),a=["position","top","bottom","left","right","width","height"],o=e.effects.setMode(s,t.mode||"show"),r="show"===o,l=t.direction||"left",d="up"===l||"down"===l?"top":"left",c="up"===l||"left"===l,u={};e.effects.save(s,a),s.show(),n=t.distance||s["top"===d?"outerHeight":"outerWidth"](!0),e.effects.createWrapper(s).css({overflow:"hidden"}),r&&s.css(d,c?isNaN(n)?"-"+n:-n:n),u[d]=(r?c?"+=":"-=":c?"-=":"+=")+n,s.animate(u,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===o&&s.hide(),e.effects.restore(s,a),e.effects.removeWrapper(s),i()}})}}(jQuery),function(e,t){e.effects.effect.transfer=function(t,i){var n=e(this),s=e(t.to),a="fixed"===s.css("position"),o=e("body"),r=a?o.scrollTop():0,l=a?o.scrollLeft():0,d=s.offset(),c={top:d.top-r,left:d.left-l,height:s.innerHeight(),width:s.innerWidth()},u=n.offset(),h=e("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(t.className).css({top:u.top-r,left:u.left-l,height:n.innerHeight(),width:n.innerWidth(),position:a?"fixed":"absolute"}).animate(c,t.duration,t.easing,function(){h.remove(),i()})}}(jQuery),function(e,t){e.widget("ui.menu",{version:"1.10.2",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,e.proxy(function(e){this.options.disabled&&e.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(e){e.preventDefault()},"click .ui-state-disabled > a":function(e){e.preventDefault()},"click .ui-menu-item:has(a)":function(t){var i=e(t.target).closest(".ui-menu-item");!this.mouseHandled&&i.not(".ui-state-disabled").length&&(this.mouseHandled=!0,this.select(t),i.has(".ui-menu").length?this.expand(t):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){var i=e(t.currentTarget);i.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(t,i)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var i=this.active||this.element.children(".ui-menu-item").eq(0);t||this.focus(e,i)},blur:function(t){this._delay(function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){e(t.target).closest(".ui-menu").length||this.collapseAll(t),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){function i(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var n,s,a,o,r,l=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:l=!1,s=this.previousFilter||"",a=String.fromCharCode(t.keyCode),o=!1,clearTimeout(this.filterTimer),a===s?o=!0:a=s+a,r=new RegExp("^"+i(a),"i"),n=this.activeMenu.children(".ui-menu-item").filter(function(){return r.test(e(this).children("a").text())}),(n=o&&-1!==n.index(this.active.next())?this.active.nextAll(".ui-menu-item"):n).length||(a=String.fromCharCode(t.keyCode),r=new RegExp("^"+i(a),"i"),n=this.activeMenu.children(".ui-menu-item").filter(function(){return r.test(e(this).children("a").text())})),n.length?(this.focus(t,n),n.length>1?(this.previousFilter=a,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}l&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var t,i=this.options.icons.submenu,n=this.element.find(this.options.menus);n.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=e(this),n=t.prev("a"),s=e("<span>").addClass("ui-menu-icon ui-icon "+i).data("ui-menu-submenu-carat",!0);n.attr("aria-haspopup","true").prepend(s),t.attr("aria-labelledby",n.attr("id"))}),(t=n.add(this.element)).children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),t.children(":not(.ui-menu-item)").each(function(){var t=e(this);/[^\-\u2014\u2013\s]/.test(t.text())||t.addClass("ui-widget-content ui-menu-divider")}),t.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){"icons"===e&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu),this._super(e,t)},focus:function(e,t){var i,n;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),n=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",n.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),(i=t.children(".ui-menu")).length&&/^mouse/.test(e.type)&&this._startOpening(i),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var i,n,s,a,o,r;this._hasScroll()&&(i=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,n=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,s=t.offset().top-this.activeMenu.offset().top-i-n,a=this.activeMenu.scrollTop(),o=this.activeMenu.height(),r=t.height(),s<0?this.activeMenu.scrollTop(a+s):s+r>o&&this.activeMenu.scrollTop(a+s-o+r))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active}))},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(e)},this.delay))},_open:function(t){var i=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(t,i){clearTimeout(this.timer),this.timer=this._delay(function(){var n=i?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));n.length||(n=this.element),this._close(n),this.blur(t),this.activeMenu=n},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,i){var n;this.active&&(n="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0)),n&&n.length&&this.active||(n=this.activeMenu.children(".ui-menu-item")[t]()),this.focus(i,n)},nextPage:function(t){var i,n,s;this.active?this.isLastItem()||(this._hasScroll()?(n=this.active.offset().top,s=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return(i=e(this)).offset().top-n-s<0}),this.focus(t,i)):this.focus(t,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())):this.next(t)},previousPage:function(t){var i,n,s;this.active?this.isFirstItem()||(this._hasScroll()?(n=this.active.offset().top,s=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return(i=e(this)).offset().top-n+s>0}),this.focus(t,i)):this.focus(t,this.activeMenu.children(".ui-menu-item").first())):this.next(t)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,i)}})}(jQuery),function(e,t){function i(e,t,i){return[parseFloat(e[0])*(p.test(e[0])?t/100:1),parseFloat(e[1])*(p.test(e[1])?i/100:1)]}function n(t,i){return parseInt(e.css(t,i),10)||0}function s(t){var i=t[0];return 9===i.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(i)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.ui=e.ui||{};var a,o=Math.max,r=Math.abs,l=Math.round,d=/left|center|right/,c=/top|center|bottom/,u=/[\+\-]\d+(\.[\d]+)?%?/,h=/^\w+/,p=/%$/,f=e.fn.position;e.position={scrollbarWidth:function(){if(void 0!==a)return a;var t,i,n=e("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),s=n.children()[0];return e("body").append(n),t=s.offsetWidth,n.css("overflow","scroll"),i=s.offsetWidth,t===i&&(i=n[0].clientWidth),n.remove(),a=t-i},getScrollInfo:function(t){var i=t.isWindow?"":t.element.css("overflow-x"),n=t.isWindow?"":t.element.css("overflow-y"),s="scroll"===i||"auto"===i&&t.width<t.element[0].scrollWidth;return{width:"scroll"===n||"auto"===n&&t.height<t.element[0].scrollHeight?e.position.scrollbarWidth():0,height:s?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var i=e(t||window),n=e.isWindow(i[0]);return{element:i,isWindow:n,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:n?i.width():i.outerWidth(),height:n?i.height():i.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return f.apply(this,arguments);t=e.extend({},t);var a,p,m,g,v,b,_=e(t.of),$=e.position.getWithinInfo(t.within),y=e.position.getScrollInfo($),w=(t.collision||"flip").split(" "),C={};return b=s(_),_[0].preventDefault&&(t.at="left top"),p=b.width,m=b.height,g=b.offset,v=e.extend({},g),e.each(["my","at"],function(){var e,i,n=(t[this]||"").split(" ");1===n.length&&(n=d.test(n[0])?n.concat(["center"]):c.test(n[0])?["center"].concat(n):["center","center"]),n[0]=d.test(n[0])?n[0]:"center",n[1]=c.test(n[1])?n[1]:"center",e=u.exec(n[0]),i=u.exec(n[1]),C[this]=[e?e[0]:0,i?i[0]:0],t[this]=[h.exec(n[0])[0],h.exec(n[1])[0]]}),1===w.length&&(w[1]=w[0]),"right"===t.at[0]?v.left+=p:"center"===t.at[0]&&(v.left+=p/2),"bottom"===t.at[1]?v.top+=m:"center"===t.at[1]&&(v.top+=m/2),a=i(C.at,p,m),v.left+=a[0],v.top+=a[1],this.each(function(){var s,d,c=e(this),u=c.outerWidth(),h=c.outerHeight(),f=n(this,"marginLeft"),b=n(this,"marginTop"),x=u+f+n(this,"marginRight")+y.width,k=h+b+n(this,"marginBottom")+y.height,T=e.extend({},v),N=i(C.my,c.outerWidth(),c.outerHeight());"right"===t.my[0]?T.left-=u:"center"===t.my[0]&&(T.left-=u/2),"bottom"===t.my[1]?T.top-=h:"center"===t.my[1]&&(T.top-=h/2),T.left+=N[0],T.top+=N[1],e.support.offsetFractions||(T.left=l(T.left),T.top=l(T.top)),s={marginLeft:f,marginTop:b},e.each(["left","top"],function(i,n){e.ui.position[w[i]]&&e.ui.position[w[i]][n](T,{targetWidth:p,targetHeight:m,elemWidth:u,elemHeight:h,collisionPosition:s,collisionWidth:x,collisionHeight:k,offset:[a[0]+N[0],a[1]+N[1]],my:t.my,at:t.at,within:$,elem:c})}),t.using&&(d=function(e){var i=g.left-T.left,n=i+p-u,s=g.top-T.top,a=s+m-h,l={target:{element:_,left:g.left,top:g.top,width:p,height:m},element:{element:c,left:T.left,top:T.top,width:u,height:h},horizontal:n<0?"left":i>0?"right":"center",vertical:a<0?"top":s>0?"bottom":"middle"};p<u&&r(i+n)<p&&(l.horizontal="center"),m<h&&r(s+a)<m&&(l.vertical="middle"),o(r(i),r(n))>o(r(s),r(a))?l.important="horizontal":l.important="vertical",t.using.call(this,e,l)}),c.offset(e.extend(T,{using:d}))})},e.ui.position={fit:{left:function(e,t){var i,n=t.within,s=n.isWindow?n.scrollLeft:n.offset.left,a=n.width,r=e.left-t.collisionPosition.marginLeft,l=s-r,d=r+t.collisionWidth-a-s;t.collisionWidth>a?l>0&&d<=0?(i=e.left+l+t.collisionWidth-a-s,e.left+=l-i):e.left=d>0&&l<=0?s:l>d?s+a-t.collisionWidth:s:l>0?e.left+=l:d>0?e.left-=d:e.left=o(e.left-r,e.left)},top:function(e,t){var i,n=t.within,s=n.isWindow?n.scrollTop:n.offset.top,a=t.within.height,r=e.top-t.collisionPosition.marginTop,l=s-r,d=r+t.collisionHeight-a-s;t.collisionHeight>a?l>0&&d<=0?(i=e.top+l+t.collisionHeight-a-s,e.top+=l-i):e.top=d>0&&l<=0?s:l>d?s+a-t.collisionHeight:s:l>0?e.top+=l:d>0?e.top-=d:e.top=o(e.top-r,e.top)}},flip:{left:function(e,t){var i,n,s=t.within,a=s.offset.left+s.scrollLeft,o=s.width,l=s.isWindow?s.scrollLeft:s.offset.left,d=e.left-t.collisionPosition.marginLeft,c=d-l,u=d+t.collisionWidth-o-l,h="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,p="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,f=-2*t.offset[0];c<0?((i=e.left+h+p+f+t.collisionWidth-o-a)<0||i<r(c))&&(e.left+=h+p+f):u>0&&((n=e.left-t.collisionPosition.marginLeft+h+p+f-l)>0||r(n)<u)&&(e.left+=h+p+f)},top:function(e,t){var i,n,s=t.within,a=s.offset.top+s.scrollTop,o=s.height,l=s.isWindow?s.scrollTop:s.offset.top,d=e.top-t.collisionPosition.marginTop,c=d-l,u=d+t.collisionHeight-o-l,h="top"===t.my[1]?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,p="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,f=-2*t.offset[1];c<0?(n=e.top+h+p+f+t.collisionHeight-o-a,e.top+h+p+f>c&&(n<0||n<r(c))&&(e.top+=h+p+f)):u>0&&(i=e.top-t.collisionPosition.marginTop+h+p+f-l,e.top+h+p+f>u&&(i>0||r(i)<u)&&(e.top+=h+p+f))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,i,n,s,a,o=document.getElementsByTagName("body")[0],r=document.createElement("div");t=document.createElement(o?"div":"body"),n={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},o&&e.extend(n,{position:"absolute",left:"-1000px",top:"-1000px"});for(a in n)t.style[a]=n[a];t.appendChild(r),(i=o||document.documentElement).insertBefore(t,i.firstChild),r.style.cssText="position: absolute; left: 10.7432222px;",s=e(r).offset().left,e.support.offsetFractions=s>10&&s<11,t.innerHTML="",i.removeChild(t)}()}(jQuery),function(e,t){e.widget("ui.progressbar",{version:"1.10.2",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(e){if(void 0===e)return this.options.value;this.options.value=this._constrainedValue(e),this._refreshValue()},_constrainedValue:function(e){return void 0===e&&(e=this.options.value),this.indeterminate=!1===e,"number"!=typeof e&&(e=0),!this.indeterminate&&Math.min(this.options.max,Math.max(this.min,e))},_setOptions:function(e){var t=e.value;delete e.value,this._super(e),this.options.value=this._constrainedValue(t),this._refreshValue()},_setOption:function(e,t){"max"===e&&(t=Math.max(this.min,t)),this._super(e,t)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var t=this.options.value,i=this._percentage();this.valueDiv.toggle(this.indeterminate||t>this.min).toggleClass("ui-corner-right",t===this.options.max).width(i.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=e("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":t}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==t&&(this.oldValue=t,this._trigger("change")),t===this.options.max&&this._trigger("complete")}})}(jQuery),function(e,t){e.widget("ui.slider",e.ui.mouse,{version:"1.10.2",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,i,n=this.options,s=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),a=[];for(i=n.values&&n.values.length||1,s.length>i&&(s.slice(i).remove(),s=s.slice(0,i)),t=s.length;t<i;t++)a.push("<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>");this.handles=s.add(e(a.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t)})},_createRange:function(){var t=this.options,i="";t.range?(!0===t.range&&(t.values?t.values.length&&2!==t.values.length?t.values=[t.values[0],t.values[0]]:e.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=e("<div></div>").appendTo(this.element),i="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(i+("min"===t.range||"max"===t.range?" ui-slider-range-"+t.range:""))):this.range=e([])},_setupEvents:function(){var e=this.handles.add(this.range).filter("a");this._off(e),this._on(e,this._handleEvents),this._hoverable(e),this._focusable(e)},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var i,n,s,a,o,r,l,d=this,c=this.options;return!c.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:t.pageX,y:t.pageY},n=this._normValueFromMouse(i),s=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var i=Math.abs(n-d.values(t));(s>i||s===i&&(t===d._lastChangedValue||d.values(t)===c.min))&&(s=i,a=e(this),o=t)}),!1!==this._start(t,o)&&(this._mouseSliding=!0,this._handleIndex=o,a.addClass("ui-state-active").focus(),r=a.offset(),l=!e(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:t.pageX-r.left-a.width()/2,top:t.pageY-r.top-a.height()/2-(parseInt(a.css("borderTopWidth"),10)||0)-(parseInt(a.css("borderBottomWidth"),10)||0)+(parseInt(a.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,o,n),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,i),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,i,n,s,a;return"horizontal"===this.orientation?(t=this.elementSize.width,i=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,i=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),(n=i/t)>1&&(n=1),n<0&&(n=0),"vertical"===this.orientation&&(n=1-n),s=this._valueMax()-this._valueMin(),a=this._valueMin()+n*s,this._trimAlignValue(a)},_start:function(e,t){var i={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("start",e,i)},_slide:function(e,t,i){var n,s,a;this.options.values&&this.options.values.length?(n=this.values(t?0:1),2===this.options.values.length&&!0===this.options.range&&(0===t&&i>n||1===t&&i<n)&&(i=n),i!==this.values(t)&&((s=this.values())[t]=i,a=this._trigger("slide",e,{handle:this.handles[t],value:i,values:s}),n=this.values(t?0:1),!1!==a&&this.values(t,i,!0))):i!==this.value()&&!1!==(a=this._trigger("slide",e,{handle:this.handles[t],value:i}))&&this.value(i)},_stop:function(e,t){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("stop",e,i)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._lastChangedValue=t,this._trigger("change",e,i)}},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),void this._change(null,0)):this._value()},values:function(t,i){var n,s,a;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(i),this._refreshValue(),void this._change(null,t);if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();for(n=this.options.values,s=arguments[0],a=0;a<n.length;a+=1)n[a]=this._trimAlignValue(s[a]),this._change(null,a);this._refreshValue()},_setOption:function(t,i){var n,s=0;switch("range"===t&&!0===this.options.range&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),e.isArray(this.options.values)&&(s=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments),t){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),n=0;n<s;n+=1)this._change(null,n);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,i,n;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);if(this.options.values&&this.options.values.length){for(i=this.options.values.slice(),n=0;n<i.length;n+=1)i[n]=this._trimAlignValue(i[n]);return i}return[]},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,i=(e-this._valueMin())%t,n=e-i;return 2*Math.abs(i)>=t&&(n+=i>0?t:-t),parseFloat(n.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t,i,n,s,a,o=this.options.range,r=this.options,l=this,d=!this._animateOff&&r.animate,c={};this.options.values&&this.options.values.length?this.handles.each(function(n){i=(l.values(n)-l._valueMin())/(l._valueMax()-l._valueMin())*100,c["horizontal"===l.orientation?"left":"bottom"]=i+"%",e(this).stop(1,1)[d?"animate":"css"](c,r.animate),!0===l.options.range&&("horizontal"===l.orientation?(0===n&&l.range.stop(1,1)[d?"animate":"css"]({left:i+"%"},r.animate),1===n&&l.range[d?"animate":"css"]({width:i-t+"%"},{queue:!1,duration:r.animate})):(0===n&&l.range.stop(1,1)[d?"animate":"css"]({bottom:i+"%"},r.animate),1===n&&l.range[d?"animate":"css"]({height:i-t+"%"},{queue:!1,duration:r.animate}))),t=i}):(n=this.value(),s=this._valueMin(),a=this._valueMax(),i=a!==s?(n-s)/(a-s)*100:0,c["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[d?"animate":"css"](c,r.animate),"min"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[d?"animate":"css"]({width:i+"%"},r.animate),"max"===o&&"horizontal"===this.orientation&&this.range[d?"animate":"css"]({width:100-i+"%"},{queue:!1,duration:r.animate}),"min"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[d?"animate":"css"]({height:i+"%"},r.animate),"max"===o&&"vertical"===this.orientation&&this.range[d?"animate":"css"]({height:100-i+"%"},{queue:!1,duration:r.animate}))},_handleEvents:{keydown:function(t){var i,n,s,a=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(t.preventDefault(),!this._keySliding&&(this._keySliding=!0,e(t.target).addClass("ui-state-active"),!1===this._start(t,a)))return}switch(s=this.options.step,i=n=this.options.values&&this.options.values.length?this.values(a):this.value(),t.keyCode){case e.ui.keyCode.HOME:n=this._valueMin();break;case e.ui.keyCode.END:n=this._valueMax();break;case e.ui.keyCode.PAGE_UP:n=this._trimAlignValue(i+(this._valueMax()-this._valueMin())/5);break;case e.ui.keyCode.PAGE_DOWN:n=this._trimAlignValue(i-(this._valueMax()-this._valueMin())/5);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(i===this._valueMax())return;n=this._trimAlignValue(i+s);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(i===this._valueMin())return;n=this._trimAlignValue(i-s)}this._slide(t,a,n)},click:function(e){e.preventDefault()},keyup:function(t){var i=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,i),this._change(t,i),e(t.target).removeClass("ui-state-active"))}}})}(jQuery),function(e){function t(e){return function(){var t=this.element.val();e.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change")}}e.widget("ui.spinner",{version:"1.10.2",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var t={},i=this.element;return e.each(["min","max","step"],function(e,n){var s=i.attr(n);void 0!==s&&s.length&&(t[n]=s)}),t},_events:{keydown:function(e){this._start(e)&&this._keydown(e)&&e.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(e){this.cancelBlur?delete this.cancelBlur:(this._stop(),this._refresh(),this.previous!==this.element.val()&&this._trigger("change",e))},mousewheel:function(e,t){if(t){if(!this.spinning&&!this._start(e))return!1;this._spin((t>0?1:-1)*this.options.step,e),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(e)},100),e.preventDefault()}},"mousedown .ui-spinner-button":function(t){function i(){this.element[0]===this.document[0].activeElement||(this.element.focus(),this.previous=n,this._delay(function(){this.previous=n}))}var n;n=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),t.preventDefault(),i.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,i.call(this)}),!1!==this._start(t)&&this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){if(e(t.currentTarget).hasClass("ui-state-active"))return!1!==this._start(t)&&void this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var e=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=e.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*e.height())&&e.height()>0&&e.height(e.height()),this.options.disabled&&this.disable()},_keydown:function(t){var i=this.options,n=e.ui.keyCode;switch(t.keyCode){case n.UP:return this._repeat(null,1,t),!0;case n.DOWN:return this._repeat(null,-1,t),!0;case n.PAGE_UP:return this._repeat(null,i.page,t),!0;case n.PAGE_DOWN:return this._repeat(null,-i.page,t),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+"'>&#9660;</span></a>"},_start:function(e){return!(!this.spinning&&!1===this._trigger("start",e))&&(this.counter||(this.counter=1),this.spinning=!0,!0)},_repeat:function(e,t,i){e=e||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,t,i)},e),this._spin(t*this.options.step,i)},_spin:function(e,t){var i=this.value()||0;this.counter||(this.counter=1),i=this._adjustValue(i+e*this._increment(this.counter)),this.spinning&&!1===this._trigger("spin",t,{value:i})||(this._value(i),this.counter++)},_increment:function(t){var i=this.options.incremental;return i?e.isFunction(i)?i(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=e.toString(),i=t.indexOf(".");return-1===i?0:t.length-i-1},_adjustValue:function(e){var t,i,n=this.options;return t=null!==n.min?n.min:0,i=e-t,i=Math.round(i/n.step)*n.step,e=t+i,e=parseFloat(e.toFixed(this._precision())),null!==n.max&&e>n.max?n.max:null!==n.min&&e<n.min?n.min:e},_stop:function(e){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",e))},_setOption:function(e,t){if("culture"===e||"numberFormat"===e){var i=this._parse(this.element.val());return this.options[e]=t,void this.element.val(this._format(i))}"max"!==e&&"min"!==e&&"step"!==e||"string"==typeof t&&(t=this._parse(t)),"icons"===e&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(t.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(t.down)),this._super(e,t),"disabled"===e&&(t?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:t(function(e){this._super(e),this._value(this.element.val())}),_parse:function(e){return"string"==typeof e&&""!==e&&(e=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(e,10,this.options.culture):+e),""===e||isNaN(e)?null:e},_format:function(e){return""===e?"":window.Globalize&&this.options.numberFormat?Globalize.format(e,this.options.numberFormat,this.options.culture):e},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(e,t){var i;""!==e&&null!==(i=this._parse(e))&&(t||(i=this._adjustValue(i)),e=this._format(i)),this.element.val(e),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:t(function(e){this._stepUp(e)}),_stepUp:function(e){this._start()&&(this._spin((e||1)*this.options.step),this._stop())},stepDown:t(function(e){this._stepDown(e)}),_stepDown:function(e){this._start()&&(this._spin((e||1)*-this.options.step),this._stop())},pageUp:t(function(e){this._stepUp((e||1)*this.options.page)}),pageDown:t(function(e){this._stepDown((e||1)*this.options.page)}),value:function(e){if(!arguments.length)return this._parse(this.element.val());t(this._value).call(this,e)},widget:function(){return this.uiSpinner}})}(jQuery),function(e,t){function i(){return++s}function n(e){return e.hash.length>1&&decodeURIComponent(e.href.replace(a,""))===decodeURIComponent(location.href.replace(a,""))}var s=0,a=/#.*$/;e.widget("ui.tabs",{version:"1.10.2",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var t=this,i=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",i.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(t){e(this).is(".ui-state-disabled")&&t.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){e(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this._processTabs(),i.active=this._initialActive(),e.isArray(i.disabled)&&(i.disabled=e.unique(i.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),function(e){return t.tabs.index(e)}))).sort()),!1!==this.options.active&&this.anchors.length?this.active=this._findActive(i.active):this.active=e(),this._refresh(),this.active.length&&this.load(i.active)},_initialActive:function(){var t=this.options.active,i=this.options.collapsible,n=location.hash.substring(1);return null===t&&(n&&this.tabs.each(function(i,s){if(e(s).attr("aria-controls")===n)return t=i,!1}),null===t&&(t=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),null!==t&&-1!==t||(t=!!this.tabs.length&&0)),!1!==t&&-1===(t=this.tabs.index(this.tabs.eq(t)))&&(t=!i&&0),!i&&!1===t&&this.anchors.length&&(t=0),t},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):e()}},_tabKeydown:function(t){var i=e(this.document[0].activeElement).closest("li"),n=this.tabs.index(i),s=!0;if(!this._handlePageNav(t)){switch(t.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:n++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:s=!1,n--;break;case e.ui.keyCode.END:n=this.anchors.length-1;break;case e.ui.keyCode.HOME:n=0;break;case e.ui.keyCode.SPACE:return t.preventDefault(),clearTimeout(this.activating),void this._activate(n);case e.ui.keyCode.ENTER:return t.preventDefault(),clearTimeout(this.activating),void this._activate(n!==this.options.active&&n);default:return}t.preventDefault(),clearTimeout(this.activating),n=this._focusNextTab(n,s),t.ctrlKey||(i.attr("aria-selected","false"),this.tabs.eq(n).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",n)},this.delay))}},_panelKeydown:function(t){this._handlePageNav(t)||t.ctrlKey&&t.keyCode===e.ui.keyCode.UP&&(t.preventDefault(),this.active.focus())},_handlePageNav:function(t){return t.altKey&&t.keyCode===e.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):t.altKey&&t.keyCode===e.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(t,i){for(var n=this.tabs.length-1;-1!==e.inArray((t>n&&(t=0),t<0&&(t=n),t),this.options.disabled);)t=i?t+1:t-1;return t},_focusNextTab:function(e,t){return e=this._findNextTab(e,t),this.tabs.eq(e).focus(),e},_setOption:function(e,t){"active"!==e?"disabled"!==e?(this._super(e,t),"collapsible"===e&&(this.element.toggleClass("ui-tabs-collapsible",t),t||!1!==this.options.active||this._activate(0)),"event"===e&&this._setupEvents(t),"heightStyle"===e&&this._setupHeightStyle(t)):this._setupDisabled(t):this._activate(t)},_tabId:function(e){return e.attr("aria-controls")||"ui-tabs-"+i()},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,i=this.tablist.children(":has(a[href])");t.disabled=e.map(i.filter(".ui-state-disabled"),function(e){return i.index(e)}),this._processTabs(),!1!==t.active&&this.anchors.length?this.active.length&&!e.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=e()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active):(t.active=!1,this.active=e()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return e("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=e(),this.anchors.each(function(i,s){var a,o,r,l=e(s).uniqueId().attr("id"),d=e(s).closest("li"),c=d.attr("aria-controls");n(s)?(a=s.hash,o=t.element.find(t._sanitizeSelector(a))):(a="#"+(r=t._tabId(d)),(o=t.element.find(a)).length||(o=t._createPanel(r)).insertAfter(t.panels[i-1]||t.tablist),o.attr("aria-live","polite")),o.length&&(t.panels=t.panels.add(o)),c&&d.data("ui-tabs-aria-controls",c),d.attr({"aria-controls":a.substring(1),"aria-labelledby":l}),o.attr("aria-labelledby",l)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(t){return e("<div>").attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(t){e.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1);for(var i,n=0;i=this.tabs[n];n++)!0===t||-1!==e.inArray(n,t)?e(i).addClass("ui-state-disabled").attr("aria-disabled","true"):e(i).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=t},_setupEvents:function(t){var i={click:function(e){e.preventDefault()}};t&&e.each(t.split(" "),function(e,t){i[t]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,i),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var i,n=this.element.parent();"fill"===t?(i=n.height(),i-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var t=e(this),n=t.css("position");"absolute"!==n&&"fixed"!==n&&(i-=t.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){i-=e(this).outerHeight(!0)}),this.panels.each(function(){e(this).height(Math.max(0,i-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===t&&(i=0,this.panels.each(function(){i=Math.max(i,e(this).height("").height())}).height(i))},_eventHandler:function(t){var i=this.options,n=this.active,s=e(t.currentTarget).closest("li"),a=s[0]===n[0],o=a&&i.collapsible,r=o?e():this._getPanelForTab(s),l=n.length?this._getPanelForTab(n):e(),d={oldTab:n,oldPanel:l,newTab:o?e():s,newPanel:r};t.preventDefault(),s.hasClass("ui-state-disabled")||s.hasClass("ui-tabs-loading")||this.running||a&&!i.collapsible||!1===this._trigger("beforeActivate",t,d)||(i.active=!o&&this.tabs.index(s),this.active=a?e():s,this.xhr&&this.xhr.abort(),l.length||r.length||e.error("jQuery UI Tabs: Mismatching fragment identifier."),r.length&&this.load(this.tabs.index(s),t),this._toggle(t,d))},_toggle:function(t,i){function n(){a.running=!1,a._trigger("activate",t,i)}function s(){i.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),o.length&&a.options.show?a._show(o,a.options.show,n):(o.show(),n())}var a=this,o=i.newPanel,r=i.oldPanel;this.running=!0,r.length&&this.options.hide?this._hide(r,this.options.hide,function(){i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),s()}):(i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),r.hide(),s()),r.attr({"aria-expanded":"false","aria-hidden":"true"}),i.oldTab.attr("aria-selected","false"),o.length&&r.length?i.oldTab.attr("tabIndex",-1):o.length&&this.tabs.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),o.attr({"aria-expanded":"true","aria-hidden":"false"}),i.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(t){var i,n=this._findActive(t);n[0]!==this.active[0]&&(n.length||(n=this.active),i=n.find(".ui-tabs-anchor")[0],this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop}))},_findActive:function(t){return!1===t?e():this.tabs.eq(t)},_getIndex:function(e){return"string"==typeof e&&(e=this.anchors.index(this.anchors.filter("[href$='"+e+"']"))),e},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){e.data(this,"ui-tabs-destroy")?e(this).remove():e(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var t=e(this),i=t.data("ui-tabs-aria-controls");i?t.attr("aria-controls",i).removeData("ui-tabs-aria-controls"):t.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(t){var i=this.options.disabled;!1!==i&&(void 0===t?i=!1:(t=this._getIndex(t),i=e.isArray(i)?e.map(i,function(e){return e!==t?e:null}):e.map(this.tabs,function(e,i){return i!==t?i:null})),this._setupDisabled(i))},disable:function(t){var i=this.options.disabled;if(!0!==i){if(void 0===t)i=!0;else{if(t=this._getIndex(t),-1!==e.inArray(t,i))return;i=e.isArray(i)?e.merge([t],i).sort():[t]}this._setupDisabled(i)}},load:function(t,i){t=this._getIndex(t);var s=this,a=this.tabs.eq(t),o=a.find(".ui-tabs-anchor"),r=this._getPanelForTab(a),l={tab:a,panel:r};n(o[0])||(this.xhr=e.ajax(this._ajaxSettings(o,i,l)),this.xhr&&"canceled"!==this.xhr.statusText&&(a.addClass("ui-tabs-loading"),r.attr("aria-busy","true"),this.xhr.success(function(e){setTimeout(function(){r.html(e),s._trigger("load",i,l)},1)}).complete(function(e,t){setTimeout(function(){"abort"===t&&s.panels.stop(!1,!0),a.removeClass("ui-tabs-loading"),r.removeAttr("aria-busy"),e===s.xhr&&delete s.xhr},1)})))},_ajaxSettings:function(t,i,n){var s=this;return{url:t.attr("href"),beforeSend:function(t,a){return s._trigger("beforeLoad",i,e.extend({jqXHR:t,ajaxSettings:a},n))}}},_getPanelForTab:function(t){var i=e(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+i))}})}(jQuery),function(e){function t(t,i){var n=(t.attr("aria-describedby")||"").split(/\s+/);n.push(i),t.data("ui-tooltip-id",i).attr("aria-describedby",e.trim(n.join(" ")))}function i(t){var i=t.data("ui-tooltip-id"),n=(t.attr("aria-describedby")||"").split(/\s+/),s=e.inArray(i,n);-1!==s&&n.splice(s,1),t.removeData("ui-tooltip-id"),(n=e.trim(n.join(" ")))?t.attr("aria-describedby",n):t.removeAttr("aria-describedby")}var n=0;e.widget("ui.tooltip",{version:"1.10.2",options:{content:function(){var t=e(this).attr("title")||"";return e("<a>").text(t).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable()},_setOption:function(t,i){var n=this;if("disabled"===t)return this[i?"_disable":"_enable"](),void(this.options[t]=i);this._super(t,i),"content"===t&&e.each(this.tooltips,function(e,t){n._updateContent(t)})},_disable:function(){var t=this;e.each(this.tooltips,function(i,n){var s=e.Event("blur");s.target=s.currentTarget=n[0],t.close(s,!0)}),this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.is("[title]")&&t.data("ui-tooltip-title",t.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))})},open:function(t){var i=this,n=e(t?t.target:this.element).closest(this.options.items);n.length&&!n.data("ui-tooltip-id")&&(n.attr("title")&&n.data("ui-tooltip-title",n.attr("title")),n.data("ui-tooltip-open",!0),t&&"mouseover"===t.type&&n.parents().each(function(){var t,n=e(this);n.data("ui-tooltip-open")&&((t=e.Event("blur")).target=t.currentTarget=this,i.close(t,!0)),n.attr("title")&&(n.uniqueId(),i.parents[this.id]={element:this,title:n.attr("title")},n.attr("title",""))}),this._updateContent(n,t))},_updateContent:function(e,t){var i,n=this.options.content,s=this,a=t?t.type:null;if("string"==typeof n)return this._open(t,e,n);(i=n.call(e[0],function(i){e.data("ui-tooltip-open")&&s._delay(function(){t&&(t.type=a),this._open(t,e,i)})}))&&this._open(t,e,i)},_open:function(i,n,s){function a(e){d.of=e,o.is(":hidden")||o.position(d)}var o,r,l,d=e.extend({},this.options.position);s&&((o=this._find(n)).length?o.find(".ui-tooltip-content").html(s):(n.is("[title]")&&(i&&"mouseover"===i.type?n.attr("title",""):n.removeAttr("title")),o=this._tooltip(n),t(n,o.attr("id")),o.find(".ui-tooltip-content").html(s),this.options.track&&i&&/^mouse/.test(i.type)?(this._on(this.document,{mousemove:a}),a(i)):o.position(e.extend({of:n},this.options.position)),o.hide(),this._show(o,this.options.show),this.options.show&&this.options.show.delay&&(l=this.delayedShow=setInterval(function(){o.is(":visible")&&(a(d.of),clearInterval(l))},e.fx.interval)),this._trigger("open",i,{tooltip:o}),r={keyup:function(t){if(t.keyCode===e.ui.keyCode.ESCAPE){var i=e.Event(t);i.currentTarget=n[0],this.close(i,!0)}},remove:function(){this._removeTooltip(o)}},i&&"mouseover"!==i.type||(r.mouseleave="close"),i&&"focusin"!==i.type||(r.focusout="close"),this._on(!0,n,r)))},close:function(t){var n=this,s=e(t?t.currentTarget:this.element),a=this._find(s);this.closing||(clearInterval(this.delayedShow),s.data("ui-tooltip-title")&&s.attr("title",s.data("ui-tooltip-title")),i(s),a.stop(!0),this._hide(a,this.options.hide,function(){n._removeTooltip(e(this))}),s.removeData("ui-tooltip-open"),this._off(s,"mouseleave focusout keyup"),s[0]!==this.element[0]&&this._off(s,"remove"),this._off(this.document,"mousemove"),t&&"mouseleave"===t.type&&e.each(this.parents,function(t,i){e(i.element).attr("title",i.title),delete n.parents[t]}),this.closing=!0,this._trigger("close",t,{tooltip:a}),this.closing=!1)},_tooltip:function(t){var i="ui-tooltip-"+n++,s=e("<div>").attr({id:i,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));return e("<div>").addClass("ui-tooltip-content").appendTo(s),s.appendTo(this.document[0].body),this.tooltips[i]=t,s},_find:function(t){var i=t.data("ui-tooltip-id");return i?e("#"+i):e()},_removeTooltip:function(e){e.remove(),delete this.tooltips[e.attr("id")]},_destroy:function(){var t=this;e.each(this.tooltips,function(i,n){var s=e.Event("blur");s.target=s.currentTarget=n[0],t.close(s,!0),e("#"+i).remove(),n.data("ui-tooltip-title")&&(n.attr("title",n.data("ui-tooltip-title")),n.removeData("ui-tooltip-title"))})}})}(jQuery),window.puJsFileLoadCounter++;var tempMessageObj={},myDropzoneNewCourseChat=null,socketStartInterval,reconnectingTime=5e3,socket,autoProductionClickCheck=!1,newProductionInstance=!1,globalDocumentSaveStatus=0,enableDisablestatus=0;if(window.puJsFileLoadCounter++,function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.store=t()}(this,function(){var e,t={},i=window,n=i.document,s="localStorage",a="script";if(t.disabled=!1,t.version="1.3.17",t.set=function(e,t){},t.get=function(e,t){},t.has=function(e){return void 0!==t.get(e)},t.remove=function(e){},t.clear=function(){},t.transact=function(e,i,n){null==n&&(n=i,i=null),null==i&&(i={});var s=t.get(e,i);n(s),t.set(e,s)},t.getAll=function(){},t.forEach=function(){},t.serialize=function(e){return JSON.stringify(e)},t.deserialize=function(e){if("string"==typeof e)try{return JSON.parse(e)}catch(t){return e||void 0}},function(){try{return s in i&&i[s]}catch(e){return!1}}())e=i[s],t.set=function(i,n){return void 0===n?t.remove(i):(e.setItem(i,t.serialize(n)),n)},t.get=function(i,n){var s=t.deserialize(e.getItem(i));return void 0===s?n:s},t.remove=function(t){e.removeItem(t)},t.clear=function(){e.clear()},t.getAll=function(){var e={};return t.forEach(function(t,i){e[t]=i}),e},t.forEach=function(i){for(var n=0;n<e.length;n++){var s=e.key(n);i(s,t.get(s))}};else if(n.documentElement.addBehavior){var o,r;try{(r=new ActiveXObject("htmlfile")).open(),r.write("<"+a+">document.w=window</"+a+'><iframe src="/favicon.ico"></iframe>'),r.close(),o=r.w.frames[0].document,e=o.createElement("div")}catch(t){e=n.createElement("div"),o=n.body}var l=function(i){return function(){var n=Array.prototype.slice.call(arguments,0);n.unshift(e),o.appendChild(e),e.addBehavior("#default#userData"),e.load(s);var a=i.apply(t,n);return o.removeChild(e),a}},d=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g"),c=function(e){return e.replace(/^d/,"___$&").replace(d,"___")};t.set=l(function(e,i,n){return i=c(i),void 0===n?t.remove(i):(e.setAttribute(i,t.serialize(n)),e.save(s),n)}),t.get=l(function(e,i,n){i=c(i);var s=t.deserialize(e.getAttribute(i));return void 0===s?n:s}),t.remove=l(function(e,t){t=c(t),e.removeAttribute(t),e.save(s)}),t.clear=l(function(e){var t=e.XMLDocument.documentElement.attributes;for(e.load(s);t.length;)e.removeAttribute(t[0].name);e.save(s)}),t.getAll=function(e){var i={};return t.forEach(function(e,t){i[e]=t}),i},t.forEach=l(function(e,i){for(var n,s=e.XMLDocument.documentElement.attributes,a=0;n=s[a];++a)i(n.name,t.deserialize(e.getAttribute(n.name)))})}try{var u="__storejs__";t.set(u,u),t.get(u)!=u&&(t.disabled=!0),t.remove(u)}catch(e){t.disabled=!0}return t.enabled=!t.disabled,t}),window.puJsFileLoadCounter++,function(e){e.Jcrop=function(t,i){function n(e){return Math.round(e)+"px"}function s(e){return N.baseClass+"-"+e}function a(){return e.fx.step.hasOwnProperty("backgroundColor")}function o(t){var i=e(t).offset();return[i.left,i.top]}function r(e){return[e.pageX-T[0],e.pageY-T[1]]}function l(t){"object"!=typeof t&&(t={}),N=e.extend(N,t),e.each(["onChange","onSelect","onRelease","onDblClick"],function(e,t){"function"!=typeof N[t]&&(N[t]=function(){})})}function d(e,t,i){if(T=o(L),oe.setCursor("move"===e?e:e+"-resize"),"move"===e)return oe.activateHandlers(u(t),g,i);var n=ne.getFixed(),s=h(e),a=ne.getCorner(h(s));ne.setPressed(ne.getCorner(s)),ne.setCurrent(a),oe.activateHandlers(c(e,n),g,i)}function c(e,t){return function(i){if(N.aspectRatio)switch(e){case"e":case"w":i[1]=t.y+1;break;case"n":i[0]=t.x+1;break;case"s":i[0]=t.x+1}else switch(e){case"e":case"w":i[1]=t.y2;break;case"n":i[0]=t.x2;break;case"s":i[0]=t.x2}ne.setCurrent(i),ae.update()}}function u(e){var t=e;return re.watchKeys(),function(e){ne.moveOffset([e[0]-t[0],e[1]-t[1]]),t=e,ae.update()}}function h(e){switch(e){case"n":return"sw";case"s":case"e":return"nw";case"w":return"ne";case"ne":return"sw";case"nw":return"se";case"se":return"nw";case"sw":return"ne"}}function p(e){return function(t){return!N.disabled&&(!("move"===e&&!N.allowMove)&&(T=o(L),G=!0,d(e,r(t)),t.stopPropagation(),t.preventDefault(),!1))}}function f(e,t,i){var n=e.width(),s=e.height();n>t&&t>0&&(n=t,s=t/e.width()*e.height()),s>i&&i>0&&(s=i,n=i/e.height()*e.width()),V=e.width()/n,X=e.height()/s,e.width(n).height(s)}function m(e){return{x:e.x*V,y:e.y*X,x2:e.x2*V,y2:e.y2*X,w:e.w*V,h:e.h*X}}function g(e){var t=ne.getFixed();t.w>N.minSelect[0]&&t.h>N.minSelect[1]?(ae.enableHandles(),ae.done()):ae.release(),oe.setCursor(N.allowSelect?"crosshair":"default")}function v(e){if(N.disabled)return!1;if(!N.allowSelect)return!1;G=!0,T=o(L),ae.disableHandles(),oe.setCursor("crosshair");var t=r(e);return ne.setPressed(t),ae.update(),oe.activateHandlers(b,g,"touch"===e.type.substring(0,5)),re.watchKeys(),e.stopPropagation(),e.preventDefault(),!1}function b(e){ne.setCurrent(e),ae.update()}function _(){var t=e("<div></div>").addClass(s("tracker"));return D&&t.css({opacity:0,backgroundColor:"white"}),t}function $(e){y([e[0]/V,e[1]/X,e[2]/V,e[3]/X]),N.onSelect.call(le,m(ne.getFixed())),ae.enableHandles()}function y(e){ne.setPressed([e[0],e[1]]),ne.setCurrent([e[2],e[3]]),ae.update()}function w(){N.disabled=!0,ae.disableHandles(),ae.setCursor("default"),oe.setCursor("default")}function C(){N.disabled=!1,k()}function x(e,t,i){var n=t||N.bgColor;N.bgFade&&a()&&N.fadeTime&&!i?e.animate({backgroundColor:n},{queue:!1,duration:N.fadeTime}):e.css("backgroundColor",n)}function k(e){N.allowResize?e?ae.enableOnly():ae.enableHandles():ae.disableHandles(),oe.setCursor(N.allowSelect?"crosshair":"default"),ae.setCursor(N.allowMove?"move":"default"),N.hasOwnProperty("trueSize")&&(V=N.trueSize[0]/O,X=N.trueSize[1]/R),N.hasOwnProperty("setSelect")&&($(N.setSelect),ae.done(),delete N.setSelect),se.refresh(),N.bgColor!=ee&&(x(N.shade?se.getShades():F,N.shade?N.shadeColor||N.bgColor:N.bgColor),ee=N.bgColor),te!=N.bgOpacity&&(te=N.bgOpacity,N.shade?se.refresh():ae.setBgOpacity(te)),U=N.maxSize[0]||0,B=N.maxSize[1]||0,q=N.minSize[0]||0,Y=N.minSize[1]||0,N.hasOwnProperty("outerImage")&&(L.attr("src",N.outerImage),delete N.outerImage),ae.refresh()}var T,N=e.extend({},e.Jcrop.defaults),S=navigator.userAgent.toLowerCase(),D=/msie/.test(S),I=/msie [1-6]\./.test(S);"object"!=typeof t&&(t=e(t)[0]),"object"!=typeof i&&(i={}),l(i);var P={border:"none",visibility:"visible",margin:0,padding:0,position:"absolute",top:0,left:0},E=e(t),A=!0;if("IMG"==t.tagName){if(0!=E[0].width&&0!=E[0].height)E.width(E[0].width),E.height(E[0].height);else{var M=new Image;M.src=E[0].src,E.width(M.width),E.height(M.height)}var L=E.clone().removeAttr("id").css(P).show();L.width(E.width()),L.height(E.height()),E.after(L).hide()}else L=E.css(P).show(),A=!1,null===N.shade&&(N.shade=!0);f(L,N.boxWidth,N.boxHeight);var O=L.width(),R=L.height(),F=e("<div />").width(O).height(R).addClass(s("holder")).css({position:"relative",backgroundColor:N.bgColor}).insertAfter(E).append(L);N.addClass&&F.addClass(N.addClass);var H=e("<div />"),z=e("<div />").width("100%").height("100%").css({zIndex:310,position:"absolute",overflow:"hidden"}),j=e("<div />").width("100%").height("100%").css("zIndex",320),W=e("<div />").css({position:"absolute",zIndex:600}).dblclick(function(){var e=ne.getFixed();N.onDblClick.call(le,e)}).insertBefore(L).append(z,j);A&&(H=e("<img />").attr("src",L.attr("src")).css(P).width(O).height(R),z.append(H)),I&&W.css({overflowY:"hidden"});var U,B,q,Y,V,X,G,K,Q,J=N.boundary,Z=_().width(O+2*J).height(R+2*J).css({position:"absolute",top:n(-J),left:n(-J),zIndex:290}).mousedown(v),ee=N.bgColor,te=N.bgOpacity;T=o(L);var ie=function(){function e(){var e,t={},i=["touchstart","touchmove","touchend"],n=document.createElement("div");try{for(e=0;e<i.length;e++){var s=i[e],a=(s="on"+s)in n;a||(n.setAttribute(s,"return;"),a="function"==typeof n[s]),t[i[e]]=a}return t.touchstart&&t.touchend&&t.touchmove}catch(e){return!1}}return{createDragger:function(e){return function(t){return!N.disabled&&(!("move"===e&&!N.allowMove)&&(T=o(L),G=!0,d(e,r(ie.cfilter(t)),!0),t.stopPropagation(),t.preventDefault(),!1))}},newSelection:function(e){return v(ie.cfilter(e))},cfilter:function(e){return e.pageX=e.originalEvent.changedTouches[0].pageX,e.pageY=e.originalEvent.changedTouches[0].pageY,e},isSupported:e,support:!0===N.touchSupport||!1===N.touchSupport?N.touchSupport:e()}}(),ne=function(){function e(){if(!N.aspectRatio)return n();var e,t,a,o,u=N.aspectRatio,h=N.minSize[0]/V,p=N.maxSize[0]/V,f=N.maxSize[1]/X,m=d-r,g=c-l,v=Math.abs(m),b=Math.abs(g),_=v/b;return 0===p&&(p=10*O),0===f&&(f=10*R),_<u?(t=c,a=b*u,(e=m<0?r-a:a+r)<0?(e=0,o=Math.abs((e-r)/u),t=g<0?l-o:o+l):e>O&&(e=O,o=Math.abs((e-r)/u),t=g<0?l-o:o+l)):(e=d,o=v/u,(t=g<0?l-o:l+o)<0?(t=0,a=Math.abs((t-l)*u),e=m<0?r-a:a+r):t>R&&(t=R,a=Math.abs(t-l)*u,e=m<0?r-a:a+r)),e>r?(e-r<h?e=r+h:e-r>p&&(e=r+p),t=t>l?l+(e-r)/u:l-(e-r)/u):e<r&&(r-e<h?e=r-h:r-e>p&&(e=r-p),t=t>l?l+(r-e)/u:l-(r-e)/u),e<0?(r-=e,e=0):e>O&&(r-=e-O,e=O),t<0?(l-=t,t=0):t>R&&(l-=t-R,t=R),s(i(r,l,e,t))}function t(e){return e[0]<0&&(e[0]=0),e[1]<0&&(e[1]=0),e[0]>O&&(e[0]=O),e[1]>R&&(e[1]=R),[Math.round(e[0]),Math.round(e[1])]}function i(e,t,i,n){var s=e,a=i,o=t,r=n;return i<e&&(s=i,a=e),n<t&&(o=n,r=t),[s,o,a,r]}function n(){var e,t=d-r,n=c-l;return U&&Math.abs(t)>U&&(d=t>0?r+U:r-U),B&&Math.abs(n)>B&&(c=n>0?l+B:l-B),Y/X&&Math.abs(n)<Y/X&&(c=n>0?l+Y/X:l-Y/X),q/V&&Math.abs(t)<q/V&&(d=t>0?r+q/V:r-q/V),r<0&&(d-=r,r-=r),l<0&&(c-=l,l-=l),d<0&&(r-=d,d-=d),c<0&&(l-=c,c-=c),d>O&&(e=d-O,r-=e,d-=e),c>R&&(e=c-R,l-=e,c-=e),r>O&&(e=r-R,c-=e,l-=e),l>R&&(e=l-R,c-=e,l-=e),s(i(r,l,d,c))}function s(e){return{x:e[0],y:e[1],x2:e[2],y2:e[3],w:e[2]-e[0],h:e[3]-e[1]}}var a,o,r=0,l=0,d=0,c=0;return{flipCoords:i,setPressed:function(e){e=t(e),d=r=e[0],c=l=e[1]},setCurrent:function(e){e=t(e),a=e[0]-d,o=e[1]-c,d=e[0],c=e[1]},getOffset:function(){return[a,o]},moveOffset:function(e){var t=e[0],i=e[1];0>r+t&&(t-=t+r),0>l+i&&(i-=i+l),R<c+i&&(i+=R-(c+i)),O<d+t&&(t+=O-(d+t)),r+=t,d+=t,l+=i,c+=i},getCorner:function(t){var i=e();switch(t){case"ne":return[i.x2,i.y];case"nw":return[i.x,i.y];case"se":return[i.x2,i.y2];case"sw":return[i.x,i.y2]}},getFixed:e}}(),se=function(){function t(){return i(ne.getFixed())}function i(e){h.top.css({left:n(e.x),width:n(e.w),height:n(e.y)}),h.bottom.css({top:n(e.y2),left:n(e.x),width:n(e.w),height:n(R-e.y2)}),h.right.css({left:n(e.x2),width:n(O-e.x2)}),h.left.css({width:n(e.x)})}function s(){return e("<div />").css({position:"absolute",backgroundColor:N.shadeColor||N.bgColor}).appendTo(u)}function a(){c||(c=!0,u.insertBefore(L),t(),ae.setBgOpacity(1,0,1),H.hide(),o(N.shadeColor||N.bgColor,1),ae.isAwake()?l(N.bgOpacity,1):l(1,1))}function o(e,t){x(d(),e,t)}function r(){c&&(u.remove(),H.show(),c=!1,ae.isAwake()?ae.setBgOpacity(N.bgOpacity,1,1):(ae.setBgOpacity(1,1,1),ae.disableHandles()),x(F,0,1))}function l(e,t){c&&(N.bgFade&&!t?u.animate({opacity:1-e},{queue:!1,duration:N.fadeTime}):u.css({opacity:1-e}))}function d(){return u.children()}var c=!1,u=e("<div />").css({position:"absolute",zIndex:240,opacity:0}),h={top:s(),left:s().height(R),right:s().height(R),bottom:s()};return{update:t,updateRaw:i,getShades:d,setBgColor:o,enable:a,disable:r,resize:function(e,t){h.left.css({height:n(t)}),h.right.css({height:n(t)})},refresh:function(){N.shade?a():r(),ae.isAwake()&&l(N.bgOpacity)},opacity:l}}(),ae=function(){function t(t){var i=e("<div />").css({position:"absolute",opacity:N.borderOpacity}).addClass(s(t));return z.append(i),i}function i(t,i){var n=e("<div />").mousedown(p(t)).css({cursor:t+"-resize",position:"absolute",zIndex:i}).addClass("ord-"+t);return ie.support&&n.bind("touchstart.jcrop",ie.createDragger(t)),j.append(n),n}function a(e){var t=N.handleSize,n=i(e,y++).css({opacity:N.handleOpacity}).addClass(s("handle"));return t&&n.width(t).height(t),n}function o(e){return i(e,y++).addClass("jcrop-dragbar")}function r(e,t){N.shade||H.css({top:n(-t),left:n(-e)}),W.css({top:n(t),left:n(e)})}function l(e,t){W.width(Math.round(e)).height(Math.round(t))}function d(){var e=ne.getFixed();ne.setPressed([e.x,e.y]),ne.setCurrent([e.x2,e.y2]),c()}function c(e){if($)return u(e)}function u(e){var t=ne.getFixed();l(t.w,t.h),r(t.x,t.y),N.shade&&se.updateRaw(t),$||f(),e?N.onSelect.call(le,m(t)):N.onChange.call(le,m(t))}function h(e,t,i){($||t)&&(N.bgFade&&!i?L.animate({opacity:e},{queue:!1,duration:N.fadeTime}):L.css("opacity",e))}function f(){W.show(),N.shade?se.opacity(te):h(te,!0),$=!0}function g(){if(k=!0,N.allowResize)return j.show(),!0}function v(){k=!1,j.hide()}function b(e){e?(K=!0,v()):(K=!1,g())}var $,y=370,w={},C={},x={},k=!1;N.dragEdges&&e.isArray(N.createDragbars)&&function(e){var t;for(t=0;t<e.length;t++)x[e[t]]=o(e[t])}(N.createDragbars),e.isArray(N.createHandles)&&function(e){var t;for(t=0;t<e.length;t++)C[e[t]]=a(e[t])}(N.createHandles),N.drawBorders&&e.isArray(N.createBorders)&&function(e){var i,n;for(n=0;n<e.length;n++){switch(e[n]){case"n":i="hline";break;case"s":i="hline bottom";break;case"e":i="vline right";break;case"w":i="vline"}w[e[n]]=t(i)}}(N.createBorders),e(document).bind("touchstart.jcrop-ios",function(t){e(t.currentTarget).hasClass("jcrop-tracker")&&t.stopPropagation()});var T=_().mousedown(p("move")).css({cursor:"move",position:"absolute",zIndex:360});return ie.support&&T.bind("touchstart.jcrop",ie.createDragger("move")),z.append(T),v(),{updateVisible:c,update:u,release:function(){v(),W.hide(),N.shade?se.opacity(1):h(1),$=!1,N.onRelease.call(le)},refresh:d,isAwake:function(){return $},setCursor:function(e){T.css("cursor",e)},enableHandles:g,enableOnly:function(){k=!0},showHandles:function(){k&&j.show()},disableHandles:v,animMode:b,setBgOpacity:h,done:function(){b(!1),d()}}}(),oe=function(){function t(t){Z.css({zIndex:450}),t?e(document).bind("touchmove.jcrop",a).bind("touchend.jcrop",o):c&&e(document).bind("mousemove.jcrop",n).bind("mouseup.jcrop",s)}function i(){Z.css({zIndex:290}),e(document).unbind(".jcrop")}function n(e){return l(r(e)),!1}function s(e){return e.preventDefault(),e.stopPropagation(),G&&(G=!1,d(r(e)),ae.isAwake()&&N.onSelect.call(le,m(ne.getFixed())),i(),l=function(){},d=function(){}),!1}function a(e){return l(r(ie.cfilter(e))),!1}function o(e){return s(ie.cfilter(e))}var l=function(){},d=function(){},c=N.trackDocument;return c||Z.mousemove(n).mouseup(s).mouseout(s),L.before(Z),{activateHandlers:function(e,i,n){return G=!0,l=e,d=i,t(n),!1},setCursor:function(e){Z.css("cursor",e)}}}(),re=function(){function t(e,t,i){N.allowMove&&(ne.moveOffset([t,i]),ae.updateVisible(!0)),e.preventDefault(),e.stopPropagation()}var i=e('<input type="radio" />').css({position:"fixed",left:"-120px",width:"12px"}).addClass("jcrop-keymgr"),n=e("<div />").css({position:"absolute",overflow:"hidden"}).append(i);return N.keySupport&&(i.keydown(function(e){if(e.ctrlKey||e.metaKey)return!0;var i=(Q=!!e.shiftKey)?10:1;switch(e.keyCode){case 37:t(e,-i,0);break;case 39:t(e,i,0);break;case 38:t(e,0,-i);break;case 40:t(e,0,i);break;case 27:N.allowSelect&&ae.release();break;case 9:return!0}return!1}).blur(function(e){i.hide()}),I||!N.fixedSupport?(i.css({position:"absolute",left:"-20px"}),n.append(i).insertBefore(L)):i.insertBefore(L)),{watchKeys:function(){N.keySupport&&(i.show(),i.focus())}}}();ie.support&&Z.bind("touchstart.jcrop",ie.newSelection),j.hide(),k(!0);var le={setImage:function(e,t){ae.release(),w();var i=new Image;i.onload=function(){var n=i.width,s=i.height,a=N.boxWidth,o=N.boxHeight;L.width(n).height(s),L.attr("src",e),H.attr("src",e),f(L,a,o),O=L.width(),R=L.height(),H.width(O).height(R),Z.width(O+2*J).height(R+2*J),F.width(O).height(R),se.resize(O,R),C(),"function"==typeof t&&t.call(le)},i.src=e},animateTo:function(e,t){function i(){window.setTimeout(b,u)}var n=e[0]/V,s=e[1]/X,a=e[2]/V,o=e[3]/X;if(!K){var r=ne.flipCoords(n,s,a,o),l=ne.getFixed(),d=[l.x,l.y,l.x2,l.y2],c=d,u=N.animationDelay,h=r[0]-d[0],p=r[1]-d[1],f=r[2]-d[2],m=r[3]-d[3],g=0,v=N.swingSpeed;n=c[0],s=c[1],a=c[2],o=c[3],ae.animMode(!0);var b=function(){g+=(100-g)/v,c[0]=Math.round(n+g/100*h),c[1]=Math.round(s+g/100*p),c[2]=Math.round(a+g/100*f),c[3]=Math.round(o+g/100*m),g>=99.8&&(g=100),g<100?(y(c),i()):(ae.done(),ae.animMode(!1),"function"==typeof t&&t.call(le))};i()}},setSelect:$,setOptions:function(e){l(e),k()},tellSelect:function(){return m(ne.getFixed())},tellScaled:function(){return ne.getFixed()},setClass:function(e){F.removeClass().addClass(s("holder")).addClass(e)},disable:w,enable:C,cancel:function(){ae.done(),oe.activateHandlers(null,null)},release:ae.release,destroy:function(){F.remove(),E.show(),E.css("visibility","visible"),e(t).removeData("Jcrop")},focus:re.watchKeys,getBounds:function(){return[O*V,R*X]},getWidgetSize:function(){return[O,R]},getScaleFactor:function(){return[V,X]},getOptions:function(){return N},ui:{holder:F,selection:W}};return D&&F.bind("selectstart",function(){return!1}),E.data("Jcrop",le),le},e.fn.Jcrop=function(t,i){var n;return this.each(function(){if(e(this).data("Jcrop")){if("api"===t)return e(this).data("Jcrop");e(this).data("Jcrop").setOptions(t)}else"IMG"==this.tagName?e.Jcrop.Loader(this,function(){e(this).css({display:"block",visibility:"hidden"}),n=e.Jcrop(this,t),e.isFunction(i)&&i.call(n)}):(e(this).css({display:"block",visibility:"hidden"}),n=e.Jcrop(this,t),e.isFunction(i)&&i.call(n))}),this},e.Jcrop.Loader=function(t,i,n){function s(){o.complete?(a.unbind(".jcloader"),e.isFunction(i)&&i.call(o)):window.setTimeout(s,50)}var a=e(t),o=a[0];a.bind("load.jcloader",s).bind("error.jcloader",function(t){a.unbind(".jcloader"),e.isFunction(n)&&n.call(o)}),o.complete&&e.isFunction(i)&&(a.unbind(".jcloader"),i.call(o))},e.Jcrop.defaults={allowSelect:!0,allowMove:!0,allowResize:!0,trackDocument:!0,baseClass:"jcrop",addClass:null,bgColor:"black",bgOpacity:.6,bgFade:!1,borderOpacity:.4,handleOpacity:.5,handleSize:null,aspectRatio:0,keySupport:!0,createHandles:["n","s","e","w","nw","ne","se","sw"],createDragbars:["n","s","e","w"],createBorders:["n","s","e","w"],drawBorders:!0,dragEdges:!0,fixedSupport:!0,touchSupport:null,shade:null,boxWidth:0,boxHeight:0,boundary:2,fadeTime:400,animationDelay:20,swingSpeed:3,minSelect:[0,0],maxSize:[0,0],minSize:[0,0],onChange:function(){},onSelect:function(){},onDblClick:function(){},onRelease:function(){}}}(jQuery),window.puJsFileLoadCounter++,"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(e){"use strict";var t=jQuery.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||1==t[0]&&9==t[1]&&t[2]<1||t[0]>3)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 4")}(),function(e){"use strict";function t(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in t)if(void 0!==e.style[i])return{end:t[i]};return!1}e.fn.emulateTransitionEnd=function(t){var i=!1,n=this;e(this).one("bsTransitionEnd",function(){i=!0});return setTimeout(function(){i||e(n).trigger(e.support.transition.end)},t),this},e(function(){e.support.transition=t(),e.support.transition&&(e.event.special.bsTransitionEnd={bindType:e.support.transition.end,delegateType:e.support.transition.end,handle:function(t){if(e(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}})})}(jQuery),function(e){"use strict";var t='[data-dismiss="alert"]',i=function(i){e(i).on("click",t,this.close)};i.VERSION="3.3.7",i.TRANSITION_DURATION=150,i.prototype.close=function(t){function n(){o.detach().trigger("closed.bs.alert").remove()}var s=e(this),a=s.attr("data-target");a||(a=s.attr("href"),a=a&&a.replace(/.*(?=#[^\s]*$)/,""));var o=e("#"===a?[]:a);t&&t.preventDefault(),o.length||(o=s.closest(".alert")),o.trigger(t=e.Event("close.bs.alert")),t.isDefaultPrevented()||(o.removeClass("in"),e.support.transition&&o.hasClass("fade")?o.one("bsTransitionEnd",n).emulateTransitionEnd(i.TRANSITION_DURATION):n())};var n=e.fn.alert;e.fn.alert=function(t){return this.each(function(){var n=e(this),s=n.data("bs.alert");s||n.data("bs.alert",s=new i(this)),"string"==typeof t&&s[t].call(n)})},e.fn.alert.Constructor=i,e.fn.alert.noConflict=function(){return e.fn.alert=n,this},e(document).on("click.bs.alert.data-api",t,i.prototype.close)}(jQuery),function(e){"use strict";function t(t){return this.each(function(){var n=e(this),s=n.data("bs.button"),a="object"==typeof t&&t;s||n.data("bs.button",s=new i(this,a)),"toggle"==t?s.toggle():t&&s.setState(t)})}var i=function(t,n){this.$element=e(t),this.options=e.extend({},i.DEFAULTS,n),this.isLoading=!1};i.VERSION="3.3.7",i.DEFAULTS={loadingText:"loading..."},i.prototype.setState=function(t){var i="disabled",n=this.$element,s=n.is("input")?"val":"html",a=n.data();t+="Text",null==a.resetText&&n.data("resetText",n[s]()),setTimeout(e.proxy(function(){n[s](null==a[t]?this.options[t]:a[t]),"loadingText"==t?(this.isLoading=!0,n.addClass(i).attr(i,i).prop(i,!0)):this.isLoading&&(this.isLoading=!1,n.removeClass(i).removeAttr(i).prop(i,!1))},this),0)},i.prototype.toggle=function(){var e=!0,t=this.$element.closest('[data-toggle="buttons"]');if(t.length){var i=this.$element.find("input");"radio"==i.prop("type")?(i.prop("checked")&&(e=!1),t.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==i.prop("type")&&(i.prop("checked")!==this.$element.hasClass("active")&&(e=!1),this.$element.toggleClass("active")),i.prop("checked",this.$element.hasClass("active")),e&&i.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var n=e.fn.button;e.fn.button=t,e.fn.button.Constructor=i,e.fn.button.noConflict=function(){return e.fn.button=n,this},e(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(i){var n=e(i.target).closest(".btn");t.call(n,"toggle"),e(i.target).is('input[type="radio"], input[type="checkbox"]')||(i.preventDefault(),n.is("input,button")?n.trigger("focus"):n.find("input:visible,button:visible").first().trigger("focus"))}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(t){e(t.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(t.type))})}(jQuery),function(e){"use strict";function t(t){return this.each(function(){var n=e(this),s=n.data("bs.carousel"),a=e.extend({},i.DEFAULTS,n.data(),"object"==typeof t&&t),o="string"==typeof t?t:a.slide;s||n.data("bs.carousel",s=new i(this,a)),"number"==typeof t?s.to(t):o?s[o]():a.interval&&s.pause().cycle()})}var i=function(t,i){this.$element=e(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=i,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",e.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",e.proxy(this.pause,this)).on("mouseleave.bs.carousel",e.proxy(this.cycle,this))};i.VERSION="3.3.7",i.TRANSITION_DURATION=600,i.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},i.prototype.keydown=function(e){if(!/input|textarea/i.test(e.target.tagName)){switch(e.which){case 37:this.prev();break;case 39:this.next();break;default:return}e.preventDefault()}},i.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},i.prototype.getItemIndex=function(e){return this.$items=e.parent().children(".item"),this.$items.index(e||this.$active)},i.prototype.getItemForDirection=function(e,t){var i=this.getItemIndex(t);if(("prev"==e&&0===i||"next"==e&&i==this.$items.length-1)&&!this.options.wrap)return t;var n=(i+("prev"==e?-1:1))%this.$items.length;return this.$items.eq(n)},i.prototype.to=function(e){var t=this,i=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(e>this.$items.length-1||e<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){t.to(e)}):i==e?this.pause().cycle():this.slide(e>i?"next":"prev",this.$items.eq(e))},i.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},i.prototype.next=function(){if(!this.sliding)return this.slide("next")},i.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},i.prototype.slide=function(t,n){var s=this.$element.find(".item.active"),a=n||this.getItemForDirection(t,s),o=this.interval,r="next"==t?"left":"right",l=this;if(a.hasClass("active"))return this.sliding=!1;var d=a[0],c=e.Event("slide.bs.carousel",{relatedTarget:d,direction:r});if(this.$element.trigger(c),!c.isDefaultPrevented()){if(this.sliding=!0,o&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var u=e(this.$indicators.children()[this.getItemIndex(a)]);u&&u.addClass("active")}var h=e.Event("slid.bs.carousel",{relatedTarget:d,direction:r});return e.support.transition&&this.$element.hasClass("slide")?(a.addClass(t),a[0].offsetWidth,s.addClass(r),a.addClass(r),s.one("bsTransitionEnd",function(){a.removeClass([t,r].join(" ")).addClass("active"),s.removeClass(["active",r].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger(h)},0)}).emulateTransitionEnd(i.TRANSITION_DURATION)):(s.removeClass("active"),a.addClass("active"),this.sliding=!1,this.$element.trigger(h)),o&&this.cycle(),this}};var n=e.fn.carousel;e.fn.carousel=t,e.fn.carousel.Constructor=i,e.fn.carousel.noConflict=function(){return e.fn.carousel=n,this};var s=function(i){var n,s=e(this),a=e(s.attr("data-target")||(n=s.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""));if(a.hasClass("carousel")){var o=e.extend({},a.data(),s.data()),r=s.attr("data-slide-to");r&&(o.interval=!1),t.call(a,o),r&&a.data("bs.carousel").to(r),i.preventDefault()}};e(document).on("click.bs.carousel.data-api","[data-slide]",s).on("click.bs.carousel.data-api","[data-slide-to]",s),e(window).on("load",function(){e('[data-ride="carousel"]').each(function(){var i=e(this);t.call(i,i.data())})})}(jQuery),function(e){"use strict";function t(t){var i,n=t.attr("data-target")||(i=t.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"");return e(n)}function i(t){return this.each(function(){var i=e(this),s=i.data("bs.collapse"),a=e.extend({},n.DEFAULTS,i.data(),"object"==typeof t&&t);!s&&a.toggle&&/show|hide/.test(t)&&(a.toggle=!1),s||i.data("bs.collapse",s=new n(this,a)),"string"==typeof t&&s[t]()})}var n=function(t,i){this.$element=e(t),this.options=e.extend({},n.DEFAULTS,i),this.$trigger=e('[data-toggle="collapse"][href="#'+t.id+'"],[data-toggle="collapse"][data-target="#'+t.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};n.VERSION="3.3.7",n.TRANSITION_DURATION=350,n.DEFAULTS={toggle:!0},n.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"},n.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var t,s=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(s&&s.length&&(t=s.data("bs.collapse"))&&t.transitioning)){var a=e.Event("show.bs.collapse");if(this.$element.trigger(a),!a.isDefaultPrevented()){s&&s.length&&(i.call(s,"hide"),t||s.data("bs.collapse",null));var o=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[o](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var r=function(){this.$element.removeClass("collapsing").addClass("collapse in")[o](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return r.call(this);var l=e.camelCase(["scroll",o].join("-"));this.$element.one("bsTransitionEnd",e.proxy(r,this)).emulateTransitionEnd(n.TRANSITION_DURATION)[o](this.$element[0][l])}}}},n.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t=e.Event("hide.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var i=this.dimension();this.$element[i](this.$element[i]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var s=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return e.support.transition?void this.$element[i](0).one("bsTransitionEnd",e.proxy(s,this)).emulateTransitionEnd(n.TRANSITION_DURATION):s.call(this)}}},n.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},n.prototype.getParent=function(){return e(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(e.proxy(function(i,n){var s=e(n);this.addAriaAndCollapsedClass(t(s),s)},this)).end()},n.prototype.addAriaAndCollapsedClass=function(e,t){var i=e.hasClass("in");e.attr("aria-expanded",i),t.toggleClass("collapsed",!i).attr("aria-expanded",i)};var s=e.fn.collapse;e.fn.collapse=i,e.fn.collapse.Constructor=n,e.fn.collapse.noConflict=function(){return e.fn.collapse=s,this},e(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(n){var s=e(this);s.attr("data-target")||n.preventDefault();var a=t(s),o=a.data("bs.collapse")?"toggle":s.data();i.call(a,o)})}(jQuery),function(e){"use strict";function t(t){var i=t.attr("data-target");i||(i=t.attr("href"),i=i&&/#[A-Za-z]/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,""));var n=i&&e(i);return n&&n.length?n:t.parent()}function i(i){i&&3===i.which||(e(n).remove(),e(s).each(function(){var n=e(this),s=t(n),a={relatedTarget:this};s.hasClass("open")&&(i&&"click"==i.type&&/input|textarea/i.test(i.target.tagName)&&e.contains(s[0],i.target)||(s.trigger(i=e.Event("hide.bs.dropdown",a)),i.isDefaultPrevented()||(n.attr("aria-expanded","false"),s.removeClass("open").trigger(e.Event("hidden.bs.dropdown",a)))))}))}var n=".dropdown-backdrop",s='[data-toggle="dropdown"]',a=function(t){e(t).on("click.bs.dropdown",this.toggle)};a.VERSION="3.3.7",a.prototype.toggle=function(n){var s=e(this);if(!s.is(".disabled, :disabled")){var a=t(s),o=a.hasClass("open");if(i(),!o){"ontouchstart"in document.documentElement&&!a.closest(".navbar-nav").length&&e(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(e(this)).on("click",i);var r={relatedTarget:this};if(a.trigger(n=e.Event("show.bs.dropdown",r)),n.isDefaultPrevented())return;s.trigger("focus").attr("aria-expanded","true"),a.toggleClass("open").trigger(e.Event("shown.bs.dropdown",r))}return!1}},a.prototype.keydown=function(i){if(/(38|40|27|32)/.test(i.which)&&!/input|textarea/i.test(i.target.tagName)){var n=e(this);if(i.preventDefault(),i.stopPropagation(),!n.is(".disabled, :disabled")){var a=t(n),o=a.hasClass("open");if(!o&&27!=i.which||o&&27==i.which)return 27==i.which&&a.find(s).trigger("focus"),n.trigger("click");var r=a.find(".dropdown-menu li:not(.disabled):visible a");if(r.length){var l=r.index(i.target);38==i.which&&l>0&&l--,40==i.which&&l<r.length-1&&l++,~l||(l=0),r.eq(l).trigger("focus")}}}};var o=e.fn.dropdown;e.fn.dropdown=function(t){return this.each(function(){var i=e(this),n=i.data("bs.dropdown");n||i.data("bs.dropdown",n=new a(this)),"string"==typeof t&&n[t].call(i)})},e.fn.dropdown.Constructor=a,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=o,this},e(document).on("click.bs.dropdown.data-api",i).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",s,a.prototype.toggle).on("keydown.bs.dropdown.data-api",s,a.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",a.prototype.keydown)}(jQuery),function(e){"use strict";function t(t,n){return this.each(function(){var s=e(this),a=s.data("bs.modal"),o=e.extend({},i.DEFAULTS,s.data(),"object"==typeof t&&t);a||s.data("bs.modal",a=new i(this,o)),"string"==typeof t?a[t](n):o.show&&a.show(n)})}var i=function(t,i){this.options=i,this.$body=e(document.body),this.$element=e(t),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,e.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};i.VERSION="3.3.7",i.TRANSITION_DURATION=300,i.BACKDROP_TRANSITION_DURATION=150,i.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},i.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)},i.prototype.show=function(t){var n=this,s=e.Event("show.bs.modal",{relatedTarget:t});this.$element.trigger(s),this.isShown||s.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){n.$element.one("mouseup.dismiss.bs.modal",function(t){e(t.target).is(n.$element)&&(n.ignoreBackdropClick=!0)})}),this.backdrop(function(){var s=e.support.transition&&n.$element.hasClass("fade");n.$element.parent().length||n.$element.appendTo(n.$body),n.$element.show().scrollTop(0),n.adjustDialog(),s&&n.$element[0].offsetWidth,n.$element.addClass("in"),n.enforceFocus();var a=e.Event("shown.bs.modal",{relatedTarget:t});s?n.$dialog.one("bsTransitionEnd",function(){n.$element.trigger("focus").trigger(a)}).emulateTransitionEnd(i.TRANSITION_DURATION):n.$element.trigger("focus").trigger(a)}))},i.prototype.hide=function(t){t&&t.preventDefault(),t=e.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",e.proxy(this.hideModal,this)).emulateTransitionEnd(i.TRANSITION_DURATION):this.hideModal())},i.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(e){document===e.target||this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.trigger("focus")},this))},i.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",e.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},i.prototype.resize=function(){this.isShown?e(window).on("resize.bs.modal",e.proxy(this.handleUpdate,this)):e(window).off("resize.bs.modal")},i.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.$body.removeClass("modal-open"),e.resetAdjustments(),e.resetScrollbar(),e.$element.trigger("hidden.bs.modal")})},i.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},i.prototype.backdrop=function(t){var n=this,s=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var a=e.support.transition&&s;if(this.$backdrop=e(document.createElement("div")).addClass("modal-backdrop "+s).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",e.proxy(function(e){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),a&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;a?this.$backdrop.one("bsTransitionEnd",t).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):t()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var o=function(){n.removeBackdrop(),t&&t()};e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",o).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):o()}else t&&t()},i.prototype.handleUpdate=function(){this.adjustDialog()},i.prototype.adjustDialog=function(){var e=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&e?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!e?this.scrollbarWidth:""})},i.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},i.prototype.checkScrollbar=function(){var e=window.innerWidth;if(!e){var t=document.documentElement.getBoundingClientRect();e=t.right-Math.abs(t.left)}this.bodyIsOverflowing=document.body.clientWidth<e,this.scrollbarWidth=this.measureScrollbar()},i.prototype.setScrollbar=function(){var e=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",e+this.scrollbarWidth)},i.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},i.prototype.measureScrollbar=function(){var e=document.createElement("div");e.className="modal-scrollbar-measure",this.$body.append(e);var t=e.offsetWidth-e.clientWidth;return this.$body[0].removeChild(e),t};var n=e.fn.modal;e.fn.modal=t,e.fn.modal.Constructor=i,e.fn.modal.noConflict=function(){return e.fn.modal=n,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(i){var n=e(this),s=n.attr("href"),a=e(n.attr("data-target")||s&&s.replace(/.*(?=#[^\s]+$)/,"")),o=a.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(s)&&s},a.data(),n.data());n.is("a")&&i.preventDefault(),a.one("show.bs.modal",function(e){e.isDefaultPrevented()||a.one("hidden.bs.modal",function(){n.is(":visible")&&n.trigger("focus")})}),t.call(a,o,this)})}(jQuery),function(e){"use strict";var t=function(e,t){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",e,t)};t.VERSION="3.3.7",t.TRANSITION_DURATION=150,t.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},t.prototype.init=function(t,i,n){if(this.enabled=!0,this.type=t,this.$element=e(i),this.options=this.getOptions(n),this.$viewport=this.options.viewport&&e(e.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var s=this.options.trigger.split(" "),a=s.length;a--;){var o=s[a];if("click"==o)this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if("manual"!=o){var r="hover"==o?"mouseenter":"focusin",l="hover"==o?"mouseleave":"focusout";this.$element.on(r+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},t.prototype.getDefaults=function(){return t.DEFAULTS},t.prototype.getOptions=function(t){return(t=e.extend({},this.getDefaults(),this.$element.data(),t)).delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},t.prototype.getDelegateOptions=function(){var t={},i=this.getDefaults();return this._options&&e.each(this._options,function(e,n){i[e]!=n&&(t[e]=n)}),t},t.prototype.enter=function(t){var i=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,i)),t instanceof e.Event&&(i.inState["focusin"==t.type?"focus":"hover"]=!0),i.tip().hasClass("in")||"in"==i.hoverState?void(i.hoverState="in"):(clearTimeout(i.timeout),i.hoverState="in",i.options.delay&&i.options.delay.show?void(i.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show)):i.show())},t.prototype.isInStateTrue=function(){for(var e in this.inState)if(this.inState[e])return!0;return!1},t.prototype.leave=function(t){var i=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);if(i||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,i)),t instanceof e.Event&&(i.inState["focusout"==t.type?"focus":"hover"]=!1),!i.isInStateTrue())return clearTimeout(i.timeout),i.hoverState="out",i.options.delay&&i.options.delay.hide?void(i.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide)):i.hide()},t.prototype.show=function(){var i=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(i);var n=e.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(i.isDefaultPrevented()||!n)return;var s=this,a=this.tip(),o=this.getUID(this.type);this.setContent(),a.attr("id",o),this.$element.attr("aria-describedby",o),this.options.animation&&a.addClass("fade");var r="function"==typeof this.options.placement?this.options.placement.call(this,a[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,d=l.test(r);d&&(r=r.replace(l,"")||"top"),a.detach().css({top:0,left:0,display:"block"}).addClass(r).data("bs."+this.type,this),this.options.container?a.appendTo(this.options.container):a.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var c=this.getPosition(),u=a[0].offsetWidth,h=a[0].offsetHeight;if(d){var p=r,f=this.getPosition(this.$viewport);r="bottom"==r&&c.bottom+h>f.bottom?"top":"top"==r&&c.top-h<f.top?"bottom":"right"==r&&c.right+u>f.width?"left":"left"==r&&c.left-u<f.left?"right":r,a.removeClass(p).addClass(r)}var m=this.getCalculatedOffset(r,c,u,h);this.applyPlacement(m,r);var g=function(){var e=s.hoverState;s.$element.trigger("shown.bs."+s.type),s.hoverState=null,"out"==e&&s.leave(s)};e.support.transition&&this.$tip.hasClass("fade")?a.one("bsTransitionEnd",g).emulateTransitionEnd(t.TRANSITION_DURATION):g()}},t.prototype.applyPlacement=function(t,i){var n=this.tip(),s=n[0].offsetWidth,a=n[0].offsetHeight,o=parseInt(n.css("margin-top"),10),r=parseInt(n.css("margin-left"),10);isNaN(o)&&(o=0),isNaN(r)&&(r=0),t.top+=o,t.left+=r,e.offset.setOffset(n[0],e.extend({using:function(e){n.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0),n.addClass("in");var l=n[0].offsetWidth,d=n[0].offsetHeight;"top"==i&&d!=a&&(t.top=t.top+a-d);var c=this.getViewportAdjustedDelta(i,t,l,d);c.left?t.left+=c.left:t.top+=c.top;var u=/top|bottom/.test(i),h=u?2*c.left-s+l:2*c.top-a+d,p=u?"offsetWidth":"offsetHeight";n.offset(t),this.replaceArrow(h,n[0][p],u)},t.prototype.replaceArrow=function(e,t,i){this.arrow().css(i?"left":"top",50*(1-e/t)+"%").css(i?"top":"left","")},t.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},t.prototype.hide=function(i){function n(){"in"!=s.hoverState&&a.detach(),s.$element&&s.$element.removeAttr("aria-describedby").trigger("hidden.bs."+s.type),i&&i()}var s=this,a=e(this.$tip),o=e.Event("hide.bs."+this.type);if(this.$element.trigger(o),!o.isDefaultPrevented())return a.removeClass("in"),e.support.transition&&a.hasClass("fade")?a.one("bsTransitionEnd",n).emulateTransitionEnd(t.TRANSITION_DURATION):n(),this.hoverState=null,this},t.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},t.prototype.hasContent=function(){return this.getTitle()},t.prototype.getPosition=function(t){var i=(t=t||this.$element)[0],n="BODY"==i.tagName,s=i.getBoundingClientRect();null==s.width&&(s=e.extend({},s,{width:s.right-s.left,height:s.bottom-s.top}));var a=window.SVGElement&&i instanceof window.SVGElement,o=n?{top:0,left:0}:a?null:t.offset(),r={scroll:n?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},l=n?{width:e(window).width(),height:e(window).height()}:null;return e.extend({},s,r,l,o)},t.prototype.getCalculatedOffset=function(e,t,i,n){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-i/2}:"top"==e?{top:t.top-n,left:t.left+t.width/2-i/2}:"left"==e?{top:t.top+t.height/2-n/2,left:t.left-i}:{top:t.top+t.height/2-n/2,left:t.left+t.width}},t.prototype.getViewportAdjustedDelta=function(e,t,i,n){var s={top:0,left:0};if(!this.$viewport)return s;var a=this.options.viewport&&this.options.viewport.padding||0,o=this.getPosition(this.$viewport);if(/right|left/.test(e)){var r=t.top-a-o.scroll,l=t.top+a-o.scroll+n;r<o.top?s.top=o.top-r:l>o.top+o.height&&(s.top=o.top+o.height-l)}else{var d=t.left-a,c=t.left+a+i;d<o.left?s.left=o.left-d:c>o.right&&(s.left=o.left+o.width-c)}return s},t.prototype.getTitle=function(){var e=this.$element,t=this.options;return e.attr("data-original-title")||("function"==typeof t.title?t.title.call(e[0]):t.title)},t.prototype.getUID=function(e){do{e+=~~(1e6*Math.random())}while(document.getElementById(e));return e},t.prototype.tip=function(){if(!this.$tip&&(this.$tip=e(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},t.prototype.enable=function(){this.enabled=!0},t.prototype.disable=function(){this.enabled=!1},t.prototype.toggleEnabled=function(){this.enabled=!this.enabled},t.prototype.toggle=function(t){var i=this;t&&((i=e(t.currentTarget).data("bs."+this.type))||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,i))),t?(i.inState.click=!i.inState.click,i.isInStateTrue()?i.enter(i):i.leave(i)):i.tip().hasClass("in")?i.leave(i):i.enter(i)},t.prototype.destroy=function(){var e=this;clearTimeout(this.timeout),this.hide(function(){e.$element.off("."+e.type).removeData("bs."+e.type),e.$tip&&e.$tip.detach(),e.$tip=null,e.$arrow=null,e.$viewport=null,e.$element=null})};var i=e.fn.tooltip;e.fn.tooltip=function(i){return this.each(function(){var n=e(this),s=n.data("bs.tooltip"),a="object"==typeof i&&i;!s&&/destroy|hide/.test(i)||(s||n.data("bs.tooltip",s=new t(this,a)),"string"==typeof i&&s[i]())})},e.fn.tooltip.Constructor=t,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=i,this}}(jQuery),function(e){"use strict";var t=function(e,t){this.init("popover",e,t)};if(!e.fn.tooltip)throw new Error("Popover requires tooltip.js");t.VERSION="3.3.7",t.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),t.prototype=e.extend({},e.fn.tooltip.Constructor.prototype),t.prototype.constructor=t,t.prototype.getDefaults=function(){return t.DEFAULTS},t.prototype.setContent=function(){var e=this.tip(),t=this.getTitle(),i=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof i?"html":"append":"text"](i),e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},t.prototype.hasContent=function(){return this.getTitle()||this.getContent()},t.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||("function"==typeof t.content?t.content.call(e[0]):t.content)},t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var i=e.fn.popover;e.fn.popover=function(i){return this.each(function(){var n=e(this),s=n.data("bs.popover"),a="object"==typeof i&&i;!s&&/destroy|hide/.test(i)||(s||n.data("bs.popover",s=new t(this,a)),"string"==typeof i&&s[i]())})},e.fn.popover.Constructor=t,e.fn.popover.noConflict=function(){return e.fn.popover=i,this}}(jQuery),function(e){"use strict";function t(i,n){this.$body=e(document.body),this.$scrollElement=e(e(i).is(document.body)?window:i),this.options=e.extend({},t.DEFAULTS,n),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",e.proxy(this.process,this)),this.refresh(),this.process()}function i(i){return this.each(function(){var n=e(this),s=n.data("bs.scrollspy"),a="object"==typeof i&&i;s||n.data("bs.scrollspy",s=new t(this,a)),"string"==typeof i&&s[i]()})}t.VERSION="3.3.7",t.DEFAULTS={offset:10},t.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},t.prototype.refresh=function(){var t=this,i="offset",n=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),e.isWindow(this.$scrollElement[0])||(i="position",n=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var t=e(this),s=t.data("target")||t.attr("href"),a=/^#./.test(s)&&e(s);return a&&a.length&&a.is(":visible")&&[[a[i]().top+n,s]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){t.offsets.push(this[0]),t.targets.push(this[1])})},t.prototype.process=function(){var e,t=this.$scrollElement.scrollTop()+this.options.offset,i=this.getScrollHeight(),n=this.options.offset+i-this.$scrollElement.height(),s=this.offsets,a=this.targets,o=this.activeTarget;if(this.scrollHeight!=i&&this.refresh(),t>=n)return o!=(e=a[a.length-1])&&this.activate(e);if(o&&t<s[0])return this.activeTarget=null,this.clear();for(e=s.length;e--;)o!=a[e]&&t>=s[e]&&(void 0===s[e+1]||t<s[e+1])&&this.activate(a[e])},t.prototype.activate=function(t){this.activeTarget=t,this.clear();var i=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',n=e(i).parents("li").addClass("active");n.parent(".dropdown-menu").length&&(n=n.closest("li.dropdown").addClass("active")),n.trigger("activate.bs.scrollspy")},t.prototype.clear=function(){e(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var n=e.fn.scrollspy;e.fn.scrollspy=i,e.fn.scrollspy.Constructor=t,e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=n,this},e(window).on("load.bs.scrollspy.data-api",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);i.call(t,t.data())})})}(jQuery),function(e){"use strict";function t(t){return this.each(function(){var n=e(this),s=n.data("bs.tab");s||n.data("bs.tab",s=new i(this)),"string"==typeof t&&s[t]()})}var i=function(t){this.element=e(t)};i.VERSION="3.3.7",i.TRANSITION_DURATION=150,i.prototype.show=function(){var t=this.element,i=t.closest("ul:not(.dropdown-menu)"),n=t.data("target");if(n||(n=t.attr("href"),n=n&&n.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var s=i.find(".active:last a"),a=e.Event("hide.bs.tab",{relatedTarget:t[0]}),o=e.Event("show.bs.tab",{relatedTarget:s[0]});if(s.trigger(a),t.trigger(o),!o.isDefaultPrevented()&&!a.isDefaultPrevented()){var r=e(n);this.activate(t.closest("li"),i),this.activate(r,r.parent(),function(){s.trigger({type:"hidden.bs.tab",relatedTarget:t[0]}),t.trigger({type:"shown.bs.tab",relatedTarget:s[0]})})}}},i.prototype.activate=function(t,n,s){function a(){o.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),t.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),r?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu").length&&t.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),s&&s()}var o=n.find("> .active"),r=s&&e.support.transition&&(o.length&&o.hasClass("fade")||!!n.find("> .fade").length);o.length&&r?o.one("bsTransitionEnd",a).emulateTransitionEnd(i.TRANSITION_DURATION):a(),o.removeClass("in")};var n=e.fn.tab;e.fn.tab=t,e.fn.tab.Constructor=i,e.fn.tab.noConflict=function(){return e.fn.tab=n,this};var s=function(i){i.preventDefault(),t.call(e(this),"show")};e(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',s).on("click.bs.tab.data-api",'[data-toggle="pill"]',s)}(jQuery),function(e){"use strict";function t(t){return this.each(function(){var n=e(this),s=n.data("bs.affix"),a="object"==typeof t&&t;s||n.data("bs.affix",s=new i(this,a)),"string"==typeof t&&s[t]()})}var i=function(t,n){this.options=e.extend({},i.DEFAULTS,n),this.$target=e(this.options.target).on("scroll.bs.affix.data-api",e.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",e.proxy(this.checkPositionWithEventLoop,this)),this.$element=e(t),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};i.VERSION="3.3.7",i.RESET="affix affix-top affix-bottom",i.DEFAULTS={offset:0,target:window},i.prototype.getState=function(e,t,i,n){var s=this.$target.scrollTop(),a=this.$element.offset(),o=this.$target.height();if(null!=i&&"top"==this.affixed)return s<i&&"top";if("bottom"==this.affixed)return null!=i?!(s+this.unpin<=a.top)&&"bottom":!(s+o<=e-n)&&"bottom";var r=null==this.affixed,l=r?s:a.top,d=r?o:t;return null!=i&&s<=i?"top":null!=n&&l+d>=e-n&&"bottom"},i.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(i.RESET).addClass("affix");var e=this.$target.scrollTop(),t=this.$element.offset();return this.pinnedOffset=t.top-e},i.prototype.checkPositionWithEventLoop=function(){setTimeout(e.proxy(this.checkPosition,this),1)},i.prototype.checkPosition=function(){if(this.$element.is(":visible")){var t=this.$element.height(),n=this.options.offset,s=n.top,a=n.bottom,o=Math.max(e(document).height(),e(document.body).height());"object"!=typeof n&&(a=s=n),"function"==typeof s&&(s=n.top(this.$element)),"function"==typeof a&&(a=n.bottom(this.$element));var r=this.getState(o,t,s,a);if(this.affixed!=r){null!=this.unpin&&this.$element.css("top","");var l="affix"+(r?"-"+r:""),d=e.Event(l+".bs.affix");if(this.$element.trigger(d),d.isDefaultPrevented())return;this.affixed=r,this.unpin="bottom"==r?this.getPinnedOffset():null,this.$element.removeClass(i.RESET).addClass(l).trigger(l.replace("affix","affixed")+".bs.affix")}"bottom"==r&&this.$element.offset({top:o-t-a})}};var n=e.fn.affix;e.fn.affix=t,e.fn.affix.Constructor=i,e.fn.affix.noConflict=function(){return e.fn.affix=n,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var i=e(this),n=i.data();n.offset=n.offset||{},null!=n.offsetBottom&&(n.offset.bottom=n.offsetBottom),null!=n.offsetTop&&(n.offset.top=n.offsetTop),t.call(i,n)})})}(jQuery),window.puJsFileLoadCounter++,function(e){"function"==typeof define&&define.amd?define(["jquery"],function(t){return e(t,window,document)}):e(jQuery,window,document)}(function(e,t,i){"use strict";var n,s,a,o,r,l,d,c,u,h,p,f,m,g,v;c={paneClass:"nano-pane",sliderClass:"nano-slider",contentClass:"nano-content",iOSNativeScrolling:!1,preventPageScrolling:!1,disableResize:!1,alwaysVisible:!1,flashDelay:1500,sliderMinHeight:20,sliderMaxHeight:null,documentContext:null,windowContext:null},r="scroll",l="up",a="DOMMouseScroll",n="Microsoft Internet Explorer"===t.navigator.appName&&/msie 7./i.test(t.navigator.appVersion)&&t.ActiveXObject,s=null,f=t.requestAnimationFrame,d=t.cancelAnimationFrame,g=i.createElement("div").style,v=function(){var e,t,i,n;for(e=i=0,n=(t=["t","webkitT","MozT","msT","OT"]).length;i<n;e=++i)if(t[e],t[e]+"ransform"in g)return t[e].substr(0,t[e].length-1);return!1}(),m=function(e){return!1!==v&&(""===v?e:v+e.charAt(0).toUpperCase()+e.substr(1))}("transform"),h=!1!==m,u=function(){var e,t,n;return e=i.createElement("div"),t=e.style,t.position="absolute",t.width="100px",t.height="100px",t.overflow=r,t.top="-9999px",i.body.appendChild(e),n=e.offsetWidth-e.clientWidth,i.body.removeChild(e),n},p=function(){var e,i,n;return i=t.navigator.userAgent,!!(e=/(?=.+Mac OS X)(?=.+Firefox)/.test(i))&&((n=/Firefox\/\d{2}\./.exec(i))&&(n=n[0].replace(/\D+/g,"")),e&&+n>23)},o=function(){function o(n,a){this.el=n,this.options=a,s||(s=u()),this.$el=e(this.el),this.doc=e(this.options.documentContext||i),this.win=e(this.options.windowContext||t),this.body=this.doc.find("body"),this.$content=this.$el.children("."+this.options.contentClass),this.content=this.$content[0],this.previousPosition=0,this.options.iOSNativeScrolling&&null!=this.el.style.WebkitOverflowScrolling?this.nativeScrolling():this.generate(),this.createEvents(),this.addEvents(),this.reset()}return o.prototype.preventScrolling=function(e,t){if(this.isActive)if(e.type===a)("down"===t&&e.originalEvent.detail>0||t===l&&e.originalEvent.detail<0)&&e.preventDefault();else if("mousewheel"===e.type){if(!e.originalEvent||!e.originalEvent.wheelDelta)return;("down"===t&&e.originalEvent.wheelDelta<0||t===l&&e.originalEvent.wheelDelta>0)&&e.preventDefault()}},o.prototype.nativeScrolling=function(){this.$content.css({WebkitOverflowScrolling:"touch"}),this.iOSNativeScrolling=!0,this.isActive=!0},o.prototype.updateScrollValues=function(){var e,t;e=this.content,this.maxScrollTop=e.scrollHeight-e.clientHeight,this.prevScrollTop=this.contentScrollTop||0,this.contentScrollTop=e.scrollTop,t=this.contentScrollTop>this.previousPosition?"down":this.contentScrollTop<this.previousPosition?"up":"same",this.previousPosition=this.contentScrollTop,"same"!==t&&this.$el.trigger("update",{position:this.contentScrollTop,maximum:this.maxScrollTop,direction:t}),this.iOSNativeScrolling||(this.maxSliderTop=this.paneHeight-this.sliderHeight,this.sliderTop=0===this.maxScrollTop?0:this.contentScrollTop*this.maxSliderTop/this.maxScrollTop)},o.prototype.setOnScrollStyles=function(){var e;h?(e={})[m]="translate(0, "+this.sliderTop+"px)":e={top:this.sliderTop},f?(d&&this.scrollRAF&&d(this.scrollRAF),this.scrollRAF=f(function(t){return function(){return t.scrollRAF=null,t.slider.css(e)}}(this))):this.slider.css(e)},o.prototype.createEvents=function(){this.events={down:function(e){return function(t){return e.isBeingDragged=!0,e.offsetY=t.pageY-e.slider.offset().top,e.slider.is(t.target)||(e.offsetY=0),e.pane.addClass("active"),e.doc.bind("mousemove",e.events.drag).bind("mouseup",e.events[l]),e.body.bind("mouseenter",e.events.enter),!1}}(this),drag:function(e){return function(t){return e.sliderY=t.pageY-e.$el.offset().top-e.paneTop-(e.offsetY||.5*e.sliderHeight),e.scroll(),e.contentScrollTop>=e.maxScrollTop&&e.prevScrollTop!==e.maxScrollTop?e.$el.trigger("scrollend"):0===e.contentScrollTop&&0!==e.prevScrollTop&&e.$el.trigger("scrolltop"),!1}}(this),up:function(e){return function(t){return e.isBeingDragged=!1,e.pane.removeClass("active"),e.doc.unbind("mousemove",e.events.drag).unbind("mouseup",e.events[l]),e.body.unbind("mouseenter",e.events.enter),!1}}(this),resize:function(e){return function(t){e.reset()}}(this),panedown:function(e){return function(t){return e.sliderY=(t.offsetY||t.originalEvent.layerY)-.5*e.sliderHeight,e.scroll(),e.events.down(t),!1}}(this),scroll:function(e){return function(t){e.updateScrollValues(),e.isBeingDragged||(e.iOSNativeScrolling||(e.sliderY=e.sliderTop,e.setOnScrollStyles()),null!=t&&(e.contentScrollTop>=e.maxScrollTop?(e.options.preventPageScrolling&&e.preventScrolling(t,"down"),e.prevScrollTop!==e.maxScrollTop&&e.$el.trigger("scrollend")):0===e.contentScrollTop&&(e.options.preventPageScrolling&&e.preventScrolling(t,l),0!==e.prevScrollTop&&e.$el.trigger("scrolltop"))))}}(this),wheel:function(e){return function(t){var i;if(null!=t)return(i=t.delta||t.wheelDelta||t.originalEvent&&t.originalEvent.wheelDelta||-t.detail||t.originalEvent&&-t.originalEvent.detail)&&(e.sliderY+=-i/3),e.scroll(),!1}}(this),enter:function(e){return function(t){var i;if(e.isBeingDragged)return 1!==(t.buttons||t.which)?(i=e.events)[l].apply(i,arguments):void 0}}(this)}},o.prototype.addEvents=function(){var e;this.removeEvents(),e=this.events,this.options.disableResize||this.win.bind("resize",e.resize),this.iOSNativeScrolling||(this.slider.bind("mousedown",e.down),this.pane.bind("mousedown",e.panedown).bind("mousewheel "+a,e.wheel)),this.$content.bind("scroll mousewheel "+a+" touchmove",e[r])},o.prototype.removeEvents=function(){var e;e=this.events,this.win.unbind("resize",e.resize),this.iOSNativeScrolling||(this.slider.unbind(),this.pane.unbind()),this.$content.unbind("scroll mousewheel "+a+" touchmove",e[r])},o.prototype.generate=function(){var e,i,n,a,o;return i=this.options,a=i.paneClass,o=i.sliderClass,i.contentClass,(n=this.$el.children("."+a)).length||n.children("."+o).length||this.$el.append('<div class="'+a+'"><div class="'+o+'" /></div>'),this.pane=this.$el.children("."+a),this.slider=this.pane.find("."+o),0===s&&p()?e={right:-14,paddingRight:+t.getComputedStyle(this.content,null).getPropertyValue("padding-right").replace(/[^0-9.]+/g,"")+14}:s&&(e={right:-s},this.$el.addClass("has-scrollbar")),null!=e&&this.$content.css(e),this},o.prototype.restore=function(){this.stopped=!1,this.iOSNativeScrolling||this.pane.show(),this.addEvents()},o.prototype.reset=function(){var e,t,i,a,o,l,d,c,u,h,p;{if(!this.iOSNativeScrolling)return this.$el.find("."+this.options.paneClass).length||this.generate().stop(),this.stopped&&this.restore(),void 0!=(e=this.content)&&(o=(a=e.style).overflowY,n&&this.$content.css({height:this.$content.height()}),t=e.scrollHeight+s,(u=parseInt(this.$el.css("max-height"),10))>0&&(this.$el.height(""),this.$el.height(e.scrollHeight>u?u:e.scrollHeight)),d=(l=this.pane.outerHeight(!1))+(c=parseInt(this.pane.css("top"),10))+parseInt(this.pane.css("bottom"),10),(p=Math.round(d/t*d))<this.options.sliderMinHeight?p=this.options.sliderMinHeight:null!=this.options.sliderMaxHeight&&p>this.options.sliderMaxHeight&&(p=this.options.sliderMaxHeight),o===r&&a.overflowX!==r&&(p+=s),this.maxSliderTop=d-p,this.contentHeight=t,this.paneHeight=l,this.paneOuterHeight=d,this.sliderHeight=p,this.paneTop=c,this.slider.height(p),this.events.scroll(),this.pane.show(),this.isActive=!0,e.scrollHeight===e.clientHeight||this.pane.outerHeight(!0)>=e.scrollHeight&&o!==r?(this.pane.hide(),this.isActive=!1):this.el.clientHeight===e.scrollHeight&&o===r?this.slider.hide():this.slider.show(),this.pane.css({opacity:this.options.alwaysVisible?1:"",visibility:this.options.alwaysVisible?"visible":""}),"static"!==(i=this.$content.css("position"))&&"relative"!==i||(h=parseInt(this.$content.css("right"),10))&&this.$content.css({right:"",marginRight:h})),this;this.contentHeight=this.content.scrollHeight}},o.prototype.scroll=function(){if(this.isActive)return this.sliderY=Math.max(0,this.sliderY),this.sliderY=Math.min(this.maxSliderTop,this.sliderY),this.$content.scrollTop(this.maxScrollTop*this.sliderY/this.maxSliderTop),this.iOSNativeScrolling||(this.updateScrollValues(),this.setOnScrollStyles()),this},o.prototype.scrollBottom=function(e){if(this.isActive)return this.$content.scrollTop(this.contentHeight-this.$content.height()-e).trigger("mousewheel"),this.stop().restore(),this},o.prototype.scrollTop=function(e){if(this.isActive)return this.$content.scrollTop(+e).trigger("mousewheel"),this.stop().restore(),this},o.prototype.scrollTo=function(e){if(this.isActive)return this.scrollTop(this.$el.find(e).get(0).offsetTop),this},o.prototype.stop=function(){return d&&this.scrollRAF&&(d(this.scrollRAF),this.scrollRAF=null),this.stopped=!0,this.removeEvents(),this.iOSNativeScrolling||this.pane.hide(),this},o.prototype.destroy=function(){return this.stopped||this.stop(),!this.iOSNativeScrolling&&this.pane.length&&this.pane.remove(),n&&this.$content.height(""),this.$content.removeAttr("tabindex"),this.$el.hasClass("has-scrollbar")&&(this.$el.removeClass("has-scrollbar"),this.$content.css({right:""})),this},o.prototype.flash=function(){if(!this.iOSNativeScrolling&&this.isActive)return this.reset(),this.pane.addClass("flashed"),setTimeout(function(e){return function(){e.pane.removeClass("flashed")}}(this),this.options.flashDelay),this},o}(),e.fn.nanoScroller=function(t){return this.each(function(){var i,n;if((n=this.nanoscroller)||(i=e.extend({},c,t),this.nanoscroller=n=new o(this,i)),t&&"object"==typeof t){if(e.extend(n.options,t),null!=t.scrollBottom)return n.scrollBottom(t.scrollBottom);if(null!=t.scrollTop)return n.scrollTop(t.scrollTop);if(t.scrollTo)return n.scrollTo(t.scrollTo);if("bottom"===t.scroll)return n.scrollBottom(0);if("top"===t.scroll)return n.scrollTop(0);if(t.scroll&&t.scroll instanceof e)return n.scrollTo(t.scroll);if(t.stop)return n.stop();if(t.destroy)return n.destroy();if(t.flash)return n.flash()}return n.reset()})},e.fn.nanoScroller.Constructor=o}),window.puJsFileLoadCounter++,function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){"use strict";var t=!1,i=!1,n=0,s=2e3,a=0,o=e,r=["webkit","ms","moz","o"],l=window.requestAnimationFrame||!1,d=window.cancelAnimationFrame||!1;if(!l)for(var c in r){var u=r[c];if(l=window[u+"RequestAnimationFrame"]){d=window[u+"CancelAnimationFrame"]||window[u+"CancelRequestAnimationFrame"];break}}var h=window.MutationObserver||window.WebKitMutationObserver||!1,p={zindex:"auto",cursoropacitymin:0,cursoropacitymax:1,cursorcolor:"#424242",cursorwidth:"6px",cursorborder:"1px solid #fff",cursorborderradius:"5px",scrollspeed:60,mousescrollstep:24,touchbehavior:!1,hwacceleration:!0,usetransition:!0,boxzoom:!1,dblclickzoom:!0,gesturezoom:!0,grabcursorenabled:!1,autohidemode:"leave",background:"",iframeautoresize:!0,cursorminheight:32,preservenativescrolling:!0,railoffset:!1,railhoffset:!1,bouncescroll:!0,spacebarenabled:!0,railpadding:{top:0,right:0,left:0,bottom:0},disableoutline:!0,horizrailenabled:!0,railalign:"right",railvalign:"bottom",enabletranslate3d:!0,enablemousewheel:!0,enablekeyboard:!0,smoothscroll:!0,sensitiverail:!0,enablemouselockapi:!0,cursorfixedheight:!1,directionlockdeadzone:6,hidecursordelay:400,nativeparentscrolling:!0,enablescrollonselection:!0,overflowx:!0,overflowy:!0,cursordragspeed:.3,rtlmode:"auto",cursordragontouch:!1,oneaxismousemode:"auto",scriptpath:function(){var e=document.getElementsByTagName("script"),t=e.length?e[e.length-1].src.split("?")[0]:"";return t.split("/").length>0?t.split("/").slice(0,-1).join("/")+"/":""}(),preventmultitouchscrolling:!0,disablemutationobserver:!1},f=!1,m=function(){if(f)return f;var e=document.createElement("DIV"),t=e.style,i=navigator.userAgent,n=navigator.platform,s={};s.haspointerlock="pointerLockElement"in document||"webkitPointerLockElement"in document||"mozPointerLockElement"in document,s.isopera="opera"in window,s.isopera12=s.isopera&&"getUserMedia"in navigator,s.isoperamini="[object OperaMini]"===Object.prototype.toString.call(window.operamini),s.isie="all"in document&&"attachEvent"in e&&!s.isopera,s.isieold=s.isie&&!("msInterpolationMode"in t),s.isie7=s.isie&&!s.isieold&&(!("documentMode"in document)||7==document.documentMode),s.isie8=s.isie&&"documentMode"in document&&8==document.documentMode,s.isie9=s.isie&&"performance"in window&&9==document.documentMode,s.isie10=s.isie&&"performance"in window&&10==document.documentMode,s.isie11="msRequestFullscreen"in e&&document.documentMode>=11,s.isieedge12=navigator.userAgent.match(/Edge\/12\./),s.isieedge="msOverflowStyle"in e,s.ismodernie=s.isie11||s.isieedge,s.isie9mobile=/iemobile.9/i.test(i),s.isie9mobile&&(s.isie9=!1),s.isie7mobile=!s.isie9mobile&&s.isie7&&/iemobile/i.test(i),s.ismozilla="MozAppearance"in t,s.iswebkit="WebkitAppearance"in t,s.ischrome="chrome"in window,s.ischrome38=s.ischrome&&"touchAction"in t,s.ischrome22=!s.ischrome38&&s.ischrome&&s.haspointerlock,s.ischrome26=!s.ischrome38&&s.ischrome&&"transition"in t,s.cantouch="ontouchstart"in document.documentElement||"ontouchstart"in window,s.hasw3ctouch=(window.PointerEvent||!1)&&(navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0),s.hasmstouch=!s.hasw3ctouch&&(window.MSPointerEvent||!1),s.ismac=/^mac$/i.test(n),s.isios=s.cantouch&&/iphone|ipad|ipod/i.test(n),s.isios4=s.isios&&!("seal"in Object),s.isios7=s.isios&&"webkitHidden"in document,s.isios8=s.isios&&"hidden"in document,s.isandroid=/android/i.test(i),s.haseventlistener="addEventListener"in e,s.trstyle=!1,s.hastransform=!1,s.hastranslate3d=!1,s.transitionstyle=!1,s.hastransition=!1,s.transitionend=!1;var a,o=["transform","msTransform","webkitTransform","MozTransform","OTransform"];for(a=0;a<o.length;a++)if(void 0!==t[o[a]]){s.trstyle=o[a];break}s.hastransform=!!s.trstyle,s.hastransform&&(t[s.trstyle]="translate3d(1px,2px,3px)",s.hastranslate3d=/translate3d/.test(t[s.trstyle])),s.transitionstyle=!1,s.prefixstyle="",s.transitionend=!1,o=["transition","webkitTransition","msTransition","MozTransition","OTransition","OTransition","KhtmlTransition"];var r=["","-webkit-","-ms-","-moz-","-o-","-o","-khtml-"],l=["transitionend","webkitTransitionEnd","msTransitionEnd","transitionend","otransitionend","oTransitionEnd","KhtmlTransitionEnd"];for(a=0;a<o.length;a++)if(o[a]in t){s.transitionstyle=o[a],s.prefixstyle=r[a],s.transitionend=l[a];break}return s.ischrome26&&(s.prefixstyle=r[1]),s.hastransition=s.transitionstyle,s.cursorgrabvalue=function(){var e=["grab","-webkit-grab","-moz-grab"];(s.ischrome&&!s.ischrome38||s.isie)&&(e=[]);for(var i=0;i<e.length;i++){var n=e[i];if(t.cursor=n,t.cursor==n)return n}return"url(//patriciaportfolio.googlecode.com/files/openhand.cur),n-resize"}(),s.hasmousecapture="setCapture"in e,s.hasMutationObserver=!1!==h,e=null,f=s,s},g=function(e,r){function c(){var e=_.doc.css(C.trstyle);return!(!e||"matrix"!=e.substr(0,6))&&e.replace(/^.*\((.*)\)$/g,"$1").replace(/px/g,"").split(/, +/)}function u(){var e=_.win;if("zIndex"in e)return e.zIndex();for(;e.length>0;){if(9==e[0].nodeType)return!1;var t=e.css("zIndex");if(!isNaN(t)&&0!=t)return parseInt(t);e=e.parent()}return!1}function f(e,t,i){var n=e.css(t),s=parseFloat(n);if(isNaN(s)){var a=3==(s=N[n]||0)?i?_.win.outerHeight()-_.win.innerHeight():_.win.outerWidth()-_.win.innerWidth():1;return _.isie8&&s&&(s+=1),a?s:0}return s}function g(e,t,i,n){_._bind(e,t,function(n){var s={original:n=n||window.event,target:n.target||n.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==n.type?0:1,deltaX:0,deltaZ:0,preventDefault:function(){return n.preventDefault?n.preventDefault():n.returnValue=!1,!1},stopImmediatePropagation:function(){n.stopImmediatePropagation?n.stopImmediatePropagation():n.cancelBubble=!0}};return"mousewheel"==t?(n.wheelDeltaX&&(s.deltaX=-.025*n.wheelDeltaX),n.wheelDeltaY&&(s.deltaY=-.025*n.wheelDeltaY),!s.deltaY&&!s.deltaX&&(s.deltaY=-.025*n.wheelDelta)):s.deltaY=n.detail,i.call(e,s)},n)}function b(e,t,i){var n,s;if(0==e.deltaMode?(n=-Math.floor(e.deltaX*(_.opt.mousescrollstep/54)),s=-Math.floor(e.deltaY*(_.opt.mousescrollstep/54))):1==e.deltaMode&&(n=-Math.floor(e.deltaX*_.opt.mousescrollstep),s=-Math.floor(e.deltaY*_.opt.mousescrollstep)),t&&_.opt.oneaxismousemode&&0==n&&s&&(n=s,s=0,i&&(n<0?_.getScrollLeft()>=_.page.maxw:_.getScrollLeft()<=0)&&(s=n,n=0)),_.isrtlmode&&(n=-n),n&&(_.scrollmom&&_.scrollmom.stop(),_.lastdeltax+=n,_.debounced("mousewheelx",function(){var e=_.lastdeltax;_.lastdeltax=0,_.rail.drag||_.doScrollLeftBy(e)},15)),s){if(_.opt.nativeparentscrolling&&i&&!_.ispage&&!_.zoomactive)if(s<0){if(_.getScrollTop()>=_.page.maxh)return!0}else if(_.getScrollTop()<=0)return!0;_.scrollmom&&_.scrollmom.stop(),_.lastdeltay+=s,_.synched("mousewheely",function(){var e=_.lastdeltay;_.lastdeltay=0,_.rail.drag||_.doScrollBy(e)},15)}return e.stopImmediatePropagation(),e.preventDefault()}var _=this;if(this.version="3.6.8",this.name="nicescroll",this.me=r,this.opt={doc:o("body"),win:!1},o.extend(this.opt,p),this.opt.snapbackspeed=80,e)for(var $ in _.opt)void 0!==e[$]&&(_.opt[$]=e[$]);if(_.opt.disablemutationobserver&&(h=!1),this.doc=_.opt.doc,this.iddoc=this.doc&&this.doc[0]?this.doc[0].id||"":"",this.ispage=/^BODY|HTML/.test(_.opt.win?_.opt.win[0].nodeName:this.doc[0].nodeName),this.haswrapper=!1!==_.opt.win,this.win=_.opt.win||(this.ispage?o(window):this.doc),this.docscroll=this.ispage&&!this.haswrapper?o(window):this.win,this.body=o("body"),this.viewport=!1,this.isfixed=!1,this.iframe=!1,this.isiframe="IFRAME"==this.doc[0].nodeName&&"IFRAME"==this.win[0].nodeName,this.istextarea="TEXTAREA"==this.win[0].nodeName,this.forcescreen=!1,this.canshowonmouseevent="scroll"!=_.opt.autohidemode,this.onmousedown=!1,this.onmouseup=!1,this.onmousemove=!1,this.onmousewheel=!1,this.onkeypress=!1,this.ongesturezoom=!1,this.onclick=!1,this.onscrollstart=!1,this.onscrollend=!1,this.onscrollcancel=!1,this.onzoomin=!1,this.onzoomout=!1,this.view=!1,this.page=!1,this.scroll={x:0,y:0},this.scrollratio={x:0,y:0},this.cursorheight=20,this.scrollvaluemax=0,"auto"==this.opt.rtlmode){var y=this.win[0]==window?this.body:this.win,w=y.css("writing-mode")||y.css("-webkit-writing-mode")||y.css("-ms-writing-mode")||y.css("-moz-writing-mode");"horizontal-tb"==w||"lr-tb"==w||""==w?(this.isrtlmode="rtl"==y.css("direction"),this.isvertical=!1):(this.isrtlmode="vertical-rl"==w||"tb"==w||"tb-rl"==w||"rl-tb"==w,this.isvertical="vertical-rl"==w||"tb"==w||"tb-rl"==w)}else this.isrtlmode=!0===this.opt.rtlmode,this.isvertical=!1;this.scrollrunning=!1,this.scrollmom=!1,this.observer=!1,this.observerremover=!1,this.observerbody=!1;do{this.id="ascrail"+s++}while(document.getElementById(this.id));this.rail=!1,this.cursor=!1,this.cursorfreezed=!1,this.selectiondrag=!1,this.zoom=!1,this.zoomactive=!1,this.hasfocus=!1,this.hasmousefocus=!1,this.visibility=!0,this.railslocked=!1,this.locked=!1,this.hidden=!1,this.cursoractive=!0,this.wheelprevented=!1,this.overflowx=_.opt.overflowx,this.overflowy=_.opt.overflowy,this.nativescrollingarea=!1,this.checkarea=0,this.events=[],this.saved={},this.delaylist={},this.synclist={},this.lastdeltax=0,this.lastdeltay=0,this.detected=m();var C=o.extend({},this.detected);this.canhwscroll=C.hastransform&&_.opt.hwacceleration,this.ishwscroll=this.canhwscroll&&_.haswrapper,this.isrtlmode?this.isvertical?this.hasreversehr=!(C.iswebkit||C.isie||C.isie11):this.hasreversehr=!(C.iswebkit||C.isie&&!C.isie10&&!C.isie11):this.hasreversehr=!1,this.istouchcapable=!1,C.cantouch||!C.hasw3ctouch&&!C.hasmstouch?!C.cantouch||C.isios||C.isandroid||!C.iswebkit&&!C.ismozilla||(this.istouchcapable=!0):this.istouchcapable=!0,_.opt.enablemouselockapi||(C.hasmousecapture=!1,C.haspointerlock=!1),this.debounced=function(e,t,i){_&&(_.delaylist[e]||!1||(t.call(_),_.delaylist[e]={h:l(function(){_.delaylist[e].fn.call(_),_.delaylist[e]=!1},i)}),_.delaylist[e].fn=t)};var x=!1;this.synched=function(e,t){return _.synclist[e]=t,x||(l(function(){if(_){x=!1;for(var e in _.synclist){var t=_.synclist[e];t&&t.call(_),_.synclist[e]=!1}}}),x=!0),e},this.unsynched=function(e){_.synclist[e]&&(_.synclist[e]=!1)},this.css=function(e,t){for(var i in t)_.saved.css.push([e,i,e.css(i)]),e.css(i,t[i])},this.scrollTop=function(e){return void 0===e?_.getScrollTop():_.setScrollTop(e)},this.scrollLeft=function(e){return void 0===e?_.getScrollLeft():_.setScrollLeft(e)};var k=function(e,t,i,n,s,a,o){this.st=e,this.ed=t,this.spd=i,this.p1=n||0,this.p2=s||1,this.p3=a||0,this.p4=o||1,this.ts=(new Date).getTime(),this.df=this.ed-this.st};if(k.prototype={B2:function(e){return 3*e*e*(1-e)},B3:function(e){return 3*e*(1-e)*(1-e)},B4:function(e){return(1-e)*(1-e)*(1-e)},getNow:function(){var e=1-((new Date).getTime()-this.ts)/this.spd,t=this.B2(e)+this.B3(e)+this.B4(e);return e<0?this.ed:this.st+Math.round(this.df*t)},update:function(e,t){return this.st=this.getNow(),this.ed=e,this.spd=t,this.ts=(new Date).getTime(),this.df=this.ed-this.st,this}},this.ishwscroll){this.doc.translate={x:0,y:0,tx:"0px",ty:"0px"},C.hastranslate3d&&C.isios&&this.doc.css("-webkit-backface-visibility","hidden"),this.getScrollTop=function(e){if(!e){var t=c();if(t)return 16==t.length?-t[13]:-t[5];if(_.timerscroll&&_.timerscroll.bz)return _.timerscroll.bz.getNow()}return _.doc.translate.y},this.getScrollLeft=function(e){if(!e){var t=c();if(t)return 16==t.length?-t[12]:-t[4];if(_.timerscroll&&_.timerscroll.bh)return _.timerscroll.bh.getNow()}return _.doc.translate.x},this.notifyScrollEvent=function(e){var t=document.createEvent("UIEvents");t.initUIEvent("scroll",!1,!0,window,1),t.niceevent=!0,e.dispatchEvent(t)};var T=this.isrtlmode?1:-1;C.hastranslate3d&&_.opt.enabletranslate3d?(this.setScrollTop=function(e,t){_.doc.translate.y=e,_.doc.translate.ty=-1*e+"px",_.doc.css(C.trstyle,"translate3d("+_.doc.translate.tx+","+_.doc.translate.ty+",0px)"),t||_.notifyScrollEvent(_.win[0])},this.setScrollLeft=function(e,t){_.doc.translate.x=e,_.doc.translate.tx=e*T+"px",_.doc.css(C.trstyle,"translate3d("+_.doc.translate.tx+","+_.doc.translate.ty+",0px)"),t||_.notifyScrollEvent(_.win[0])}):(this.setScrollTop=function(e,t){_.doc.translate.y=e,_.doc.translate.ty=-1*e+"px",_.doc.css(C.trstyle,"translate("+_.doc.translate.tx+","+_.doc.translate.ty+")"),t||_.notifyScrollEvent(_.win[0])},this.setScrollLeft=function(e,t){_.doc.translate.x=e,_.doc.translate.tx=e*T+"px",_.doc.css(C.trstyle,"translate("+_.doc.translate.tx+","+_.doc.translate.ty+")"),t||_.notifyScrollEvent(_.win[0])})}else this.getScrollTop=function(){return _.docscroll.scrollTop()},this.setScrollTop=function(e){return setTimeout(function(){_&&_.docscroll.scrollTop(e)},1)},this.getScrollLeft=function(){return _.hasreversehr?_.detected.ismozilla?_.page.maxw-Math.abs(_.docscroll.scrollLeft()):_.page.maxw-_.docscroll.scrollLeft():_.docscroll.scrollLeft()},this.setScrollLeft=function(e){return setTimeout(function(){if(_)return _.hasreversehr&&(e=_.detected.ismozilla?-(_.page.maxw-e):_.page.maxw-e),_.docscroll.scrollLeft(e)},1)};this.getTarget=function(e){return!!e&&(e.target?e.target:!!e.srcElement&&e.srcElement)},this.hasParent=function(e,t){if(!e)return!1;for(var i=e.target||e.srcElement||e||!1;i&&i.id!=t;)i=i.parentNode||!1;return!1!==i};var N={thin:1,medium:3,thick:5};this.getDocumentScrollOffset=function(){return{top:window.pageYOffset||document.documentElement.scrollTop,left:window.pageXOffset||document.documentElement.scrollLeft}},this.getOffset=function(){if(_.isfixed){var e=_.win.offset(),t=_.getDocumentScrollOffset();return e.top-=t.top,e.left-=t.left,e}var i=_.win.offset();if(!_.viewport)return i;var n=_.viewport.offset();return{top:i.top-n.top,left:i.left-n.left}},this.updateScrollBar=function(e){var t,i;if(_.ishwscroll)_.rail.css({height:_.win.innerHeight()-(_.opt.railpadding.top+_.opt.railpadding.bottom)}),_.railh&&_.railh.css({width:_.win.innerWidth()-(_.opt.railpadding.left+_.opt.railpadding.right)});else{var n=_.getOffset();if(t={top:n.top,left:n.left-(_.opt.railpadding.left+_.opt.railpadding.right)},t.top+=f(_.win,"border-top-width",!0),t.left+=_.rail.align?_.win.outerWidth()-f(_.win,"border-right-width")-_.rail.width:f(_.win,"border-left-width"),(i=_.opt.railoffset)&&(i.top&&(t.top+=i.top),i.left&&(t.left+=i.left)),_.railslocked||_.rail.css({top:t.top,left:t.left,height:(e?e.h:_.win.innerHeight())-(_.opt.railpadding.top+_.opt.railpadding.bottom)}),_.zoom&&_.zoom.css({top:t.top+1,left:1==_.rail.align?t.left-20:t.left+_.rail.width+4}),_.railh&&!_.railslocked){t={top:n.top,left:n.left},(i=_.opt.railhoffset)&&(i.top&&(t.top+=i.top),i.left&&(t.left+=i.left));var s=_.railh.align?t.top+f(_.win,"border-top-width",!0)+_.win.innerHeight()-_.railh.height:t.top+f(_.win,"border-top-width",!0),a=t.left+f(_.win,"border-left-width");_.railh.css({top:s-(_.opt.railpadding.top+_.opt.railpadding.bottom),left:a,width:_.railh.width})}}},this.doRailClick=function(e,t,i){var n,s,a,o;_.railslocked||(_.cancelEvent(e),t?(n=i?_.doScrollLeft:_.doScrollTop)(a=i?(e.pageX-_.railh.offset().left-_.cursorwidth/2)*_.scrollratio.x:(e.pageY-_.rail.offset().top-_.cursorheight/2)*_.scrollratio.y):(n=i?_.doScrollLeftBy:_.doScrollBy,a=i?_.scroll.x:_.scroll.y,o=i?e.pageX-_.railh.offset().left:e.pageY-_.rail.offset().top,s=i?_.view.w:_.view.h,n(a>=o?s:-s)))},_.hasanimationframe=l,_.hascancelanimationframe=d,_.hasanimationframe?_.hascancelanimationframe||(d=function(){_.cancelAnimationFrame=!0}):(l=function(e){return setTimeout(e,15-Math.floor(+new Date/1e3)%16)},d=clearTimeout),this.init=function(){if(_.saved.css=[],C.isie7mobile)return!0;if(C.isoperamini)return!0;C.isie10;C.hasmstouch&&_.css(_.ispage?o("html"):_.win,{_touchaction:"none"});var e=C.ismodernie||C.isie10?{"-ms-overflow-style":"none"}:{"overflow-y":"hidden"};if(_.zindex="auto",_.ispage||"auto"!=_.opt.zindex?_.zindex=_.opt.zindex:_.zindex=u()||"auto",!_.ispage&&"auto"!=_.zindex&&_.zindex>a&&(a=_.zindex),_.isie&&0==_.zindex&&"auto"==_.opt.zindex&&(_.zindex="auto"),!_.ispage||!C.cantouch&&!C.isieold&&!C.isie9mobile){var s=_.docscroll;_.ispage&&(s=_.haswrapper?_.win:_.doc),C.isie9mobile||_.css(s,e),_.ispage&&C.isie7&&("BODY"==_.doc[0].nodeName?_.css(o("html"),{"overflow-y":"hidden"}):"HTML"==_.doc[0].nodeName&&_.css(o("body"),e)),!C.isios||_.ispage||_.haswrapper||_.css(o("body"),{"-webkit-overflow-scrolling":"touch"});var r=o(document.createElement("div"));r.css({position:"relative",top:0,float:"right",width:_.opt.cursorwidth,height:0,"background-color":_.opt.cursorcolor,border:_.opt.cursorborder,"background-clip":"padding-box","-webkit-border-radius":_.opt.cursorborderradius,"-moz-border-radius":_.opt.cursorborderradius,"border-radius":_.opt.cursorborderradius}),r.hborder=parseFloat(r.outerHeight()-r.innerHeight()),r.addClass("nicescroll-cursors"),_.cursor=r;var l=o(document.createElement("div"));l.attr("id",_.id),l.addClass("nicescroll-rails nicescroll-rails-vr");var d,c,p=["left","right","top","bottom"];for(var f in p)c=p[f],(d=_.opt.railpadding[c])?l.css("padding-"+c,d+"px"):_.opt.railpadding[c]=0;l.append(r),l.width=Math.max(parseFloat(_.opt.cursorwidth),r.outerWidth()),l.css({width:l.width+"px",zIndex:_.zindex,background:_.opt.background,cursor:"default"}),l.visibility=!0,l.scrollable=!0,l.align="left"==_.opt.railalign?0:1,_.rail=l,_.rail.drag=!1;var m=!1;!_.opt.boxzoom||_.ispage||C.isieold||(m=document.createElement("div"),_.bind(m,"click",_.doZoom),_.bind(m,"mouseenter",function(){_.zoom.css("opacity",_.opt.cursoropacitymax)}),_.bind(m,"mouseleave",function(){_.zoom.css("opacity",_.opt.cursoropacitymin)}),_.zoom=o(m),_.zoom.css({cursor:"pointer",zIndex:_.zindex,backgroundImage:"url("+_.opt.scriptpath+"zoomico.png)",height:18,width:18,backgroundPosition:"0px 0px"}),_.opt.dblclickzoom&&_.bind(_.win,"dblclick",_.doZoom),C.cantouch&&_.opt.gesturezoom&&(_.ongesturezoom=function(e){return e.scale>1.5&&_.doZoomIn(e),e.scale<.8&&_.doZoomOut(e),_.cancelEvent(e)},_.bind(_.win,"gestureend",_.ongesturezoom))),_.railh=!1;var g;if(_.opt.horizrailenabled&&(_.css(s,{overflowX:"hidden"}),(r=o(document.createElement("div"))).css({position:"absolute",top:0,height:_.opt.cursorwidth,width:0,backgroundColor:_.opt.cursorcolor,border:_.opt.cursorborder,backgroundClip:"padding-box","-webkit-border-radius":_.opt.cursorborderradius,"-moz-border-radius":_.opt.cursorborderradius,"border-radius":_.opt.cursorborderradius}),C.isieold&&r.css("overflow","hidden"),r.wborder=parseFloat(r.outerWidth()-r.innerWidth()),r.addClass("nicescroll-cursors"),_.cursorh=r,(g=o(document.createElement("div"))).attr("id",_.id+"-hr"),g.addClass("nicescroll-rails nicescroll-rails-hr"),g.height=Math.max(parseFloat(_.opt.cursorwidth),r.outerHeight()),g.css({height:g.height+"px",zIndex:_.zindex,background:_.opt.background}),g.append(r),g.visibility=!0,g.scrollable=!0,g.align="top"==_.opt.railvalign?0:1,_.railh=g,_.railh.drag=!1),_.ispage)l.css({position:"fixed",top:0,height:"100%"}),l.align?l.css({right:0}):l.css({left:0}),_.body.append(l),_.railh&&(g.css({position:"fixed",left:0,width:"100%"}),g.align?g.css({bottom:0}):g.css({top:0}),_.body.append(g));else{if(_.ishwscroll){"static"==_.win.css("position")&&_.css(_.win,{position:"relative"});var b="HTML"==_.win[0].nodeName?_.body:_.win;o(b).scrollTop(0).scrollLeft(0),_.zoom&&(_.zoom.css({position:"absolute",top:1,right:0,"margin-right":l.width+4}),b.append(_.zoom)),l.css({position:"absolute",top:0}),l.align?l.css({right:0}):l.css({left:0}),b.append(l),g&&(g.css({position:"absolute",left:0,bottom:0}),g.align?g.css({bottom:0}):g.css({top:0}),b.append(g))}else{_.isfixed="fixed"==_.win.css("position");var $=_.isfixed?"fixed":"absolute";_.isfixed||(_.viewport=_.getViewport(_.win[0])),_.viewport&&(_.body=_.viewport,0==/fixed|absolute/.test(_.viewport.css("position"))&&_.css(_.viewport,{position:"relative"})),l.css({position:$}),_.zoom&&_.zoom.css({position:$}),_.updateScrollBar(),_.body.append(l),_.zoom&&_.body.append(_.zoom),_.railh&&(g.css({position:$}),_.body.append(g))}C.isios&&_.css(_.win,{"-webkit-tap-highlight-color":"rgba(0,0,0,0)","-webkit-touch-callout":"none"}),C.isie&&_.opt.disableoutline&&_.win.attr("hideFocus","true"),C.iswebkit&&_.opt.disableoutline&&_.win.css("outline","none")}if(!1===_.opt.autohidemode?(_.autohidedom=!1,_.rail.css({opacity:_.opt.cursoropacitymax}),_.railh&&_.railh.css({opacity:_.opt.cursoropacitymax})):!0===_.opt.autohidemode||"leave"===_.opt.autohidemode?(_.autohidedom=o().add(_.rail),C.isie8&&(_.autohidedom=_.autohidedom.add(_.cursor)),_.railh&&(_.autohidedom=_.autohidedom.add(_.railh)),_.railh&&C.isie8&&(_.autohidedom=_.autohidedom.add(_.cursorh))):"scroll"==_.opt.autohidemode?(_.autohidedom=o().add(_.rail),_.railh&&(_.autohidedom=_.autohidedom.add(_.railh))):"cursor"==_.opt.autohidemode?(_.autohidedom=o().add(_.cursor),_.railh&&(_.autohidedom=_.autohidedom.add(_.cursorh))):"hidden"==_.opt.autohidemode&&(_.autohidedom=!1,_.hide(),_.railslocked=!1),C.isie9mobile){_.scrollmom=new v(_),_.onmangotouch=function(){var e=_.getScrollTop(),t=_.getScrollLeft();if(e==_.scrollmom.lastscrolly&&t==_.scrollmom.lastscrollx)return!0;var i=e-_.mangotouch.sy,n=t-_.mangotouch.sx;if(0!=Math.round(Math.sqrt(Math.pow(n,2)+Math.pow(i,2)))){var s=i<0?-1:1,a=n<0?-1:1,o=+new Date;if(_.mangotouch.lazy&&clearTimeout(_.mangotouch.lazy),o-_.mangotouch.tm>80||_.mangotouch.dry!=s||_.mangotouch.drx!=a)_.scrollmom.stop(),_.scrollmom.reset(t,e),_.mangotouch.sy=e,_.mangotouch.ly=e,_.mangotouch.sx=t,_.mangotouch.lx=t,_.mangotouch.dry=s,_.mangotouch.drx=a,_.mangotouch.tm=o;else{_.scrollmom.stop(),_.scrollmom.update(_.mangotouch.sx-n,_.mangotouch.sy-i),_.mangotouch.tm=o;var r=Math.max(Math.abs(_.mangotouch.ly-e),Math.abs(_.mangotouch.lx-t));_.mangotouch.ly=e,_.mangotouch.lx=t,r>2&&(_.mangotouch.lazy=setTimeout(function(){_.mangotouch.lazy=!1,_.mangotouch.dry=0,_.mangotouch.drx=0,_.mangotouch.tm=0,_.scrollmom.doMomentum(30)},100))}}};var y=_.getScrollTop(),w=_.getScrollLeft();_.mangotouch={sy:y,ly:y,dry:0,sx:w,lx:w,drx:0,lazy:!1,tm:0},_.bind(_.docscroll,"scroll",_.onmangotouch)}else{if(C.cantouch||_.istouchcapable||_.opt.touchbehavior||C.hasmstouch){_.scrollmom=new v(_),_.ontouchstart=function(e){if(e.pointerType&&2!=e.pointerType&&"touch"!=e.pointerType)return!1;if(_.hasmoving=!1,!_.railslocked){var t;if(C.hasmstouch)for(t=!!e.target&&e.target;t;){var i=o(t).getNiceScroll();if(i.length>0&&i[0].me==_.me)break;if(i.length>0)return!1;if("DIV"==t.nodeName&&t.id==_.id)break;t=!!t.parentNode&&t.parentNode}if(_.cancelScroll(),(t=_.getTarget(e))&&/INPUT/i.test(t.nodeName)&&/range/i.test(t.type))return _.stopPropagation(e);if(!("clientX"in e)&&"changedTouches"in e&&(e.clientX=e.changedTouches[0].clientX,e.clientY=e.changedTouches[0].clientY),_.forcescreen){var n=e;(e={original:e.original?e.original:e}).clientX=n.screenX,e.clientY=n.screenY}if(_.rail.drag={x:e.clientX,y:e.clientY,sx:_.scroll.x,sy:_.scroll.y,st:_.getScrollTop(),sl:_.getScrollLeft(),pt:2,dl:!1},_.ispage||!_.opt.directionlockdeadzone)_.rail.drag.dl="f";else{var s={w:o(window).width(),h:o(window).height()},a={w:Math.max(document.body.scrollWidth,document.documentElement.scrollWidth),h:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)},r=Math.max(0,a.h-s.h),l=Math.max(0,a.w-s.w);!_.rail.scrollable&&_.railh.scrollable?_.rail.drag.ck=r>0&&"v":_.rail.scrollable&&!_.railh.scrollable?_.rail.drag.ck=l>0&&"h":_.rail.drag.ck=!1,_.rail.drag.ck||(_.rail.drag.dl="f")}if(_.opt.touchbehavior&&_.isiframe&&C.isie){var d=_.win.position();_.rail.drag.x+=d.left,_.rail.drag.y+=d.top}if(_.hasmoving=!1,_.lastmouseup=!1,_.scrollmom.reset(e.clientX,e.clientY),!C.cantouch&&!this.istouchcapable&&!e.pointerType){if(!(!!t&&/INPUT|SELECT|TEXTAREA/i.test(t.nodeName)))return!_.ispage&&C.hasmousecapture&&t.setCapture(),_.opt.touchbehavior?(t.onclick&&!t._onclick&&(t._onclick=t.onclick,t.onclick=function(e){if(_.hasmoving)return!1;t._onclick.call(this,e)}),_.cancelEvent(e)):_.stopPropagation(e);/SUBMIT|CANCEL|BUTTON/i.test(o(t).attr("type"))&&(pc={tg:t,click:!1},_.preventclick=pc)}}},_.ontouchend=function(e){if(!_.rail.drag)return!0;if(2==_.rail.drag.pt){if(e.pointerType&&2!=e.pointerType&&"touch"!=e.pointerType)return!1;if(_.scrollmom.doMomentum(),_.rail.drag=!1,_.hasmoving&&(_.lastmouseup=!0,_.hideCursor(),C.hasmousecapture&&document.releaseCapture(),!C.cantouch))return _.cancelEvent(e)}else if(1==_.rail.drag.pt)return _.onmouseup(e)};var x=_.opt.touchbehavior&&_.isiframe&&!C.hasmousecapture;_.ontouchmove=function(e,t){if(!_.rail.drag)return!1;if(e.targetTouches&&_.opt.preventmultitouchscrolling&&e.targetTouches.length>1)return!1;if(e.pointerType&&2!=e.pointerType&&"touch"!=e.pointerType)return!1;if(2==_.rail.drag.pt){if(C.cantouch&&C.isios&&void 0===e.original)return!0;if(_.hasmoving=!0,_.preventclick&&!_.preventclick.click&&(_.preventclick.click=_.preventclick.tg.onclick||!1,_.preventclick.tg.onclick=_.onpreventclick),"changedTouches"in(e=o.extend({original:e},e))&&(e.clientX=e.changedTouches[0].clientX,e.clientY=e.changedTouches[0].clientY),_.forcescreen){var i=e;(e={original:e.original?e.original:e}).clientX=i.screenX,e.clientY=i.screenY}var n,s;if(s=n=0,x&&!t){var a=_.win.position();s=-a.left,n=-a.top}var r=e.clientY+n,l=r-_.rail.drag.y,d=e.clientX+s,c=d-_.rail.drag.x,u=_.rail.drag.st-l;_.ishwscroll&&_.opt.bouncescroll?u<0?u=Math.round(u/2):u>_.page.maxh&&(u=_.page.maxh+Math.round((u-_.page.maxh)/2)):(u<0&&(u=0,r=0),u>_.page.maxh&&(u=_.page.maxh,r=0));var h;_.railh&&_.railh.scrollable&&(h=_.isrtlmode?c-_.rail.drag.sl:_.rail.drag.sl-c,_.ishwscroll&&_.opt.bouncescroll?h<0?h=Math.round(h/2):h>_.page.maxw&&(h=_.page.maxw+Math.round((h-_.page.maxw)/2)):(h<0&&(h=0,d=0),h>_.page.maxw&&(h=_.page.maxw,d=0)));var p=!1;if(_.rail.drag.dl)p=!0,"v"==_.rail.drag.dl?h=_.rail.drag.sl:"h"==_.rail.drag.dl&&(u=_.rail.drag.st);else{var f=Math.abs(l),m=Math.abs(c),g=_.opt.directionlockdeadzone;if("v"==_.rail.drag.ck){if(f>g&&m<=.3*f)return _.rail.drag=!1,!0;m>g&&(_.rail.drag.dl="f",o("body").scrollTop(o("body").scrollTop()))}else if("h"==_.rail.drag.ck){if(m>g&&f<=.3*m)return _.rail.drag=!1,!0;f>g&&(_.rail.drag.dl="f",o("body").scrollLeft(o("body").scrollLeft()))}}if(_.synched("touchmove",function(){_.rail.drag&&2==_.rail.drag.pt&&(_.prepareTransition&&_.prepareTransition(0),_.rail.scrollable&&_.setScrollTop(u),_.scrollmom.update(d,r),_.railh&&_.railh.scrollable?(_.setScrollLeft(h),_.showCursor(u,h)):_.showCursor(u),C.isie10&&document.selection.clear())}),C.ischrome&&_.istouchcapable&&(p=!1),p)return _.cancelEvent(e)}else if(1==_.rail.drag.pt)return _.onmousemove(e)}}if(_.onmousedown=function(e,t){if(!_.rail.drag||1==_.rail.drag.pt){if(_.railslocked)return _.cancelEvent(e);_.cancelScroll(),_.rail.drag={x:e.clientX,y:e.clientY,sx:_.scroll.x,sy:_.scroll.y,pt:1,hr:!!t};var i=_.getTarget(e);return!_.ispage&&C.hasmousecapture&&i.setCapture(),_.isiframe&&!C.hasmousecapture&&(_.saved.csspointerevents=_.doc.css("pointer-events"),_.css(_.doc,{"pointer-events":"none"})),_.hasmoving=!1,_.cancelEvent(e)}},_.onmouseup=function(e){if(_.rail.drag)return 1!=_.rail.drag.pt||(C.hasmousecapture&&document.releaseCapture(),_.isiframe&&!C.hasmousecapture&&_.doc.css("pointer-events",_.saved.csspointerevents),_.rail.drag=!1,_.hasmoving&&_.triggerScrollEnd(),_.cancelEvent(e))},_.onmousemove=function(e){if(_.rail.drag){if(1!=_.rail.drag.pt)return;if(C.ischrome&&0==e.which)return _.onmouseup(e);if(_.cursorfreezed=!0,_.hasmoving=!0,_.rail.drag.hr){_.scroll.x=_.rail.drag.sx+(e.clientX-_.rail.drag.x),_.scroll.x<0&&(_.scroll.x=0);var t=_.scrollvaluemaxw;_.scroll.x>t&&(_.scroll.x=t)}else{_.scroll.y=_.rail.drag.sy+(e.clientY-_.rail.drag.y),_.scroll.y<0&&(_.scroll.y=0);var i=_.scrollvaluemax;_.scroll.y>i&&(_.scroll.y=i)}return _.synched("mousemove",function(){_.rail.drag&&1==_.rail.drag.pt&&(_.showCursor(),_.rail.drag.hr?_.hasreversehr?_.doScrollLeft(_.scrollvaluemaxw-Math.round(_.scroll.x*_.scrollratio.x),_.opt.cursordragspeed):_.doScrollLeft(Math.round(_.scroll.x*_.scrollratio.x),_.opt.cursordragspeed):_.doScrollTop(Math.round(_.scroll.y*_.scrollratio.y),_.opt.cursordragspeed))}),_.cancelEvent(e)}_.checkarea=0},C.cantouch||_.opt.touchbehavior)_.onpreventclick=function(e){if(_.preventclick)return _.preventclick.tg.onclick=_.preventclick.click,_.preventclick=!1,_.cancelEvent(e)},_.bind(_.win,"mousedown",_.ontouchstart),_.onclick=!C.isios&&function(e){return!_.lastmouseup||(_.lastmouseup=!1,_.cancelEvent(e))},_.opt.grabcursorenabled&&C.cursorgrabvalue&&(_.css(_.ispage?_.doc:_.win,{cursor:C.cursorgrabvalue}),_.css(_.rail,{cursor:C.cursorgrabvalue}));else{var k=function(e){if(_.selectiondrag){if(e){var t=_.win.outerHeight(),i=e.pageY-_.selectiondrag.top;i>0&&i<t&&(i=0),i>=t&&(i-=t),_.selectiondrag.df=i}if(0!=_.selectiondrag.df){var n=2*-Math.floor(_.selectiondrag.df/6);_.doScrollBy(n),_.debounced("doselectionscroll",function(){k()},50)}}};"getSelection"in document?_.hasTextSelected=function(){return document.getSelection().rangeCount>0}:"selection"in document?_.hasTextSelected=function(){return"None"!=document.selection.type}:_.hasTextSelected=function(){return!1},_.onselectionstart=function(e){_.ispage||(_.selectiondrag=_.win.offset())},_.onselectionend=function(e){_.selectiondrag=!1},_.onselectiondrag=function(e){_.selectiondrag&&_.hasTextSelected()&&_.debounced("selectionscroll",function(){k(e)},250)}}C.hasw3ctouch?(_.css(_.rail,{"touch-action":"none"}),_.css(_.cursor,{"touch-action":"none"}),_.bind(_.win,"pointerdown",_.ontouchstart),_.bind(document,"pointerup",_.ontouchend),_.bind(document,"pointermove",_.ontouchmove)):C.hasmstouch?(_.css(_.rail,{"-ms-touch-action":"none"}),_.css(_.cursor,{"-ms-touch-action":"none"}),_.bind(_.win,"MSPointerDown",_.ontouchstart),_.bind(document,"MSPointerUp",_.ontouchend),_.bind(document,"MSPointerMove",_.ontouchmove),_.bind(_.cursor,"MSGestureHold",function(e){e.preventDefault()}),_.bind(_.cursor,"contextmenu",function(e){e.preventDefault()})):this.istouchcapable&&(_.bind(_.win,"touchstart",_.ontouchstart),_.bind(document,"touchend",_.ontouchend),_.bind(document,"touchcancel",_.ontouchend),_.bind(document,"touchmove",_.ontouchmove)),(_.opt.cursordragontouch||!C.cantouch&&!_.opt.touchbehavior)&&(_.rail.css({cursor:"default"}),_.railh&&_.railh.css({cursor:"default"}),_.jqbind(_.rail,"mouseenter",function(){if(!_.ispage&&!_.win.is(":visible"))return!1;_.canshowonmouseevent&&_.showCursor(),_.rail.active=!0}),_.jqbind(_.rail,"mouseleave",function(){_.rail.active=!1,_.rail.drag||_.hideCursor()}),_.opt.sensitiverail&&(_.bind(_.rail,"click",function(e){_.doRailClick(e,!1,!1)}),_.bind(_.rail,"dblclick",function(e){_.doRailClick(e,!0,!1)}),_.bind(_.cursor,"click",function(e){_.cancelEvent(e)}),_.bind(_.cursor,"dblclick",function(e){_.cancelEvent(e)})),_.railh&&(_.jqbind(_.railh,"mouseenter",function(){if(!_.ispage&&!_.win.is(":visible"))return!1;_.canshowonmouseevent&&_.showCursor(),_.rail.active=!0}),_.jqbind(_.railh,"mouseleave",function(){_.rail.active=!1,_.rail.drag||_.hideCursor()}),_.opt.sensitiverail&&(_.bind(_.railh,"click",function(e){_.doRailClick(e,!1,!0)}),_.bind(_.railh,"dblclick",function(e){_.doRailClick(e,!0,!0)}),_.bind(_.cursorh,"click",function(e){_.cancelEvent(e)}),_.bind(_.cursorh,"dblclick",function(e){_.cancelEvent(e)})))),C.cantouch||_.opt.touchbehavior?(_.bind(C.hasmousecapture?_.win:document,"mouseup",_.ontouchend),_.bind(document,"mousemove",_.ontouchmove),_.onclick&&_.bind(document,"click",_.onclick),_.opt.cursordragontouch?(_.bind(_.cursor,"mousedown",_.onmousedown),_.bind(_.cursor,"mouseup",_.onmouseup),_.cursorh&&_.bind(_.cursorh,"mousedown",function(e){_.onmousedown(e,!0)}),_.cursorh&&_.bind(_.cursorh,"mouseup",_.onmouseup)):(_.bind(_.rail,"mousedown",function(e){e.preventDefault()}),_.railh&&_.bind(_.railh,"mousedown",function(e){e.preventDefault()}))):(_.bind(C.hasmousecapture?_.win:document,"mouseup",_.onmouseup),_.bind(document,"mousemove",_.onmousemove),_.onclick&&_.bind(document,"click",_.onclick),_.bind(_.cursor,"mousedown",_.onmousedown),_.bind(_.cursor,"mouseup",_.onmouseup),_.railh&&(_.bind(_.cursorh,"mousedown",function(e){_.onmousedown(e,!0)}),_.bind(_.cursorh,"mouseup",_.onmouseup)),!_.ispage&&_.opt.enablescrollonselection&&(_.bind(_.win[0],"mousedown",_.onselectionstart),_.bind(document,"mouseup",_.onselectionend),_.bind(_.cursor,"mouseup",_.onselectionend),_.cursorh&&_.bind(_.cursorh,"mouseup",_.onselectionend),_.bind(document,"mousemove",_.onselectiondrag)),_.zoom&&(_.jqbind(_.zoom,"mouseenter",function(){_.canshowonmouseevent&&_.showCursor(),_.rail.active=!0}),_.jqbind(_.zoom,"mouseleave",function(){_.rail.active=!1,_.rail.drag||_.hideCursor()}))),_.opt.enablemousewheel&&(_.isiframe||_.mousewheel(C.isie&&_.ispage?document:_.win,_.onmousewheel),_.mousewheel(_.rail,_.onmousewheel),_.railh&&_.mousewheel(_.railh,_.onmousewheelhr)),_.ispage||C.cantouch||/HTML|^BODY/.test(_.win[0].nodeName)||(_.win.attr("tabindex")||_.win.attr({tabindex:n++}),_.jqbind(_.win,"focus",function(e){t=_.getTarget(e).id||!0,_.hasfocus=!0,_.canshowonmouseevent&&_.noticeCursor()}),_.jqbind(_.win,"blur",function(e){t=!1,_.hasfocus=!1}),_.jqbind(_.win,"mouseenter",function(e){i=_.getTarget(e).id||!0,_.hasmousefocus=!0,_.canshowonmouseevent&&_.noticeCursor()}),_.jqbind(_.win,"mouseleave",function(){i=!1,_.hasmousefocus=!1,_.rail.drag||_.hideCursor()}))}if(_.onkeypress=function(e){if(_.railslocked&&0==_.page.maxh)return!0;e=e||window.e;var n=_.getTarget(e);if(n&&/INPUT|TEXTAREA|SELECT|OPTION/.test(n.nodeName)&&(!(n.getAttribute("type")||n.type||!1)||!/submit|button|cancel/i.tp))return!0;if(o(n).attr("contenteditable"))return!0;if(_.hasfocus||_.hasmousefocus&&!t||_.ispage&&!t&&!i){var s=e.keyCode;if(_.railslocked&&27!=s)return _.cancelEvent(e);var a=e.ctrlKey||!1,r=e.shiftKey||!1,l=!1;switch(s){case 38:case 63233:_.doScrollBy(72),l=!0;break;case 40:case 63235:_.doScrollBy(-72),l=!0;break;case 37:case 63232:_.railh&&(a?_.doScrollLeft(0):_.doScrollLeftBy(72),l=!0);break;case 39:case 63234:_.railh&&(a?_.doScrollLeft(_.page.maxw):_.doScrollLeftBy(-72),l=!0);break;case 33:case 63276:_.doScrollBy(_.view.h),l=!0;break;case 34:case 63277:_.doScrollBy(-_.view.h),l=!0;break;case 36:case 63273:_.railh&&a?_.doScrollPos(0,0):_.doScrollTo(0),l=!0;break;case 35:case 63275:_.railh&&a?_.doScrollPos(_.page.maxw,_.page.maxh):_.doScrollTo(_.page.maxh),l=!0;break;case 32:_.opt.spacebarenabled&&(r?_.doScrollBy(_.view.h):_.doScrollBy(-_.view.h),l=!0);break;case 27:_.zoomactive&&(_.doZoom(),l=!0)}if(l)return _.cancelEvent(e)}},_.opt.enablekeyboard&&_.bind(document,C.isopera&&!C.isopera12?"keypress":"keydown",_.onkeypress),_.bind(document,"keydown",function(e){(e.ctrlKey||!1)&&(_.wheelprevented=!0)}),_.bind(document,"keyup",function(e){e.ctrlKey||!1||(_.wheelprevented=!1)}),_.bind(window,"blur",function(e){_.wheelprevented=!1}),_.bind(window,"resize",_.lazyResize),_.bind(window,"orientationchange",_.lazyResize),_.bind(window,"load",_.lazyResize),C.ischrome&&!_.ispage&&!_.haswrapper){var T=_.win.attr("style"),N=parseFloat(_.win.css("width"))+1;_.win.css("width",N),_.synched("chromefix",function(){_.win.attr("style",T)})}_.onAttributeChange=function(e){_.lazyResize(_.isieold?250:30)},_.isie11||!1===h||(_.observerbody=new h(function(e){if(e.forEach(function(e){if("attributes"==e.type)return o("body").hasClass("modal-open")&&o("body").hasClass("modal-dialog")&&!o.contains(o(".modal-dialog")[0],_.doc[0])?_.hide():_.show()}),document.body.scrollHeight!=_.page.maxh)return _.lazyResize(30)}),_.observerbody.observe(document.body,{childList:!0,subtree:!0,characterData:!1,attributes:!0,attributeFilter:["class"]})),_.ispage||_.haswrapper||(!1!==h?(_.observer=new h(function(e){e.forEach(_.onAttributeChange)}),_.observer.observe(_.win[0],{childList:!0,characterData:!1,attributes:!0,subtree:!1}),_.observerremover=new h(function(e){e.forEach(function(e){if(e.removedNodes.length>0)for(var t in e.removedNodes)if(_&&e.removedNodes[t]==_.win[0])return _.remove()})}),_.observerremover.observe(_.win[0].parentNode,{childList:!0,characterData:!1,attributes:!1,subtree:!1})):(_.bind(_.win,C.isie&&!C.isie9?"propertychange":"DOMAttrModified",_.onAttributeChange),C.isie9&&_.win[0].attachEvent("onpropertychange",_.onAttributeChange),_.bind(_.win,"DOMNodeRemoved",function(e){e.target==_.win[0]&&_.remove()}))),!_.ispage&&_.opt.boxzoom&&_.bind(window,"resize",_.resizeZoom),_.istextarea&&(_.bind(_.win,"keydown",_.lazyResize),_.bind(_.win,"mouseup",_.lazyResize)),_.lazyResize(30)}if("IFRAME"==this.doc[0].nodeName){var S=function(){_.iframexd=!1;var t;try{(t="contentDocument"in this?this.contentDocument:this.contentWindow.document).domain}catch(e){_.iframexd=!0,t=!1}if(_.iframexd)return"console"in window&&console.log("NiceScroll error: policy restriced iframe"),!0;if(_.forcescreen=!0,_.isiframe&&(_.iframe={doc:o(t),html:_.doc.contents().find("html")[0],body:_.doc.contents().find("body")[0]},_.getContentSize=function(){return{w:Math.max(_.iframe.html.scrollWidth,_.iframe.body.scrollWidth),h:Math.max(_.iframe.html.scrollHeight,_.iframe.body.scrollHeight)}},_.docscroll=o(_.iframe.body)),!C.isios&&_.opt.iframeautoresize&&!_.isiframe){_.win.scrollTop(0),_.doc.height("");var i=Math.max(t.getElementsByTagName("html")[0].scrollHeight,t.body.scrollHeight);_.doc.height(i)}_.lazyResize(30),C.isie7&&_.css(o(_.iframe.html),e),_.css(o(_.iframe.body),e),C.isios&&_.haswrapper&&_.css(o(t.body),{"-webkit-transform":"translate3d(0,0,0)"}),"contentWindow"in this?_.bind(this.contentWindow,"scroll",_.onscroll):_.bind(t,"scroll",_.onscroll),_.opt.enablemousewheel&&_.mousewheel(t,_.onmousewheel),_.opt.enablekeyboard&&_.bind(t,C.isopera?"keypress":"keydown",_.onkeypress),(C.cantouch||_.opt.touchbehavior)&&(_.bind(t,"mousedown",_.ontouchstart),_.bind(t,"mousemove",function(e){return _.ontouchmove(e,!0)}),_.opt.grabcursorenabled&&C.cursorgrabvalue&&_.css(o(t.body),{cursor:C.cursorgrabvalue})),_.bind(t,"mouseup",_.ontouchend),_.zoom&&(_.opt.dblclickzoom&&_.bind(t,"dblclick",_.doZoom),_.ongesturezoom&&_.bind(t,"gestureend",_.ongesturezoom))};this.doc[0].readyState&&"complete"==this.doc[0].readyState&&setTimeout(function(){S.call(_.doc[0],!1)},500),_.bind(this.doc,"load",S)}},this.showCursor=function(e,t){if(_.cursortimeout&&(clearTimeout(_.cursortimeout),_.cursortimeout=0),_.rail){if(_.autohidedom&&(_.autohidedom.stop().css({opacity:_.opt.cursoropacitymax}),_.cursoractive=!0),_.rail.drag&&1==_.rail.drag.pt||(void 0!==e&&!1!==e&&(_.scroll.y=Math.round(1*e/_.scrollratio.y)),void 0!==t&&(_.scroll.x=Math.round(1*t/_.scrollratio.x))),_.cursor.css({height:_.cursorheight,top:_.scroll.y}),_.cursorh){var i=_.hasreversehr?_.scrollvaluemaxw-_.scroll.x:_.scroll.x;!_.rail.align&&_.rail.visibility?_.cursorh.css({width:_.cursorwidth,left:i+_.rail.width}):_.cursorh.css({width:_.cursorwidth,left:i}),_.cursoractive=!0}_.zoom&&_.zoom.stop().css({opacity:_.opt.cursoropacitymax})}},this.hideCursor=function(e){_.cursortimeout||_.rail&&_.autohidedom&&(_.hasmousefocus&&"leave"==_.opt.autohidemode||(_.cursortimeout=setTimeout(function(){_.rail.active&&_.showonmouseevent||(_.autohidedom.stop().animate({opacity:_.opt.cursoropacitymin}),_.zoom&&_.zoom.stop().animate({opacity:_.opt.cursoropacitymin}),_.cursoractive=!1),_.cursortimeout=0},e||_.opt.hidecursordelay)))},this.noticeCursor=function(e,t,i){_.showCursor(t,i),_.rail.active||_.hideCursor(e)},this.getContentSize=_.ispage?function(){return{w:Math.max(document.body.scrollWidth,document.documentElement.scrollWidth),h:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)}}:_.haswrapper?function(){return{w:_.doc.outerWidth()+parseInt(_.win.css("paddingLeft"))+parseInt(_.win.css("paddingRight")),h:_.doc.outerHeight()+parseInt(_.win.css("paddingTop"))+parseInt(_.win.css("paddingBottom"))}}:function(){return{w:_.docscroll[0].scrollWidth,h:_.docscroll[0].scrollHeight}},this.onResize=function(e,t){if(!_||!_.win)return!1;if(!_.haswrapper&&!_.ispage){if("none"==_.win.css("display"))return _.visibility&&_.hideRail().hideRailHr(),!1;_.hidden||_.visibility||_.showRail().showRailHr()}var i=_.page.maxh,n=_.page.maxw,s={h:_.view.h,w:_.view.w};if(_.view={w:_.ispage?_.win.width():parseInt(_.win[0].clientWidth),h:_.ispage?_.win.height():parseInt(_.win[0].clientHeight)},_.page=t||_.getContentSize(),_.page.maxh=Math.max(0,_.page.h-_.view.h),_.page.maxw=Math.max(0,_.page.w-_.view.w),_.page.maxh==i&&_.page.maxw==n&&_.view.w==s.w&&_.view.h==s.h){if(_.ispage)return _;var a=_.win.offset();if(_.lastposition){var o=_.lastposition;if(o.top==a.top&&o.left==a.left)return _}_.lastposition=a}return 0==_.page.maxh?(_.hideRail(),_.scrollvaluemax=0,_.scroll.y=0,_.scrollratio.y=0,_.cursorheight=0,_.setScrollTop(0),_.rail&&(_.rail.scrollable=!1)):(_.page.maxh-=_.opt.railpadding.top+_.opt.railpadding.bottom,_.rail.scrollable=!0),0==_.page.maxw?(_.hideRailHr(),_.scrollvaluemaxw=0,_.scroll.x=0,_.scrollratio.x=0,_.cursorwidth=0,_.setScrollLeft(0),_.railh&&(_.railh.scrollable=!1)):(_.page.maxw-=_.opt.railpadding.left+_.opt.railpadding.right,_.railh&&(_.railh.scrollable=_.opt.horizrailenabled)),_.railslocked=_.locked||0==_.page.maxh&&0==_.page.maxw,_.railslocked?(_.ispage||_.updateScrollBar(_.view),!1):(_.hidden||_.visibility?!_.railh||_.hidden||_.railh.visibility||_.showRailHr():_.showRail().showRailHr(),_.istextarea&&_.win.css("resize")&&"none"!=_.win.css("resize")&&(_.view.h-=20),_.cursorheight=Math.min(_.view.h,Math.round(_.view.h*(_.view.h/_.page.h))),_.cursorheight=_.opt.cursorfixedheight?_.opt.cursorfixedheight:Math.max(_.opt.cursorminheight,_.cursorheight),_.cursorwidth=Math.min(_.view.w,Math.round(_.view.w*(_.view.w/_.page.w))),_.cursorwidth=_.opt.cursorfixedheight?_.opt.cursorfixedheight:Math.max(_.opt.cursorminheight,_.cursorwidth),_.scrollvaluemax=_.view.h-_.cursorheight-_.cursor.hborder-(_.opt.railpadding.top+_.opt.railpadding.bottom),_.railh&&(_.railh.width=_.page.maxh>0?_.view.w-_.rail.width:_.view.w,_.scrollvaluemaxw=_.railh.width-_.cursorwidth-_.cursorh.wborder-(_.opt.railpadding.left+_.opt.railpadding.right)),_.ispage||_.updateScrollBar(_.view),_.scrollratio={x:_.page.maxw/_.scrollvaluemaxw,y:_.page.maxh/_.scrollvaluemax},_.getScrollTop()>_.page.maxh?_.doScrollTop(_.page.maxh):(_.scroll.y=Math.round(_.getScrollTop()*(1/_.scrollratio.y)),_.scroll.x=Math.round(_.getScrollLeft()*(1/_.scrollratio.x)),_.cursoractive&&_.noticeCursor()),_.scroll.y&&0==_.getScrollTop()&&_.doScrollTo(Math.floor(_.scroll.y*_.scrollratio.y)),_)},this.resize=_.onResize,this.hlazyresize=0,this.lazyResize=function(e){return _.haswrapper||_.hide(),_.hlazyresize&&clearTimeout(_.hlazyresize),_.hlazyresize=setTimeout(function(){_&&_.show().resize()},240),_},this.jqbind=function(e,t,i){_.events.push({e:e,n:t,f:i,q:!0}),o(e).bind(t,i)},this.mousewheel=function(e,t,i){var n="jquery"in e?e[0]:e;if("onwheel"in document.createElement("div"))_._bind(n,"wheel",t,i||!1);else{var s=void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll";g(n,s,t,i||!1),"DOMMouseScroll"==s&&g(n,"MozMousePixelScroll",t,i||!1)}},C.haseventlistener?(this.bind=function(e,t,i,n){var s="jquery"in e?e[0]:e;_._bind(s,t,i,n||!1)},this._bind=function(e,t,i,n){_.events.push({e:e,n:t,f:i,b:n,q:!1}),e.addEventListener(t,i,n||!1)},this.cancelEvent=function(e){return!!e&&((e=e.original?e.original:e).cancelable&&e.preventDefault(),e.stopPropagation(),e.preventManipulation&&e.preventManipulation(),!1)},this.stopPropagation=function(e){return!!e&&((e=e.original?e.original:e).stopPropagation(),!1)},this._unbind=function(e,t,i,n){e.removeEventListener(t,i,n)}):(this.bind=function(e,t,i,n){var s="jquery"in e?e[0]:e;_._bind(s,t,function(e){return(e=e||window.event||!1)&&e.srcElement&&(e.target=e.srcElement),"pageY"in e||(e.pageX=e.clientX+document.documentElement.scrollLeft,e.pageY=e.clientY+document.documentElement.scrollTop),!1!==i.call(s,e)&&!1!==n||_.cancelEvent(e)})},this._bind=function(e,t,i,n){_.events.push({e:e,n:t,f:i,b:n,q:!1}),e.attachEvent?e.attachEvent("on"+t,i):e["on"+t]=i},this.cancelEvent=function(e){return!!(e=window.event||!1)&&(e.cancelBubble=!0,e.cancel=!0,e.returnValue=!1,!1)},this.stopPropagation=function(e){return!!(e=window.event||!1)&&(e.cancelBubble=!0,!1)},this._unbind=function(e,t,i,n){e.detachEvent?e.detachEvent("on"+t,i):e["on"+t]=!1}),this.unbindAll=function(){for(var e=0;e<_.events.length;e++){var t=_.events[e];t.q?t.e.unbind(t.n,t.f):_._unbind(t.e,t.n,t.f,t.b)}},this.showRail=function(){return 0==_.page.maxh||!_.ispage&&"none"==_.win.css("display")||(_.visibility=!0,_.rail.visibility=!0,_.rail.css("display","block")),_},this.showRailHr=function(){return _.railh?(0==_.page.maxw||!_.ispage&&"none"==_.win.css("display")||(_.railh.visibility=!0,_.railh.css("display","block")),_):_},this.hideRail=function(){return _.visibility=!1,_.rail.visibility=!1,_.rail.css("display","none"),_},this.hideRailHr=function(){return _.railh?(_.railh.visibility=!1,_.railh.css("display","none"),_):_},this.show=function(){return _.hidden=!1,_.railslocked=!1,_.showRail().showRailHr()},this.hide=function(){return _.hidden=!0,_.railslocked=!0,_.hideRail().hideRailHr()},this.toggle=function(){return _.hidden?_.show():_.hide()},this.remove=function(){_.stop(),_.cursortimeout&&clearTimeout(_.cursortimeout);for(var e in _.delaylist)_.delaylist[e]&&d(_.delaylist[e].h);_.doZoomOut(),_.unbindAll(),C.isie9&&_.win[0].detachEvent("onpropertychange",_.onAttributeChange),!1!==_.observer&&_.observer.disconnect(),!1!==_.observerremover&&_.observerremover.disconnect(),!1!==_.observerbody&&_.observerbody.disconnect(),_.events=null,_.cursor&&_.cursor.remove(),_.cursorh&&_.cursorh.remove(),_.rail&&_.rail.remove(),_.railh&&_.railh.remove(),_.zoom&&_.zoom.remove();for(var t=0;t<_.saved.css.length;t++){var i=_.saved.css[t];i[0].css(i[1],void 0===i[2]?"":i[2])}_.saved=!1,_.me.data("__nicescroll","");var n=o.nicescroll;n.each(function(e){if(this&&this.id===_.id){delete n[e];for(var t=++e;t<n.length;t++,e++)n[e]=n[t];n.length--,n.length&&delete n[n.length]}});for(var s in _)_[s]=null,delete _[s];_=null},this.scrollstart=function(e){return this.onscrollstart=e,_},this.scrollend=function(e){return this.onscrollend=e,_},this.scrollcancel=function(e){return this.onscrollcancel=e,_},this.zoomin=function(e){return this.onzoomin=e,_},this.zoomout=function(e){return this.onzoomout=e,_},this.isScrollable=function(e){var t=e.target?e.target:e;if("OPTION"==t.nodeName)return!0;for(;t&&1==t.nodeType&&!/^BODY|HTML/.test(t.nodeName);){var i=o(t),n=i.css("overflowY")||i.css("overflowX")||i.css("overflow")||"";if(/scroll|auto/.test(n))return t.clientHeight!=t.scrollHeight;t=!!t.parentNode&&t.parentNode}return!1},this.getViewport=function(e){for(var t=!(!e||!e.parentNode)&&e.parentNode;t&&1==t.nodeType&&!/^BODY|HTML/.test(t.nodeName);){var i=o(t);if(/fixed|absolute/.test(i.css("position")))return i;var n=i.css("overflowY")||i.css("overflowX")||i.css("overflow")||"";if(/scroll|auto/.test(n)&&t.clientHeight!=t.scrollHeight)return i;if(i.getNiceScroll().length>0)return i;t=!!t.parentNode&&t.parentNode}return!1},this.triggerScrollEnd=function(){if(_.onscrollend){var e=_.getScrollLeft(),t=_.getScrollTop(),i={type:"scrollend",current:{x:e,y:t},end:{x:e,y:t}};_.onscrollend.call(_,i)}},this.onmousewheel=function(e){if(!_.wheelprevented){if(_.railslocked)return _.debounced("checkunlock",_.resize,250),!0;if(_.rail.drag)return _.cancelEvent(e);if("auto"==_.opt.oneaxismousemode&&0!=e.deltaX&&(_.opt.oneaxismousemode=!1),_.opt.oneaxismousemode&&0==e.deltaX&&!_.rail.scrollable)return!_.railh||!_.railh.scrollable||_.onmousewheelhr(e);var t=+new Date,i=!1;if(_.opt.preservenativescrolling&&_.checkarea+600<t&&(_.nativescrollingarea=_.isScrollable(e),i=!0),_.checkarea=t,_.nativescrollingarea)return!0;var n=b(e,!1,i);return n&&(_.checkarea=0),n}},this.onmousewheelhr=function(e){if(!_.wheelprevented){if(_.railslocked||!_.railh.scrollable)return!0;if(_.rail.drag)return _.cancelEvent(e);var t=+new Date,i=!1;return _.opt.preservenativescrolling&&_.checkarea+600<t&&(_.nativescrollingarea=_.isScrollable(e),i=!0),_.checkarea=t,!!_.nativescrollingarea||(_.railslocked?_.cancelEvent(e):b(e,!0,i))}},this.stop=function(){return _.cancelScroll(),_.scrollmon&&_.scrollmon.stop(),_.cursorfreezed=!1,_.scroll.y=Math.round(_.getScrollTop()*(1/_.scrollratio.y)),_.noticeCursor(),_},this.getTransitionSpeed=function(e){var t=Math.round(10*_.opt.scrollspeed),i=Math.min(t,Math.round(e/20*_.opt.scrollspeed));return i>20?i:0},_.opt.smoothscroll?_.ishwscroll&&C.hastransition&&_.opt.usetransition&&_.opt.smoothscroll?(this.prepareTransition=function(e,t){var i=t?e>20?e:0:_.getTransitionSpeed(e),n=i?C.prefixstyle+"transform "+i+"ms ease-out":"";return _.lasttransitionstyle&&_.lasttransitionstyle==n||(_.lasttransitionstyle=n,_.doc.css(C.transitionstyle,n)),i},this.doScrollLeft=function(e,t){var i=_.scrollrunning?_.newscrolly:_.getScrollTop();_.doScrollPos(e,i,t)},this.doScrollTop=function(e,t){var i=_.scrollrunning?_.newscrollx:_.getScrollLeft();_.doScrollPos(i,e,t)},this.doScrollPos=function(e,t,i){var n=_.getScrollTop(),s=_.getScrollLeft();return((_.newscrolly-n)*(t-n)<0||(_.newscrollx-s)*(e-s)<0)&&_.cancelScroll(),0==_.opt.bouncescroll&&(t<0?t=0:t>_.page.maxh&&(t=_.page.maxh),e<0?e=0:e>_.page.maxw&&(e=_.page.maxw)),(!_.scrollrunning||e!=_.newscrollx||t!=_.newscrolly)&&(_.newscrolly=t,_.newscrollx=e,_.newscrollspeed=i||!1,!_.timer&&void(_.timer=setTimeout(function(){var i=_.getScrollTop(),n=_.getScrollLeft(),s={};s.x=e-n,s.y=t-i,s.px=n,s.py=i;var a=Math.round(Math.sqrt(Math.pow(s.x,2)+Math.pow(s.y,2))),o=_.newscrollspeed&&_.newscrollspeed>1?_.newscrollspeed:_.getTransitionSpeed(a);if(_.newscrollspeed&&_.newscrollspeed<=1&&(o*=_.newscrollspeed),_.prepareTransition(o,!0),_.timerscroll&&_.timerscroll.tm&&clearInterval(_.timerscroll.tm),o>0){if(!_.scrollrunning&&_.onscrollstart){var r={type:"scrollstart",current:{x:n,y:i},request:{x:e,y:t},end:{x:_.newscrollx,y:_.newscrolly},speed:o};_.onscrollstart.call(_,r)}C.transitionend?_.scrollendtrapped||(_.scrollendtrapped=!0,_.bind(_.doc,C.transitionend,_.onScrollTransitionEnd,!1)):(_.scrollendtrapped&&clearTimeout(_.scrollendtrapped),_.scrollendtrapped=setTimeout(_.onScrollTransitionEnd,o));var l=i,d=n;_.timerscroll={bz:new k(l,_.newscrolly,o,0,0,.58,1),bh:new k(d,_.newscrollx,o,0,0,.58,1)},_.cursorfreezed||(_.timerscroll.tm=setInterval(function(){_.showCursor(_.getScrollTop(),_.getScrollLeft())},60))}_.synched("doScroll-set",function(){_.timer=0,_.scrollendtrapped&&(_.scrollrunning=!0),_.setScrollTop(_.newscrolly),_.setScrollLeft(_.newscrollx),_.scrollendtrapped||_.onScrollTransitionEnd()})},50)))},this.cancelScroll=function(){if(!_.scrollendtrapped)return!0;var e=_.getScrollTop(),t=_.getScrollLeft();return _.scrollrunning=!1,C.transitionend||clearTimeout(C.transitionend),_.scrollendtrapped=!1,_._unbind(_.doc[0],C.transitionend,_.onScrollTransitionEnd),_.prepareTransition(0),_.setScrollTop(e),_.railh&&_.setScrollLeft(t),_.timerscroll&&_.timerscroll.tm&&clearInterval(_.timerscroll.tm),_.timerscroll=!1,_.cursorfreezed=!1,_.showCursor(e,t),_},this.onScrollTransitionEnd=function(){_.scrollendtrapped&&_._unbind(_.doc[0],C.transitionend,_.onScrollTransitionEnd),_.scrollendtrapped=!1,_.prepareTransition(0),_.timerscroll&&_.timerscroll.tm&&clearInterval(_.timerscroll.tm),_.timerscroll=!1;var e=_.getScrollTop(),t=_.getScrollLeft();if(_.setScrollTop(e),_.railh&&_.setScrollLeft(t),_.noticeCursor(!1,e,t),_.cursorfreezed=!1,e<0?e=0:e>_.page.maxh&&(e=_.page.maxh),t<0?t=0:t>_.page.maxw&&(t=_.page.maxw),e!=_.newscrolly||t!=_.newscrollx)return _.doScrollPos(t,e,_.opt.snapbackspeed);_.onscrollend&&_.scrollrunning&&_.triggerScrollEnd(),_.scrollrunning=!1}):(this.doScrollLeft=function(e,t){var i=_.scrollrunning?_.newscrolly:_.getScrollTop();_.doScrollPos(e,i,t)},this.doScrollTop=function(e,t){var i=_.scrollrunning?_.newscrollx:_.getScrollLeft();_.doScrollPos(i,e,t)},this.doScrollPos=function(e,t,i){function n(){if(_.cancelAnimationFrame)return!0;if(_.scrollrunning=!0,h=1-h)return _.timer=l(n)||1;var e,t,i=0,s=t=_.getScrollTop();_.dst.ay?(((o=(s=_.bzscroll?_.dst.py+_.bzscroll.getNow()*_.dst.ay:_.newscrolly)-t)<0&&s<_.newscrolly||o>0&&s>_.newscrolly)&&(s=_.newscrolly),_.setScrollTop(s),s==_.newscrolly&&(i=1)):i=1;var a=e=_.getScrollLeft();if(_.dst.ax){var o=(a=_.bzscroll?_.dst.px+_.bzscroll.getNow()*_.dst.ax:_.newscrollx)-e;(o<0&&a<_.newscrollx||o>0&&a>_.newscrollx)&&(a=_.newscrollx),_.setScrollLeft(a),a==_.newscrollx&&(i+=1)}else i+=1;2==i?(_.timer=0,_.cursorfreezed=!1,_.bzscroll=!1,_.scrollrunning=!1,s<0?s=0:s>_.page.maxh&&(s=Math.max(0,_.page.maxh)),a<0?a=0:a>_.page.maxw&&(a=_.page.maxw),a!=_.newscrollx||s!=_.newscrolly?_.doScrollPos(a,s):_.onscrollend&&_.triggerScrollEnd()):_.timer=l(n)||1}var t=void 0===t||!1===t?_.getScrollTop(!0):t;if(_.timer&&_.newscrolly==t&&_.newscrollx==e)return!0;_.timer&&d(_.timer),_.timer=0;var s=_.getScrollTop(),a=_.getScrollLeft();((_.newscrolly-s)*(t-s)<0||(_.newscrollx-a)*(e-a)<0)&&_.cancelScroll(),_.newscrolly=t,_.newscrollx=e,_.bouncescroll&&_.rail.visibility||(_.newscrolly<0?_.newscrolly=0:_.newscrolly>_.page.maxh&&(_.newscrolly=_.page.maxh)),_.bouncescroll&&_.railh.visibility||(_.newscrollx<0?_.newscrollx=0:_.newscrollx>_.page.maxw&&(_.newscrollx=_.page.maxw)),_.dst={},_.dst.x=e-a,_.dst.y=t-s,_.dst.px=a,_.dst.py=s;var o=Math.round(Math.sqrt(Math.pow(_.dst.x,2)+Math.pow(_.dst.y,2)));_.dst.ax=_.dst.x/o,_.dst.ay=_.dst.y/o;var r=0,c=o;0==_.dst.x?(r=s,c=t,_.dst.ay=1,_.dst.py=0):0==_.dst.y&&(r=a,c=e,_.dst.ax=1,_.dst.px=0);var u=_.getTransitionSpeed(o);if(i&&i<=1&&(u*=i),_.bzscroll=u>0&&(_.bzscroll?_.bzscroll.update(c,u):new k(r,c,u,0,1,0,1)),!_.timer){(s==_.page.maxh&&t>=_.page.maxh||a==_.page.maxw&&e>=_.page.maxw)&&_.checkContentSize();var h=1;if(_.cancelAnimationFrame=!1,_.timer=1,_.onscrollstart&&!_.scrollrunning){var p={type:"scrollstart",current:{x:a,y:s},request:{x:e,y:t},end:{x:_.newscrollx,y:_.newscrolly},speed:u};_.onscrollstart.call(_,p)}n(),(s==_.page.maxh&&t>=s||a==_.page.maxw&&e>=a)&&_.checkContentSize(),_.noticeCursor()}},this.cancelScroll=function(){return _.timer&&d(_.timer),_.timer=0,_.bzscroll=!1,_.scrollrunning=!1,_}):(this.doScrollLeft=function(e,t){var i=_.getScrollTop();_.doScrollPos(e,i,t)},this.doScrollTop=function(e,t){var i=_.getScrollLeft();_.doScrollPos(i,e,t)},this.doScrollPos=function(e,t,i){var n=e>_.page.maxw?_.page.maxw:e;n<0&&(n=0);var s=t>_.page.maxh?_.page.maxh:t;s<0&&(s=0),_.synched("scroll",function(){_.setScrollTop(s),_.setScrollLeft(n)})},this.cancelScroll=function(){}),this.doScrollBy=function(e,t){var i=0;if(i=t?Math.floor((_.scroll.y-e)*_.scrollratio.y):(_.timer?_.newscrolly:_.getScrollTop(!0))-e,_.bouncescroll){var n=Math.round(_.view.h/2);i<-n?i=-n:i>_.page.maxh+n&&(i=_.page.maxh+n)}_.cursorfreezed=!1;var s=_.getScrollTop(!0);return i<0&&s<=0?_.noticeCursor():i>_.page.maxh&&s>=_.page.maxh?(_.checkContentSize(),_.noticeCursor()):void _.doScrollTop(i)},this.doScrollLeftBy=function(e,t){var i=0;if(i=t?Math.floor((_.scroll.x-e)*_.scrollratio.x):(_.timer?_.newscrollx:_.getScrollLeft(!0))-e,_.bouncescroll){var n=Math.round(_.view.w/2);i<-n?i=-n:i>_.page.maxw+n&&(i=_.page.maxw+n)}_.cursorfreezed=!1;var s=_.getScrollLeft(!0);return i<0&&s<=0?_.noticeCursor():i>_.page.maxw&&s>=_.page.maxw?_.noticeCursor():void _.doScrollLeft(i)},this.doScrollTo=function(e,t){var i=t?Math.round(e*_.scrollratio.y):e;i<0?i=0:i>_.page.maxh&&(i=_.page.maxh),_.cursorfreezed=!1,_.doScrollTop(e)},this.checkContentSize=function(){var e=_.getContentSize();e.h==_.page.h&&e.w==_.page.w||_.resize(!1,e)},_.onscroll=function(e){_.rail.drag||_.cursorfreezed||_.synched("scroll",function(){_.scroll.y=Math.round(_.getScrollTop()*(1/_.scrollratio.y)),_.railh&&(_.scroll.x=Math.round(_.getScrollLeft()*(1/_.scrollratio.x))),_.noticeCursor()})},_.bind(_.docscroll,"scroll",_.onscroll),this.doZoomIn=function(e){if(!_.zoomactive){_.zoomactive=!0,_.zoomrestore={style:{}};var t=["position","top","left","zIndex","backgroundColor","marginTop","marginBottom","marginLeft","marginRight"],i=_.win[0].style;for(var n in t){var s=t[n];_.zoomrestore.style[s]=void 0!==i[s]?i[s]:""}_.zoomrestore.style.width=_.win.css("width"),_.zoomrestore.style.height=_.win.css("height"),_.zoomrestore.padding={w:_.win.outerWidth()-_.win.width(),h:_.win.outerHeight()-_.win.height()},C.isios4&&(_.zoomrestore.scrollTop=o(window).scrollTop(),o(window).scrollTop(0)),_.win.css({position:C.isios4?"absolute":"fixed",top:0,left:0,zIndex:a+100,margin:0});var r=_.win.css("backgroundColor");return(""==r||/transparent|rgba\(0, 0, 0, 0\)|rgba\(0,0,0,0\)/.test(r))&&_.win.css("backgroundColor","#fff"),_.rail.css({zIndex:a+101}),_.zoom.css({zIndex:a+102}),_.zoom.css("backgroundPosition","0px -18px"),_.resizeZoom(),_.onzoomin&&_.onzoomin.call(_),_.cancelEvent(e)}},this.doZoomOut=function(e){if(_.zoomactive)return _.zoomactive=!1,_.win.css("margin",""),_.win.css(_.zoomrestore.style),C.isios4&&o(window).scrollTop(_.zoomrestore.scrollTop),_.rail.css({"z-index":_.zindex}),_.zoom.css({"z-index":_.zindex}),_.zoomrestore=!1,_.zoom.css("backgroundPosition","0px 0px"),_.onResize(),_.onzoomout&&_.onzoomout.call(_),_.cancelEvent(e)},this.doZoom=function(e){return _.zoomactive?_.doZoomOut(e):_.doZoomIn(e)},this.resizeZoom=function(){if(_.zoomactive){var e=_.getScrollTop();_.win.css({width:o(window).width()-_.zoomrestore.padding.w+"px",height:o(window).height()-_.zoomrestore.padding.h+"px"}),_.onResize(),_.setScrollTop(Math.min(_.page.maxh,e))}},this.init(),o.nicescroll.push(this)},v=function(e){var t=this;this.nc=e,this.lastx=0,this.lasty=0,this.speedx=0,this.speedy=0,this.lasttime=0,this.steptime=0,this.snapx=!1,this.snapy=!1,this.demulx=0,this.demuly=0,this.lastscrollx=-1,this.lastscrolly=-1,this.chkx=0,this.chky=0,this.timer=0,this.time=function(){return+new Date},this.reset=function(e,i){t.stop();var n=t.time();t.steptime=0,t.lasttime=n,t.speedx=0,t.speedy=0,t.lastx=e,t.lasty=i,t.lastscrollx=-1,t.lastscrolly=-1},this.update=function(e,i){var n=t.time();t.steptime=n-t.lasttime,t.lasttime=n;var s=i-t.lasty,a=e-t.lastx,o=t.nc.getScrollTop()+s,r=t.nc.getScrollLeft()+a;t.snapx=r<0||r>t.nc.page.maxw,t.snapy=o<0||o>t.nc.page.maxh,t.speedx=a,t.speedy=s,t.lastx=e,t.lasty=i},this.stop=function(){t.nc.unsynched("domomentum2d"),t.timer&&clearTimeout(t.timer),t.timer=0,t.lastscrollx=-1,t.lastscrolly=-1},this.doSnapy=function(e,i){var n=!1;i<0?(i=0,n=!0):i>t.nc.page.maxh&&(i=t.nc.page.maxh,n=!0),e<0?(e=0,n=!0):e>t.nc.page.maxw&&(e=t.nc.page.maxw,n=!0),n?t.nc.doScrollPos(e,i,t.nc.opt.snapbackspeed):t.nc.triggerScrollEnd()},this.doMomentum=function(e){var i=t.time(),n=e?i+e:t.lasttime,s=t.nc.getScrollLeft(),a=t.nc.getScrollTop(),o=t.nc.page.maxh,r=t.nc.page.maxw;t.speedx=r>0?Math.min(60,t.speedx):0,t.speedy=o>0?Math.min(60,t.speedy):0;var l=n&&i-n<=60;(a<0||a>o||s<0||s>r)&&(l=!1);var d=!(!t.speedy||!l)&&t.speedy,c=!(!t.speedx||!l)&&t.speedx;if(d||c){var u=Math.max(16,t.steptime);if(u>50){var h=u/50;t.speedx*=h,t.speedy*=h,u=50}t.demulxy=0,t.lastscrollx=t.nc.getScrollLeft(),t.chkx=t.lastscrollx,t.lastscrolly=t.nc.getScrollTop(),t.chky=t.lastscrolly;var p=t.lastscrollx,f=t.lastscrolly,m=function(){var e=t.time()-i>600?.04:.02;t.speedx&&(p=Math.floor(t.lastscrollx-t.speedx*(1-t.demulxy)),t.lastscrollx=p,(p<0||p>r)&&(e=.1)),t.speedy&&(f=Math.floor(t.lastscrolly-t.speedy*(1-t.demulxy)),t.lastscrolly=f,(f<0||f>o)&&(e=.1)),t.demulxy=Math.min(1,t.demulxy+e),t.nc.synched("domomentum2d",function(){if(t.speedx){t.nc.getScrollLeft();t.chkx=p,t.nc.setScrollLeft(p)}if(t.speedy){t.nc.getScrollTop();t.chky=f,t.nc.setScrollTop(f)}t.timer||(t.nc.hideCursor(),t.doSnapy(p,f))}),t.demulxy<1?t.timer=setTimeout(m,u):(t.stop(),t.nc.hideCursor(),t.doSnapy(p,f))};m()}else t.doSnapy(t.nc.getScrollLeft(),t.nc.getScrollTop())}},b=e.fn.scrollTop;e.cssHooks.pageYOffset={get:function(e,t,i){var n=o.data(e,"__nicescroll")||!1;return n&&n.ishwscroll?n.getScrollTop():b.call(e)},set:function(e,t){var i=o.data(e,"__nicescroll")||!1;return i&&i.ishwscroll?i.setScrollTop(parseInt(t)):b.call(e,t),this}},e.fn.scrollTop=function(e){if(void 0===e){var t=!!this[0]&&(o.data(this[0],"__nicescroll")||!1);return t&&t.ishwscroll?t.getScrollTop():b.call(this)}return this.each(function(){var t=o.data(this,"__nicescroll")||!1;t&&t.ishwscroll?t.setScrollTop(parseInt(e)):b.call(o(this),e)})};var _=e.fn.scrollLeft;o.cssHooks.pageXOffset={get:function(e,t,i){var n=o.data(e,"__nicescroll")||!1;return n&&n.ishwscroll?n.getScrollLeft():_.call(e)},set:function(e,t){var i=o.data(e,"__nicescroll")||!1;return i&&i.ishwscroll?i.setScrollLeft(parseInt(t)):_.call(e,t),this}},e.fn.scrollLeft=function(e){if(void 0===e){var t=!!this[0]&&(o.data(this[0],"__nicescroll")||!1);return t&&t.ishwscroll?t.getScrollLeft():_.call(this)}return this.each(function(){var t=o.data(this,"__nicescroll")||!1;t&&t.ishwscroll?t.setScrollLeft(parseInt(e)):_.call(o(this),e)})};var $=function(e){var t=this;if(this.length=0,this.name="nicescrollarray",this.each=function(e){return o.each(t,e),t},this.push=function(e){t[t.length]=e,t.length++},this.eq=function(e){return t[e]},e)for(var i=0;i<e.length;i++){var n=o.data(e[i],"__nicescroll")||!1;n&&(this[this.length]=n,this.length++)}return this};!function(e,t,i){for(var n=0;n<t.length;n++)i(e,t[n])}($.prototype,["show","hide","toggle","onResize","resize","remove","stop","doScrollPos"],function(e,t){e[t]=function(){var e=arguments;return this.each(function(){this[t].apply(this,e)})}}),e.fn.getNiceScroll=function(e){return void 0===e?new $(this):this[e]&&o.data(this[e],"__nicescroll")||!1},e.expr[":"].nicescroll=function(e){return void 0!==o.data(e,"__nicescroll")},o.fn.niceScroll=function(e,t){void 0!==t||"object"!=typeof e||"jquery"in e||(t=e,e=!1),t=o.extend({},t);var i=new $;void 0===t&&(t={}),e&&(t.doc=o(e),t.win=o(this));var n=!("doc"in t);return n||"win"in t||(t.win=o(this)),this.each(function(){var e=o(this).data("__nicescroll")||!1;e||(t.doc=n?o(this):t.doc,e=new g(t,o(this)),o(this).data("__nicescroll",e)),i.push(e)}),1==i.length?i[0]:i},window.NiceScroll={getjQuery:function(){return e}},o.nicescroll||(o.nicescroll=new $,o.nicescroll.options=p)}),window.puJsFileLoadCounter++,function(){var e,t,i,n,s,a,o,r,l=[].slice,d={}.hasOwnProperty,c=function(e,t){function i(){this.constructor=e}for(var n in t)d.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};o=function(){},t=function(){function e(){}return e.prototype.addEventListener=e.prototype.on,e.prototype.on=function(e,t){return this._callbacks=this._callbacks||{},this._callbacks[e]||(this._callbacks[e]=[]),this._callbacks[e].push(t),this},e.prototype.emit=function(){var e,t,i,n,s;if(i=arguments[0],e=2<=arguments.length?l.call(arguments,1):[],this._callbacks=this._callbacks||{},t=this._callbacks[i])for(n=0,s=t.length;n<s;n++)t[n].apply(this,e);return this},e.prototype.removeListener=e.prototype.off,e.prototype.removeAllListeners=e.prototype.off,e.prototype.removeEventListener=e.prototype.off,e.prototype.off=function(e,t){var i,n,s,a;if(!this._callbacks||0===arguments.length)return this._callbacks={},this;if(!(i=this._callbacks[e]))return this;if(1===arguments.length)return delete this._callbacks[e],this;for(n=s=0,a=i.length;s<a;n=++s)if(i[n]===t){i.splice(n,1);break}return this},e}(),(e=function(e){function i(e,t){var s,a,o;if(this.element=e,this.version=i.version,this.defaultOptions.previewTemplate=this.defaultOptions.previewTemplate.replace(/\n*/g,""),this.clickableElements=[],this.listeners=[],this.files=[],"string"==typeof this.element&&(this.element=document.querySelector(this.element)),!this.element||null==this.element.nodeType)throw new Error("Invalid dropzone element.");if(this.element.dropzone)throw new Error("Dropzone already attached.");if(i.instances.push(this),this.element.dropzone=this,s=null!=(o=i.optionsForElement(this.element))?o:{},this.options=n({},this.defaultOptions,s,null!=t?t:{}),this.options.forceFallback||!i.isBrowserSupported())return this.options.fallback.call(this);if(null==this.options.url&&(this.options.url=this.element.getAttribute("action")),!this.options.url)throw new Error("No URL provided.");if(this.options.acceptedFiles&&this.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");this.options.acceptedMimeTypes&&(this.options.acceptedFiles=this.options.acceptedMimeTypes,delete this.options.acceptedMimeTypes),this.options.method=this.options.method.toUpperCase(),(a=this.getExistingFallback())&&a.parentNode&&a.parentNode.removeChild(a),!1!==this.options.previewsContainer&&(this.options.previewsContainer?this.previewsContainer=i.getElement(this.options.previewsContainer,"previewsContainer"):this.previewsContainer=this.element),this.options.clickable&&(!0===this.options.clickable?this.clickableElements=[this.element]:this.clickableElements=i.getElements(this.options.clickable,"clickable")),this.init()}var n,s;return c(i,t),i.prototype.Emitter=t,i.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","addedfiles","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete","accept"],i.prototype.defaultOptions={url:null,method:"post",withCredentials:!1,parallelUploads:2,uploadMultiple:!1,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,filesizeBase:1024,maxFiles:null,params:{},clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,hiddenInputContainer:"body",capture:null,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:"Are you sure you want to cancel this upload?",dictMaxFilesExceeded:"You can not upload any more files.",accept:function(e,t){return t()},init:function(){return o},forceFallback:!1,fallback:function(){var e,t,n,s,a,o;for(this.element.className=this.element.className+" dz-browser-not-supported",s=0,a=(o=this.element.getElementsByTagName("div")).length;s<a;s++)e=o[s],/(^| )dz-message($| )/.test(e.className)&&(t=e,e.className="dz-message");return t||(t=i.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(t)),(n=t.getElementsByTagName("span")[0])&&(null!=n.textContent?n.textContent=this.options.dictFallbackMessage:null!=n.innerText&&(n.innerText=this.options.dictFallbackMessage)),this.element.appendChild(this.getFallbackForm())},resize:function(e){var t,i,n;return t={srcX:0,srcY:0,srcWidth:e.width,srcHeight:e.height},i=e.width/e.height,t.optWidth=this.options.thumbnailWidth,t.optHeight=this.options.thumbnailHeight,null==t.optWidth&&null==t.optHeight?(t.optWidth=t.srcWidth,t.optHeight=t.srcHeight):null==t.optWidth?t.optWidth=i*t.optHeight:null==t.optHeight&&(t.optHeight=1/i*t.optWidth),n=t.optWidth/t.optHeight,e.height<t.optHeight||e.width<t.optWidth?(t.trgHeight=t.srcHeight,t.trgWidth=t.srcWidth):i>n?(t.srcHeight=e.height,t.srcWidth=t.srcHeight*n):(t.srcWidth=e.width,t.srcHeight=t.srcWidth/n),t.srcX=(e.width-t.srcWidth)/2,t.srcY=(e.height-t.srcHeight)/2,t},drop:function(e){return this.element.classList.remove("dz-drag-hover")},dragstart:o,dragend:function(e){return this.element.classList.remove("dz-drag-hover")},dragenter:function(e){return this.element.classList.add("dz-drag-hover")},dragover:function(e){return this.element.classList.add("dz-drag-hover")},dragleave:function(e){return this.element.classList.remove("dz-drag-hover")},paste:o,reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(e){var t,n,s,a,o,r,l,d,c,u,h,p;if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer){if(e.previewElement=i.createElement(this.options.previewTemplate.trim()),e.previewTemplate=e.previewElement,this.previewsContainer.appendChild(e.previewElement),!e.type.match(/image.*/)){for(s=0,r=(c=e.previewElement.querySelectorAll("[data-dz-name]")).length;s<r;s++)c[s].textContent=e.name;for(a=0,l=(u=e.previewElement.querySelectorAll("[data-dz-size]")).length;a<l;a++)u[a].innerHTML=this.filesize(e.size)}for(this.options.addRemoveLinks&&(e._removeLink=i.createElement('<a class="dz-remove cancel_uploading_file" href="javascript:undefined;" data-dz-remove>'+this.options.dictRemoveFile+"</a>"),e.previewElement.appendChild(e._removeLink)),t=function(t){return function(n){return n.preventDefault(),n.stopPropagation(),e.status===i.UPLOADING?i.confirm(t.options.dictCancelUploadConfirmation,function(){return t.removeFile(e)}):t.options.dictRemoveFileConfirmation?i.confirm(t.options.dictRemoveFileConfirmation,function(){return t.removeFile(e)}):t.removeFile(e)}}(this),p=[],o=0,d=(h=e.previewElement.querySelectorAll("[data-dz-remove]")).length;o<d;o++)n=h[o],p.push(n.addEventListener("click",t));return p}},removedfile:function(e){var t;return e.previewElement&&null!=(t=e.previewElement)&&t.parentNode.removeChild(e.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(e,t){var i,n,s,a;if(e.previewElement){for(e.previewElement.classList.remove("dz-file-preview"),n=0,s=(a=e.previewElement.querySelectorAll("[data-dz-thumbnail]")).length;n<s;n++)(i=a[n]).alt=e.name,i.src=t;return setTimeout(function(){return e.previewElement.classList.add("dz-image-preview")},1)}},error:function(e,t){var i,n,s,a,o;if($('.dialogue-listing-chat .dz-preview:not(":last")').remove(),e.previewElement){for(e.previewElement.classList.add("dz-error"),"String"!=typeof t&&t.error&&(t=t.error),o=[],n=0,s=(a=e.previewElement.querySelectorAll("[data-dz-errormessage]")).length;n<s;n++){i=a[n],o.push(i.textContent=t);var r=e.previewElement.querySelector(".dz-error-message");$(r).show(),$(r).siblings().remove(),autoScrollDown()}return o}},errormultiple:o,processing:function(e){if(e.previewElement&&(e.previewElement.classList.add("dz-processing"),e._removeLink))return e._removeLink.textContent=this.options.dictCancelUpload},processingmultiple:o,uploadprogress:function(e,t,i){var n,s,a,o,r;if(e.previewElement){for(r=[],s=0,a=(o=e.previewElement.querySelectorAll("[data-dz-uploadprogress]")).length;s<a;s++)"PROGRESS"===(n=o[s]).nodeName&&r.push(n.value=t);return r}},totaluploadprogress:o,sending:o,sendingmultiple:o,success:function(e){if(e.previewElement)return e.previewElement.classList.add("dz-success")},successmultiple:o,canceled:function(e){return this.emit("error",e,"Upload canceled.")},canceledmultiple:o,complete:function(e){if(e._removeLink&&(e._removeLink.textContent=this.options.dictRemoveFile),e.previewElement)return e.previewElement.classList.add("dz-complete")},completemultiple:o,maxfilesexceeded:o,maxfilesreached:o,queuecomplete:o,addedfiles:o,previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-image"><img data-dz-thumbnail /></div>\n  <div class="dz-details">\n    <div class="dz-size"><span data-dz-size></span></div>\n    <div class="dz-filename"><span data-dz-name></span></div>\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n  <div class="dz-success-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Check</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <path d="M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" stroke-opacity="0.198794158" stroke="#747474" fill-opacity="0.816519475" fill="#FFFFFF" sketch:type="MSShapeGroup"></path>\n      </g>\n    </svg>\n  </div>\n  <div class="dz-error-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Error</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="Check-+-Oval-2" sketch:type="MSLayerGroup" stroke="#747474" stroke-opacity="0.198794158" fill="#FFFFFF" fill-opacity="0.816519475">\n          <path d="M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" sketch:type="MSShapeGroup"></path>\n        </g>\n      </g>\n    </svg>\n  </div>\n</div>'},n=function(){var e,t,i,n,s,a,o;for(n=arguments[0],a=0,o=(i=2<=arguments.length?l.call(arguments,1):[]).length;a<o;a++){t=i[a];for(e in t)s=t[e],n[e]=s}return n},i.prototype.getAcceptedFiles=function(){var e,t,i,n,s;for(s=[],t=0,i=(n=this.files).length;t<i;t++)(e=n[t]).accepted&&s.push(e);return s},i.prototype.getRejectedFiles=function(){var e,t,i,n,s;for(s=[],t=0,i=(n=this.files).length;t<i;t++)(e=n[t]).accepted||s.push(e);return s},i.prototype.getFilesWithStatus=function(e){var t,i,n,s,a;for(a=[],i=0,n=(s=this.files).length;i<n;i++)(t=s[i]).status===e&&a.push(t);return a},i.prototype.getQueuedFiles=function(){return this.getFilesWithStatus(i.QUEUED)},i.prototype.getUploadingFiles=function(){return this.getFilesWithStatus(i.UPLOADING)},i.prototype.getAddedFiles=function(){return this.getFilesWithStatus(i.ADDED)},i.prototype.getActiveFiles=function(){var e,t,n,s,a;for(a=[],t=0,n=(s=this.files).length;t<n;t++)(e=s[t]).status!==i.UPLOADING&&e.status!==i.QUEUED||a.push(e);return a},i.prototype.init=function(){var e,t,n,s,a,o,r;for("form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(i.createElement('<div class="dz-default dz-message"><span>'+this.options.dictDefaultMessage+"</span></div>")),this.clickableElements.length&&(n=function(e){return function(){return e.hiddenFileInput&&e.hiddenFileInput.parentNode.removeChild(e.hiddenFileInput),e.hiddenFileInput=document.createElement("input"),e.hiddenFileInput.setAttribute("type","file"),(null==e.options.maxFiles||e.options.maxFiles>1)&&e.hiddenFileInput.setAttribute("multiple","multiple"),e.hiddenFileInput.className="dz-hidden-input",null!=e.options.acceptedFiles&&e.hiddenFileInput.setAttribute("accept",e.options.acceptedFiles),null!=e.options.capture&&e.hiddenFileInput.setAttribute("capture",e.options.capture),e.hiddenFileInput.style.visibility="hidden",e.hiddenFileInput.style.position="absolute",e.hiddenFileInput.style.top="0",e.hiddenFileInput.style.left="0",e.hiddenFileInput.style.height="0",e.hiddenFileInput.style.width="0",document.querySelector(e.options.hiddenInputContainer).appendChild(e.hiddenFileInput),e.hiddenFileInput.addEventListener("change",function(){var t,i,s,a;if((i=e.hiddenFileInput.files).length)for(s=0,a=i.length;s<a;s++)t=i[s],e.addFile(t);return e.emit("addedfiles",i),n()})}}(this))(),this.URL=null!=(o=window.URL)?o:window.webkitURL,s=0,a=(r=this.events).length;s<a;s++)e=r[s],this.on(e,this.options[e]);return this.on("uploadprogress",function(e){return function(){return e.updateTotalUploadProgress()}}(this)),this.on("removedfile",function(e){return function(){return e.updateTotalUploadProgress()}}(this)),this.on("canceled",function(e){return function(t){return e.emit("complete",t)}}(this)),this.on("complete",function(e){return function(t){if(0===e.getAddedFiles().length&&0===e.getUploadingFiles().length&&0===e.getQueuedFiles().length)return setTimeout(function(){return e.emit("queuecomplete")},0)}}(this)),t=function(e){return e.stopPropagation(),e.preventDefault?e.preventDefault():e.returnValue=!1},this.listeners=[{element:this.element,events:{dragstart:function(e){return function(t){return e.emit("dragstart",t)}}(this),dragenter:function(e){return function(i){return t(i),e.emit("dragenter",i)}}(this),dragover:function(e){return function(i){var n;try{n=i.dataTransfer.effectAllowed}catch(e){}return i.dataTransfer.dropEffect="move"===n||"linkMove"===n?"move":"copy",t(i),e.emit("dragover",i)}}(this),dragleave:function(e){return function(t){return e.emit("dragleave",t)}}(this),drop:function(e){return function(i){return t(i),e.drop(i)}}(this),dragend:function(e){return function(t){return e.emit("dragend",t)}}(this)}}],this.clickableElements.forEach(function(e){return function(t){return e.listeners.push({element:t,events:{click:function(n){return(t!==e.element||n.target===e.element||i.elementInside(n.target,e.element.querySelector(".dz-message")))&&e.hiddenFileInput.click(),!0}}})}}(this)),this.enable(),this.options.init.call(this)},i.prototype.destroy=function(){var e;return this.disable(),this.removeAllFiles(!0),(null!=(e=this.hiddenFileInput)?e.parentNode:void 0)&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,i.instances.splice(i.instances.indexOf(this),1)},i.prototype.updateTotalUploadProgress=function(){var e,t,i,n,s,a,o;if(i=0,t=0,this.getActiveFiles().length){for(s=0,a=(o=this.getActiveFiles()).length;s<a;s++)i+=(e=o[s]).upload.bytesSent,t+=e.upload.total;n=100*i/t}else n=100;return this.emit("totaluploadprogress",n,t,i)},i.prototype._getParamName=function(e){return"function"==typeof this.options.paramName?this.options.paramName(e):this.options.paramName+(this.options.uploadMultiple?"["+e+"]":"")},i.prototype.getFallbackForm=function(){var e,t,n,s;return(e=this.getExistingFallback())?e:(n='<div class="dz-fallback">',this.options.dictFallbackText&&(n+="<p>"+this.options.dictFallbackText+"</p>"),n+='<input type="file" name="'+this._getParamName(0)+'" '+(this.options.uploadMultiple?'multiple="multiple"':void 0)+' /><input type="submit" value="Upload!"></div>',t=i.createElement(n),"FORM"!==this.element.tagName?(s=i.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"></form>')).appendChild(t):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),null!=s?s:t)},i.prototype.getExistingFallback=function(){var e,t,i,n,s,a;for(t=function(e){var t,i,n;for(i=0,n=e.length;i<n;i++)if(t=e[i],/(^| )fallback($| )/.test(t.className))return t},n=0,s=(a=["div","form"]).length;n<s;n++)if(i=a[n],e=t(this.element.getElementsByTagName(i)))return e},i.prototype.setupEventListeners=function(){var e,t,i,n,s,a,o;for(o=[],n=0,s=(a=this.listeners).length;n<s;n++)e=a[n],o.push(function(){var n,s;n=e.events,s=[];for(t in n)i=n[t],s.push(e.element.addEventListener(t,i,!1));return s}());return o},i.prototype.removeEventListeners=function(){var e,t,i,n,s,a,o;for(o=[],n=0,s=(a=this.listeners).length;n<s;n++)e=a[n],o.push(function(){var n,s;n=e.events,s=[];for(t in n)i=n[t],s.push(e.element.removeEventListener(t,i,!1));return s}());return o},i.prototype.disable=function(){var e,t,i,n,s;for(this.clickableElements.forEach(function(e){return e.classList.remove("dz-clickable")}),this.removeEventListeners(),s=[],t=0,i=(n=this.files).length;t<i;t++)e=n[t],s.push(this.cancelUpload(e));return s},i.prototype.enable=function(){return this.clickableElements.forEach(function(e){return e.classList.add("dz-clickable")}),this.setupEventListeners()},i.prototype.filesize=function(e){var t,i,n,s,a,o,r,l;if(n=0,s="bytes",e>0){for(i=r=0,l=(o=["TB","GB","MB","KB","bytes"]).length;r<l;i=++r)if(a=o[i],t=Math.pow(this.options.filesizeBase,4-i),e>=t){n=e/Math.pow(this.options.filesizeBase,4-i),s=a;break}n=(n=n.toString()).replace(/(\.|$)0+/,""),n=0==(n=Number(n))?n:n.toFixed(2)}return"<strong>"+n+"</strong> "+s},i.prototype._updateMaxFilesReachedClass=function(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")},i.prototype.drop=function(e){var t,i;e.dataTransfer&&(this.emit("drop",e),t=e.dataTransfer.files,this.emit("addedfiles",t),t.length&&((i=e.dataTransfer.items)&&i.length&&null!=i[0].webkitGetAsEntry?this._addFilesFromItems(i):this.handleFiles(t)))},i.prototype.paste=function(e){var t,i;if(null!=(null!=e&&null!=(i=e.clipboardData)?i.items:void 0))return this.emit("paste",e),(t=e.clipboardData.items).length?this._addFilesFromItems(t):void 0},i.prototype.handleFiles=function(e){var t,i,n,s;for(s=[],i=0,n=e.length;i<n;i++)t=e[i],s.push(this.addFile(t));return s},i.prototype._addFilesFromItems=function(e){var t,i,n,s,a;for(a=[],n=0,s=e.length;n<s;n++)null!=(i=e[n]).webkitGetAsEntry&&(t=i.webkitGetAsEntry())?t.isFile?a.push(this.addFile(i.getAsFile())):t.isDirectory?a.push(this._addFilesFromDirectory(t,t.name)):a.push(void 0):null!=i.getAsFile&&(null==i.kind||"file"===i.kind)?a.push(this.addFile(i.getAsFile())):a.push(void 0);return a},i.prototype._addFilesFromDirectory=function(e,t){var i,n;return i=e.createReader(),n=function(e){return function(i){var n,s,a;for(s=0,a=i.length;s<a;s++)(n=i[s]).isFile?n.file(function(i){if(!e.options.ignoreHiddenFiles||"."!==i.name.substring(0,1))return i.fullPath=t+"/"+i.name,e.addFile(i)}):n.isDirectory&&e._addFilesFromDirectory(n,t+"/"+n.name)}}(this),i.readEntries(n,function(e){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.log?console.log(e):void 0})},i.prototype.accept=function(e,t){var n=$("#messagePopup");if(e.size>1024*this.options.maxFilesize*1024)n.modal("show")?($("body").removeClass("modal-open"),$("body").find(".modal-backdrop").addClass("mini-confirm-backdrop"),$(".mini-overlay-white-wrapper.white-overlay").removeClass("hide").addClass("show"),$("#messagePopup .modal-footer .btn").click(function(){$(".mini-overlay-white-wrapper.white-overlay").removeClass("show").addClass("hide")})):$(".mini-overlay-white-wrapper.white-overlay").removeClass("show").addClass("hide"),n.find(".series-content").html("File size exceeded"),myDropzone.removeFile(e);else{if(i.isValidFile(e,this.options.acceptedFiles))return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(t(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",e)):this.options.accept.call(this,e,t);n.modal("show")?($("body").removeClass("modal-open"),$("body").find(".modal-backdrop").addClass("mini-confirm-backdrop"),$(".mini-overlay-white-wrapper.white-overlay").removeClass("hide").addClass("show"),$("#messagePopup .modal-footer .btn").click(function(){$(".mini-overlay-white-wrapper.white-overlay").removeClass("show").addClass("hide")})):$(".mini-overlay-white-wrapper.white-overlay").removeClass("show").addClass("hide"),n.find(".series-content").html("Invalid file type"),myDropzone.removeFile(e)}autoScrollDown()},i.prototype.addFile=function(e){return e.upload={progress:0,total:e.size,bytesSent:0},this.files.push(e),e.status=i.ADDED,this.emit("addedfile",e),this._enqueueThumbnail(e),this.accept(e,function(t){return function(i){return i?(e.accepted=!1,t._errorProcessing([e],i)):(e.accepted=!0,t.options.autoQueue&&t.enqueueFile(e)),t._updateMaxFilesReachedClass()}}(this))},i.prototype.enqueueFiles=function(e){var t,i,n;for(i=0,n=e.length;i<n;i++)t=e[i],this.enqueueFile(t);return null},i.prototype.enqueueFile=function(e){if(e.status!==i.ADDED||!0!==e.accepted)throw new Error("This file can't be queued because it has already been processed or was rejected.");if(e.status=i.QUEUED,this.options.autoProcessQueue)return setTimeout(function(e){return function(){return e.processQueue()}}(this),0)},i.prototype._thumbnailQueue=[],i.prototype._processingThumbnail=!1,i.prototype._enqueueThumbnail=function(e){if(this.options.createImageThumbnails&&e.type.match(/image.*/)&&e.size<=1024*this.options.maxThumbnailFilesize*1024)return this._thumbnailQueue.push(e),setTimeout(function(e){return function(){return e._processThumbnailQueue()}}(this),0)},i.prototype._processThumbnailQueue=function(){if(!this._processingThumbnail&&0!==this._thumbnailQueue.length)return this._processingThumbnail=!0,this.createThumbnail(this._thumbnailQueue.shift(),function(e){return function(){return e._processingThumbnail=!1,e._processThumbnailQueue()}}(this))},i.prototype.removeFile=function(e){if(e.status===i.UPLOADING&&this.cancelUpload(e),this.files=r(this.files,e),this.emit("removedfile",e),0===this.files.length)return this.emit("reset")},i.prototype.removeAllFiles=function(e){var t,n,s,a;for(null==e&&(e=!1),n=0,s=(a=this.files.slice()).length;n<s;n++)((t=a[n]).status!==i.UPLOADING||e)&&this.removeFile(t);return null},i.prototype.createThumbnail=function(e,t){var i;return i=new FileReader,i.onload=function(n){return function(){return"image/svg+xml"===e.type?(n.emit("thumbnail",e,i.result),void(null!=t&&t())):n.createThumbnailFromUrl(e,i.result,t)}}(this),i.readAsDataURL(e)},i.prototype.createThumbnailFromUrl=function(e,t,i,n){var s;return s=document.createElement("img"),n&&(s.crossOrigin=n),s.onload=function(t){return function(){var n,o,r,l,d,c,u,h;if(e.width=s.width,e.height=s.height,null==(r=t.options.resize.call(t,e)).trgWidth&&(r.trgWidth=r.optWidth),null==r.trgHeight&&(r.trgHeight=r.optHeight),n=document.createElement("canvas"),o=n.getContext("2d"),n.width=r.trgWidth,n.height=r.trgHeight,a(o,s,null!=(d=r.srcX)?d:0,null!=(c=r.srcY)?c:0,r.srcWidth,r.srcHeight,null!=(u=r.trgX)?u:0,null!=(h=r.trgY)?h:0,r.trgWidth,r.trgHeight),l=n.toDataURL("image/png"),t.emit("thumbnail",e,l),null!=i)return i()}}(this),null!=i&&(s.onerror=i),s.src=t},i.prototype.processQueue=function(){var e,t,i,n;if(t=this.options.parallelUploads,i=this.getUploadingFiles().length,e=i,!(i>=t)&&(n=this.getQueuedFiles()).length>0){if(this.options.uploadMultiple)return this.processFiles(n.slice(0,t-i));for(;e<t;){if(!n.length)return;this.processFile(n.shift()),e++}}},i.prototype.processFile=function(e){return this.processFiles([e])},i.prototype.processFiles=function(e){var t,n,s;for(n=0,s=e.length;n<s;n++)(t=e[n]).processing=!0,t.status=i.UPLOADING,this.emit("processing",t);return this.options.uploadMultiple&&this.emit("processingmultiple",e),this.uploadFiles(e)},i.prototype._getFilesWithXhr=function(e){var t;return function(){var i,n,s,a;for(a=[],i=0,n=(s=this.files).length;i<n;i++)(t=s[i]).xhr===e&&a.push(t);return a}.call(this)},i.prototype.cancelUpload=function(e){var t,n,s,a,o,r,l;if(e.status===i.UPLOADING){for(s=0,o=(n=this._getFilesWithXhr(e.xhr)).length;s<o;s++)(t=n[s]).status=i.CANCELED;for(e.xhr.abort(),a=0,r=n.length;a<r;a++)t=n[a],this.emit("canceled",t);this.options.uploadMultiple&&this.emit("canceledmultiple",n)}else(l=e.status)!==i.ADDED&&l!==i.QUEUED||(e.status=i.CANCELED,this.emit("canceled",e),this.options.uploadMultiple&&this.emit("canceledmultiple",[e]));if(this.options.autoProcessQueue)return this.processQueue()},s=function(){var e,t;return t=arguments[0],e=2<=arguments.length?l.call(arguments,1):[],"function"==typeof t?t.apply(this,e):t},i.prototype.uploadFile=function(e){return this.uploadFiles([e])},i.prototype.uploadFiles=function(e){var t,a,o,r,l,d,c,u,h,p,f,m,g,v,b,_,$,y,w,C,x,k,T,N,S,D,I,P,E,A,M,L,O;for(y=new XMLHttpRequest,w=0,T=e.length;w<T;w++)(t=e[w]).xhr=y;m=s(this.options.method,e),_=s(this.options.url,e),y.open(m,_,!0),y.withCredentials=!!this.options.withCredentials,v=null,o=function(i){return function(){var n,s,a;for(a=[],n=0,s=e.length;n<s;n++)t=e[n],0==y.status?(i.options.dictResponseError="Entire network connection being down.",a.push(i._errorProcessing(e,v||i.options.dictResponseError,y))):a.push(i._errorProcessing(e,v||i.options.dictResponseError.replace("{{statusCode}}",y.status),y));return a}}(this),b=function(i){return function(n){var s,a,o,r,l,d,c,u,h;if(null!=n)for(a=100*n.loaded/n.total,o=0,d=e.length;o<d;o++)(t=e[o]).upload={progress:a,total:n.total,bytesSent:n.loaded};else{for(s=!0,a=100,r=0,c=e.length;r<c;r++)100===(t=e[r]).upload.progress&&t.upload.bytesSent===t.upload.total||(s=!1),t.upload.progress=a,t.upload.bytesSent=t.upload.total;if(s)return}for(h=[],l=0,u=e.length;l<u;l++)t=e[l],h.push(i.emit("uploadprogress",t,a,t.upload.bytesSent));return h}}(this),y.onload=function(t){return function(n){var s;if(e[0].status!==i.CANCELED&&4===y.readyState){if(v=y.responseText,y.getResponseHeader("content-type")&&~y.getResponseHeader("content-type").indexOf("application/json"))try{v=JSON.parse(v)}catch(e){n=e,v="Invalid JSON response from server."}return b(),200<=(s=y.status)&&s<300?t._finished(e,v,n):o()}}}(this),y.onerror=function(){if(e[0].status!==i.CANCELED)return o()},(null!=(P=y.upload)?P:y).onprogress=b,d={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"},this.options.headers&&n(d,this.options.headers);for(r in d)(l=d[r])&&y.setRequestHeader(r,l);if(a=new FormData,this.options.params){E=this.options.params;for(f in E)$=E[f],a.append(f,$)}for(C=0,N=e.length;C<N;C++)t=e[C],this.emit("sending",t,y,a);if(this.options.uploadMultiple&&this.emit("sendingmultiple",e,y,a),"FORM"===this.element.tagName)for(x=0,S=(A=this.element.querySelectorAll("input, textarea, select, button")).length;x<S;x++)if(u=A[x],h=u.getAttribute("name"),p=u.getAttribute("type"),"SELECT"===u.tagName&&u.hasAttribute("multiple"))for(k=0,D=(M=u.options).length;k<D;k++)(g=M[k]).selected&&a.append(h,g.value);else(!p||"checkbox"!==(L=p.toLowerCase())&&"radio"!==L||u.checked)&&a.append(h,u.value);for(c=I=0,O=e.length-1;0<=O?I<=O:I>=O;c=0<=O?++I:--I)a.append(this._getParamName(c),e[c],e[c].name);return this.submitRequest(y,a,e)},i.prototype.submitRequest=function(e,t,i){return e.send(t)},i.prototype._finished=function(e,t,n){var s,a,o;for(a=0,o=e.length;a<o;a++)(s=e[a]).status=i.SUCCESS,this.emit("success",s,t,n),this.emit("complete",s);if(this.options.uploadMultiple&&(this.emit("successmultiple",e,t,n),this.emit("completemultiple",e)),this.options.autoProcessQueue)return this.processQueue()},i.prototype._errorProcessing=function(e,t,n){var s,a,o;for(a=0,o=e.length;a<o;a++)(s=e[a]).status=i.ERROR,this.emit("error",s,t,n),this.emit("complete",s);if(this.options.uploadMultiple&&(this.emit("errormultiple",e,t,n),this.emit("completemultiple",e)),this.options.autoProcessQueue)return this.processQueue()},i}()).version="4.2.0",e.options={},e.optionsForElement=function(t){return t.getAttribute("id")?e.options[i(t.getAttribute("id"))]:void 0},e.instances=[],e.forElement=function(e){if("string"==typeof e&&(e=document.querySelector(e)),null==(null!=e?e.dropzone:void 0))throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return e.dropzone},e.autoDiscover=!0,e.discover=function(){var t,i,n,s,a,o;for(document.querySelectorAll?n=document.querySelectorAll(".dropzone"):(n=[],(t=function(e){var t,i,s,a;for(a=[],i=0,s=e.length;i<s;i++)t=e[i],/(^| )dropzone($| )/.test(t.className)?a.push(n.push(t)):a.push(void 0);return a})(document.getElementsByTagName("div")),t(document.getElementsByTagName("form"))),o=[],s=0,a=n.length;s<a;s++)i=n[s],!1!==e.optionsForElement(i)?o.push(new e(i)):o.push(void 0);return o},e.blacklistedBrowsers=[/opera.*Macintosh.*version\/12/i],e.isBrowserSupported=function(){var t,i,n,s;if(t=!0,window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a"))for(i=0,n=(s=e.blacklistedBrowsers).length;i<n;i++)s[i].test(navigator.userAgent)&&(t=!1);else t=!1;else t=!1;return t},r=function(e,t){var i,n,s,a;for(a=[],n=0,s=e.length;n<s;n++)(i=e[n])!==t&&a.push(i);return a},i=function(e){return e.replace(/[\-_](\w)/g,function(e){return e.charAt(1).toUpperCase()})},e.createElement=function(e){var t;return t=document.createElement("div"),t.innerHTML=e,t.childNodes[0]},e.elementInside=function(e,t){if(e===t)return!0;for(;e=e.parentNode;)if(e===t)return!0;return!1},e.getElement=function(e,t){var i;if("string"==typeof e?i=document.querySelector(e):null!=e.nodeType&&(i=e),null==i)throw new Error("Invalid `"+t+"` option provided. Please provide a CSS selector or a plain HTML element.");return i},e.getElements=function(e,t){var i,n,s,a,o,r,l;if(e instanceof Array){n=[];try{for(s=0,o=e.length;s<o;s++)i=e[s],n.push(this.getElement(i,t))}catch(e){e,n=null}}else if("string"==typeof e)for(n=[],a=0,r=(l=document.querySelectorAll(e)).length;a<r;a++)i=l[a],n.push(i);else null!=e.nodeType&&(n=[e]);if(null==n||!n.length)throw new Error("Invalid `"+t+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.");return n},e.confirm=function(e,t,i){return window.confirm(e)?t():null!=i?i():void 0},e.isValidFile=function(e,t){var i,n,s,a,o;if(!t)return!0;for(t=t.split(","),i=(n=e.type).replace(/\/.*$/,""),a=0,o=t.length;a<o;a++)if(s=t[a],"."===(s=s.trim()).charAt(0)){if(-1!==e.name.toLowerCase().indexOf(s.toLowerCase(),e.name.length-s.length))return!0}else if(/\/\*$/.test(s)){if(i===s.replace(/\/.*$/,""))return!0}else if(n===s)return!0;return!1},"undefined"!=typeof jQuery&&null!==jQuery&&(jQuery.fn.dropzone=function(t){return this.each(function(){return new e(this,t)})}),"undefined"!=typeof module&&null!==module?module.exports=e:window.Dropzone=e,e.ADDED="added",e.QUEUED="queued",e.ACCEPTED=e.QUEUED,e.UPLOADING="uploading",e.PROCESSING=e.UPLOADING,e.CANCELED="canceled",e.ERROR="error",e.SUCCESS="success",s=function(e){var t,i,n,s,a,o,r,l;for(e.naturalWidth,a=e.naturalHeight,(t=document.createElement("canvas")).width=1,t.height=a,(i=t.getContext("2d")).drawImage(e,0,0),n=i.getImageData(0,0,1,a).data,l=0,s=a,o=a;o>l;)0===n[4*(o-1)+3]?s=o:l=o,o=s+l>>1;return 0===(r=o/a)?1:r},a=function(e,t,i,n,a,o,r,l,d,c){var u;return u=s(t),e.drawImage(t,i,n,a,o,r,l,d,c/u)},n=function(e,t){var i,n,s,a,o,r,l,d,c;if(s=!1,c=!0,n=e.document,d=n.documentElement,i=n.addEventListener?"addEventListener":"attachEvent",l=n.addEventListener?"removeEventListener":"detachEvent",r=n.addEventListener?"":"on",a=function(i){if("readystatechange"!==i.type||"complete"===n.readyState)return("load"===i.type?e:n)[l](r+i.type,a,!1),!s&&(s=!0)?t.call(e,i.type||i):void 0},o=function(){try{d.doScroll("left")}catch(e){return e,void setTimeout(o,50)}return a("poll")},"complete"!==n.readyState){if(n.createEventObject&&d.doScroll){try{c=!e.frameElement}catch(e){}c&&o()}return n[i](r+"DOMContentLoaded",a,!1),n[i](r+"readystatechange",a,!1),e[i](r+"load",a,!1)}},e._autoDiscoverFunction=function(){if(e.autoDiscover)return e.discover()},n(window,e._autoDiscoverFunction)}.call(this),$(document).ready(function(){checkBrowser(),$("body").on("keydown",".user_login_form #password",function(e){13===(e.keyCode?e.keyCode:e.which)&&(DoLogin(),e.preventDefault())}),$("body").on("keydown",".user_login_form #emailaddress",function(e){13===(e.keyCode?e.keyCode:e.which)&&(DoLogin(),e.preventDefault())}),"undefined"!=typeof session_file_name&&""!=session_file_name&&checkUserInactivity()}),window.puJsFileLoadCounter++,function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.NProgress=t()}(this,function(){function e(e,t,i){return e<t?t:e>i?i:e}function t(e){return 100*(-1+e)}function i(e,i,n){var s;return s="translate3d"===d.positionUsing?{transform:"translate3d("+t(e)+"%,0,0)"}:"translate"===d.positionUsing?{transform:"translate("+t(e)+"%,0)"}:{"margin-left":t(e)+"%"},s.transition="all "+i+"ms "+n,s}function n(e,t){return("string"==typeof e?e:o(e)).indexOf(" "+t+" ")>=0}function s(e,t){var i=o(e),s=i+t;n(i,t)||(e.className=s.substring(1))}function a(e,t){var i,s=o(e);n(e,t)&&(i=s.replace(" "+t+" "," "),e.className=i.substring(1,i.length-1))}function o(e){return(" "+(e.className||"")+" ").replace(/\s+/gi," ")}function r(e){e&&e.parentNode&&e.parentNode.removeChild(e)}var l={};l.version="0.2.0";var d=l.settings={minimum:.08,easing:"ease",positionUsing:"",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};l.configure=function(e){var t,i;for(t in e)void 0!==(i=e[t])&&e.hasOwnProperty(t)&&(d[t]=i);return this},l.status=null,l.set=function(t){var n=l.isStarted();t=e(t,d.minimum,1),l.status=1===t?null:t;var s=l.render(!n),a=s.querySelector(d.barSelector),o=d.speed,r=d.easing;return s.offsetWidth,c(function(e){""===d.positionUsing&&(d.positionUsing=l.getPositioningCSS()),u(a,i(t,o,r)),1===t?(u(s,{transition:"none",opacity:1}),s.offsetWidth,setTimeout(function(){u(s,{transition:"all "+o+"ms linear",opacity:0}),setTimeout(function(){l.remove(),e()},o)},o)):setTimeout(e,o)}),this},l.isStarted=function(){return"number"==typeof l.status},l.start=function(e){if($("#1_classes").hasClass("_active"))1==newVersionClick?$(".greyloader-Full").show():0==$(".dashboard .set-height.active").length?$(".greyloader-Full").show():2==$(".dashboard .set-height.active").length?1==instanceClick?($(".greyloader-Full").show(),$(".greyloader-TwoPane").hide(),instanceClick=!1):($(".greyloader-Full").hide(),$(".greyloader-TwoPane").show()):3==$(".dashboard .set-height.active").length&&(1==threepanefirstDivClick?($(".greyloader-ThreePane-Twodiv").show(),threepanefirstDivClick=!1):1==threepaneSecondDivClick&&("block"!=$(".greyloader-ThreePane-Twodiv").css("display")&&$(".greyloader-ThreePane-oneDiv").show(),threepaneSecondDivClick=!1));else if(e){var t=$("#react-flx-loader"),i=$("#menudashboard"),n=$(".right-action-bar"),s=0,a=$(window).height(),o=$(".breadcrumb-wrap").outerHeight();i.outerHeight()?a=i.outerHeight():a-=o+40,"middle"==e.position?(s=i.outerWidth()+$(".shortcut-icon").outerWidth(),isActionMenuFlyoutOpen()&&(s+=$(".shortcut-icon").outerWidth())):"right"==e.position?s=i.find("#rightPane").outerWidth()+n.outerWidth():"full"==e.position&&(s=$("body").outerWidth(),a+=$(".breadcrumb-wrap").outerHeight()),t.width(s+1).height(a).removeClass("hide"),this.loader_position=e.position}else{$(".sidebar_wrap").find(".menu-main-wrap").find("._active:first").find(".dashboards").find(".icon-wrap").find(".strat_click").find("span").text();l.start({position:"middle"})}l.status||l.set(0);var r=function(){setTimeout(function(){l.status&&(l.trickle(),r())},d.trickleSpeed)};return d.trickle&&r(),this},l.done=function(e){return this.loader_position?($("#react-flx-loader").addClass("hide"),$(".greyloader-Full").hide(),delete this.loader_position):($(".greyloader-TwoPane").hide(),$(".greyloader-ThreePane-oneDiv").hide(),$(".greyloader-Full").hide(),$(".greyloader-ThreePane-Twodiv").hide()),e||l.status?l.inc(.3+.5*Math.random()).set(1):this},l.inc=function(t){var i=l.status;return i?("number"!=typeof t&&(t=(1-i)*e(Math.random()*i,.1,.95)),i=e(i+t,0,.994),l.set(i)):l.start()},l.trickle=function(){return l.inc(Math.random()*d.trickleRate)},function(){var e=0,t=0;l.promise=function(i){return i&&"resolved"!==i.state()?(0===t&&l.start(),e++,t++,i.always(function(){0===--t?(e=0,l.done()):l.set((e-t)/e)}),this):this}}(),l.render=function(e){if(l.isRendered())return document.getElementById("nprogress");s(document.documentElement,"nprogress-busy");var i=document.createElement("div");i.id="nprogress",i.innerHTML=d.template;var n,a=i.querySelector(d.barSelector),o=e?"-100":t(l.status||0),c=document.querySelector(d.parent);return u(a,{transition:"all 0 linear",transform:"translate3d("+o+"%,0,0)"}),d.showSpinner||(n=i.querySelector(d.spinnerSelector))&&r(n),c!=document.body&&s(c,"nprogress-custom-parent"),c.appendChild(i),i},l.remove=function(){a(document.documentElement,"nprogress-busy"),a(document.querySelector(d.parent),"nprogress-custom-parent");var e=document.getElementById("nprogress");e&&r(e)},l.isRendered=function(){return!!document.getElementById("nprogress")},l.getPositioningCSS=function(){var e=document.body.style,t="WebkitTransform"in e?"Webkit":"MozTransform"in e?"Moz":"msTransform"in e?"ms":"OTransform"in e?"O":"";return t+"Perspective"in e?"translate3d":t+"Transform"in e?"translate":"margin"};var c=function(){function e(){var i=t.shift();i&&i(e)}var t=[];return function(i){t.push(i),1==t.length&&e()}}(),u=function(){function e(e){return e.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(e,t){return t.toUpperCase()})}function t(e){var t=document.body.style;if(e in t)return e;for(var i,n=s.length,a=e.charAt(0).toUpperCase()+e.slice(1);n--;)if((i=s[n]+a)in t)return i;return e}function i(i){return i=e(i),a[i]||(a[i]=t(i))}function n(e,t,n){t=i(t),e.style[t]=n}var s=["Webkit","O","Moz","ms"],a={};return function(e,t){var i,s,a=arguments;if(2==a.length)for(i in t)void 0!==(s=t[i])&&t.hasOwnProperty(i)&&n(e,i,s);else n(e,a[1],a[2])}}();return l}),window.puJsFileLoadCounter++,function(e,t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):e.bootbox=t(e.jQuery)}(this,function e(t,i){"use strict";function n(e){var t=g[f.locale];return t?t[e]:g.en[e]}function s(e,i,n){e.stopPropagation(),e.preventDefault(),t.isFunction(n)&&!1===n.call(i,e)||i.modal("hide")}function a(e){var t,i=0;for(t in e)i++;return i}function o(e,i){var n=0;t.each(e,function(e,t){i(e,t,n++)})}function r(e){var i,n;if("object"!=typeof e)throw new Error("Please supply an object of options");if(!e.message)throw new Error("Please specify a message");return(e=t.extend({},f,e)).buttons||(e.buttons={}),i=e.buttons,n=a(i),o(i,function(e,s,a){if(t.isFunction(s)&&(s=i[e]={callback:s}),"object"!==t.type(s))throw new Error("button with key "+e+" must be an object");s.label||(s.label=e),s.className||(s.className=2>=n&&a===n-1?"btn-primary":"btn-default")}),e}function l(e,t){var i=e.length,n={};if(1>i||i>2)throw new Error("Invalid argument length");return 2===i||"string"==typeof e[0]?(n[t[0]]=e[0],n[t[1]]=e[1]):n=e[0],n}function d(e,i,n){return t.extend(!0,{},e,l(i,n))}function c(e,t,i,n){return h(d({className:"bootbox-"+e,buttons:u.apply(null,t)},n,i),t)}function u(){for(var e={},t=0,i=arguments.length;i>t;t++){var s=arguments[t],a=s.toLowerCase(),o=s.toUpperCase();e[a]={label:n(o)}}return e}function h(e,t){var n={};return o(t,function(e,t){n[t]=!0}),o(e.buttons,function(e){if(n[e]===i)throw new Error("button key "+e+" is not allowed (options are "+t.join("\n")+")")}),e}var p={dialog:"<div class='bootbox modal' tabindex='-1' role='dialog'><div class='modal-dialog'><div class='modal-content'><div class='modal-body'><div class='bootbox-body'></div></div></div></div></div>",header:"<div class='modal-header'><h4 class='modal-title'></h4></div>",footer:"<div class='modal-footer'></div>",closeButton:"<button type='button' class='bootbox-close-button close' data-dismiss='modal' aria-hidden='true'><span aria-hidden='true'><i class='icon close'></i></span></button>",form:"<form class='bootbox-form'></form>",inputs:{text:"<input class='bootbox-input bootbox-input-text form-control' autocomplete=off type=text />",textarea:"<textarea class='bootbox-input bootbox-input-textarea form-control'></textarea>",email:"<input class='bootbox-input bootbox-input-email form-control' autocomplete='off' type='email' />",select:"<select class='bootbox-input bootbox-input-select form-control'></select>",checkbox:"<div class='checkbox'><label><input class='bootbox-input bootbox-input-checkbox' type='checkbox' /></label></div>",date:"<input class='bootbox-input bootbox-input-date form-control' autocomplete=off type='date' />",time:"<input class='bootbox-input bootbox-input-time form-control' autocomplete=off type='time' />",number:"<input class='bootbox-input bootbox-input-number form-control' autocomplete=off type='number' />",password:"<input class='bootbox-input bootbox-input-password form-control' autocomplete='off' type='password' />"}},f={locale:"en",backdrop:"static",animate:!0,className:null,closeButton:!0,show:!0,container:"body"},m={};m.alert=function(){var e;if((e=c("alert",["ok"],["message","callback"],arguments)).callback&&!t.isFunction(e.callback))throw new Error("alert requires callback property to be a function when provided");return e.buttons.ok.callback=e.onEscape=function(){return!t.isFunction(e.callback)||e.callback.call(this)},m.dialog(e)},m.confirm=function(){var e;if(e=c("confirm",["cancel","confirm"],["message","callback"],arguments),e.buttons.cancel.callback=e.onEscape=function(){return e.callback.call(this,!1)},e.buttons.confirm.callback=function(){return e.callback.call(this,!0)},!t.isFunction(e.callback))throw new Error("confirm requires a callback");return m.dialog(e)},m.prompt=function(){var e,n,s,a,r,l,c;if(a=t(p.form),n={className:"bootbox-prompt",buttons:u("cancel","confirm"),value:"",inputType:"text"},e=h(d(n,arguments,["title","callback"]),["cancel","confirm"]),l=e.show===i||e.show,e.message=a,e.buttons.cancel.callback=e.onEscape=function(){return e.callback.call(this,null)},e.buttons.confirm.callback=function(){var i;switch(e.inputType){case"text":case"textarea":case"email":case"select":case"date":case"time":case"number":case"password":i=r.val();break;case"checkbox":var n=r.find("input:checked");i=[],o(n,function(e,n){i.push(t(n).val())})}return e.callback.call(this,i)},e.show=!1,!e.title)throw new Error("prompt requires a title");if(!t.isFunction(e.callback))throw new Error("prompt requires a callback");if(!p.inputs[e.inputType])throw new Error("invalid prompt type");switch(r=t(p.inputs[e.inputType]),e.inputType){case"text":case"textarea":case"email":case"date":case"time":case"number":case"password":r.val(e.value);break;case"select":var f={};if(c=e.inputOptions||[],!t.isArray(c))throw new Error("Please pass an array of input options");if(!c.length)throw new Error("prompt with select requires options");o(c,function(e,n){var s=r;if(n.value===i||n.text===i)throw new Error("given options in wrong format");n.group&&(f[n.group]||(f[n.group]=t("<optgroup/>").attr("label",n.group)),s=f[n.group]),s.append("<option value='"+n.value+"'>"+n.text+"</option>")}),o(f,function(e,t){r.append(t)}),r.val(e.value);break;case"checkbox":var g=t.isArray(e.value)?e.value:[e.value];if(!(c=e.inputOptions||[]).length)throw new Error("prompt with checkbox requires options");if(!c[0].value||!c[0].text)throw new Error("given options in wrong format");r=t("<div/>"),o(c,function(i,n){var s=t(p.inputs[e.inputType]);s.find("input").attr("value",n.value),s.find("label").append(n.text),o(g,function(e,t){t===n.value&&s.find("input").prop("checked",!0)}),r.append(s)})}return e.placeholder&&r.attr("placeholder",e.placeholder),e.pattern&&r.attr("pattern",e.pattern),e.maxlength&&r.attr("maxlength",e.maxlength),a.append(r),a.on("submit",function(e){e.preventDefault(),e.stopPropagation(),s.find(".btn-primary").click()}),(s=m.dialog(e)).off("shown.bs.modal"),s.on("shown.bs.modal",function(){r.focus()}),!0===l&&s.modal("show"),s},m.dialog=function(e){e=r(e);var n=t(p.dialog),a=n.find(".modal-dialog"),l=n.find(".modal-body"),d=e.buttons,c="",u={onEscape:e.onEscape};if(t.fn.modal===i)throw new Error("$.fn.modal is not defined; please double check you have included the Bootstrap JavaScript library. See http://getbootstrap.com/javascript/ for more details.");if(o(d,function(e,t){c+="<button data-bb-handler='"+e+"' type='button' class='btn "+t.className+"'>"+t.label+"</button>",u[e]=t.callback}),l.find(".bootbox-body").html(e.message),!0===e.animate&&n.addClass("fade"),e.className&&n.addClass(e.className),"large"===e.size?a.addClass("modal-lg"):"small"===e.size&&a.addClass("modal-sm"),e.title&&l.before(p.header),e.closeButton){var h=t(p.closeButton);e.title?n.find(".modal-header").prepend(h):h.css("margin-top","-10px").prependTo(l)}return e.title&&n.find(".modal-title").html(e.title),c.length&&(l.after(p.footer),n.find(".modal-footer").html(c)),n.on("hidden.bs.modal",function(e){e.target===this&&n.remove()}),n.on("shown.bs.modal",function(){n.find(".btn-primary:first").focus()}),"static"!==e.backdrop&&n.on("click.dismiss.bs.modal",function(e){n.children(".modal-backdrop").length&&(e.currentTarget=n.children(".modal-backdrop").get(0)),e.target===e.currentTarget&&n.trigger("escape.close.bb")}),n.on("escape.close.bb",function(e){u.onEscape&&s(e,n,u.onEscape)}),n.on("click",".modal-footer button",function(e){var i=t(this).data("bb-handler");s(e,n,u[i])}),n.on("click",".bootbox-close-button",function(e){s(e,n,u.onEscape)}),n.on("keyup",function(e){27===e.which&&n.trigger("escape.close.bb")}),t(e.container).append(n),n.modal({backdrop:!!e.backdrop&&"static",keyboard:!1,show:!1}),e.show&&n.modal("show"),n},m.setDefaults=function(){var e={};2===arguments.length?e[arguments[0]]=arguments[1]:e=arguments[0],t.extend(f,e)},m.hideAll=function(){return t(".bootbox").modal("hide"),m};var g={bg_BG:{OK:"Ок",CANCEL:"Отказ",CONFIRM:"Потвърждавам"},br:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Sim"},cs:{OK:"OK",CANCEL:"Zrušit",CONFIRM:"Potvrdit"},da:{OK:"OK",CANCEL:"Annuller",CONFIRM:"Accepter"},de:{OK:"OK",CANCEL:"Abbrechen",CONFIRM:"Akzeptieren"},el:{OK:"Εντάξει",CANCEL:"Ακύρωση",CONFIRM:"Επιβεβαίωση"},en:{OK:"Ok",CANCEL:"No",CONFIRM:"Yes"},es:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Aceptar"},et:{OK:"OK",CANCEL:"Katkesta",CONFIRM:"OK"},fa:{OK:"قبول",CANCEL:"لغو",CONFIRM:"تایید"},fi:{OK:"OK",CANCEL:"Peruuta",CONFIRM:"OK"},fr:{OK:"OK",CANCEL:"Annuler",CONFIRM:"D'accord"},he:{OK:"אישור",CANCEL:"ביטול",CONFIRM:"אישור"},hu:{OK:"OK",CANCEL:"Mégsem",CONFIRM:"Megerősít"},hr:{OK:"OK",CANCEL:"Odustani",CONFIRM:"Potvrdi"},id:{OK:"OK",CANCEL:"Batal",CONFIRM:"OK"},it:{OK:"OK",CANCEL:"Annulla",CONFIRM:"Conferma"},ja:{OK:"OK",CANCEL:"キャンセル",CONFIRM:"確認"},lt:{OK:"Gerai",CANCEL:"Atšaukti",CONFIRM:"Patvirtinti"},lv:{OK:"Labi",CANCEL:"Atcelt",CONFIRM:"Apstiprināt"},nl:{OK:"OK",CANCEL:"Annuleren",CONFIRM:"Accepteren"},no:{OK:"OK",CANCEL:"Avbryt",CONFIRM:"OK"},pl:{OK:"OK",CANCEL:"Anuluj",CONFIRM:"Potwierdź"},pt:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Confirmar"},ru:{OK:"OK",CANCEL:"Отмена",CONFIRM:"Применить"},sq:{OK:"OK",CANCEL:"Anulo",CONFIRM:"Prano"},sv:{OK:"OK",CANCEL:"Avbryt",CONFIRM:"OK"},th:{OK:"ตกลง",CANCEL:"ยกเลิก",CONFIRM:"ยืนยัน"},tr:{OK:"Tamam",CANCEL:"İptal",CONFIRM:"Onayla"},zh_CN:{OK:"OK",CANCEL:"取消",CONFIRM:"确认"},zh_TW:{OK:"OK",CANCEL:"取消",CONFIRM:"確認"}};return m.addLocale=function(e,i){return t.each(["OK","CANCEL","CONFIRM"],function(e,t){if(!i[t])throw new Error("Please supply a translation for '"+t+"'")}),g[e]={OK:i.OK,CANCEL:i.CANCEL,CONFIRM:i.CONFIRM},m},m.removeLocale=function(e){return delete g[e],m},m.setLocale=function(e){return m.setDefaults("locale",e)},m.init=function(i){return e(i||t)},m}),window.puJsFileLoadCounter++,function(e,t){"function"==typeof define&&define.amd?define(e):"undefined"!=typeof module&&"object"==typeof exports?module.exports=e():t.rangy=e()}(function(){function e(e,t){var i=typeof e[t];return i==v||!(i!=g||!e[t])||"unknown"==i}function t(e,t){return!(typeof e[t]!=g||!e[t])}function i(e,t){return typeof e[t]!=b}function n(e){return function(t,i){for(var n=i.length;n--;)if(!e(t,i[n]))return!1;return!0}}function s(e){return e&&C(e,w)&&k(e,y)}function a(e){return t(e,"body")?e.body:e.getElementsByTagName("body")[0]}function o(t){typeof console!=b&&e(console,"log")&&console.log(t)}function r(e,t){S&&t?alert(e):o(e)}function l(e){I.initialized=!0,I.supported=!1,r("Rangy is not supported in this environment. Reason: "+e,I.config.alertOnFail)}function d(e){return e.message||e.description||String(e)}function c(){if(S&&!I.initialized){var t,i=!1,n=!1;e(document,"createRange")&&(t=document.createRange(),C(t,$)&&k(t,_)&&(i=!0));var r=a(document);if(!r||"body"!=r.nodeName.toLowerCase())return void l("No body element found");if(r&&e(r,"createTextRange")&&(t=r.createTextRange(),s(t)&&(n=!0)),!i&&!n)return void l("Neither Range nor TextRange are available");I.initialized=!0,I.features={implementsDomRange:i,implementsTextRange:n};var c;for(var u in N)(c=N[u])instanceof p&&c.init(c,I);for(var h=0,f=A.length;f>h;++h)try{A[h](I)}catch(e){o("Rangy init listener threw an exception. Continuing. Detail: "+d(e))}}}function u(e,t,i){i&&(e+=" in module "+i.name),I.warn("DEPRECATED: "+e+" is deprecated. Please use "+t+" instead.")}function h(e,t,i,n){e[t]=function(){return u(t,i,n),e[i].apply(e,D.toArray(arguments))}}function p(e,t,i){this.name=e,this.dependencies=t,this.initialized=!1,this.supported=!1,this.initializer=i}function f(e,t,i){var n=new p(e,t,function(t){if(!t.initialized){t.initialized=!0;try{i(I,t),t.supported=!0}catch(t){o("Module '"+e+"' failed to load: "+d(t)),t.stack&&o(t.stack)}}});return N[e]=n,n}function m(){}var g="object",v="function",b="undefined",_=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],$=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"],y=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"],w=["collapse","compareEndPoints","duplicate","moveToElementText","parentElement","select","setEndPoint","getBoundingClientRect"],C=n(e),x=n(t),k=n(i),T=[].forEach?function(e,t){e.forEach(t)}:function(e,t){for(var i=0,n=e.length;n>i;++i)t(e[i],i)},N={},S=typeof window!=b&&typeof document!=b,D={isHostMethod:e,isHostObject:t,isHostProperty:i,areHostMethods:C,areHostObjects:x,areHostProperties:k,isTextRange:s,getBody:a,forEach:T},I={version:"1.3.0",initialized:!1,isBrowser:S,supported:!0,util:D,features:{},modules:N,config:{alertOnFail:!1,alertOnWarn:!1,preferTextRange:!1,autoInitialize:typeof rangyAutoInitialize==b||rangyAutoInitialize}};I.fail=l,I.warn=function(e){r("Rangy warning: "+e,I.config.alertOnWarn)};var P;!{}.hasOwnProperty?l("hasOwnProperty not supported"):(D.extend=P=function(e,t,i){var n,s;for(var a in t)t.hasOwnProperty(a)&&(n=e[a],s=t[a],i&&null!==n&&"object"==typeof n&&null!==s&&"object"==typeof s&&P(n,s,!0),e[a]=s);return t.hasOwnProperty("toString")&&(e.toString=t.toString),e},D.createOptions=function(e,t){var i={};return P(i,t),e&&P(i,e),i}),S||l("Rangy can only run in a browser"),function(){var e;if(S){var t=document.createElement("div");t.appendChild(document.createElement("span"));var i=[].slice;try{1==i.call(t.childNodes,0)[0].nodeType&&(e=function(e){return i.call(e,0)})}catch(e){}}e||(e=function(e){for(var t=[],i=0,n=e.length;n>i;++i)t[i]=e[i];return t}),D.toArray=e}();var E;S&&(e(document,"addEventListener")?E=function(e,t,i){e.addEventListener(t,i,!1)}:e(document,"attachEvent")?E=function(e,t,i){e.attachEvent("on"+t,i)}:l("Document does not have required addEventListener or attachEvent method"),D.addListener=E);var A=[];D.deprecationNotice=u,D.createAliasForDeprecatedMethod=h,I.init=c,I.addInitListener=function(e){I.initialized?e(I):A.push(e)};var M=[];I.addShimListener=function(e){M.push(e)},S&&(I.shim=I.createMissingNativeApi=function(e){e=e||window,c();for(var t=0,i=M.length;i>t;++t)M[t](e)},h(I,"createMissingNativeApi","shim")),p.prototype={init:function(){for(var e,t,i=this.dependencies||[],n=0,s=i.length;s>n;++n){if(t=i[n],!((e=N[t])&&e instanceof p))throw new Error("required module '"+t+"' not found");if(e.init(),!e.supported)throw new Error("required module '"+t+"' not supported")}this.initializer(this)},fail:function(e){throw this.initialized=!0,this.supported=!1,new Error(e)},warn:function(e){I.warn("Module "+this.name+": "+e)},deprecationNotice:function(e,t){I.warn("DEPRECATED: "+e+" in module "+this.name+" is deprecated. Please use "+t+" instead")},createError:function(e){return new Error("Error in Rangy "+this.name+" module: "+e)}},I.createModule=function(e){var t,i;2==arguments.length?(t=arguments[1],i=[]):(t=arguments[2],i=arguments[1]);var n=f(e,i,t);I.initialized&&I.supported&&n.init()},I.createCoreModule=function(e,t,i){f(e,t,i)},I.RangePrototype=m,I.rangePrototype=new m,I.selectionPrototype=new function(){},I.createCoreModule("DomUtil",[],function(e,t){function i(e){for(var t=0;e=e.previousSibling;)++t;return t}function n(e,t){var i,n=[];for(i=e;i;i=i.parentNode)n.push(i);for(i=t;i;i=i.parentNode)if(w(n,i))return i;return null}function s(e,t,i){for(var n=i?t:t.parentNode;n;){if(n===e)return!0;n=n.parentNode}return!1}function a(e,t,i){for(var n,s=i?e:e.parentNode;s;){if((n=s.parentNode)===t)return s;s=n}return null}function o(e){var t=e.nodeType;return 3==t||4==t||8==t}function r(e,t){var i=t.nextSibling,n=t.parentNode;return i?n.insertBefore(e,i):n.appendChild(e),e}function l(e){if(9==e.nodeType)return e;if(typeof e.ownerDocument!=v)return e.ownerDocument;if(typeof e.document!=v)return e.document;if(e.parentNode)return l(e.parentNode);throw t.createError("getDocument: no document found for node")}function d(e){var i=l(e);if(typeof i.defaultView!=v)return i.defaultView;if(typeof i.parentWindow!=v)return i.parentWindow;throw t.createError("Cannot get a window object for node")}function c(e){if(typeof e.contentDocument!=v)return e.contentDocument;if(typeof e.contentWindow!=v)return e.contentWindow.document;throw t.createError("getIframeDocument: No Document object found for iframe element")}function u(e){return e&&b.isHostMethod(e,"setTimeout")&&b.isHostObject(e,"document")}function h(e){try{return e.parentNode,!1}catch(e){return!0}}function p(e){if(!e)return"[No node]";if(C&&h(e))return"[Broken node]";if(o(e))return'"'+e.data+'"';if(1==e.nodeType){var t=e.id?' id="'+e.id+'"':"";return"<"+e.nodeName+t+">[index:"+i(e)+",length:"+e.childNodes.length+"]["+(e.innerHTML||"[innerHTML not supported]").slice(0,25)+"]"}return e.nodeName}function f(e){this.root=e,this._next=e}function m(e,t){this.node=e,this.offset=t}function g(e){this.code=this[e],this.codeName=e,this.message="DOMException: "+this.codeName}var v="undefined",b=e.util,_=b.getBody;b.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||t.fail("document missing a Node creation method"),b.isHostMethod(document,"getElementsByTagName")||t.fail("document missing getElementsByTagName method");var $=document.createElement("div");b.areHostMethods($,["insertBefore","appendChild","cloneNode"]||!b.areHostObjects($,["previousSibling","nextSibling","childNodes","parentNode"]))||t.fail("Incomplete Element implementation"),b.isHostProperty($,"innerHTML")||t.fail("Element is missing innerHTML property");var y=document.createTextNode("test");b.areHostMethods(y,["splitText","deleteData","insertData","appendData","cloneNode"]||!b.areHostObjects($,["previousSibling","nextSibling","childNodes","parentNode"])||!b.areHostProperties(y,["data"]))||t.fail("Incomplete Text Node implementation");var w=function(e,t){for(var i=e.length;i--;)if(e[i]===t)return!0;return!1},C=!1;!function(){var t=document.createElement("b");t.innerHTML="1";var i=t.firstChild;t.innerHTML="<br />",C=h(i),e.features.crashyTextNodes=C}();var x;typeof window.getComputedStyle!=v?x=function(e,t){return d(e).getComputedStyle(e,null)[t]}:typeof document.documentElement.currentStyle!=v?x=function(e,t){return e.currentStyle?e.currentStyle[t]:""}:t.fail("No means of obtaining computed style properties found"),f.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var e,t,i=this._current=this._next;if(this._current)if(e=i.firstChild)this._next=e;else{for(t=null;i!==this.root&&!(t=i.nextSibling);)i=i.parentNode;this._next=t}return this._current},detach:function(){this._current=this._next=this.root=null}},m.prototype={equals:function(e){return!!e&&this.node===e.node&&this.offset==e.offset},inspect:function(){return"[DomPosition("+p(this.node)+":"+this.offset+")]"},toString:function(){return this.inspect()}},(g.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11,INVALID_NODE_TYPE_ERR:24}).toString=function(){return this.message},e.dom={arrayContains:w,isHtmlNamespace:function(e){var t;return typeof e.namespaceURI==v||null===(t=e.namespaceURI)||"http://www.w3.org/1999/xhtml"==t},parentElement:function(e){var t=e.parentNode;return 1==t.nodeType?t:null},getNodeIndex:i,getNodeLength:function(e){switch(e.nodeType){case 7:case 10:return 0;case 3:case 8:return e.length;default:return e.childNodes.length}},getCommonAncestor:n,isAncestorOf:s,isOrIsAncestorOf:function(e,t){return s(e,t,!0)},getClosestAncestorIn:a,isCharacterDataNode:o,isTextOrCommentNode:function(e){if(!e)return!1;var t=e.nodeType;return 3==t||8==t},insertAfter:r,splitDataNode:function(e,t,n){var s=e.cloneNode(!1);if(s.deleteData(0,t),e.deleteData(t,e.length-t),r(s,e),n)for(var a,o=0;a=n[o++];)a.node==e&&a.offset>t?(a.node=s,a.offset-=t):a.node==e.parentNode&&a.offset>i(e)&&++a.offset;return s},getDocument:l,getWindow:d,getIframeWindow:function(e){if(typeof e.contentWindow!=v)return e.contentWindow;if(typeof e.contentDocument!=v)return e.contentDocument.defaultView;throw t.createError("getIframeWindow: No Window object found for iframe element")},getIframeDocument:c,getBody:_,isWindow:u,getContentDocument:function(e,t,i){var n;if(e?b.isHostProperty(e,"nodeType")?n=1==e.nodeType&&"iframe"==e.tagName.toLowerCase()?c(e):l(e):u(e)&&(n=e.document):n=document,!n)throw t.createError(i+"(): Parameter must be a Window object or DOM node");return n},getRootContainer:function(e){for(var t;t=e.parentNode;)e=t;return e},comparePoints:function(e,s,o,r){var l,d,c,u,h;if(e==o)return s===r?0:r>s?-1:1;if(l=a(o,e,!0))return s<=i(l)?-1:1;if(l=a(e,o,!0))return i(l)<r?-1:1;if(!(d=n(e,o)))throw new Error("comparePoints error: nodes have no common ancestor");if(c=e===d?d:a(e,d,!0),u=o===d?d:a(o,d,!0),c===u)throw t.createError("comparePoints got to case 4 and childA and childB are the same!");for(h=d.firstChild;h;){if(h===c)return-1;if(h===u)return 1;h=h.nextSibling}},isBrokenNode:h,inspectNode:p,getComputedStyleProperty:x,createTestElement:function(e,t,i){var n=_(e),s=e.createElement("div");s.contentEditable=""+!!i,t&&(s.innerHTML=t);var a=n.firstChild;return a?n.insertBefore(s,a):n.appendChild(s),s},removeNode:function(e){return e.parentNode.removeChild(e)},fragmentFromNodeChildren:function(e){for(var t,i=l(e).createDocumentFragment();t=e.firstChild;)i.appendChild(t);return i},createIterator:function(e){return new f(e)},DomPosition:m},e.DOMException=g}),I.createCoreModule("DomRange",["DomUtil"],function(e){function t(e,t){return 3!=e.nodeType&&(z(e,t.startContainer)||z(e,t.endContainer))}function i(e){return e.document||j(e.startContainer)}function n(e){return V(e.startContainer)}function s(e){return new O(e.parentNode,H(e))}function a(e){return new O(e.parentNode,H(e)+1)}function o(e,t,i){var n=11==e.nodeType?e.firstChild:e;return F(t)?i==t.length?M.insertAfter(e,t):t.parentNode.insertBefore(e,0==i?t:U(t,i)):i>=t.childNodes.length?t.appendChild(e):t.insertBefore(e,t.childNodes[i]),n}function r(e,t,n){if(x(e),x(t),i(t)!=i(e))throw new R("WRONG_DOCUMENT_ERR");var s=W(e.startContainer,e.startOffset,t.endContainer,t.endOffset),a=W(e.endContainer,e.endOffset,t.startContainer,t.startOffset);return n?0>=s&&a>=0:0>s&&a>0}function l(e){for(var t,n,s,a=i(e.range).createDocumentFragment();n=e.next();){if(t=e.isPartiallySelectedSubtree(),n=n.cloneNode(!t),t&&(s=e.getSubtreeIterator(),n.appendChild(l(s)),s.detach()),10==n.nodeType)throw new R("HIERARCHY_REQUEST_ERR");a.appendChild(n)}return a}function d(e,t,i){var n,s;i=i||{stop:!1};for(var a,o;a=e.next();)if(e.isPartiallySelectedSubtree()){if(!1===t(a))return void(i.stop=!0);if(o=e.getSubtreeIterator(),d(o,t,i),o.detach(),i.stop)return}else for(n=M.createIterator(a);s=n.next();)if(!1===t(s))return void(i.stop=!0)}function c(e){for(var t;e.next();)e.isPartiallySelectedSubtree()?(t=e.getSubtreeIterator(),c(t),t.detach()):e.remove()}function u(e){for(var t,n,s=i(e.range).createDocumentFragment();t=e.next();){if(e.isPartiallySelectedSubtree()?(t=t.cloneNode(!1),n=e.getSubtreeIterator(),t.appendChild(u(n)),n.detach()):e.remove(),10==t.nodeType)throw new R("HIERARCHY_REQUEST_ERR");s.appendChild(t)}return s}function h(e,t,i){var n,s=!(!t||!t.length),a=!!i;s&&(n=new RegExp("^("+t.join("|")+")$"));var o=[];return d(new f(e,!1),function(t){if(!(s&&!n.test(t.nodeType)||a&&!i(t))){var r=e.startContainer;if(t!=r||!F(r)||e.startOffset!=r.length){var l=e.endContainer;t==l&&F(l)&&0==e.endOffset||o.push(t)}}}),o}function p(e){return"["+(void 0===e.getName?"Range":e.getName())+"("+M.inspectNode(e.startContainer)+":"+e.startOffset+", "+M.inspectNode(e.endContainer)+":"+e.endOffset+")]"}function f(e,t){if(this.range=e,this.clonePartiallySelectedTextNodes=t,!e.collapsed){this.sc=e.startContainer,this.so=e.startOffset,this.ec=e.endContainer,this.eo=e.endOffset;var i=e.commonAncestorContainer;this.sc===this.ec&&F(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc!==i||F(this.sc)?B(this.sc,i,!0):this.sc.childNodes[this.so],this._last=this.ec!==i||F(this.ec)?B(this.ec,i,!0):this.ec.childNodes[this.eo-1])}}function m(e){return function(t,i){for(var n,s=i?t:t.parentNode;s;){if(n=s.nodeType,Y(e,n))return s;s=s.parentNode}return null}}function g(e,t){if(ne(e,t))throw new R("INVALID_NODE_TYPE_ERR")}function v(e,t){if(!Y(t,e.nodeType))throw new R("INVALID_NODE_TYPE_ERR")}function b(e,t){if(0>t||t>(F(e)?e.length:e.childNodes.length))throw new R("INDEX_SIZE_ERR")}function _(e,t){if(te(e,!0)!==te(t,!0))throw new R("WRONG_DOCUMENT_ERR")}function $(e){if(ie(e,!0))throw new R("NO_MODIFICATION_ALLOWED_ERR")}function y(e,t){if(!e)throw new R(t)}function w(e,t){return t<=(F(e)?e.length:e.childNodes.length)}function C(e){return!!e.startContainer&&!!e.endContainer&&!(X&&(M.isBrokenNode(e.startContainer)||M.isBrokenNode(e.endContainer)))&&V(e.startContainer)==V(e.endContainer)&&w(e.startContainer,e.startOffset)&&w(e.endContainer,e.endOffset)}function x(e){if(!C(e))throw new Error("Range error: Range is not valid. This usually happens after DOM mutation. Range: ("+e.inspect()+")")}function k(e,t){x(e);var i=e.startContainer,n=e.startOffset,s=e.endContainer,a=e.endOffset,o=i===s;F(s)&&a>0&&a<s.length&&U(s,a,t),F(i)&&n>0&&n<i.length&&(i=U(i,n,t),o?(a-=n,s=i):s==i.parentNode&&a>=H(i)&&a++,n=0),e.setStartAndEnd(i,n,s,a)}function T(e){x(e);var t=e.commonAncestorContainer.parentNode.cloneNode(!1);return t.appendChild(e.cloneContents()),t.innerHTML}function N(e){e.START_TO_START=le,e.START_TO_END=de,e.END_TO_END=ce,e.END_TO_START=ue,e.NODE_BEFORE=he,e.NODE_AFTER=pe,e.NODE_BEFORE_AND_AFTER=fe,e.NODE_INSIDE=me}function S(e){N(e),N(e.prototype)}function D(e,t){return function(){x(this);var i,n,s=this.startContainer,o=this.startOffset,r=this.commonAncestorContainer,l=new f(this,!0);s!==r&&(i=B(s,r,!0),n=a(i),s=n.node,o=n.offset),d(l,$),l.reset();var c=e(l);return l.detach(),t(this,s,o,s,o),c}}function I(i,n){function o(e,t){return function(i){v(i,K),v(V(i),Q);var n=(e?s:a)(i);(t?r:l)(this,n.node,n.offset)}}function r(e,t,i){var s=e.endContainer,a=e.endOffset;(t!==e.startContainer||i!==e.startOffset)&&((V(t)!=V(s)||1==W(t,i,s,a))&&(s=t,a=i),n(e,t,i,s,a))}function l(e,t,i){var s=e.startContainer,a=e.startOffset;(t!==e.endContainer||i!==e.endOffset)&&((V(t)!=V(s)||-1==W(t,i,s,a))&&(s=t,a=i),n(e,s,a,t,i))}var d=function(){};d.prototype=e.rangePrototype,i.prototype=new d,L.extend(i.prototype,{setStart:function(e,t){g(e,!0),b(e,t),r(this,e,t)},setEnd:function(e,t){g(e,!0),b(e,t),l(this,e,t)},setStartAndEnd:function(){var e=arguments,t=e[0],i=e[1],s=t,a=i;switch(e.length){case 3:a=e[2];break;case 4:s=e[2],a=e[3]}n(this,t,i,s,a)},setBoundary:function(e,t,i){this["set"+(i?"Start":"End")](e,t)},setStartBefore:o(!0,!0),setStartAfter:o(!1,!0),setEndBefore:o(!0,!1),setEndAfter:o(!1,!1),collapse:function(e){x(this),e?n(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):n(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(e){g(e,!0),n(this,e,0,e,q(e))},selectNode:function(e){g(e,!1),v(e,K);var t=s(e),i=a(e);n(this,t.node,t.offset,i.node,i.offset)},extractContents:D(u,n),deleteContents:D(c,n),canSurroundContents:function(){x(this),$(this.startContainer),$(this.endContainer);var e=new f(this,!0),i=e._first&&t(e._first,this)||e._last&&t(e._last,this);return e.detach(),!i},splitBoundaries:function(){k(this)},splitBoundariesPreservingPositions:function(e){k(this,e)},normalizeBoundaries:function(){x(this);var e,t=this.startContainer,i=this.startOffset,s=this.endContainer,a=this.endOffset,o=function(e){var t=e.nextSibling;t&&t.nodeType==e.nodeType&&(s=e,a=e.length,e.appendData(t.data),G(t))},r=function(e){var n=e.previousSibling;if(n&&n.nodeType==e.nodeType){t=e;var o=e.length;if(i=n.length,e.insertData(0,n.data),G(n),t==s)a+=i,s=t;else if(s==e.parentNode){var r=H(e);a==r?(s=e,a=o):a>r&&a--}}},l=!0;if(F(s))a==s.length?o(s):0==a&&(e=s.previousSibling)&&e.nodeType==s.nodeType&&(a=e.length,t==s&&(l=!1),e.appendData(s.data),G(s),s=e);else{if(a>0){var d=s.childNodes[a-1];d&&F(d)&&o(d)}l=!this.collapsed}if(l){if(F(t))0==i?r(t):i==t.length&&(e=t.nextSibling)&&e.nodeType==t.nodeType&&(s==e&&(s=t,a+=t.length),t.appendData(e.data),G(e));else if(i<t.childNodes.length){var c=t.childNodes[i];c&&F(c)&&r(c)}}else t=s,i=a;n(this,t,i,s,a)},collapseToPoint:function(e,t){g(e,!0),b(e,t),this.setStartAndEnd(e,t)}}),S(i)}function P(e){e.collapsed=e.startContainer===e.endContainer&&e.startOffset===e.endOffset,e.commonAncestorContainer=e.collapsed?e.startContainer:M.getCommonAncestor(e.startContainer,e.endContainer)}function E(e,t,i,n,s){e.startContainer=t,e.startOffset=i,e.endContainer=n,e.endOffset=s,e.document=M.getDocument(t),P(e)}function A(e){this.startContainer=e,this.startOffset=0,this.endContainer=e,this.endOffset=0,this.document=e,P(this)}var M=e.dom,L=e.util,O=M.DomPosition,R=e.DOMException,F=M.isCharacterDataNode,H=M.getNodeIndex,z=M.isOrIsAncestorOf,j=M.getDocument,W=M.comparePoints,U=M.splitDataNode,B=M.getClosestAncestorIn,q=M.getNodeLength,Y=M.arrayContains,V=M.getRootContainer,X=e.features.crashyTextNodes,G=M.removeNode;f.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null,this._next=this._first},hasNext:function(){return!!this._next},next:function(){var e=this._current=this._next;return e&&(this._next=e!==this._last?e.nextSibling:null,F(e)&&this.clonePartiallySelectedTextNodes&&(e===this.ec&&(e=e.cloneNode(!0)).deleteData(this.eo,e.length-this.eo),this._current===this.sc&&(e=e.cloneNode(!0)).deleteData(0,this.so))),e},remove:function(){var e,t,i=this._current;!F(i)||i!==this.sc&&i!==this.ec?i.parentNode&&G(i):(e=i===this.sc?this.so:0,t=i===this.ec?this.eo:i.length,e!=t&&i.deleteData(e,t-e))},isPartiallySelectedSubtree:function(){return t(this._current,this.range)},getSubtreeIterator:function(){var e;if(this.isSingleCharacterDataNode)(e=this.range.cloneRange()).collapse(!1);else{e=new A(i(this.range));var t=this._current,n=t,s=0,a=t,o=q(t);z(t,this.sc)&&(n=this.sc,s=this.so),z(t,this.ec)&&(a=this.ec,o=this.eo),E(e,n,s,a,o)}return new f(e,this.clonePartiallySelectedTextNodes)},detach:function(){this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}};var K=[1,3,4,5,7,8,10],Q=[2,9,11],J=[5,6,10,12],Z=[1,3,4,5,7,8,10,11],ee=[1,3,4,5,7,8],te=m([9,11]),ie=m(J),ne=m([6,10,12]),se=document.createElement("style"),ae=!1;try{se.innerHTML="<b>x</b>",ae=3==se.firstChild.nodeType}catch(e){}e.features.htmlParsingConforms=ae;var oe=ae?function(e){var t=this.startContainer,i=j(t);if(!t)throw new R("INVALID_STATE_ERR");var n=null;return 1==t.nodeType?n=t:F(t)&&(n=M.parentElement(t)),n=null===n||"HTML"==n.nodeName&&M.isHtmlNamespace(j(n).documentElement)&&M.isHtmlNamespace(n)?i.createElement("body"):n.cloneNode(!1),n.innerHTML=e,M.fragmentFromNodeChildren(n)}:function(e){var t=i(this).createElement("body");return t.innerHTML=e,M.fragmentFromNodeChildren(t)},re=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],le=0,de=1,ce=2,ue=3,he=0,pe=1,fe=2,me=3;L.extend(e.rangePrototype,{compareBoundaryPoints:function(e,t){x(this),_(this.startContainer,t.startContainer);var i,n,s,a,o=e==ue||e==le?"start":"end",r=e==de||e==le?"start":"end";return i=this[o+"Container"],n=this[o+"Offset"],s=t[r+"Container"],a=t[r+"Offset"],W(i,n,s,a)},insertNode:function(e){if(x(this),v(e,Z),$(this.startContainer),z(e,this.startContainer))throw new R("HIERARCHY_REQUEST_ERR");var t=o(e,this.startContainer,this.startOffset);this.setStartBefore(t)},cloneContents:function(){x(this);var e,t;if(this.collapsed)return i(this).createDocumentFragment();if(this.startContainer===this.endContainer&&F(this.startContainer))return e=this.startContainer.cloneNode(!0),e.data=e.data.slice(this.startOffset,this.endOffset),(t=i(this).createDocumentFragment()).appendChild(e),t;var n=new f(this,!0);return e=l(n),n.detach(),e},canSurroundContents:function(){x(this),$(this.startContainer),$(this.endContainer);var e=new f(this,!0),i=e._first&&t(e._first,this)||e._last&&t(e._last,this);return e.detach(),!i},surroundContents:function(e){if(v(e,ee),!this.canSurroundContents())throw new R("INVALID_STATE_ERR");var t=this.extractContents();if(e.hasChildNodes())for(;e.lastChild;)e.removeChild(e.lastChild);o(e,this.startContainer,this.startOffset),e.appendChild(t),this.selectNode(e)},cloneRange:function(){x(this);for(var e,t=new A(i(this)),n=re.length;n--;)e=re[n],t[e]=this[e];return t},toString:function(){x(this);var e=this.startContainer;if(e===this.endContainer&&F(e))return 3==e.nodeType||4==e.nodeType?e.data.slice(this.startOffset,this.endOffset):"";var t=[],i=new f(this,!0);return d(i,function(e){(3==e.nodeType||4==e.nodeType)&&t.push(e.data)}),i.detach(),t.join("")},compareNode:function(e){x(this);var t=e.parentNode,i=H(e);if(!t)throw new R("NOT_FOUND_ERR");var n=this.comparePoint(t,i),s=this.comparePoint(t,i+1);return 0>n?s>0?fe:he:s>0?pe:me},comparePoint:function(e,t){return x(this),y(e,"HIERARCHY_REQUEST_ERR"),_(e,this.startContainer),W(e,t,this.startContainer,this.startOffset)<0?-1:W(e,t,this.endContainer,this.endOffset)>0?1:0},createContextualFragment:oe,toHtml:function(){return T(this)},intersectsNode:function(e,t){if(x(this),V(e)!=n(this))return!1;var i=e.parentNode,s=H(e);if(!i)return!0;var a=W(i,s,this.endContainer,this.endOffset),o=W(i,s+1,this.startContainer,this.startOffset);return t?0>=a&&o>=0:0>a&&o>0},isPointInRange:function(e,t){return x(this),y(e,"HIERARCHY_REQUEST_ERR"),_(e,this.startContainer),W(e,t,this.startContainer,this.startOffset)>=0&&W(e,t,this.endContainer,this.endOffset)<=0},intersectsRange:function(e){return r(this,e,!1)},intersectsOrTouchesRange:function(e){return r(this,e,!0)},intersection:function(e){if(this.intersectsRange(e)){var t=W(this.startContainer,this.startOffset,e.startContainer,e.startOffset),i=W(this.endContainer,this.endOffset,e.endContainer,e.endOffset),n=this.cloneRange();return-1==t&&n.setStart(e.startContainer,e.startOffset),1==i&&n.setEnd(e.endContainer,e.endOffset),n}return null},union:function(e){if(this.intersectsOrTouchesRange(e)){var t=this.cloneRange();return-1==W(e.startContainer,e.startOffset,this.startContainer,this.startOffset)&&t.setStart(e.startContainer,e.startOffset),1==W(e.endContainer,e.endOffset,this.endContainer,this.endOffset)&&t.setEnd(e.endContainer,e.endOffset),t}throw new R("Ranges do not intersect")},containsNode:function(e,t){return t?this.intersectsNode(e,!1):this.compareNode(e)==me},containsNodeContents:function(e){return this.comparePoint(e,0)>=0&&this.comparePoint(e,q(e))<=0},containsRange:function(e){var t=this.intersection(e);return null!==t&&e.equals(t)},containsNodeText:function(e){var t=this.cloneRange();t.selectNode(e);var i=t.getNodes([3]);if(i.length>0){t.setStart(i[0],0);var n=i.pop();return t.setEnd(n,n.length),this.containsRange(t)}return this.containsNodeContents(e)},getNodes:function(e,t){return x(this),h(this,e,t)},getDocument:function(){return i(this)},collapseBefore:function(e){this.setEndBefore(e),this.collapse(!1)},collapseAfter:function(e){this.setStartAfter(e),this.collapse(!0)},getBookmark:function(t){var n=i(this),s=e.createRange(n);t=t||M.getBody(n),s.selectNodeContents(t);var a=this.intersection(s),o=0,r=0;return a&&(s.setEnd(a.startContainer,a.startOffset),o=s.toString().length,r=o+a.toString().length),{start:o,end:r,containerNode:t}},moveToBookmark:function(e){var t=e.containerNode,i=0;this.setStart(t,0),this.collapse(!0);for(var n,s,a,o,r=[t],l=!1,d=!1;!d&&(n=r.pop());)if(3==n.nodeType)s=i+n.length,!l&&e.start>=i&&e.start<=s&&(this.setStart(n,e.start-i),l=!0),l&&e.end>=i&&e.end<=s&&(this.setEnd(n,e.end-i),d=!0),i=s;else for(o=n.childNodes,a=o.length;a--;)r.push(o[a])},getName:function(){return"DomRange"},equals:function(e){return A.rangesEqual(this,e)},isValid:function(){return C(this)},inspect:function(){return p(this)},detach:function(){}}),I(A,E),L.extend(A,{rangeProperties:re,RangeIterator:f,copyComparisonConstants:S,createPrototypeRange:I,inspect:p,toHtml:T,getRangeDocument:i,rangesEqual:function(e,t){return e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset}}),e.DomRange=A}),I.createCoreModule("WrappedRange",["DomRange"],function(e,t){var i,n,s=e.dom,a=e.util,o=s.DomPosition,r=e.DomRange,l=s.getBody,d=s.getContentDocument,c=s.isCharacterDataNode;if(e.features.implementsDomRange&&function(){function n(e){for(var t,i=u.length;i--;)t=u[i],e[t]=e.nativeRange[t];e.collapsed=e.startContainer===e.endContainer&&e.startOffset===e.endOffset}var o,c,u=r.rangeProperties;i=function(e){if(!e)throw t.createError("WrappedRange: Range must be specified");this.nativeRange=e,n(this)},r.createPrototypeRange(i,function(e,t,i,n,s){var a=e.startContainer!==t||e.startOffset!=i,o=e.endContainer!==n||e.endOffset!=s,r=!e.equals(e.nativeRange);(a||o||r)&&(e.setEnd(n,s),e.setStart(t,i))}),(o=i.prototype).selectNode=function(e){this.nativeRange.selectNode(e),n(this)},o.cloneContents=function(){return this.nativeRange.cloneContents()},o.surroundContents=function(e){this.nativeRange.surroundContents(e),n(this)},o.collapse=function(e){this.nativeRange.collapse(e),n(this)},o.cloneRange=function(){return new i(this.nativeRange.cloneRange())},o.refresh=function(){n(this)},o.toString=function(){return this.nativeRange.toString()};var h=document.createTextNode("test");l(document).appendChild(h);var p=document.createRange();p.setStart(h,0),p.setEnd(h,0);try{p.setStart(h,1),o.setStart=function(e,t){this.nativeRange.setStart(e,t),n(this)},o.setEnd=function(e,t){this.nativeRange.setEnd(e,t),n(this)},c=function(e){return function(t){this.nativeRange[e](t),n(this)}}}catch(e){o.setStart=function(e,t){try{this.nativeRange.setStart(e,t)}catch(i){this.nativeRange.setEnd(e,t),this.nativeRange.setStart(e,t)}n(this)},o.setEnd=function(e,t){try{this.nativeRange.setEnd(e,t)}catch(i){this.nativeRange.setStart(e,t),this.nativeRange.setEnd(e,t)}n(this)},c=function(e,t){return function(i){try{this.nativeRange[e](i)}catch(n){this.nativeRange[t](i),this.nativeRange[e](i)}n(this)}}}o.setStartBefore=c("setStartBefore","setEndBefore"),o.setStartAfter=c("setStartAfter","setEndAfter"),o.setEndBefore=c("setEndBefore","setStartBefore"),o.setEndAfter=c("setEndAfter","setStartAfter"),o.selectNodeContents=function(e){this.setStartAndEnd(e,0,s.getNodeLength(e))},p.selectNodeContents(h),p.setEnd(h,3);var f=document.createRange();f.selectNodeContents(h),f.setEnd(h,4),f.setStart(h,2),o.compareBoundaryPoints=-1==p.compareBoundaryPoints(p.START_TO_END,f)&&1==p.compareBoundaryPoints(p.END_TO_START,f)?function(e,t){return t=t.nativeRange||t,e==t.START_TO_END?e=t.END_TO_START:e==t.END_TO_START&&(e=t.START_TO_END),this.nativeRange.compareBoundaryPoints(e,t)}:function(e,t){return this.nativeRange.compareBoundaryPoints(e,t.nativeRange||t)};var m=document.createElement("div");m.innerHTML="123";var g=m.firstChild,v=l(document);v.appendChild(m),p.setStart(g,1),p.setEnd(g,2),p.deleteContents(),"13"==g.data&&(o.deleteContents=function(){this.nativeRange.deleteContents(),n(this)},o.extractContents=function(){var e=this.nativeRange.extractContents();return n(this),e}),v.removeChild(m),v=null,a.isHostMethod(p,"createContextualFragment")&&(o.createContextualFragment=function(e){return this.nativeRange.createContextualFragment(e)}),l(document).removeChild(h),o.getName=function(){return"WrappedRange"},e.WrappedRange=i,e.createNativeRange=function(e){return(e=d(e,t,"createNativeRange")).createRange()}}(),e.features.implementsTextRange){var u=function(e){var t=e.parentElement(),i=e.duplicate();i.collapse(!0);var n=i.parentElement();(i=e.duplicate()).collapse(!1);var a=i.parentElement(),o=n==a?n:s.getCommonAncestor(n,a);return o==t?o:s.getCommonAncestor(t,o)},h=function(e){return 0==e.compareEndPoints("StartToEnd",e)},p=function(e,t,i,n,a){var r=e.duplicate();r.collapse(i);var l=r.parentElement();if(s.isOrIsAncestorOf(t,l)||(l=t),!l.canHaveHTML){var d=new o(l.parentNode,s.getNodeIndex(l));return{boundaryPosition:d,nodeInfo:{nodeIndex:d.offset,containerElement:d.node}}}var u=s.getDocument(l).createElement("span");u.parentNode&&s.removeNode(u);for(var h,p,f,m,g,v=i?"StartToStart":"StartToEnd",b=a&&a.containerElement==l?a.nodeIndex:0,_=l.childNodes.length,$=_,y=$;y==_?l.appendChild(u):l.insertBefore(u,l.childNodes[y]),r.moveToElementText(u),0!=(h=r.compareEndPoints(v,e))&&b!=$;){if(-1==h){if($==b+1)break;b=y}else $=$==b+1?b:y;y=Math.floor((b+$)/2),l.removeChild(u)}if(g=u.nextSibling,-1==h&&g&&c(g)){r.setEndPoint(i?"EndToStart":"EndToEnd",e);var w;if(/[\r\n]/.test(g.data)){var C=r.duplicate(),x=C.text.replace(/\r\n/g,"\r").length;for(w=C.moveStart("character",x);-1==(h=C.compareEndPoints("StartToEnd",C));)w++,C.moveStart("character",1)}else w=r.text.length;m=new o(g,w)}else p=(n||!i)&&u.previousSibling,f=(n||i)&&u.nextSibling,m=f&&c(f)?new o(f,0):p&&c(p)?new o(p,p.data.length):new o(l,s.getNodeIndex(u));return s.removeNode(u),{boundaryPosition:m,nodeInfo:{nodeIndex:y,containerElement:l}}},f=function(e,t){var i,n,a,o,r=e.offset,d=s.getDocument(e.node),u=l(d).createTextRange(),h=c(e.node);return h?(i=e.node,n=i.parentNode):(o=e.node.childNodes,i=r<o.length?o[r]:null,n=e.node),a=d.createElement("span"),a.innerHTML="&#feff;",i?n.insertBefore(a,i):n.appendChild(a),u.moveToElementText(a),u.collapse(!t),n.removeChild(a),h&&u[t?"moveStart":"moveEnd"]("character",r),u};(n=function(e){this.textRange=e,this.refresh()}).prototype=new r(document),n.prototype.refresh=function(){var e,t,i,n=u(this.textRange);h(this.textRange)?t=e=p(this.textRange,n,!0,!0).boundaryPosition:(i=p(this.textRange,n,!0,!1),e=i.boundaryPosition,t=p(this.textRange,n,!1,!1,i.nodeInfo).boundaryPosition),this.setStart(e.node,e.offset),this.setEnd(t.node,t.offset)},n.prototype.getName=function(){return"WrappedTextRange"},r.copyComparisonConstants(n);var m=function(e){if(e.collapsed)return f(new o(e.startContainer,e.startOffset),!0);var t=f(new o(e.startContainer,e.startOffset),!0),i=f(new o(e.endContainer,e.endOffset),!1),n=l(r.getRangeDocument(e)).createTextRange();return n.setEndPoint("StartToStart",t),n.setEndPoint("EndToEnd",i),n};if(n.rangeToTextRange=m,n.prototype.toTextRange=function(){return m(this)},e.WrappedTextRange=n,!e.features.implementsDomRange||e.config.preferTextRange){var g=Function("return this;")();void 0===g.Range&&(g.Range=n),e.createNativeRange=function(e){return e=d(e,t,"createNativeRange"),l(e).createTextRange()},e.WrappedRange=n}}e.createRange=function(i){return i=d(i,t,"createRange"),new e.WrappedRange(e.createNativeRange(i))},e.createRangyRange=function(e){return e=d(e,t,"createRangyRange"),new r(e)},a.createAliasForDeprecatedMethod(e,"createIframeRange","createRange"),a.createAliasForDeprecatedMethod(e,"createIframeRangyRange","createRangyRange"),e.addShimListener(function(t){var i=t.document;void 0===i.createRange&&(i.createRange=function(){return e.createRange(i)}),i=t=null})}),I.createCoreModule("WrappedSelection",["DomRange","WrappedRange"],function(e,t){function i(e){return"string"==typeof e?/^backward(s)?$/i.test(e):!!e}function n(e,i){if(e){if(N.isWindow(e))return e;if(e instanceof g)return e.win;var n=N.getContentDocument(e,t,i);return N.getWindow(n)}return window}function s(e){return n(e,"getDocSelection").document.selection}function a(e){var t=!1;return e.anchorNode&&(t=1==N.comparePoints(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)),t}function o(e,t,i){var n=i?"end":"start",s=i?"start":"end";e.anchorNode=t[n+"Container"],e.anchorOffset=t[n+"Offset"],e.focusNode=t[s+"Container"],e.focusOffset=t[s+"Offset"]}function r(e){var t=e.nativeSelection;e.anchorNode=t.anchorNode,e.anchorOffset=t.anchorOffset,e.focusNode=t.focusNode,e.focusOffset=t.focusOffset}function l(e){e.anchorNode=e.focusNode=null,e.anchorOffset=e.focusOffset=0,e.rangeCount=0,e.isCollapsed=!0,e._ranges.length=0}function d(t){var i;return t instanceof I?((i=e.createNativeRange(t.getDocument())).setEnd(t.endContainer,t.endOffset),i.setStart(t.startContainer,t.startOffset)):t instanceof P?i=t.nativeRange:M.implementsDomRange&&t instanceof N.getWindow(t.startContainer).Range&&(i=t),i}function c(e){if(!e.length||1!=e[0].nodeType)return!1;for(var t=1,i=e.length;i>t;++t)if(!N.isAncestorOf(e[0],e[t]))return!1;return!0}function u(e){var i=e.getNodes();if(!c(i))throw t.createError("getSingleElementFromRange: range "+e.inspect()+" did not consist of a single element");return i[0]}function h(e){return!!e&&void 0!==e.text}function p(e,t){var i=new P(t);e._ranges=[i],o(e,i,!1),e.rangeCount=1,e.isCollapsed=i.collapsed}function f(t){if(t._ranges.length=0,"None"==t.docSelection.type)l(t);else{var i=t.docSelection.createRange();if(h(i))p(t,i);else{t.rangeCount=i.length;for(var n,s=O(i.item(0)),a=0;a<t.rangeCount;++a)(n=e.createRange(s)).selectNode(i.item(a)),t._ranges.push(n);t.isCollapsed=1==t.rangeCount&&t._ranges[0].collapsed,o(t,t._ranges[t.rangeCount-1],!1)}}}function m(e,i){for(var n=e.docSelection.createRange(),s=u(i),a=O(n.item(0)),o=R(a).createControlRange(),r=0,l=n.length;l>r;++r)o.add(n.item(r));try{o.add(s)}catch(e){throw t.createError("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")}o.select(),f(e)}function g(e,t,i){this.nativeSelection=e,this.docSelection=t,this._ranges=[],this.win=i,this.refresh()}function v(e){e.win=e.anchorNode=e.focusNode=e._ranges=null,e.rangeCount=e.anchorOffset=e.focusOffset=0,e.detached=!0}function b(e,t){for(var i,n,s=ee.length;s--;)if(i=ee[s],n=i.selection,"deleteAll"==t)v(n);else if(i.win==e)return"delete"==t?(ee.splice(s,1),!0):n;return"deleteAll"==t&&(ee.length=0),null}function _(e,i){for(var n,s=O(i[0].startContainer),a=R(s).createControlRange(),o=0,r=i.length;r>o;++o){n=u(i[o]);try{a.add(n)}catch(e){throw t.createError("setRanges(): Element within one of the specified Ranges could not be added to control selection (does it have layout?)")}}a.select(),f(e)}function $(e,t){if(e.win.document!=O(t))throw new E("WRONG_DOCUMENT_ERR")}function y(t){return function(i,n){var s;this.rangeCount?(s=this.getRangeAt(0))["set"+(t?"Start":"End")](i,n):(s=e.createRange(this.win.document)).setStartAndEnd(i,n),this.setSingleRange(s,this.isBackward())}}function w(e){var t=[],i=new A(e.anchorNode,e.anchorOffset),n=new A(e.focusNode,e.focusOffset),s="function"==typeof e.getName?e.getName():"Selection";if(void 0!==e.rangeCount)for(var a=0,o=e.rangeCount;o>a;++a)t[a]=I.inspect(e.getRangeAt(a));return"["+s+"(Ranges: "+t.join(", ")+")(anchor: "+i.inspect()+", focus: "+n.inspect()+"]"}e.config.checkSelectionRanges=!0;var C,x,k="boolean",T="number",N=e.dom,S=e.util,D=S.isHostMethod,I=e.DomRange,P=e.WrappedRange,E=e.DOMException,A=N.DomPosition,M=e.features,L="Control",O=N.getDocument,R=N.getBody,F=I.rangesEqual,H=D(window,"getSelection"),z=S.isHostObject(document,"selection");M.implementsWinGetSelection=H,M.implementsDocSelection=z;var j=z&&(!H||e.config.preferTextRange);if(j)C=s,e.isSelectionValid=function(e){var t=n(e,"isSelectionValid").document,i=t.selection;return"None"!=i.type||O(i.createRange().parentElement())==t};else{if(!H)return t.fail("Neither document.selection or window.getSelection() detected."),!1;C=function(e){return n(e,"getWinSelection").getSelection()},e.isSelectionValid=function(){return!0}}e.getNativeSelection=C;var W=C();if(!W)return t.fail("Native selection was null (possibly issue 138?)"),!1;var U=e.createNativeRange(document),B=R(document),q=S.areHostProperties(W,["anchorNode","focusNode","anchorOffset","focusOffset"]);M.selectionHasAnchorAndFocus=q;var Y=D(W,"extend");M.selectionHasExtend=Y;var V=typeof W.rangeCount==T;M.selectionHasRangeCount=V;var X=!1,G=!0,K=Y?function(t,i){var n=I.getRangeDocument(i),s=e.createRange(n);s.collapseToPoint(i.endContainer,i.endOffset),t.addRange(d(s)),t.extend(i.startContainer,i.startOffset)}:null;S.areHostMethods(W,["addRange","getRangeAt","removeAllRanges"])&&typeof W.rangeCount==T&&M.implementsDomRange&&function(){var t=window.getSelection();if(t){for(var i=t.rangeCount,n=i>1,s=[],o=a(t),r=0;i>r;++r)s[r]=t.getRangeAt(r);var l=N.createTestElement(document,"",!1),d=l.appendChild(document.createTextNode("   ")),c=document.createRange();if(c.setStart(d,1),c.collapse(!0),t.removeAllRanges(),t.addRange(c),G=1==t.rangeCount,t.removeAllRanges(),!n){var u=window.navigator.appVersion.match(/Chrome\/(.*?) /);if(u&&parseInt(u[1])>=36)X=!1;else{var h=c.cloneRange();c.setStart(d,0),h.setEnd(d,3),h.setStart(d,2),t.addRange(c),t.addRange(h),X=2==t.rangeCount}}for(N.removeNode(l),t.removeAllRanges(),r=0;i>r;++r)0==r&&o?K?K(t,s[r]):(e.warn("Rangy initialization: original selection was backwards but selection has been restored forwards because the browser does not support Selection.extend"),t.addRange(s[r])):t.addRange(s[r])}}(),M.selectionSupportsMultipleRanges=X,M.collapsedNonEditableSelectionsSupported=G;var Q,J=!1;B&&D(B,"createControlRange")&&(Q=B.createControlRange(),S.areHostProperties(Q,["item","add"])&&(J=!0)),M.implementsControlRange=J,x=q?function(e){return e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset}:function(e){return!!e.rangeCount&&e.getRangeAt(e.rangeCount-1).collapsed};var Z;D(W,"getRangeAt")?Z=function(e,t){try{return e.getRangeAt(t)}catch(e){return null}}:q&&(Z=function(t){var i=O(t.anchorNode),n=e.createRange(i);return n.setStartAndEnd(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset),n.collapsed!==this.isCollapsed&&n.setStartAndEnd(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset),n}),g.prototype=e.selectionPrototype;var ee=[],te=function(e){if(e&&e instanceof g)return e.refresh(),e;var t=b(e=n(e,"getNativeSelection")),i=C(e),a=z?s(e):null;return t?(t.nativeSelection=i,t.docSelection=a,t.refresh()):(t=new g(i,a,e),ee.push({win:e,selection:t})),t};e.getSelection=te,S.createAliasForDeprecatedMethod(e,"getIframeSelection","getSelection");var ie=g.prototype;if(!j&&q&&S.areHostMethods(W,["removeAllRanges","addRange"])){ie.removeAllRanges=function(){this.nativeSelection.removeAllRanges(),l(this)};var ne=function(e,t){K(e.nativeSelection,t),e.refresh()};ie.addRange=V?function(t,n){if(J&&z&&this.docSelection.type==L)m(this,t);else if(i(n)&&Y)ne(this,t);else{var s;X?s=this.rangeCount:(this.removeAllRanges(),s=0);var a=d(t).cloneRange();try{this.nativeSelection.addRange(a)}catch(e){}if(this.rangeCount=this.nativeSelection.rangeCount,this.rangeCount==s+1){if(e.config.checkSelectionRanges){var r=Z(this.nativeSelection,this.rangeCount-1);r&&!F(r,t)&&(t=new P(r))}this._ranges[this.rangeCount-1]=t,o(this,t,oe(this.nativeSelection)),this.isCollapsed=x(this)}else this.refresh()}}:function(e,t){i(t)&&Y?ne(this,e):(this.nativeSelection.addRange(d(e)),this.refresh())},ie.setRanges=function(e){if(J&&z&&e.length>1)_(this,e);else{this.removeAllRanges();for(var t=0,i=e.length;i>t;++t)this.addRange(e[t])}}}else{if(!(D(W,"empty")&&D(U,"select")&&J&&j))return t.fail("No means of selecting a Range or TextRange was found"),!1;ie.removeAllRanges=function(){try{if(this.docSelection.empty(),"None"!=this.docSelection.type){var e;if(this.anchorNode)e=O(this.anchorNode);else if(this.docSelection.type==L){var t=this.docSelection.createRange();t.length&&(e=O(t.item(0)))}e&&(R(e).createTextRange().select(),this.docSelection.empty())}}catch(e){}l(this)},ie.addRange=function(t){this.docSelection.type==L?m(this,t):(e.WrappedTextRange.rangeToTextRange(t).select(),this._ranges[0]=t,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,o(this,t,!1))},ie.setRanges=function(e){this.removeAllRanges();var t=e.length;t>1?_(this,e):t&&this.addRange(e[0])}}ie.getRangeAt=function(e){if(0>e||e>=this.rangeCount)throw new E("INDEX_SIZE_ERR");return this._ranges[e].cloneRange()};var se;if(j)se=function(t){var i;e.isSelectionValid(t.win)?i=t.docSelection.createRange():(i=R(t.win.document).createTextRange()).collapse(!0),t.docSelection.type==L?f(t):h(i)?p(t,i):l(t)};else if(D(W,"getRangeAt")&&typeof W.rangeCount==T)se=function(t){if(J&&z&&t.docSelection.type==L)f(t);else if(t._ranges.length=t.rangeCount=t.nativeSelection.rangeCount,t.rangeCount){for(var i=0,n=t.rangeCount;n>i;++i)t._ranges[i]=new e.WrappedRange(t.nativeSelection.getRangeAt(i));o(t,t._ranges[t.rangeCount-1],oe(t.nativeSelection)),t.isCollapsed=x(t)}else l(t)};else{if(!q||typeof W.isCollapsed!=k||typeof U.collapsed!=k||!M.implementsDomRange)return t.fail("No means of obtaining a Range or TextRange from the user's selection was found"),!1;se=function(e){var t,i=e.nativeSelection;i.anchorNode?(t=Z(i,0),e._ranges=[t],e.rangeCount=1,r(e),e.isCollapsed=x(e)):l(e)}}ie.refresh=function(e){var t=e?this._ranges.slice(0):null,i=this.anchorNode,n=this.anchorOffset;if(se(this),e){var s=t.length;if(s!=this._ranges.length)return!0;if(this.anchorNode!=i||this.anchorOffset!=n)return!0;for(;s--;)if(!F(t[s],this._ranges[s]))return!0;return!1}};var ae=function(e,t){var i=e.getAllRanges();e.removeAllRanges();for(var n=0,s=i.length;s>n;++n)F(t,i[n])||e.addRange(i[n]);e.rangeCount||l(e)};ie.removeRange=J&&z?function(e){if(this.docSelection.type==L){for(var t=this.docSelection.createRange(),i=u(e),n=O(t.item(0)),s=R(n).createControlRange(),a=!1,o=0,r=t.length;r>o;++o)t.item(o)!==i||a?s.add(t.item(o)):a=!0;s.select(),f(this)}else ae(this,e)}:function(e){ae(this,e)};var oe;!j&&q&&M.implementsDomRange?(oe=a,ie.isBackward=function(){return oe(this)}):oe=ie.isBackward=function(){return!1},ie.isBackwards=ie.isBackward,ie.toString=function(){for(var e=[],t=0,i=this.rangeCount;i>t;++t)e[t]=""+this._ranges[t];return e.join("")},ie.collapse=function(t,i){$(this,t);var n=e.createRange(t);n.collapseToPoint(t,i),this.setSingleRange(n),this.isCollapsed=!0},ie.collapseToStart=function(){if(!this.rangeCount)throw new E("INVALID_STATE_ERR");var e=this._ranges[0];this.collapse(e.startContainer,e.startOffset)},ie.collapseToEnd=function(){if(!this.rangeCount)throw new E("INVALID_STATE_ERR");var e=this._ranges[this.rangeCount-1];this.collapse(e.endContainer,e.endOffset)},ie.selectAllChildren=function(t){$(this,t);var i=e.createRange(t);i.selectNodeContents(t),this.setSingleRange(i)},ie.deleteFromDocument=function(){if(J&&z&&this.docSelection.type==L){for(var e,t=this.docSelection.createRange();t.length;)e=t.item(0),t.remove(e),N.removeNode(e);this.refresh()}else if(this.rangeCount){var i=this.getAllRanges();if(i.length){this.removeAllRanges();for(var n=0,s=i.length;s>n;++n)i[n].deleteContents();this.addRange(i[s-1])}}},ie.eachRange=function(e,t){for(var i=0,n=this._ranges.length;n>i;++i)if(e(this.getRangeAt(i)))return t},ie.getAllRanges=function(){var e=[];return this.eachRange(function(t){e.push(t)}),e},ie.setSingleRange=function(e,t){this.removeAllRanges(),this.addRange(e,t)},ie.callMethodOnEachRange=function(e,t){var i=[];return this.eachRange(function(n){i.push(n[e].apply(n,t||[]))}),i},ie.setStart=y(!0),ie.setEnd=y(!1),e.rangePrototype.select=function(e){te(this.getDocument()).setSingleRange(this,e)},ie.changeEachRange=function(e){var t=[],i=this.isBackward();this.eachRange(function(i){e(i),t.push(i)}),this.removeAllRanges(),i&&1==t.length?this.addRange(t[0],"backward"):this.setRanges(t)},ie.containsNode=function(e,t){return this.eachRange(function(i){return i.containsNode(e,t)},!0)||!1},ie.getBookmark=function(e){return{backward:this.isBackward(),rangeBookmarks:this.callMethodOnEachRange("getBookmark",[e])}},ie.moveToBookmark=function(t){for(var i,n,s=[],a=0;i=t.rangeBookmarks[a++];)(n=e.createRange(this.win)).moveToBookmark(i),s.push(n);t.backward?this.setSingleRange(s[0],"backward"):this.setRanges(s)},ie.saveRanges=function(){return{backward:this.isBackward(),ranges:this.callMethodOnEachRange("cloneRange")}},ie.restoreRanges=function(e){this.removeAllRanges();for(var t,i=0;t=e.ranges[i];++i)this.addRange(t,e.backward&&0==i)},ie.toHtml=function(){var e=[];return this.eachRange(function(t){e.push(I.toHtml(t))}),e.join("")},M.implementsTextRange&&(ie.getNativeTextRange=function(){var i;if(i=this.docSelection){var n=i.createRange();if(h(n))return n;throw t.createError("getNativeTextRange: selection is a control selection")}if(this.rangeCount>0)return e.WrappedTextRange.rangeToTextRange(this.getRangeAt(0));throw t.createError("getNativeTextRange: selection contains no range")}),ie.getName=function(){return"WrappedSelection"},ie.inspect=function(){return w(this)},ie.detach=function(){b(this.win,"delete"),v(this)},g.detachAll=function(){b(null,"deleteAll")},g.inspect=w,g.isDirectionBackward=i,e.Selection=g,e.selectionPrototype=ie,e.addShimListener(function(e){void 0===e.getSelection&&(e.getSelection=function(){return te(e)}),e=null})});var L=!1,O=function(){L||(L=!0,!I.initialized&&I.config.autoInitialize&&c())};return S&&("complete"==document.readyState?O():(e(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",O,!1),E(window,"load",O))),I},this),window.puJsFileLoadCounter++,function(e,t){"function"==typeof define&&define.amd?define(["./rangy-core"],e):"undefined"!=typeof module&&"object"==typeof exports?module.exports=e(require("rangy")):e(t.rangy)}(function(e){return e.createModule("ClassApplier",["WrappedSelection"],function(e,t){function n(e,t){for(var i in e)if(e.hasOwnProperty(i)&&!1===t(i,e[i]))return!1;return!0}function s(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function a(e,t){return!!e&&new RegExp("(?:^|\\s)"+t+"(?:\\s|$)").test(e)}function o(e,t){return"object"==typeof e.classList?e.classList.contains(t):a("string"==typeof e.className?e.className:e.getAttribute("class"),t)}function r(e,t){if("object"==typeof e.classList)e.classList.add(t);else{var i="string"==typeof e.className,n=i?e.className:e.getAttribute("class");n?a(n,t)||(n+=" "+t):n=t,i?e.className=n:e.setAttribute("class",n)}}function l(e){return"string"==typeof e.className?e.className:e.getAttribute("class")}function d(e){return e&&e.split(/\s+/).sort().join(" ")}function c(e){return d(l(e))}function u(e,t){return c(e)==c(t)}function h(e,t){for(var i=t.split(/\s+/),n=0,a=i.length;a>n;++n)if(!o(e,s(i[n])))return!1;return!0}function p(e){var t=e.parentNode;return t&&1==t.nodeType&&!/^(textarea|style|script|select|iframe)$/i.test(t.nodeName)}function f(e,t,i,n,s){var a=e.node,o=e.offset,r=a,l=o;a==n&&o>s&&++l,a!=t||o!=i&&o!=i+1||(r=n,l+=s-i),a==t&&o>i+1&&--l,e.node=r,e.offset=l}function m(e,t,i){e.node==t&&e.offset>i&&--e.offset}function g(e,t,i,n){-1==i&&(i=t.childNodes.length);var s=e.parentNode,a=O.getNodeIndex(e);z(n,function(e){f(e,s,a,t,i)}),t.childNodes.length==i?t.appendChild(e):t.insertBefore(e,t.childNodes[i])}function v(e,t){var i=e.parentNode,n=O.getNodeIndex(e);z(t,function(e){m(e,i,n)}),O.removeNode(e)}function b(e,t,i,n,s){for(var a,o=[];a=e.firstChild;)g(a,t,i++,s),o.push(a);return n&&v(e,s),o}function _(e,t){return b(e,e.parentNode,O.getNodeIndex(e),!0,t)}function $(e,t){var i=e.cloneRange();i.selectNodeContents(t);var n=i.intersection(e);return""!=(n?n.toString():"")}function y(e){for(var t,i=e.getNodes([3]),n=0;(t=i[n])&&!$(e,t);)++n;for(var s=i.length-1;(t=i[s])&&!$(e,t);)--s;return i.slice(n,s+1)}function w(e,t){if(e.attributes.length!=t.attributes.length)return!1;for(var i,n,s,a=0,o=e.attributes.length;o>a;++a)if(i=e.attributes[a],"class"!=(s=i.name)){if(n=t.attributes.getNamedItem(s),null===i!=(null===n))return!1;if(i.specified!=n.specified)return!1;if(i.specified&&i.nodeValue!==n.nodeValue)return!1}return!0}function C(e,t){for(var i,n=0,s=e.attributes.length;s>n;++n)if(i=e.attributes[n].name,(!t||!F(t,i))&&e.attributes[n].specified&&"class"!=i)return!0;return!1}function x(e){var t;return e&&1==e.nodeType&&((t=e.parentNode)&&9==t.nodeType&&"on"==t.designMode||B(e)&&!B(e.parentNode))}function k(e){return(B(e)||1!=e.nodeType&&B(e.parentNode))&&!x(e)}function T(e){return e&&1==e.nodeType&&!q.test(U(e,"display"))}function N(e){if(0==e.data.length)return!0;if(Y.test(e.data))return!1;switch(U(e.parentNode,"whiteSpace")){case"pre":case"pre-wrap":case"-moz-pre-wrap":return!1;case"pre-line":if(/[\r\n]/.test(e.data))return!1}return T(e.previousSibling)||T(e.nextSibling)}function S(e){var t,i,n=[];for(t=0;i=e[t++];)n.push(new R(i.startContainer,i.startOffset),new R(i.endContainer,i.endOffset));return n}function D(e,t){for(var i,n,s,a=0,o=e.length;o>a;++a)i=e[a],n=t[2*a],s=t[2*a+1],i.setStartAndEnd(n.node,n.offset,s.node,s.offset)}function I(e,t){return O.isCharacterDataNode(e)?0==t?!!e.previousSibling:t!=e.length||!!e.nextSibling:t>0&&t<e.childNodes.length}function P(e,i,n,s){var a,o,r=0==n;if(O.isAncestorOf(i,e))return e;if(O.isCharacterDataNode(i)){var l=O.getNodeIndex(i);if(0==n)n=l;else{if(n!=i.length)throw t.createError("splitNodeAt() should not be called with offset in the middle of a data node ("+n+" in "+i.data);n=l+1}i=i.parentNode}if(I(i,n)){a=i.cloneNode(!1),o=i.parentNode,a.id&&a.removeAttribute("id");for(var d,c=0;d=i.childNodes[n];)g(d,a,c++,s);return g(a,o,O.getNodeIndex(i)+1,s),i==e?a:P(e,o,O.getNodeIndex(a),s)}if(e!=i){a=i.parentNode;var u=O.getNodeIndex(i);return r||u++,P(e,a,u,s)}return e}function E(e,t){return e.namespaceURI==t.namespaceURI&&e.tagName.toLowerCase()==t.tagName.toLowerCase()&&u(e,t)&&w(e,t)&&"inline"==U(e,"display")&&"inline"==U(t,"display")}function A(e){var t=e?"nextSibling":"previousSibling";return function(i,n){var s=i.parentNode,a=i[t];if(a){if(a&&3==a.nodeType)return a}else if(n&&(a=s[t])&&1==a.nodeType&&E(s,a)){var o=a[e?"firstChild":"lastChild"];if(o&&3==o.nodeType)return o}return null}}function M(e){this.isElementMerge=1==e.nodeType,this.textNodes=[];var t=this.isElementMerge?e.lastChild:e;t&&(this.textNodes[0]=t)}function L(e,t,i){var a,o,r,l,c=this;c.cssClass=c.className=e;var u=null,h={};if("object"==typeof t&&null!==t){for(void 0!==t.elementTagName&&(t.elementTagName=t.elementTagName.toLowerCase()),i=t.tagNames,u=t.elementProperties,h=t.elementAttributes,o=0;l=G[o++];)t.hasOwnProperty(l)&&(c[l]=t[l]);a=t.normalize}else a=t;c.normalize=void 0===a||a,c.attrExceptions=[];var p=document.createElement(c.elementTagName);c.elementProperties=c.copyPropertiesToElement(u,p,!0),n(h,function(e,t){c.attrExceptions.push(e),h[e]=""+t}),c.elementAttributes=h,c.elementSortedClassName=c.elementProperties.hasOwnProperty("className")?d(c.elementProperties.className+" "+e):e,c.applyToAnyTagName=!1;var f=typeof i;if("string"==f)"*"==i?c.applyToAnyTagName=!0:c.tagNames=s(i.toLowerCase()).split(/\s*,\s*/);else if("object"==f&&"number"==typeof i.length)for(c.tagNames=[],o=0,r=i.length;r>o;++o)"*"==i[o]?c.applyToAnyTagName=!0:c.tagNames.push(i[o].toLowerCase());else c.tagNames=[c.elementTagName]}var O=e.dom,R=O.DomPosition,F=O.arrayContains,H=e.util,z=H.forEach,j=H.isHostMethod(document,"createElementNS"),W=function(){function e(e,t,i){return t&&i?" ":""}return function(t,i){if("object"==typeof t.classList)t.classList.remove(i);else{var n="string"==typeof t.className,s=n?t.className:t.getAttribute("class");s=s.replace(new RegExp("(^|\\s)"+i+"(\\s|$)"),e),n?t.className=s:t.setAttribute("class",s)}}}(),U=O.getComputedStyleProperty,B="boolean"==typeof document.createElement("div").isContentEditable?function(e){return e&&1==e.nodeType&&e.isContentEditable}:function(e){return!(!e||1!=e.nodeType||"false"==e.contentEditable)&&("true"==e.contentEditable||B(e.parentNode))},q=/^inline(-block|-table)?$/i,Y=/[^\r\n\t\f \u200B]/,V=A(!1),X=A(!0);M.prototype={doMerge:function(e){var t=this.textNodes,i=t[0];if(t.length>1){var n,s=O.getNodeIndex(i),a=[],o=0;z(t,function(t,r){n=t.parentNode,r>0&&(n.removeChild(t),n.hasChildNodes()||O.removeNode(n),e&&z(e,function(e){e.node==t&&(e.node=i,e.offset+=o),e.node==n&&e.offset>s&&(--e.offset,e.offset==s+1&&len-1>r&&(e.node=i,e.offset=o))})),a[r]=t.data,o+=t.data.length}),i.data=a.join("")}return i.data},getLength:function(){for(var e=this.textNodes.length,t=0;e--;)t+=this.textNodes[e].length;return t},toString:function(){var e=[];return z(this.textNodes,function(t,i){e[i]="'"+t.data+"'"}),"[Merge("+e.join(",")+")]"}};var G=["elementTagName","ignoreWhiteSpace","applyToEditableOnly","useExistingElements","removeEmptyElements","onElementCreate"],K={};L.prototype={elementTagName:"span",elementProperties:{},elementAttributes:{},ignoreWhiteSpace:!0,applyToEditableOnly:!1,useExistingElements:!0,removeEmptyElements:!0,onElementCreate:null,copyPropertiesToElement:function(e,t,i){var n,s,a,o,l,c,u={};for(var h in e)if(e.hasOwnProperty(h))if(o=e[h],l=t[h],"className"==h)r(t,o),r(t,this.className),t[h]=d(t[h]),i&&(u[h]=o);else if("style"==h){s=l,i&&(u[h]=a={});for(n in e[h])e[h].hasOwnProperty(n)&&(s[n]=o[n],i&&(a[n]=s[n]));this.attrExceptions.push(h)}else t[h]=o,i&&(u[h]=t[h],c=K.hasOwnProperty(h)?K[h]:h,this.attrExceptions.push(c));return i?u:""},copyAttributesToElement:function(e,t){for(var i in e)e.hasOwnProperty(i)&&!/^class(?:Name)?$/i.test(i)&&t.setAttribute(i,e[i])},appliesToElement:function(e){return F(this.tagNames,e.tagName.toLowerCase())},getEmptyElements:function(e){var t=this;return e.getNodes([1],function(e){return t.appliesToElement(e)&&!e.hasChildNodes()})},hasClass:function(e){return 1==e.nodeType&&(this.applyToAnyTagName||this.appliesToElement(e))&&o(e,this.className)},getSelfOrAncestorWithClass:function(e){for(;e;){if(this.hasClass(e))return e;e=e.parentNode}return null},isModifiable:function(e){return!this.applyToEditableOnly||k(e)},isIgnorableWhiteSpaceNode:function(e){return this.ignoreWhiteSpace&&e&&3==e.nodeType&&N(e)},postApply:function(e,t,n,s){var a,o,r=e[0],l=e[e.length-1],d=[],c=r,u=l,h=0,p=l.length;z(e,function(e){(o=V(e,!s))?(a||(a=new M(o),d.push(a)),a.textNodes.push(e),e===r&&(c=a.textNodes[0],h=c.length),e===l&&(u=a.textNodes[0],p=a.getLength())):a=null});var f=X(l,!s);if(f&&(a||(a=new M(l),d.push(a)),a.textNodes.push(f)),d.length){for(i=0,len=d.length;len>i;++i)d[i].doMerge(n);t.setStartAndEnd(c,h,u,p)}},createContainer:function(e){var t,i=O.getDocument(e),n=j&&!O.isHtmlNamespace(e)&&(t=e.namespaceURI)?i.createElementNS(e.namespaceURI,this.elementTagName):i.createElement(this.elementTagName);return this.copyPropertiesToElement(this.elementProperties,n,!1),this.copyAttributesToElement(this.elementAttributes,n),r(n,this.className),this.onElementCreate&&this.onElementCreate(n,this),n},elementHasProperties:function(e,t){var i=this;return n(t,function(t,n){if("className"==t)return h(e,n);if("object"==typeof n){if(!i.elementHasProperties(e[t],n))return!1}else if(e[t]!==n)return!1})},elementHasAttributes:function(e,t){return n(t,function(t,i){return e.getAttribute(t)===i&&void 0})},applyToTextNode:function(e){if(p(e)){var t=e.parentNode;if(1==t.childNodes.length&&this.useExistingElements&&this.appliesToElement(t)&&this.elementHasProperties(t,this.elementProperties)&&this.elementHasAttributes(t,this.elementAttributes))r(t,this.className);else{var i=e.parentNode,n=this.createContainer(i);i.insertBefore(n,e),n.appendChild(e)}}},isRemovable:function(e){return e.tagName.toLowerCase()==this.elementTagName&&c(e)==this.elementSortedClassName&&this.elementHasProperties(e,this.elementProperties)&&!C(e,this.attrExceptions)&&this.elementHasAttributes(e,this.elementAttributes)&&this.isModifiable(e)},isEmptyContainer:function(e){var t=e.childNodes.length;return 1==e.nodeType&&this.isRemovable(e)&&(0==t||1==t&&this.isEmptyContainer(e.firstChild))},removeEmptyContainers:function(e){var t=this,i=e.getNodes([1],function(e){return t.isEmptyContainer(e)}),n=[e],s=S(n);z(i,function(e){v(e,s)}),D(n,s)},undoToTextNode:function(e,t,i,n){if(!t.containsNode(i)){var s=t.cloneRange();s.selectNode(i),s.isPointInRange(t.endContainer,t.endOffset)&&(P(i,t.endContainer,t.endOffset,n),t.setEndAfter(i)),s.isPointInRange(t.startContainer,t.startOffset)&&(i=P(i,t.startContainer,t.startOffset,n))}this.isRemovable(i)?_(i,n):W(i,this.className)},splitAncestorWithClass:function(e,t,i){var n=this.getSelfOrAncestorWithClass(e);n&&P(n,e,t,i)},undoToAncestor:function(e,t){this.isRemovable(e)?_(e,t):W(e,this.className)},applyToRange:function(e,t){var i=this,n=S((t=t||[])||[]);e.splitBoundariesPreservingPositions(n),i.removeEmptyElements&&i.removeEmptyContainers(e);var s=y(e);if(s.length){z(s,function(e){i.isIgnorableWhiteSpaceNode(e)||i.getSelfOrAncestorWithClass(e)||!i.isModifiable(e)||i.applyToTextNode(e,n)});var a=s[s.length-1];e.setStartAndEnd(s[0],0,a,a.length),i.normalize&&i.postApply(s,e,n,!1),D(t,n)}var o=i.getEmptyElements(e);z(o,function(e){r(e,i.className)})},applyToRanges:function(e){for(var t=e.length;t--;)this.applyToRange(e[t],e);return e},applyToSelection:function(t){var i=e.getSelection(t);i.setRanges(this.applyToRanges(i.getAllRanges()))},undoToRange:function(e,t){var i=this,n=S(t=t||[]);e.splitBoundariesPreservingPositions(n),i.removeEmptyElements&&i.removeEmptyContainers(e,n);var s,a,o=y(e),r=o[o.length-1];if(o.length){i.splitAncestorWithClass(e.endContainer,e.endOffset,n),i.splitAncestorWithClass(e.startContainer,e.startOffset,n);for(var l=0,d=o.length;d>l;++l)s=o[l],(a=i.getSelfOrAncestorWithClass(s))&&i.isModifiable(s)&&i.undoToAncestor(a,n);e.setStartAndEnd(o[0],0,r,r.length),i.normalize&&i.postApply(o,e,n,!0),D(t,n)}var c=i.getEmptyElements(e);z(c,function(e){W(e,i.className)})},undoToRanges:function(e){for(var t=e.length;t--;)this.undoToRange(e[t],e);return e},undoToSelection:function(t){var i=e.getSelection(t),n=e.getSelection(t).getAllRanges();this.undoToRanges(n),i.setRanges(n)},isAppliedToRange:function(e){if(e.collapsed||""==e.toString())return!!this.getSelfOrAncestorWithClass(e.commonAncestorContainer);var t=e.getNodes([3]);if(t.length)for(var i,n=0;i=t[n++];)if(!this.isIgnorableWhiteSpaceNode(i)&&$(e,i)&&this.isModifiable(i)&&!this.getSelfOrAncestorWithClass(i))return!1;return!0},isAppliedToRanges:function(e){var t=e.length;if(0==t)return!1;for(;t--;)if(!this.isAppliedToRange(e[t]))return!1;return!0},isAppliedToSelection:function(t){var i=e.getSelection(t);return this.isAppliedToRanges(i.getAllRanges())},toggleRange:function(e){this.isAppliedToRange(e)?this.undoToRange(e):this.applyToRange(e)},toggleSelection:function(e){this.isAppliedToSelection(e)?this.undoToSelection(e):this.applyToSelection(e)},getElementsWithClassIntersectingRange:function(e){var t=[],i=this;return e.getNodes([3],function(e){var n=i.getSelfOrAncestorWithClass(e);n&&!F(t,n)&&t.push(n)}),t},detach:function(){}},L.util={hasClass:o,addClass:r,removeClass:W,getClass:l,hasSameClasses:u,hasAllClasses:h,replaceWithOwnChildren:_,elementsHaveSameNonClassAttributes:w,elementHasNonClassAttributes:C,splitNodeAt:P,isEditableElement:B,isEditingHost:x,isEditable:k},e.CssClassApplier=e.ClassApplier=L,e.createClassApplier=function(e,t,i){return new L(e,t,i)},H.createAliasForDeprecatedMethod(e,"createCssClassApplier","createClassApplier",t)}),e},this),window.puJsFileLoadCounter++,function(){var e=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){return window.setTimeout(e,20)},t=function(i,n){function s(){this.q=[],this.add=function(e){this.q.push(e)};var e,t;this.call=function(){for(e=0,t=this.q.length;e<t;e++)this.q[e].call()}}function a(e,t){return e.currentStyle?e.currentStyle[t]:window.getComputedStyle?window.getComputedStyle(e,null).getPropertyValue(t):e.style[t]}function o(t,i){if(null==t)return!1;if(t.resizedAttached){if(t.resizedAttached)return void t.resizedAttached.add(i)}else t.resizedAttached=new s,t.resizedAttached.add(i);t.resizeSensor=document.createElement("div"),t.resizeSensor.className="resize-sensor";var n="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;",o="position: absolute; left: 0; top: 0; transition: 0s;";t.resizeSensor.style.cssText=n,t.resizeSensor.innerHTML='<div class="resize-sensor-expand" style="'+n+'"><div style="'+o+'"></div></div><div class="resize-sensor-shrink" style="'+n+'"><div style="'+o+' width: 200%; height: 200%"></div></div>',t.appendChild(t.resizeSensor),"static"==a(t,"position")&&(t.style.position="relative");var r=t.resizeSensor.childNodes[0],l=r.childNodes[0],d=t.resizeSensor.childNodes[1],c=function(){l.style.width=1e5+"px",l.style.height=1e5+"px",r.scrollLeft=1e5,r.scrollTop=1e5,d.scrollLeft=1e5,d.scrollTop=1e5};c();var u=!1,h=function(){t.resizedAttached&&(u&&(t.resizedAttached.call(),u=!1),e(h))};e(h);var p,f,m,g,v=function(){(m=t.offsetWidth)==p&&(g=t.offsetHeight)==f||(u=!0,p=m,f=g),c()},b=function(e,t,i){e.attachEvent?e.attachEvent("on"+t,i):e.addEventListener(t,i)};b(r,"scroll",v),b(d,"scroll",v)}var r=Object.prototype.toString.call(i),l="[object Array]"===r||"[object NodeList]"===r||"[object HTMLCollection]"===r||"undefined"!=typeof jQuery&&i instanceof jQuery||"undefined"!=typeof Elements&&i instanceof Elements;if(l)for(var d=0,c=i.length;d<c;d++)o(i[d],n);else o(i,n);this.detach=function(){if(l)for(var e=0,n=i.length;e<n;e++)t.detach(i[e]);else t.detach(i)}};t.detach=function(e){null!=e&&e.resizeSensor&&(void 0!=e.childNodes[e.childNodes.length-1]&&"resize-sensor"==e.childNodes[e.childNodes.length-1].className&&e.removeChild(e.childNodes[e.childNodes.length-1]),delete e.resizeSensor,delete e.resizedAttached)},"undefined"!=typeof module&&void 0!==module.exports?module.exports=t:window.ResizeSensor=t}(),window.puJsFileLoadCounter++,jQuery.extend({highlight:function(e,t,i,n){if(3===e.nodeType){var s=e.data.match(t);if(s){var a=document.createElement(i||"span");a.className=n||"highlight";var o=e.splitText(s.index);o.splitText(s[0].length);var r=o.cloneNode(!0);return a.appendChild(r),o.parentNode.replaceChild(a,o),1}}else if(1===e.nodeType&&e.childNodes&&!/(script|style)/i.test(e.tagName)&&(e.tagName!==i.toUpperCase()||e.className!==n&&-1==e.className.indexOf("edtInputText")))for(var l=0;l<e.childNodes.length;l++)l+=jQuery.highlight(e.childNodes[l],t,i,n);return 0}}),jQuery.fn.unhighlight=function(e){var t={className:"highlight",element:"span"};return jQuery.extend(t,e),this.find(t.element+"."+t.className).each(function(){var e=this.parentNode,i=$(this).removeClass(t.className);""!=i.context.className?e.replaceChild(i.context,this):e.replaceChild(this.firstChild,this),e.normalize()}).end()},jQuery.fn.highlight=function(e,t){var i={className:"highlight",element:"span",caseSensitive:!1,wordsOnly:!0};if(jQuery.extend(i,t),e.constructor===String&&(e=[e]),e=jQuery.grep(e,function(e,t){return""!=e}),0==(e=jQuery.map(e,function(e,t){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")})).length)return this;var n=i.caseSensitive?"":"i",s="("+e.join("|")+")";i.wordsOnly&&(s="\\b"+s+"\\b");var a=new RegExp(s,n);return this.each(function(){jQuery.highlight(this,a,i.element,i.className)})},window.puJsFileLoadCounter++;var currentEDTHeight,jcrop_api,imgToCrop,outLineArray=[],tempOutLineArray=[],tempOutLineIndex=[],statementCountW,lineCountW,getSelectedEDTLevel,edtTagArray=[],undoRedoLength=25,tagStatus="visible",statusUndoRedo=[],currentUndoRedoState=null,currentUndoRedoedtTagArrayState=[];$(document).ready(function(e){function t(){var e=[],t=[];$(".updatedSignField").each(function(i,n){var s=$(this).attr("data-dysign");if($(this).hasClass("signTD"))"select"==(a=$(this).find(".selectSignBox").val())&&(a=""),e.push({dataName:s,dataValue:a});else{var a=$.trim($(this).text());""==a&&(a="&nbsp;"),t.push({dataName:s,dataValue:a})}}),$(e).each(function(t,i){$("[data-name='"+e[t].dataName+"']").attr("data-actor",e[t].dataValue)}),$(t).each(function(e,i){$("[data-name='"+t[e].dataName+"']").text(t[e].dataValue)}),$("#myTaggedFields").animate({right:"-100%"},"slow",function(){$("#myTaggedFields").hide(),$(".edt-loader").hide()})}function i(){var e=!0,t=[],i=[];$(".updatedDynamicField").each(function(n,s){var a=$.trim($(this).text()),o=$(this).attr("data-dyname");$(this).hasClass("dTextGetName")?/[^A-Za-z0-9_]/.test(a)||""==a?(e=!1,$(this).addClass("invalidInput")):($(this).removeClass("invalidInput"),t.push({dataName:o,dataValue:a})):(""==a&&(a="&nbsp;"),i.push({dataName:o,dataValue:a}))}),0==e?bootbox.alert("Field Type can contain alphanumeric characters and underscores only and should not be blank."):($(i).each(function(e,t){$("[data-name='"+i[e].dataName+"']").html(i[e].dataValue)}),$(t).each(function(e,i){$("[data-name='"+t[e].dataName+"']").attr("data-name",t[e].dataValue)}),$("#myTaggedFields").animate({right:"-100%"},"slow",function(){$("#myTaggedFields").hide(),$(".edt-loader").hide()}))}autoEDTHeightCheck();var n,s,a=!1,o=$(window).height();$(".edtDynField").height(o-75),$("body").on("click",".msg-statement-wrap .edtHyperLink",function(){var e=$(this).attr("data-link");window.open(e,"_blank")}),$("body").on("contextmenu",".edt table td",function(e){$(this).position(),$(this).position();$("#tableContextMenu").css({display:"block",left:"0px",left:e.pageX,top:e.pageY}),n=$(this),setDrpdownPos("#tableContextMenu"),e.preventDefault()}),$("body").on("contextmenu",".edt .actor, .edt .role, .edt .terms",function(e){$(this).position();$("#tagContextMenu").css({display:"block",left:"0px",left:e.pageX-265,top:e.pageY-35}),s=$(this),e.preventDefault()}),$("body").on("click","#tagContextMenu a",function(e){var t=$(this).attr("data-action");$("#tagContextMenu").css("display","none"),"removeTag"==t&&($(edtTagArray).each(function(e,t){if(-1!=s.context.className.indexOf("edtInputText")){if(edtTagArray[e].tag.toLowerCase()==s.context.getAttribute("data-name").toLowerCase())return edtTagArray.splice(e,1),!1}else if(edtTagArray[e].tag.toLowerCase()==s.text().toLowerCase())return edtTagArray.splice(e,1),!1}),highlightText(tagStatus))}),$("body").on("click",".doHyperLink",function(e){var t=document.getSelection().anchorNode;if(1==document.getSelection().isCollapsed)return bootbox.alert("Select some text first to make it a hyperlink"),!1;if(3==t.nodeType&&(t=t.parentNode),-1==t.className.indexOf("edtParagraph"))for(;-1==t.className.indexOf("edtParagraph");)t=t.parentNode;if(-1!=t.className.indexOf("edtParagraph")){rangy.createClassApplier("tempEDTLink",!0).applyToSelection(),$("#edtHyperlinkText").val("");$(".tempEDTLink").offset();var i=$(this).position();$("#edtHyperlinkPopup").css("display","block").css({top:i.top+22}),setDrpdownPos("#edtHyperlinkPopup"),setDrpdownPos("#edtHyperlinkPopup"),$("#edtHyperlinkText").focus(),e.preventDefault()}}),$("body").on("keypress","#edtHyperlinkText",function(e){if(13===(e.keyCode?e.keyCode:e.which))return $("#saveedtHyperlinkText").trigger("click"),!1}),$("body").on("click",".edt .edtHyperLink",function(e){var t=$(this).attr("data-link");$(".selectedHyperLink").removeClass("selectedHyperLink"),$(this).addClass("selectedHyperLink"),$("#edtHyperlinkPreviewText").attr("href",t).text(t).attr("data-obj",$(this));var i=$(this).position();$(this).closest(".more-txt-span").hasClass("clearfix")?$("#edtHyperlinkPreview").css("display","none"):$("#edtHyperlinkPreview").css("display","block").css({top:i.top+22}),setDrpdownPos("#edtHyperlinkPreview"),e.stopPropagation()}),$("body").on("click","#removeedtHyperlinkPreviewText",function(e){$(".selectedHyperLink")[0].classList.length>2?$(".selectedHyperLink").removeAttr("data-link").removeClass("edtHyperLink"):$(".selectedHyperLink").replaceWith($(".selectedHyperLink").html())}),$("body").on("click","#saveedtHyperlinkText",function(e){var t=$("#edtHyperlinkText").val(),i=/^(http[s]?:\/\/){0,1}(www\.){0,1}[a-zA-Z0-9\.\-]+\.[a-zA-Z]{2,5}[\.]{0,1}/;if(-1==t.search(/^http[s]?\:\/\//)&&(t="http://"+t),!i.test(t))return bootbox.alert("Enter Valid URL"),!1;$(".tempEDTLink").attr("data-link",t).addClass("edtHyperLink").removeClass("tempEDTLink"),$("#edtHyperlinkPopup").css("display","none")}),$("body").on("click","#canceledtHyperlinkText",function(e){void 0==$(".tempEDTLink").attr("data-link")?$(".tempEDTLink")[0].classList.length>1?$(".tempEDTLink").removeClass("tempEDTLink"):$(".tempEDTLink").replaceWith($(".tempEDTLink").html()):$(".tempEDTLink").removeClass("tempEDTLink"),$("#edtHyperlinkPopup").css("display","none")}),$("html").on("click","*",function(){$("#tableContextMenu").css("display","none"),$("#ColorPlatesSection").css("display","none"),$("#edtformElements").css("display","none"),$("#signatureType").css("display","none"),$("#edtHyperlinkPreview").css("display","none"),$("#edtTagElements").css("display","none"),$("#tagContextMenu").css("display","none")}),$("body").on("click","#edtformElements a",function(e){var t=$(this).attr("data-action"),i=document.getSelection(),n=i.anchorNode;if(void 0==n.className&&"SPAN"==(n=i.anchorNode.parentNode).nodeName&&(n=i.anchorNode.parentNode.parentNode),"DIV"==n.tagName||"TD"==n.tagName||"TR"==n.tagName)if("createNew"==t){var s=document.getSelection().anchorNode;if(3==s.nodeType&&(s=s.parentNode),-1==s.className.indexOf("edtParagraph"))for(;-1==s.className.indexOf("edtParagraph");)s=s.parentNode;-1!=s.className.indexOf("edtParagraph")&&pasteHtmlAtCaret(" <span data-name='"+Date.now()+"' class='edtInputText' contenteditable='false'>&nbsp;</span> ")}else if("createExisting"==t){var a=$("#edtformElementsTextPropertiesReference");$("#edtformElementsTextProperties").css("display","none"),a.css({display:"block",left:"0px",left:e.pageX,top:e.pageY}),setDrpdownPos("#edtformElementsTextPropertiesReference"),a.find("ul").empty();var o=[];0!=$("#edt .edtInputText").length?$("#edt .edtInputText").each(function(e,t){-1==o.indexOf($(this).attr("data-name"))&&(a.find("ul").append("<li><a href='javascript:void(0)' data-value='"+$(this).text()+"'>"+$(this).attr("data-name")+"</a></li>"),o.push($(this).attr("data-name")))}):a.find("ul").html("<li>No Reference Found!!</li>")}indexing(),$("#sNumbers").is(":checked")&&outLineNum(),e.preventDefault()}),$("body").on("click","#edtformElementsTextPropertiesReference li a",function(e){var t=document.getSelection().anchorNode;if(3==t.nodeType&&(t=t.parentNode),-1==t.className.indexOf("edtParagraph"))for(;-1==t.className.indexOf("edtParagraph");)t=t.parentNode;if(-1!=t.className.indexOf("edtParagraph")){var i=$(this).text(),n=$(this).attr("data-value");$(this).attr("data-width");pasteHtmlAtCaret(" <span data-name='"+i+"' class='edtInputText' contenteditable='false'>"+n+"</span> "),$("#edtformElementsTextPropertiesReference").css("display","none"),indexing(),$("#sNumbers").is(":checked")&&outLineNum()}}),$("body").on("dblclick",".edt .edtParagraph .edtInputText",function(e){$(this).addClass("edtInputTextSelected"),$("#edt").attr("contenteditable",!1).addClass("unselectable"),$("#edtformElementsTextProperties #edtPropAttrName").val($(this).attr("data-name")).attr("data-oldname",$(this).attr("data-name")),$("#edtformElementsTextProperties #edtPropAttrValue").val($.trim($(this).text())),$("#edtformElementsTextProperties").css({display:"block",left:"0px",left:e.pageX,top:e.pageY}),setDrpdownPos("#edtformElementsTextProperties")}),$("body").on("click","#canceledtformElementsTextProperties, #canceledtformElementsTextPropertiesReference",function(e){$(".edtInputTextSelected").removeClass("edtInputTextSelected"),$("#edt").attr("contenteditable",!0).removeClass("unselectable"),$("#edtformElementsTextProperties").css("display","none"),$("#edtformElementsTextPropertiesReference").css("display","none")}),$("body").on("keypress","#edtPropAttrName, #edtPropAttrValue",function(e){if(13===(e.keyCode?e.keyCode:e.which))return $("#saveedtformElementsTextProperties").trigger("click"),!1}),$("body").on("click","#deleteedtformElementsTextProperties",function(e){$(".edtInputTextSelected").remove(),$("#edt").attr("contenteditable",!0).removeClass("unselectable"),$("#edtformElementsTextProperties").css("display","none"),$("#edtformElementsTextPropertiesReference").css("display","none")}),$("body").on("click","#saveedtformElementsTextProperties",function(e){var t=$("#edtformElementsTextProperties #edtPropAttrName").attr("data-oldname"),i=$("#edtformElementsTextProperties #edtPropAttrName").val(),n=$("#edtformElementsTextProperties #edtPropAttrValue").val();return""==$.trim(i).length?(bootbox.alert("Field Name Required"),$("#edtformElementsTextProperties #edtPropAttrName").focus(),!1):/[^A-Za-z0-9_]/.test(i)?(bootbox.alert("Field Name can contain alphanumeric characters and underscores only and should not be blank."),$("#edtformElementsTextProperties #edtPropAttrName").focus(),!1):(0==$.trim(n).length&&(n="&nbsp;"),edtTagArray.find(function(e,n){if(e.tag===t)return edtTagArray[n].tag=i,!1}),$(".edt [data-name="+t+"]").attr("data-name",i).html($.trim(n)),indexing(),$("#sNumbers").is(":checked")&&outLineNum(),$("#edt").attr("contenteditable",!0).removeClass("unselectable"),$("#edtformElementsTextProperties").css("display","none"),$("#edtformElementsTextProperties #edtPropAttrName").removeAttr("data-oldname").val(""),$("#edtformElementsTextProperties #edtPropAttrValue").val(""),void highlightText(tagStatus))}),$("body").on("click","#tableContextMenu a",function(e){var t=$(this).attr("data-action");if("rowAbove"==t){s="<tr>"+(o=n.closest("tr")).html()+"</tr>";$(s).insertBefore(o),o.prev().find("td").html("&nbsp;"),cursorManager.setEndOfContenteditable(o.prev().find("td:first").get(0)),indexing(),$("#sNumbers").is(":checked")&&outLineNum()}else if("rowBelow"==t){s="<tr>"+(o=n.closest("tr")).html()+"</tr>";$(s).insertAfter(o),o.next().find("td").html("&nbsp;"),cursorManager.setEndOfContenteditable(o.next().find("td:first").get(0)),indexing(),$("#sNumbers").is(":checked")&&outLineNum()}else if("columnLeft"==t){var i=n.closest("table"),s="<td>&nbsp;</td>",a=n.index();i.find("tr").each(function(e){$(s).insertBefore($(this).find("td:eq("+a+")"))}),indexing(),$("#sNumbers").is(":checked")&&outLineNum()}else if("columnRight"==t){var i=n.closest("table"),s="<td>&nbsp;</td>",a=n.index();i.find("tr").each(function(e){$(s).insertAfter($(this).find("td:eq("+a+")"))}),indexing(),$("#sNumbers").is(":checked")&&outLineNum()}else if("deleteRow"==t){var i=n.closest("table"),o=n.closest("tr");1==i.find("tr").length?i.closest(".edtParagraph").html("<br>"):o.remove(),indexing(),$("#sNumbers").is(":checked")&&outLineNum()}else if("deleteColumn"==t){var i=n.closest("table"),a=n.index();1==i.find("tr:first td").length?i.closest(".edtParagraph").html("<br>"):i.find("tr").each(function(e){$(this).find("td:eq("+a+")").remove()}),indexing(),$("#sNumbers").is(":checked")&&outLineNum()}else"deleteTable"==t&&((i=n.closest("table")).closest(".edtParagraph").html("<br>"),indexing(),$("#sNumbers").is(":checked")&&outLineNum());autoEDTHeightCheck(),e.preventDefault()}),$("body").on("keyup","#edt",function(e){var t=e.keyCode?e.keyCode:e.which;if(countEDTWords(),8===t||46===t){var i=document.getSelection();if(0==$(".edt .edtParagraph").length){if($(this).empty(),$("#sNumbers").is(":checked"))n="1.";else var n="";var s="<div class='edtParagraph' data-s='"+n+"' data-x='0'><br></div>";$(this).html(s),cursorManager.setEndOfContenteditable($("#edt .edtParagraph:eq(0)").get(0)),autoEDTHeightCheck()}else if("edt"==i.anchorNode.id&&0!=i.anchorNode.children.length){var a=i.anchorOffset-2;$("#edt .edtParagraph:eq("+a+")").html($("#edt .edtParagraph:eq("+a+")").html().replace(/(<br>\s*)+/g,"")),cursorManager.setEndOfContenteditable($("#edt .edtParagraph:eq("+a+")").get(0))}$("#sNumbers").is(":checked")&&outLineNum(),columnizer(),indexing(),$(".edtTOC").is(":visible")&&runTOC()}for(var o=!1,r=$("#edt").children(),l=0;l<r.length;l++)"BR"==r[l].nodeName&&(r[l].remove(),o=!0),""!=r[l].textContent||$(r[l]).has("img")||$(r[l]).html("<br>");1==o&&(o=!1,$("#sNumbers").is(":checked")&&outLineNum(),columnizer(),indexing());var d=document.getSelection().anchorNode;if(3==d.nodeType&&(d=d.parentNode),$(d).hasClass("edt")&&$(".edt").blur(),d.className.indexOf("edtParagraph")>-1){for(;-1==d.className.indexOf("edtParagraph");)d=d.parentNode;13===t&&(0==isScrolledIntoView($(d))&&$(".mainScroll").scrollTop($(d).offset().top-$(".mainScroll").offset().top+$(".mainScroll").scrollTop()),setDocEntryHig()),"0"==$(d).text().length&&$(d).html($(d).html().replace(/(<br>\s*)+/g,"<br>"))}}),$("body").on("cut",".edt",function(e){e.keyCode?e.keyCode:e.which;var t=document.getSelection().anchorNode;if(3==t.nodeType&&(t=t.parentNode),-1==t.className.indexOf("edtParagraph"))for(;-1==t.className.indexOf("edtParagraph")&&"TD"!=(t=t.parentNode).tagName&&"TR"!=t.tagName;);var i=document.getSelection();!i.isCollapsed&&e.ctrlKey&&(i.getRangeAt(0).deleteContents(),e.preventDefault()),0===$(t).index()&&$(t).text().length,"0"==$(t).text().length&&"0"!=$(t).prev(".edtParagraph").text().length&&$(t).prev(".edtParagraph").html($(t).prev(".edtParagraph").html().replace(/(<br>\s*)+/g,"")),setTimeout(function(){for(var e=$("#edt").children(),t=0;t<e.length;t++)"BR"!=e[t].nodeName&&""!=e[t].textContent||e[t].remove();var i=document.getSelection();if("edt"==i.anchorNode.id&&0!=i.anchorNode.children.length){var n=i.anchorOffset-1;$("#edt .edtParagraph:eq("+n+")").html($("#edt .edtParagraph:eq("+n+")").html().replace(/(<br>\s*)+/g,"")),cursorManager.setEndOfContenteditable($("#edt .edtParagraph:eq("+n+")").get(0))}else if("edt"==i.anchorNode.id&&0==i.anchorNode.children.length){$("#edt").append("<div class='edtParagraph' data-s='1.' data-x='0'><br></div>"),cursorManager.setEndOfContenteditable($("#edt .edtParagraph:eq(0)").get(0))}$("#sNumbers").is(":checked")&&outLineNum(),columnizer(),indexing()})}),$("body").on("paste",".edt .edtParagraph td",function(e){if(1==a)return!1;a=!0;var t=$(this);setTimeout(function(){var e=t.text();e=e.replace(/(?:\r\n|\r|\n)/g," "),t.html(e),a=!1,indexing(),cursorManager.setEndOfContenteditable($(t).get(0))},10),e.stopPropagation()}),$("body").on("paste",".edt .edtParagraph",function(e){if(1==a)return!1;var t=document.getSelection(),i=t.anchorNode;if(3==i.nodeType&&(i=i.parentNode),-1==i.className.indexOf("edtParagraph"))for(;-1==i.className.indexOf("edtParagraph");)i=i.parentNode;var n=t.focusNode;if(3==n.nodeType&&(n=n.parentNode),-1==n.className.indexOf("edtParagraph"))for(;-1==n.className.indexOf("edtParagraph");)n=n.parentNode;if(i!=n)return bootbox.alert("This action is not allowed."),!1;var s=$(this);pasteHtmlAtCaret("<div class='replaceMe'>&nbsp;</div>"),$("#pastedText").html(""),cursorManager.setEndOfContenteditable($("#pastedText").get(0)),setTimeout(function(){parsePastedHTML(s)})}),$("body").on("click",".edt",function(e){$(".edt img").resizable(),$(".edt img").css("display","inline-block"),$(".edt img").resizable("destroy");var t=document.getSelection().anchorNode;3==t.nodeType&&(t=t.parentNode),$(t).find("table").length>0&&cursorManager.setEndOfContenteditable($(t).find("table tr:first td:first").get(0)),$(".edtHeader #fontStyle").val($(".edtHeader #fontStyle option:first").val()),$(".edtHeader #fontSize").val($(".edtHeader #fontSize option:first").val()),document.execCommand("enableObjectResizing",!1,"false"),document.execCommand("enableInlineTableEditing",!1,"false")}),$("body").on("click",".edt .edtParagraph",function(e){currentEDTHeight=$(this).height()}),$("body").on("keydown","#edt",function(e){if($("#tableContextMenu").is(":visible"))return!1;var t=e.keyCode?e.keyCode:e.which,i=!1,n=document.getSelection().anchorNode;if(3==n.nodeType){if("edtInputText"==n.parentElement.className)return!1;n=n.parentNode}if(-1==n.className.indexOf("edtParagraph"))for(;-1==n.className.indexOf("edtParagraph")&&"TD"!=(n=n.parentNode).tagName&&"TR"!=n.tagName;);if(-1==n.className.indexOf("edtParagraph")&&"TD"!=n.tagName&&"TR"!=n.tagName)return!1;if(13==t){if("TD"==n.tagName||"TR"==n.tagName){var s=$(n).closest("TR");if(0!=$.trim(s.text()).length){var a="<tr>"+s.html()+"</tr>";return $(a).insertAfter(s),s.next().find("td").html("&nbsp;"),cursorManager.setEndOfContenteditable(s.next().find("td:first").get(0)),$("#sNumbers").is(":checked")&&outLineNum($(n).closest(".edtParagraph")),indexing(),autoEDTHeightCheck(),!1}for(;"DIV"!=n.tagName;)n=n.parentNode,i=!0}var o=$(n).attr("data-x"),r=$(n).attr("class");void 0==o&&(o=0),void 0==r&&(r="edtParagraph");f=20*o;if(i){l="<div class='"+r+"' id=\"edtNewDiv\" data-x='"+o+"' style='margin-left:"+f+"px'><br></div>";$(l).insertAfter($(n))}else{if(0==$.trim($(n).text()).length&&$(n).hasClass("edtList"))return $(n).removeClass("edtList").removeClass("edtListSub").attr("data-x",0),$("#sNumbers").is(":checked")&&outLineNum($(n)),indexing(),!1;var l="<br></div><div class='"+r+"' id=\"edtNewDiv\" data-x='"+o+"' style='margin-left:"+f+"px'>";pasteHtmlAtCaret("<div class='replaceMe'></div>"),$(this).html($(this).html().replace('<div class="replaceMe"></div>',l))}var d=document.getElementById("edtNewDiv"),c=document.createRange(),u=window.getSelection();c.setStart(d,0),c.collapse(!0),u.removeAllRanges(),u.addRange(c),"0"!=$("#edtNewDiv").text().length?$("#edtNewDiv").html($("#edtNewDiv").html().replace(/(<br>\s*)+/g,"")):($("#edtNewDiv").append("<br>"),$("#edtNewDiv").html($("#edtNewDiv").html().replace(/(<br\ ?\/?>)+/,"<br>")));var h=$("#edtNewDiv").prev(".edtParagraph");return $(this).find("#edtNewDiv").removeClass("selectedHeader").removeAttr("id"),indexing(),$("#sNumbers").is(":checked")&&outLineNum(h),autoEDTHeightCheck(),!1}if(e.shiftKey&&9==t){if(void 0==(N=(T=document.getSelection()).anchorNode).className&&"SPAN"==(N=T.anchorNode.parentNode).nodeName&&(N=T.anchorNode.parentNode.parentNode),"TD"==N.tagName||"TR"==N.tagName)for(;"DIV"!=N.tagName;)N=N.parentNode;if(T.isCollapsed&&N.className.match("edtParagraph").length>0){v=N;if(0===$(v).index())return autoEDTHeightCheck(),!1;var p=$(v).attr("data-x"),f=20*(b=parseInt(p)-1);if(p>0){$(v).attr("data-x",b),$(v).css("margin-left",f);m=$(v)}}else{_=T.anchorNode;$(_).hasClass("edtParagraph")||(_=T.anchorNode.parentNode,$(_).hasClass("edtParagraph")||(_=T.anchorNode.parentNode.parentNode));y=T.focusNode;if($(y).hasClass("edtParagraph")||(y=T.focusNode.parentNode,$(y).hasClass("edtParagraph")||(y=T.focusNode.parentNode.parentNode)),$(_).index()>=$(y).index())var m=$(y),g=$(_);else var m=$(_),g=$(y);m.nextAll().addBack().each(function(e,t){var i=$(this).attr("data-x"),n=parseInt(i)-1,s=20*n;if(i>0&&($(this).attr("data-x",n),$(this).css("margin-left",s)),$(this).index()===g.index())return!1})}return indexing(),$("#sNumbers").is(":checked")&&outLineNum(m),columnizer(),autoEDTHeightCheck(),!1}if(9==t){if(void 0==(N=(T=document.getSelection()).anchorNode).className&&"SPAN"==(N=T.anchorNode.parentNode).nodeName&&(N=T.anchorNode.parentNode.parentNode),"TD"==N.tagName||"TR"==N.tagName)for(;"DIV"!=N.tagName;)N=N.parentNode;if(T.isCollapsed&&N.className.match("edtParagraph").length>0){var v=N;if(0===$(v).index())return autoEDTHeightCheck(),!1;var p=$(v).attr("data-x"),b=parseInt(p)+1,f=20*b;$(v).attr("data-x",b),$(v).css("margin-left",f);m=$(v)}else{var _=T.anchorNode;$(_).hasClass("edtParagraph")||(_=T.anchorNode.parentNode,$(_).hasClass("edtParagraph")||(_=T.anchorNode.parentNode.parentNode));var y=T.focusNode;if($(y).hasClass("edtParagraph")||(y=T.focusNode.parentNode,$(y).hasClass("edtParagraph")||(y=T.focusNode.parentNode.parentNode)),$(_).index()>=$(y).index())var m=$(y),g=$(_);else var m=$(_),g=$(y);m.nextAll().addBack().each(function(e,t){var i=$(this).attr("data-x"),n=parseInt(i)+1,s=20*n;if($(this).attr("data-x",n),$(this).css("margin-left",s),$(this).index()===g.index())return!1})}return indexing(),$("#sNumbers").is(":checked")&&outLineNum(m),columnizer(),autoEDTHeightCheck(),!1}if(8===t||46===t){var w=document.getSelection();!w.isCollapsed&&e.ctrlKey&&(w.getRangeAt(0).deleteContents(),e.preventDefault()),"0"==$(n).text().length&&"0"!=$(n).prev(".edtParagraph").text().length&&$(n).prev(".edtParagraph").html($(n).prev(".edtParagraph").html().replace(/(<br>\s*)+/g,"")),setDocEntryHig()}if(e.ctrlKey&&66==t)return e.preventDefault(),$("#edt").hasClass("unstructured")&&edtBoldApplier.toggleSelection(),!1;if(e.ctrlKey&&85==t)return e.preventDefault(),$("#edt").hasClass("unstructured")&&edtUnderlineApplier.toggleSelection(),!1;if(e.ctrlKey&&73==t)return e.preventDefault(),$("#edt").hasClass("unstructured")&&edtItalicApplier.toggleSelection(),!1;if(e.ctrlKey&&75==t)return e.preventDefault(),$(".doHyperLink ").trigger("click"),!1;if(e.ctrlKey&&90==t)return e.preventDefault(),$(".doUndo ").trigger("click"),!1;if(e.ctrlKey&&89==t)return e.preventDefault(),$(".doRedo ").trigger("click"),!1;if(e.ctrlKey&&(72==t||70==t))return e.preventDefault(),$(".doFindReplace").trigger("click"),!1;if(e.shiftKey&&e.altKey&&38==t){if(e.preventDefault(),void 0==(N=(T=document.getSelection()).anchorNode).className&&"SPAN"==(N=T.anchorNode.parentNode).nodeName&&(N=T.anchorNode.parentNode.parentNode),"TD"==N.tagName||"TR"==N.tagName)for(;"DIV"!=N.tagName;)N=N.parentNode;if($(N).index()>0){var C=$(N).index()-1,x=$(".edtParagraph:eq("+C+")").html(),k=$(N).html();$(".edtParagraph:eq("+C+")").html(k),$(N).html(x),cursorManager.setEndOfContenteditable($(".edtParagraph:eq("+C+")").get(0))}return!1}if(e.shiftKey&&e.altKey&&40==t){e.preventDefault();var T=document.getSelection(),N=T.anchorNode;if(void 0==N.className&&"SPAN"==(N=T.anchorNode.parentNode).nodeName&&(N=T.anchorNode.parentNode.parentNode),"TD"==N.tagName||"TR"==N.tagName)for(;"DIV"!=N.tagName;)N=N.parentNode;if($(N).index()!=$(".edtParagraph").length-1){var S=$(N).index()+1,x=$(".edtParagraph:eq("+S+")").html(),k=$(N).html();$(".edtParagraph:eq("+S+")").html(k),$(N).html(x),cursorManager.setEndOfContenteditable($(".edtParagraph:eq("+S+")").get(0))}return!1}if(e.ctrlKey&&65==t){var D=$("#edt .edtParagraph").length;cursorManager.setEndOfContenteditable($("#edt .edtParagraph:last").get(0));var I=window.getSelection(),c=document.createRange(),P=(I.anchorOffset,document.getElementById("edt").getElementsByClassName("edtParagraph"));return c.setStart(P[0],0),c.setEnd(P[D-1],P[D-1].childNodes.length),I.removeAllRanges(),I.addRange(c),!1}}),$("body").on("click",".edtHeader .doBold",function(){var e=document.getSelection().anchorNode;if(3==e.nodeType&&(e=e.parentNode),-1==e.className.indexOf("edtParagraph"))for(;-1==e.className.indexOf("edtParagraph");)e=e.parentNode;-1!=e.className.indexOf("edtParagraph")&&(edtBoldApplier.toggleSelection(),indexing())}),$("body").on("click",".edtHeader .doItalic",function(){var e=document.getSelection().anchorNode;if(3==e.nodeType&&(e=e.parentNode),-1==e.className.indexOf("edtParagraph"))for(;-1==e.className.indexOf("edtParagraph");)e=e.parentNode;-1!=e.className.indexOf("edtParagraph")&&(edtItalicApplier.toggleSelection(),indexing())}),$("body").on("click",".edtHeader .doUnderline",function(){var e=document.getSelection().anchorNode;if(3==e.nodeType&&(e=e.parentNode),-1==e.className.indexOf("edtParagraph"))for(;-1==e.className.indexOf("edtParagraph");)e=e.parentNode;-1!=e.className.indexOf("edtParagraph")&&(edtUnderlineApplier.toggleSelection(),indexing())}),$("body").on("change","#edtAutoLevels",function(){"custom"!=$("#edtAutoLevels").val()&&($(".edtParagraph").removeClass("selectedHeader"),getSelectedEDTLevel=void 0,$("#refreshTOC").trigger("click"))}),$("body").on("click","#refreshTOC",function(){runTOC()}),$("body").on("click",".edtHeader .doTableofContent",function(){if("none"!=$(".edtContainer .edtCol1").css("display"))return $(".edtContainer .edtCol1").css("display","none"),$(".edtContainer .edtCol2").removeClass("edtCol2Width"),$(".collapsableEDTLevelsContent").css("display","none"),"structured"==$("#documentMode").val()?($(".edt").css("margin-left","40px"),$(".edtColumns").css("padding-left","39px")):$(".edt").css("margin-left","0px"),!1;$(".edtContainer .edtCol1").css("display","block"),$(".collapsableEDTLevelsContent").css("display","block"),$(".edtContainer .edtCol2").addClass("edtCol2Width"),"structured"==$("#documentMode").val()?($(".edt").css("margin-left","80px"),$(".edtColumns").css("padding-left","79px")):($(".edt").css("margin-left","40px"),$(".edtColumns").css("padding-left","39px")),runTOC(),indexing()}),$("body").on("dblclick","#myTaggedFields .edtTaggedFields table tbody .dSignValue",function(){if($(".dSignValueEdit").length>0)return $(".dSignValueEdit").focus(),!1;var e=$(this).text();"Not Defined"==e&&(e=""),$(this).html("<input type='text' value='"+e+"' class='form-control input-field dSignValueEdit "+$(this).attr("class")+"'>"),$(this).find(".dSignValueEdit").focus();var t=$(this).attr("data-dysign");$("[data-name="+t+"]").addClass("dynoHighlight"),0==isScrolledIntoView($(".dynoHighlight:eq(0)"))&&$(".mainScroll").scrollTop($(".dynoHighlight:eq(0)").offset().top-$(".mainScroll").offset().top+$(".mainScroll").scrollTop())}),$("body").on("change","#myTaggedFields .edtTaggedFields table tbody .selectSignBox",function(){var e=$(this).closest("td");e.addClass("updatedSignField");var t=e.attr("data-dysign");$("[data-name="+t+"]").removeClass("dynoHighlight")}),$("body").on("blur","#myTaggedFields .edtTaggedFields table tbody .dSignValueEdit",function(){var e=$(this).closest("td");e.text($(this).val()),e.addClass("updatedSignField");var t=e.attr("data-dysign");$("[data-name="+t+"]").removeClass("dynoHighlight")}),$("body").on("dblclick","#myTaggedFields .edtTaggedFields table tbody .dTextName",function(){if($(".dTextNameEdit").length>0)return $(".dTextNameEdit").focus(),!1;var e=$(this).text();"Not Defined"==e&&(e=""),$(this).html("<input type='text' value='"+e+"' class='form-control input-field dTextNameEdit "+$(this).attr("class")+"'>"),$(this).find(".dTextNameEdit").focus();var t=$(this).attr("data-dyname");$("[data-name="+t+"]").addClass("dynoHighlight"),0==isScrolledIntoView($(".dynoHighlight:eq(0)"))&&$(".mainScroll").scrollTop($(".dynoHighlight:eq(0)").offset().top-$(".mainScroll").offset().top+$(".mainScroll").scrollTop())}),$("body").on("blur","#myTaggedFields .edtTaggedFields table tbody .dTextNameEdit",function(){var e=$(this).closest("td");if(0==e.index()){var t=$(this).val();if(/[^A-Za-z0-9_]/.test(t)||""==t)return $(this).addClass("invalidInput"),bootbox.alert("Field Type can contain alphanumeric characters and underscores only and should not be blank."),!1;e.text($(this).val())}else e.text($(this).val());e.addClass("updatedDynamicField");var i=e.attr("data-dyname");$("[data-name="+i+"]").removeClass("dynoHighlight")}),$("body").on("keydown","#myTaggedFields .edtTaggedFields table tbody .dTextNameEdit",function(e){13===(e.keyCode?e.keyCode:e.which)&&$("#myTaggedFields .edtTaggedFields table tbody .dTextNameEdit").trigger("blur")}),$("body").on("keydown","#myTaggedFields .edtTaggedFields table tbody .dSignValueEdit",function(e){13===(e.keyCode?e.keyCode:e.which)&&$("#myTaggedFields .edtTaggedFields table tbody .dSignValueEdit").trigger("blur")}),$("body").on("click","#saveAllDynFields",function(){"showDynamicText"==$("#myTaggedFields .edt-top-navigation li.active a").attr("data-action")?i():t()});var r;$("body").on("dblclick",".edt .signature",function(e){$("#signatureType").css({display:"block",left:"0px",left:e.pageX-10,top:e.pageY+10}),$("#signatureType input[value='"+$(this).attr("data-signtype")+"']").prop("checked",!0),r=$(this),setDrpdownPos("#signatureType")}),$("body").on("click","#signatureType input[type='radio']",function(e){r.attr("data-signtype",$("#signatureType input[type='radio']:checked").val()),$("#signatureType").css("display","none")}),$("body").on("click",".tagEdtDynamicField a",function(e){var t=$(this).attr("data-action"),i=$("#edtPropAttrName").attr("data-oldname");edtTagArray.find(function(e,t){if(e.tag===i)return edtTagArray.splice(t,1),!1}),edtTagArray.push({type:t,tag:i,fieldType:"Dynamic"}),$("[data-name="+i+"]").removeClass("actor").removeClass("role").removeClass("terms").addClass(t.toLowerCase()),$("#edtformElementsTextProperties").css("display","none"),$("#edt").attr("contenteditable",!0).removeClass("unselectable"),pushUndoRedo(),highlightText(tagStatus)}),$("body").on("click","#edtTagElements a",function(e){$("#edtTagElements").css("display","none");var t=$(this).attr("data-action"),i=document.getSelection().anchorNode;if("showtaggeditems"==t)return $("#saveAllDynFields").addClass("hidden"),$("#edtScanTags").removeClass("hidden"),$("#myTaggedFields .edtTaggedFields table tbody").empty(),$("#myTaggedFields .nav li").removeClass("active"),$("#myTaggedFields .nav li:first").addClass("active"),$(edtTagArray).each(function(e,t){"Actor"==edtTagArray[e].type&&$("#myTaggedFields .edtTaggedFields table tbody").append("<tr><td>"+edtTagArray[e].type+"</td><td>"+edtTagArray[e].tag+"</td><td>&nbsp;</td></tr>")}),0==$("#myTaggedFields .edtTaggedFields table tbody tr").length&&$("#myTaggedFields .edtTaggedFields table tbody").html("<tr><td colspan='2'>No Reference Found!!</td></tr>"),$(".edt-loader").show(),$("#myTaggedFields").show().animate({right:"0px"},"slow"),$(".edtTaggedFields").height(o-130-$(".breadcrumb-wrap").outerHeight()-$(".header-stick-top").outerHeight()),!1;if("toggleTags"==t)return"visible"==$(this).attr("data-val")?($(this).attr("data-val","hidden"),tagStatus="hidden"):($(this).attr("data-val","visible"),tagStatus="visible"),highlightText(tagStatus),!1;if(1==document.getSelection().isCollapsed&&"showtaggeditems"!=t)return bootbox.alert("Please select some text first."),!1;if(3==i.nodeType&&(i=i.parentNode),-1==i.className.indexOf("edtParagraph"))for(;-1==i.className.indexOf("edtParagraph");)i=i.parentNode;if(-1!=i.className.indexOf("edtParagraph")){rangy.createClassApplier("tempEDTLink",!0).applyToSelection();var n=$(".tempEDTLink").text();if("dynamicField"==t){s=Date.now();$(".tempEDTLink").addClass("edtInputText tempDynField"),$("#edt").highlight(n,{wordsOnly:!0,className:"edtInputText dynTagField"}),$(".tempEDTLink").removeClass("tempEDTLink"),$(".dynTagField").each(function(e,t){$(this).removeClass("tempEDTLink").removeClass("dynTagField").attr("data-name",s).attr("contenteditable",!1),$(this).parent().hasClass("edtInputText")&&$(this).parent().contents().unwrap()}),$(".tempDynField").removeClass("tempDynField").attr("data-name",s).attr("contenteditable",!1)}else if("sign"==t){var s=Date.now();$(".tempEDTLink").addClass("signature tempDynField"),$("#edt").highlight(n,{wordsOnly:!0,className:"signature dynTagField"}),$(".tempEDTLink").removeClass("tempEDTLink"),$(".dynTagField").each(function(e,t){$(this).removeClass("tempEDTLink").removeClass("dynTagField").attr("data-name",s).attr("data-actor","").attr("data-signtype","full").attr("contenteditable",!1),$(this).parent().hasClass("signature")&&$(this).parent().contents().unwrap()}),$(".tempDynField").removeClass("tempDynField").attr("data-name",s).attr("data-actor","").attr("data-signtype","full").attr("contenteditable",!1)}else{var a=!1;if($(edtTagArray).each(function(e,t){if($.trim(edtTagArray[e].tag).toLowerCase()==$.trim(n).toLowerCase())return a=!0,!1}),a)return $(".tempEDTLink").removeClass("tempEDTLink"),bootbox.alert("Already tagged."),!1;edtTagArray.push({type:t,tag:$.trim(n)}),$(".tempEDTLink").text(n).removeClass("tempEDTLink").addClass(t.toLowerCase()),pushUndoRedo(),highlightText(tagStatus)}e.preventDefault()}}),$("body").on("click","#myTaggedFields .nav a",function(e){$("#myTaggedFields .nav li").removeClass("active"),$(this).closest("li").addClass("active");var t=$(this).attr("data-action");if("showActors"==t){$("#saveAllDynFields").addClass("hidden"),$("#edtScanTags").removeClass("hidden");i="Actor"}else if("showRoles"==t){$("#saveAllDynFields").addClass("hidden"),$("#edtScanTags").removeClass("hidden");i="Role"}else if("showTerms"==t){$("#saveAllDynFields").addClass("hidden"),$("#edtScanTags").removeClass("hidden");var i="Terms"}if($("#myTaggedFields .edtTaggedFields table tbody").empty(),"showDynamicText"==t){$("#saveAllDynFields").removeClass("hidden"),$("#edtScanTags").addClass("hidden");n=[];0!=$("#edt .edtInputText").length?$("#edt .edtInputText").each(function(e,t){if(-1==n.indexOf($(this).attr("data-name"))){if(""==$.trim($(this).text()))i="Not Defined";else var i=$(this).text();$("#myTaggedFields .edtTaggedFields table tbody").append("<tr><td class='dTextName dTextGetName' data-dyname='"+$(this).attr("data-name")+"'>"+$(this).attr("data-name")+"</td><td class='dTextName dTextGetValue' data-dyname='"+$(this).attr("data-name")+"'>"+i+"</td><td class='deleteEdtTag'></td></tr>"),n.push($(this).attr("data-name"))}}):$("#myTaggedFields .edtTaggedFields table tbody").html("<tr><td colspan='2'>No Reference Found!!</td></tr>")}else if("showSignatures"==t){$("#saveAllDynFields").removeClass("hidden"),$("#edtScanTags").addClass("hidden");var n=[],s="<option value='select'>-Select Actor-</option>";edtTagArray.length>0&&$(edtTagArray).each(function(e,t){var i=edtTagArray[e].type.toLowerCase();"Actor"==edtTagArray[e].type?s=s+"<option value='"+edtTagArray[e].tag+"'>"+edtTagArray[e].tag+"</option>":$("#edt").highlight(edtTagArray[e].tag,{wordsOnly:!0,className:i})});var a="<select class='selectSignBox select-field'>"+s+"</select>";0!=$(".edt .signature").length?$(".edt .signature").each(function(e,t){if(-1==n.indexOf($(this).attr("data-name"))){if(""==$.trim($(this).text()))i="Not Defined";else var i=$(this).text();$("#myTaggedFields .edtTaggedFields table tbody").append("<tr><td class='dSign dSignValue' data-dysign='"+$(this).attr("data-name")+"'>"+i+"</td><td class='signTD' data-dysign='"+$(this).attr("data-name")+"'>"+a+"</td><td class='deleteEdtTag'></td></tr>"),""!=$(this).attr("data-actor")&&$("#myTaggedFields .edtTaggedFields table tbody tr:last .selectSignBox").val($(this).attr("data-actor")),n.push($(this).attr("data-name"))}}):$("#myTaggedFields .edtTaggedFields table tbody").html("<tr><td colspan='2'>No Signatures Found!!</td></tr>")}else $(edtTagArray).each(function(e,t){edtTagArray[e].type==i&&$("#myTaggedFields .edtTaggedFields table tbody").append("<tr><td>"+edtTagArray[e].type+"</td><td>"+edtTagArray[e].tag+"</td><td>&nbsp;</td></tr>")}),0==$("#myTaggedFields .edtTaggedFields table tbody tr").length&&$("#myTaggedFields .edtTaggedFields table tbody").html("<tr><td colspan='2'>No Reference Found!!</td></tr>")}),$("body").on("click","#myTaggedFields .deleteEdtTag",function(){var e=$(this).closest("tr").find("td:first");if(void 0!=e.attr("data-dyname")){t=e.attr("data-dyname");$("[data-name="+t+"]").remove(),$(this).closest("tr").remove()}if(void 0!=e.attr("data-dysign")){var t=e.attr("data-dysign");$("[data-name="+t+"]").remove(),$(this).closest("tr").remove()}0==$("#myTaggedFields .edtTaggedFields table tbody tr").length&&$("#myTaggedFields .edtTaggedFields table tbody").html("<tr><td colspan='2'>No Reference Found!!</td></tr>")});var l=0;$("body").on("keydown","#edtFindText, #edtReplaceText",function(e){13===(e.keyCode?e.keyCode:e.which)&&$("#edtFindBtn").trigger("click")}),$("body").on("click",".edtHeader .doUndo",function(e){if(statusUndoRedo.length>0){if(currentUndoRedoState<0)return!1;null==currentUndoRedoState&&(pushUndoRedo(),currentUndoRedoState=statusUndoRedo.length-1),currentUndoRedoState-=1,$("#edt").html(statusUndoRedo[currentUndoRedoState]),cursorManager.setBeginingOfContenteditable($(".edtParagraph:eq(0)").get(0)),indexing("withoutMe"),$("#sNumbers").is(":checked")&&outLineNum(),edtTagArray=[],$(".actor").each(function(e,t){var i=$.trim($(this).text());edtTagArray.push({type:"Actor",tag:i})}),$(".role").each(function(e,t){var i=$.trim($(this).text()),i=$.trim($(this).text());edtTagArray.push({type:"Role",tag:i})}),$(".terms").each(function(e,t){var i=$.trim($(this).text());edtTagArray.push({type:"Terms",tag:i})}),highlightText(tagStatus),autoEDTHeightCheck()}}),$("body").on("click",".edtHeader .doRedo",function(e){if(statusUndoRedo.length>0){if(null==currentUndoRedoState||currentUndoRedoState>=statusUndoRedo.length-1)return!1;currentUndoRedoState+=1,$("#edt").html(statusUndoRedo[currentUndoRedoState]),cursorManager.setBeginingOfContenteditable($(".edtParagraph:eq(0)").get(0)),indexing("withoutMe"),$("#sNumbers").is(":checked")&&outLineNum(),edtTagArray=[],$(".actor").each(function(e,t){var i=$.trim($(this).text());edtTagArray.push({type:"Actor",tag:i})}),$(".role").each(function(e,t){var i=$.trim($(this).text()),i=$.trim($(this).text());edtTagArray.push({type:"Role",tag:i})}),$(".terms").each(function(e,t){var i=$.trim($(this).text());edtTagArray.push({type:"Terms",tag:i})}),highlightText(tagStatus),autoEDTHeightCheck()}}),$("body").on("click",".edtHeader .doFindReplace",function(e){return l=0,$("#edtFindText").val(""),$("#edtReplaceText").val(""),$("#findReplaceMessage").text(""),$("#findReplaceModal").modal({backdrop:"static",keyboard:!1}),setTimeout(function(){$("#edtFindText").focus()},500),!1}),$("body").on("click","#findReplaceClose",function(e){l=0,$("#edt").unhighlight({className:"findReplace"}),$("#findReplaceModal").modal("hide")}),$("body").on("click","#findReplaceModal #edtFindBtn",function(e){$("#edt").unhighlight({className:"findReplace"});var t=$.trim($("#edtFindText").val());$.trim($("#edtReplaceText").val());if($("#edtReplaceCaseSensitive").is(":checked")?$("#edt").highlight(t,{wordsOnly:!0,className:"findReplace",caseSensitive:!0}):$("#edt").highlight(t,{wordsOnly:!0,className:"findReplace",caseSensitive:!1}),0==$(".findReplace").length)i="No occurences found.";else{var i=$(".findReplace").length+" occurences found.";$(".findReplace:eq(0)").addClass("findReplaceCurrent"),l=0,0==isScrolledIntoView($(".findReplace:eq(0)"))&&$(".mainScroll").scrollTop($(".findReplace:eq(0)").offset().top-$(".mainScroll").offset().top+$(".mainScroll").scrollTop())}$("#findReplaceMessage").text(i)}),$("body").on("click","#findReplaceModal #edtPrevFindBtn",function(e){$(".findReplace").length;var t=parseInt(l-1);l>0&&($(".findReplaceCurrent").removeClass("findReplaceCurrent"),$(".findReplace:eq("+t+")").addClass("findReplaceCurrent"),l=parseInt(l-1),0==isScrolledIntoView($(".findReplace:eq("+t+")"))&&$(".mainScroll").scrollTop($(".findReplace:eq("+t+")").offset().top-$(".mainScroll").offset().top+$(".mainScroll").scrollTop()))}),$("body").on("click","#findReplaceModal #edtNextFindBtn",function(e){var t=$(".findReplace").length-1,i=parseInt(l+1);l<t&&($(".findReplaceCurrent").removeClass("findReplaceCurrent"),$(".findReplace:eq("+i+")").addClass("findReplaceCurrent"),l=parseInt(l+1),0==isScrolledIntoView($(".findReplace:eq("+i+")"))&&$(".mainScroll").scrollTop($(".findReplace:eq("+i+")").offset().top-$(".mainScroll").offset().top+$(".mainScroll").scrollTop()))}),$("body").on("click","#findReplaceModal #edtReplaceBtn",function(e){$.trim($("#edtFindText").val());var t=$.trim($("#edtReplaceText").val());$(".findReplaceCurrent").text(t);var i=$(".findReplace").length-1;parseInt(l+1);if(l<=i?($("#edt").unhighlight({className:"findReplaceCurrent"}),$(".findReplace:eq("+l+")").addClass("findReplaceCurrent"),0==isScrolledIntoView($(".findReplace:eq("+l+")"))&&$(".mainScroll").scrollTop($(".findReplace:eq("+l+")").offset().top-$(".mainScroll").offset().top+$(".mainScroll").scrollTop())):l>0?($("#edt").unhighlight({className:"findReplaceCurrent"}),$(".findReplace:eq(0)").addClass("findReplaceCurrent"),0==isScrolledIntoView($(".findReplace:eq(0)"))&&$(".mainScroll").scrollTop($(".findReplace:eq(0)").offset().top-$(".mainScroll").offset().top+$(".mainScroll").scrollTop()),l=0):($("#edt").unhighlight({className:"findReplaceCurrent"}),$(".findReplaceCurrent").removeClass("findReplaceCurrent")),0==$(".findReplaceCurrent").length)n="No occurences found.";else var n=$(".findReplace").length+" occurences left.";return $("#findReplaceMessage").text(n),highlightText(),!1}),$("body").on("click","#findReplaceModal #edtReplaceAllBtn",function(e){var t=$.trim($("#edtFindText").val()),i=$.trim($("#edtReplaceText").val());if($("#edtReplaceCaseSensitive").is(":checked")?$("#edt").highlight(t,{wordsOnly:!0,className:"findReplace",caseSensitive:!0}):$("#edt").highlight(t,{wordsOnly:!0,className:"findReplace",caseSensitive:!1}),$(".findReplace").text(i),0==$(".findReplace").length)n="No occurences found.";else var n=$(".findReplace").length+" occurences replaced.";return $("#findReplaceMessage").text(n),$("#edt").unhighlight({className:"findReplace"}),highlightText(),!1}),$("body").on("click",".edtHeader .doTagFields",function(e){var t=$(this).position();return $(".edtdrp").hide(),$("#edtTagElements").css("display","block").css({left:t.left,top:t.top+22}),setDrpdownPos("#edtTagElements"),!1}),$("body").on("click","#edtScanTags",function(e){$("#edt").unhighlight({className:"actor"}),$("#edt").unhighlight({className:"role"}),$("#edt").unhighlight({className:"terms"}),highlightText(tagStatus)}),$("body").on("click",".edtHeader .doRemoveBlankStatements",function(e){$(".edtParagraph").each(function(e,t){""==$.trim($(this).text())&&0==$(this).find("img").length&&$(this).remove()}),indexing(),$("#sNumbers").is(":checked")&&outLineNum()}),$("body").on("click",".edtTOC ul li",function(){var e=$(this).attr("data-num");$(".edt").focus(),cursorManager.setBeginingOfContenteditable($(".edtParagraph:eq("+e+")").get(0));$(".edtParagraph:eq("+e+")").offset().top;$(".mainScroll").scrollTop($(".edtParagraph:eq("+e+")").offset().top-$(".edtParagraph:eq("+e+")").height()-$(".mainScroll").offset().top+$(".mainScroll").scrollTop())}),$("body").on("click",".edtHeader .doList",function(){var e=document.getSelection(),t=e.anchorNode;if(void 0==t.className&&"SPAN"==(t=e.anchorNode.parentNode).nodeName&&(t=e.anchorNode.parentNode.parentNode),"TD"==t.tagName||"TR"==t.tagName)return!1;if(e.isCollapsed&&t.className.match("edtParagraph").length>0){var i=t;$(i).hasClass("edtList")?$(i).removeClass("edtList").removeClass("edtListSub"):$(i).addClass("edtList")}else{var n=e.anchorNode;$(n).hasClass("edtParagraph")||(n=e.anchorNode.parentNode,$(n).hasClass("edtParagraph")||(n=e.anchorNode.parentNode.parentNode));var s=e.focusNode;if($(s).hasClass("edtParagraph")||(s=e.focusNode.parentNode,$(s).hasClass("edtParagraph")||(s=e.focusNode.parentNode.parentNode)),$(n).index()>=$(s).index())var a=$(s),o=$(n);else var a=$(n),o=$(s);a.hasClass("edtList")&&o.hasClass("edtList")?a.nextAll().addBack().each(function(e,t){if($(this).removeClass("edtList").removeClass("edtListSub"),$(this).index()===o.index())return!1}):a.nextAll().addBack().each(function(e,t){if(""!=$.trim($(this).text())&&$(this).addClass("edtList"),$(this).index()===o.index())return!1})}return indexing(),!1}),$("body").on("click",".edtHeader .doSplit",function(){var e=(n=document.getSelection()).anchorNode;if(void 0==e.className&&"SPAN"==(e=n.anchorNode.parentNode).nodeName&&(e=n.anchorNode.parentNode.parentNode),"TD"==e.tagName||"TR"==e.tagName)return!1;if(n.isCollapsed&&e.className.match("edtParagraph").length>0){var t=e,i=$(t).html().split(/[.?!]+/);if(0!=$.trim($(t).text()).length){for(var n=0;n<i.length;n++)if(0==n)i[n]=i[n].replace(/(<br>\s*)+/g,""),""!=$.trim(i[n])&&$(t).html(i[n]+".");else{var s=$(t).attr("class"),a=$(t).attr("data-x"),o=20*a;if(i[n]=i[n].replace(/(<br>\s*)+/g,""),""!=$.trim(i[n])){var r="<div class='"+s+"' data-x='"+a+"' style='margin-left:"+o+"px'>"+i[n]+".</div>";$(r).insertAfter($(t)),t=$(t).next()}}n<=i.length&&($("#edt").focus(),cursorManager.setEndOfContenteditable($(t).get(0)))}}else{var l=n.anchorNode;$(l).hasClass("edtParagraph")||(l=n.anchorNode.parentNode,$(l).hasClass("edtParagraph")||(l=n.anchorNode.parentNode.parentNode));var d=n.focusNode;if($(d).hasClass("edtParagraph")||(d=n.focusNode.parentNode,$(d).hasClass("edtParagraph")||(d=n.focusNode.parentNode.parentNode)),$(l).index()>=$(d).index())var c=$(d),u=$(l);else var c=$(l),u=$(d);c.nextAll().addBack().each(function(e,t){var i=$(this);if(0==i.has("table").length){var n=$(i).html().split(/[.?!]+/);if(0!=$.trim($(i).text()).length){for(var s=0;s<n.length;s++){if(0==s)n[s]=n[s].replace(/(<br>\s*)+/g,""),""!=$.trim(n[s])&&$(i).html(n[s]+".");else{var a=$(i).attr("class"),o=$(i).attr("data-x"),r=20*o;if(n[s]=n[s].replace(/(<br>\s*)+/g,""),""!=$.trim(n[s])){var l="<div class='"+a+"' data-x='"+o+"' style='margin-left:"+r+"px'>"+n[s]+".</div>";$(l).insertAfter($(i)),i=$(i).next()}}s<n.length&&($("#edt").focus(),cursorManager.setEndOfContenteditable($(i).get(0)))}if($(this).index()===u.index())return!1}}})}return $("#sNumbers").is(":checked")&&outLineNum(),columnizer(),indexing(),!1}),$("body").on("click",".edtHeader .doStrike",function(){var e=document.getSelection().anchorNode;if(3==e.nodeType&&(e=e.parentNode),-1==e.className.indexOf("edtParagraph"))for(;-1==e.className.indexOf("edtParagraph");)e=e.parentNode;-1!=e.className.indexOf("edtParagraph")&&edtStrikeApplier.toggleSelection()}),$("body").on("click",".edtHeader .doLeftAlign, .edtHeader .doRightAlign, .edtHeader .doCenter, .edtHeader .doJustify",function(){var e=$(this).attr("data-align"),t=document.getSelection(),i=t.anchorNode;if(void 0==i.className&&"SPAN"==(i=t.anchorNode.parentNode).nodeName&&(i=t.anchorNode.parentNode.parentNode),t.isCollapsed&&i.className.match("edtParagraph").length>0){var n=i;$(n).removeClass("edtLeftALign").removeClass("edtCenter").removeClass("edtRightAlign").removeClass("edtJustify"),$(n).addClass(e)}else{var s=t.anchorNode;$(s).hasClass("edtParagraph")||(s=t.anchorNode.parentNode,$(s).hasClass("edtParagraph")||(s=t.anchorNode.parentNode.parentNode));var a=t.focusNode;if($(a).hasClass("edtParagraph")||(a=t.focusNode.parentNode,$(a).hasClass("edtParagraph")||(a=t.focusNode.parentNode.parentNode)),$(s).index()>=$(a).index())var o=$(a),r=$(s);else var o=$(s),r=$(a);o.nextAll().addBack().each(function(t,i){if(""!=$.trim($(this).text())&&($(this).removeClass("edtLeftALign").removeClass("edtCenter").removeClass("edtRightAlign").removeClass("edtJustify"),$(this).addClass(e)),$(this).index()===r.index())return!1})}return!1}),$("body").on("click",".edtHeader .doTable",function(){$(this).attr("data-align");var e=document.getSelection().anchorNode;for(3==e.nodeType&&(e=e.parentNode);-1==e.className.indexOf("edtParagraph");)if("TD"==(e=e.parentNode).tagName||"TR"==e.tagName)return bootbox.alert("Action not allowed."),!1;if("TD"!=e.tagName){var t="<table cellpadding='0' cellspacing='0'><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr></table>";if(0==$(e).text().length)$(e).html(t);else{var i=$(e).attr("class"),n=$(e).attr("data-x"),s="<div class='"+i+"' data-x='"+n+"' style='margin-left:"+20*n+"px'>"+t+"</div>";$(s).insertAfter($(e)),$("#sNumbers").is(":checked")&&outLineNum(),columnizer(),indexing()}}}),$("body").on("click",".edtHeader .doDynamicText",function(){var e=$(this).position();return $(".edtdrp").hide(),$("#edtformElements").css("display","block").css({left:e.left,top:e.top+22}),!1}),$("body").on("change",".edtHeader #fontStyle",function(){var e=document.getSelection().anchorNode;if(3==e.nodeType&&(e=e.parentNode),-1==e.className.indexOf("edtParagraph"))for(;-1==e.className.indexOf("edtParagraph");)e=e.parentNode;if(-1!=e.className.indexOf("edtParagraph")){var t=$(this).val(),i="rangyTemp_"+ +new Date;return rangy.createClassApplier(i,!0).applyToSelection(),$("."+i).css({"font-family":t}).removeClass(i),!1}}),$("body").on("change",".edtHeader #fontSize",function(){var e=document.getSelection().anchorNode;if(3==e.nodeType&&(e=e.parentNode),-1==e.className.indexOf("edtParagraph"))for(;-1==e.className.indexOf("edtParagraph");)e=e.parentNode;if(-1!=e.className.indexOf("edtParagraph")){var t=$(this).val(),i="rangyTemp_"+ +new Date;return rangy.createClassApplier(i,!0).applyToSelection(),$("."+i).css({"font-size":t+"px"}).removeClass(i),indexing(),!1}}),$("body").on("click",".edtHeader .doFontColor",function(){var e=document.getSelection().anchorNode;if(3==e.nodeType&&(e=e.parentNode),-1==e.className.indexOf("edtParagraph"))for(;-1==e.className.indexOf("edtParagraph");)e=e.parentNode;if(-1!=e.className.indexOf("edtParagraph")){var t=$(this).position();return $(".edtdrp").hide(),$("#ColorPlatesSection").css("display","block").css({left:t.left,top:t.top+22}),setDrpdownPos("#ColorPlatesSection"),$("#ColorPlatesSection td").unbind("click"),$("#ColorPlatesSection td").click(function(){var e=$(this).css("background-color"),t="rangyTemp_"+ +new Date;rangy.createClassApplier(t,!0).applyToSelection(),$("."+t).css({color:e}).removeClass(t)}),!1}}),$("body").on("click",".edtHeader .doBG",function(){var e=document.getSelection().anchorNode;if(3==e.nodeType&&(e=e.parentNode),-1==e.className.indexOf("edtParagraph"))for(;-1==e.className.indexOf("edtParagraph");)e=e.parentNode;if(-1!=e.className.indexOf("edtParagraph")){var t=$(this).position();return $(".edtdrp").hide(),$("#ColorPlatesSection").css("display","block").css({left:t.left,top:t.top+22}),setDrpdownPos("#ColorPlatesSection"),$("#ColorPlatesSection td").unbind("click"),$("#ColorPlatesSection td").click(function(){var e=$(this).css("background-color"),t="rangyTemp_"+ +new Date;rangy.createClassApplier(t,!0).applyToSelection(),$("."+t).css({"background-color":e}).removeClass(t)}),!1}}),$("body").on("click",".edtHeader .doPrint",function(){return window.print(),!1}),$("body").on("click","#edtPrintCommand",function(){$("#printMarginBox").css("display","none"),$(".edtPrintMargins").each(function(e,t){isNaN(parseFloat($(this).val()))&&$(this).val(1)})}),$("body").on("click","#edtPrintCommandCancel",function(){$("#printMarginBox").css("display","none")}),$("body").on("click",".edtHeader #printLandscape",function(){$(".edtHeader #viewOpts").trigger("change")}),$("body").on("change",".edtHeader #viewOpts",function(){if("responsive"==$(this).val())$("#edt").css("width","auto");else{if($("#printLandscape").is(":checked"))e=$(this).find("option:selected").attr("data-landscape-width");else var e=$(this).find("option:selected").attr("data-width");$("#edt").css("width",e+"in")}$("#sNumbers").is(":checked")&&outLineNum(),indexing(),columnizer(),setDocEntryHig()}),$("body").on("change",".edtHeader #sNumbers",function(){$(this).is(":checked")?($(".statementNums").addClass("active"),$(".edtContainer").addClass("statementson"),outLineNum(),indexing()):($(".edt .edtParagraph").removeAttr("data-s"),$(".statementNums").removeClass("active"),$(".edtContainer").removeClass("statementson"),indexing())}),$("body").on("change",".edtHeader #documentMode",function(){return document.getSelection().removeAllRanges(),"structured"==$(this).val()?($(".unstructuredIcon").css("display","none"),$(".statementNums").show(),$(".edtColumns").show(),$("#edt").addClass("structured"),$(".edtContainer").addClass("structuredMode"),$("#edt").removeClass("unstructured"),$(".edtTOC").is(":visible")?($(".edt").css("margin-left","80px"),$(".edtColumns").css("padding-left","79px")):($(".edtColumns").css("padding-left","39px"),$(".edtColumns").css("margin-left","0px"),$("#edt").css("margin-left","40px")),$("#sNumbers").is(":checked")&&outLineNum(),indexing(),columnizer(),autoEDTHeightCheck()):($(".edt .edtParagraph").removeAttr("data-s"),$(".unstructuredIcon").css("display","inline-block"),$(".edtColumns").hide(),$("#edt").removeClass("structured"),$(".edtContainer").removeClass("structuredMode"),$("#edt").addClass("unstructured"),$(".statementNums").hide(),$(".edtTOC").is(":visible")?($(".edt").css("margin-left","40px"),$(".edtColumns").css("padding-left","39px")):($(".edtColumns").css("padding-left","0px"),$(".edtColumns").css("margin-left","-1px"),$("#edt").css("margin-left","0px")),$(".edtBody .numbering").empty(),indexing(),columnizer()),$(".structured").siblings(".numbering").css("display","block"),$(".unstructured").siblings(".numbering").css("display","none"),!1}),$("body").on("change","#uploadImage",function(){var e=document.getSelection().anchorNode;if(3==e.nodeType&&(e=e.parentNode),-1==e.className.indexOf("edtParagraph"))for(;-1==e.className.indexOf("edtParagraph");)e=e.parentNode;if(-1!=e.className.indexOf("edtParagraph")){var t=$(this).prop("files")[0],i=new FormData;i.append("file",t),i.append("type","directUpload");var n=Date.now()+"_"+Math.floor(1e12*Math.random()+1),s=new FileReader;s.onload=function(e){$(".edtCustomLoader").show(),$("#edt").attr("contenteditable",!1),pasteHtmlAtCaret("<div class='dummyIMG' id='"+n+"'></div> &nbsp;"),setTimeout(function(){indexing()},300)},s.readAsDataURL(this.files[0]),$.ajax({type:"POST",url:"edt-file-upload.php",data:i,processData:!1,contentType:!1}).success(function(e){$("#"+n).parent(".edtParagraph").html($("#"+n).parent(".edtParagraph").html().replace(/(<br>\s*)+/g,"")),$("#"+n).html("<img src='"+e+"'>").find("img").unwrap(),setDocEntryHig(),$(".edtCustomLoader").hide(),$("#edt").attr("contenteditable",!0)})}}),$("body").on("dblclick",".edtParagraph img",function(){$("#imageCrop").removeAttr("id"),$("#myImg").attr("src",$(this).attr("src")),$(this).attr("id","imageCrop"),imgToCrop=$(this).attr("src");var e=$(this).width();$("#myEditorImg .modal-dialog").css("width","400"),e>400&&$("#myEditorImg .modal-dialog").width(e+40),$("#myEditorImg").modal("show"),void 0!==jcrop_api&&jcrop_api.destroy(),$("#myImg").Jcrop({aspectRatio:1,onSelect:updateCoords},function(){jcrop_api=this})}),$("body").on("click",".edtParagraph img",function(e){$(this).hasClass("ui-resizable")||($(this).resizable({stop:function(){$(this).resizable("destroy"),$(".edt img").css("display","inline-block"),setTimeout(function(){indexing()},100)}}),e.stopPropagation())}),$("body").on("click","#cropImageEDT",function(e){if(!parseInt($("#w").val()))return bootbox.alert("Please select a crop region."),!1;$.ajax({method:"POST",url:"crop.php",data:{x:$(x).val(),y:$(y).val(),w:$(w).val(),h:$(h).val(),imgPath:imgToCrop}}).success(function(e){$(".edt img").resizable(),$(".edt img").resizable("destroy"),$("#imageCrop").removeAttr("src"),$("#imageCrop").attr("src",e),$("#imageCrop").width($(w).val()).height($(h).val()),$(".edt img").css("display","inline-block"),$("#myEditorImg").modal("hide"),$("#imageCrop").removeAttr("id"),indexing()})}),$("body").on("click","#resetImageEDT",function(e){$("#imageCrop").width("auto").height("auto"),$("#myEditorImg").modal("hide"),setTimeout(function(){indexing()},100)}),$("body").on("click",".collapsableEDTLevelsContent span",function(e){var t=$(this).index();$(this).hasClass("selected")?($(this).removeClass("selected"),$(".edtParagraph:eq("+t+")").addClass("selectedHeader"),void 0==getSelectedEDTLevel&&(getSelectedEDTLevel=$("#edtAutoLevels").val()),runTOC()):($(this).addClass("selected"),$(".edtParagraph:eq("+t+")").removeClass("selectedHeader"),runTOC())}),$("body").on("click",".close-edt-flyout",function(e){$("#myTaggedFields").animate({right:"-100%"},"slow",function(){$("#myTaggedFields").hide(),$(".edt-loader").hide()})}),$(window).resize(function(){var e=$(window).height()-$(".edtHeader").outerHeight()-30;e=22*Math.floor(e/22),$("#edt").css("min-height",e),$(".mainScroll").css("height",e),$(".edtTOC").css("height",e),manageDocEdtHig(),indexing(),$("#sNumbers").is(":checked")&&outLineNum()});var d=$(window).height()-$(".edtHeader").outerHeight()-30;d=22*Math.floor(d/22),$("#edt").css("min-height",d),$(".mainScroll").css("height",d),$(".edtTOC").css("height",d),"undefined"!=typeof manageDocEdtHig&&manageDocEdtHig(),$("#sNumbers").prop("checked",!1),$("#printLandscape").prop("checked",!1),$("#documentMode").val("structured"),$("#documentMode").val("structured"),$("#viewOpts").val("responsive"),rangeInitialize(),indexing(),"undefined"!=typeof Jcrop&&$("#myImg").Jcrop({aspectRatio:1,onSelect:updateCoords},function(){jcrop_api=this}),$(".unstructuredIcon").hide(),$(".niceScrollDiv").niceScroll({cursorcolor:"#909090",cursorborder:"0",cursorborderradius:"0",cursorwidth:"5px",background:"rgba(0,0,0,.25)"})});var assignTransversingThis,assignTransversingThisAttrDataX,innerListMode=!1,setFirstTime=0,imgLoaderTime;!function(e){function t(e){return 1==e.nodeType&&!n.contains(e.nodeName)}function i(e){for(var t=e.lastChild;t&&1!=t.nodeType&&t.previousSibling;)t=t.previousSibling;return t}var n=["AREA","A","BASE","BR","COL","EMBED","HR","IMG","INPUT","KEYGEN","LINK","MENUITEM","META","PARAM","SOURCE","TRACK","WBR","BASEFONT","BGSOUND","FRAME","ISINDEX"];Array.prototype.contains=function(e){for(var t=this.length;t--;)if(this[t]===e)return!0;return!1},e.setEndOfContenteditable=function(e){for(;i(e)&&t(i(e));)e=i(e);var n,s;document.createRange?((n=document.createRange()).selectNodeContents(e),n.collapse(!1),(s=window.getSelection()).removeAllRanges(),s.addRange(n)):document.selection&&((n=document.body.createTextRange()).moveToElementText(e),n.collapse(!1),n.select())},e.setBeginingOfContenteditable=function(e){var t,i;document.createRange?((t=document.createRange()).selectNodeContents(e),t.collapse(!0),(i=window.getSelection()).removeAllRanges(),i.addRange(t)):document.selection&&((t=document.body.createTextRange()).moveToElementText(e),t.collapse(!0),t.select())}}(window.cursorManager=window.cursorManager||{}),window.puJsFileLoadCounter++;var selectedbtn="powerBtn",selectedbtn1="powerBtn1",currentmode="Display",nodeselectindex=0,threepanefirstDivClick=!1,instanceClick=!1,assocationClick=!1,newVersionClick=!1,tempStatus="",instanceBuilder=[],selectedNodeIDNumber,commonNameFirst,nodeTypeFirst,versioningTypeFirst,versioningTypeValidation=1,ajaxDataFirst,selectThis,selectPreValue,checkVersionMode=0,foldertype="normal";$(document).on("click",".delMsgOfSubClass",function(){var e=$("#del_msg_of_sub_class").val().split(" ~ ");if("instance"===$.trim(e[2])){var t=e[0],i=e[1],n=$("#node_y_class_id").val();$.post(domainUrl+"classes/deleteSubClassInstances",{sub_class_id:i,node_class_id:n,instance_node_id:t},responseDeleteInstanceProperty,"html")}else{var s=$("#class_caption").val(),a=$("#delete-sub-class").val(),n=$("#node_y_class_id").val(),i=$("#delete-sub-class-id").val(),o=","+e[0],r=$("#child_ids_of_class").attr("value").replace(o,"");$("#child_ids_of_class").attr("value",r);var l=$(".temp-sub-class-"+a).closest("li.parent-sub-class-list"),d=parseInt(l.find(".number_print1:first").text()),c=parseInt(l.next().find(".number_print1:first").text()),u=parseInt(c-d),h=l.nextAll().find(".number_print1");$(".temp-sub-class-"+a).closest("li.parent-sub-class-list").remove(),setNumberPrint("",u,!0,h),$.post(domainUrl+"classes/deleteSubClass",{sub_class_id:i,node_class_id:n,node_y_id:s,node_x_id:a},responseDeleteSubClassStructure,"JSON")}event.stopPropagation()}),$(document).ready(function(){$("body").on("click",".doHyperLink, #saveedtHyperlinkText, #edtformElements a, .edtHeader .doBold, .edtHeader .doItalic, .edtHeader .doUnderline, .edtHeader .doList, .edtHeader .doSplit, .edtHeader .doLeftAlign, .edtHeader .doRightAlign, .edtHeader .doCenter, .edtHeader .doJustify, .edtHeader .doTable, .edtHeader .doFontColor, .edtHeader .doBG, .edtParagraph img, #cropImageEDT, #saveedtformElementsTextProperties, #deleteedtformElementsTextProperties, #saveAllDynFields, .doRemoveBlankStatements",function(e){enableResourceSaveIcon()}),$("body").on("keyup, keydown",".edt",function(e){disableResourceSaveIcon()}),$("body").on("click",".edt",function(e){$("#sNumbers").is(":checked")&&outLineNum(),columnizer(),indexing()}),$("body").on("change",".edtHeader #fontStyle, .edtHeader #fontSize, .edtHeader #sNumbers, .edtHeader #documentMode, #uploadImage",function(){enableResourceSaveIcon()}),$("body").off("click","#saveCanvasTable").on("click","#saveCanvasTable ",function(){NProgress.start(),$("#edtInnerCanvasView table td").each(function(){var e=$(this).width();$(this).width(e),$(this).css("min-width",e+"px")});var e=[],t=[],i=getCurrentDateTime(),n=$("#hidden_dialog_document_instance_id").val(),s=parseInt(globalFolderInstanceID);$("#gtresizer").remove(),$("#gthorresizer").remove(),$("#gridLine").remove(),""!=$.trim(globalTitle)&&"Undefined"!=typeof globalTitle&&($("#document_title").val(globalTitle),$("#document_title").attr("value",globalTitle)),""==$.trim($("#document_title").val())&&""==n?(bootbox.prompt("Please enter document title.",function(a){if($(".bootbox-input").click(function(){$(".bootbox-input").removeClass("alert-text"),$(".error-msg").remove()}),null===a||""==a)return null==a||($(".bootbox-input").addClass("alert-text"),parseInt($(".bootbox-input").siblings(".error-msg").length)>0&&$(".bootbox-input").siblings(".error-msg").remove(),$(".bootbox-input").after('<span class="error-msg" style="padding:5px">Required Field.</span>'),$(".error-msg").show(),!1);NProgress.start(),$("#document_title").val(a),t=$("#canvas-screen #edtInnerCanvasView").html(),e={dialogue_template:"Canvas",dialogue_title:$("#document_title").val(),dialogue_admin:"",dialogue_timestamp:i,statementData:t},$.post(domainUrl+"documents/save",{document:e,saveType:"P",instance_id:n,title:$("#document_title").val(),instancenodeid:s},responseSaveDocument,"html")}),$(".bootbox").addClass("DocModal"),$(".DocModal .modal-footer button").text(""),$(".DocModal .modal-footer button.btn-default").text("Cancel"),$(".DocModal .modal-footer button.btn-primary").text("Save"),NProgress.done()):""==$.trim($("#document_title").val())&&""==globalTitle||""==n?(t=$("#canvas-screen #edtInnerCanvasView").html(),e={dialogue_template:"Canvas",dialogue_title:$.trim($("#document_title").val()),dialogue_admin:"",dialogue_timestamp:i,statementData:t},$.post(domainUrl+"documents/save",{document:e,saveType:"P",instance_id:n,title:$("#document_title").val(),instancenodeid:s},responseSaveDocument,"html")):(t=$("#canvas-screen #edtInnerCanvasView").html(),void 0!=globalTitle&&""!=globalTitle||(globalTitle=$("#hidden_dialog_title").val()),e={dialogue_template:"Canvas",dialogue_title:globalTitle,dialogue_admin:"",dialogue_timestamp:i,statementData:t},$.post(domainUrl+"documents/save",{document:e,saveType:"P",instance_id:n,title:$("#document_title").val(),instancenodeid:s},responseSaveDocument,"html"))}),$("body").off("click","#printCanvasTableMode").on("click","#printCanvasTableMode",function(){var e="<div id='edtCanvasView' class='niceScrollDiv DocInsideHig' style='height:"+$("#edtCanvasView").height()+"px overflow: hidden; outline: none;'><div id='edtInnerCanvasView' class='screenMode'><div class='innerCanvasContainer'>"+$("#edtCanvasView").html()+"</div></div></div>",t=$("<iframe />");t[0].name="frame1",t.css({position:"absolute",top:"-1000000px"}),$("body").append(t);var i=t[0].contentWindow?t[0].contentWindow:t[0].contentDocument.document?t[0].contentDocument.document:t[0].contentDocument;i.document.open(),i.document.write("<html><head><title>DIV Contents</title>"),i.document.write("</head><body>"),i.document.write('<link rel="stylesheet" type="text/css" href="'+domainUrl+'public/css/table-print.css" media="print"/>'),i.document.write(e),i.document.write("</body></html>"),i.document.close(),setTimeout(function(){window.frames.frame1.focus(),window.frames.frame1.print(),t.remove(),$(".dragCanvasContainer").each(function(){$(this).css("background-image",$(this).css("background-image"))})},1e3)})}),window.puJsFileLoadCounter++;var totalWeeksOfStructre=0;$(document).ready(function(){defaultWeek(),checkSegmentType(),$("body").on("click",".structuredSche",function(){var e=$(this).closest("td"),t=$(e).closest("tr"),i=($(t).index(),$(e).index(),isProperOrNot()),n=(i=i.split(":"))[0],s=i[1];if(0==parseInt(n)&&0==parseInt(s))$("#scheduleRow").val("2"),$("#scheduleCol").val("6"),$("#scheduleStatus").val("First"),openThreePaneSchedule();else if(1==parseInt(n)&&0==parseInt(s)){var a=0;$(".center-div .unstructure-last-div").each(function(){tds=$(this).closest("td"),trs=$(tds).closest("tr"),rows=$(trs).index(),cols=$(tds).index(),console.log(rows),parseInt(a)<parseInt(rows)&&(a=rows)}),newR=parseInt(a)+1,$("#scheduleRow").val(newR),$("#scheduleCol").val("7"),$("#scheduleStatus").val("First"),openThreePaneSchedule()}}),$("body").on("click",".closeSheduleBuilder",function(e){$("#scheduleBuilder").animate({right:"-100%"},300,function(){$("#scheduleBuilder").removeClass("in"),$(".structuredSche.openthreepane").removeClass("openthreepane")})}),$("body").on("blur",".wk_segment",function(e){var t=$(".wk_segment").val(),i="",n="";$(".segment-wk").html(""),$(".wk-starting-segment").html(""),n='<option value="1">1 Week</option>';for(var s=0;s<t;s++)checkVal=parseInt(s)+1,i='<li><div class="custom-checkbox"><input type="checkbox" disabled="true" checked="true" class="cls-check" value="'+checkVal+'" name="wk-ck-segment[]]"><label></label></div><div>Week '+checkVal+"</div></li>",$(".segment-wk").append(i);$(".wk-starting-segment").append(n),$(".wk-segment-count").html("("+t+" items)")}),$("body").on("blur",".day_segment",function(e){var t=$(".day_segment").val(),i="",n="";$(".segment-day").html(""),$(".day-starting-segment").html(""),n='<option value="1">1 Day</option>';for(var s=0;s<t;s++)checkVal=parseInt(s)+1,i='<li><div class="custom-checkbox"><input type="checkbox" disabled="true" checked="true" class="cls-check" value="'+checkVal+'" name="day-ck-segment[]]"><label></label></div><div>Day '+checkVal+"</div></li>",$(".segment-day").append(i);$(".day-starting-segment").append(n),$(".day-segment-count").html("("+t+" items)")}),$("body").on("blur",".hour_segment",function(e){var t=$(".hour_segment").val(),i="";$(".segment-hour").html(""),$(".hour-starting-segment").html("");for(var n=0;n<t;n++)checkVal=parseInt(n)+1,i='<li><div class="custom-checkbox"><input type="checkbox" disabled="true" checked="true" class="cls-check" value="'+checkVal+'" name="hour-ck-segment[]]"><label></label></div><div>Hour '+checkVal+"</div></li>",$(".segment-hour").append(i);$(".hour-starting-segment").append('<option value="1">1 Hour</option>'),$(".hour-segment-count").html("("+t+" items)")}),$("body").on("blur",".minute_segment",function(e){var t=$(".minute_segment").val(),i="";$(".segment-minute").html(""),$(".minute-starting-segment").html("");for(var n=0;n<t;n++)checkVal=parseInt(n)+1,i='<li><div class="custom-checkbox"><input type="checkbox" disabled="true" checked="true" class="cls-check" value="'+checkVal+'" name="minute-ck-segment[]]"><label></label></div><div>Minute '+checkVal+"</div></li>",$(".segment-minute").append(i);$(".minute-starting-segment").append('<option value="1">1 Minute</option>'),$(".minute-segment-count").html("("+t+" items)")});var e="";$("#scheduleBuilder .show-survey-pane").click(function(){if($("#scheduleBuilder .show-survey-pane").parent("tr").removeClass("current"),"day"==(e=$(this).attr("data-id"))){t=checkSeg();$.inArray("day",t)&&($(".day-form").show(),$(".week-form").hide(),$(".hour-form").hide(),$(".minute-form").hide(),$(this).parent("tr").addClass("current"),defaultDay())}else if("week"==e)$(".week-form").show(),$(".day-form").hide(),$(".hour-form").hide(),$(".minute-form").hide(),$(this).parent("tr").addClass("current");else if("hour"==e){t=checkSeg();$.inArray("hour",t)&&($(".day-form").hide(),$(".week-form").hide(),$(".minute-form").hide(),$(".hour-form").show(),$(this).parent("tr").addClass("current"),defaultHour())}else if("minute"==e){var t=checkSeg();$.inArray("minute",t)&&($(".day-form").hide(),$(".week-form").hide(),$(".hour-form").hide(),$(".minute-form").show(),$(this).parent("tr").addClass("current"),defaultMinute())}})}),window.puJsFileLoadCounter++,function(e){e.widget("mjs.nestedSortable",e.extend({},e.ui.sortable.prototype,{options:{doNotClear:!1,expandOnHover:700,isAllowed:function(e,t,i){return!0},isTree:!1,listType:"ol",maxLevels:0,protectRoot:!1,rootID:null,rtl:!1,startCollapsed:!1,tabSize:20,branchClass:"mjs-nestedSortable-branch",collapsedClass:"mjs-nestedSortable-collapsed",disableNestingClass:"mjs-nestedSortable-no-nesting",errorClass:"mjs-nestedSortable-error",expandedClass:"mjs-nestedSortable-expanded",hoveringClass:"mjs-nestedSortable-hovering",leafClass:"mjs-nestedSortable-leaf"},_create:function(){if(this.element.data("sortable",this.element.data("nestedSortable")),!this.element.is(this.options.listType))throw new Error("nestedSortable: Please check that the listType option is set to your actual list type");if(this.options.isTree&&(this.options.tolerance="intersect"),e.ui.sortable.prototype._create.apply(this,arguments),this.options.isTree){var t=this;e(this.items).each(function(){var e=this.item;e.children(t.options.listType).length?(e.addClass(t.options.branchClass),t.options.startCollapsed?e.addClass(t.options.collapsedClass):e.addClass(t.options.expandedClass)):e.addClass(t.options.leafClass)})}},destroy:function(){return this.element.removeData("nestedSortable").unbind(".nestedSortable"),e.ui.sortable.prototype.destroy.apply(this,arguments)},_mouseDrag:function(t){var i=this.options;if(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll){var n=!1;this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<i.scrollSensitivity?this.scrollParent[0].scrollTop=n=this.scrollParent[0].scrollTop+i.scrollSpeed:t.pageY-this.overflowOffset.top<i.scrollSensitivity&&(this.scrollParent[0].scrollTop=n=this.scrollParent[0].scrollTop-i.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<i.scrollSensitivity?this.scrollParent[0].scrollLeft=n=this.scrollParent[0].scrollLeft+i.scrollSpeed:t.pageX-this.overflowOffset.left<i.scrollSensitivity&&(this.scrollParent[0].scrollLeft=n=this.scrollParent[0].scrollLeft-i.scrollSpeed)):(t.pageY-e(document).scrollTop()<i.scrollSensitivity?n=e(document).scrollTop(e(document).scrollTop()-i.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<i.scrollSensitivity&&(n=e(document).scrollTop(e(document).scrollTop()+i.scrollSpeed)),t.pageX-e(document).scrollLeft()<i.scrollSensitivity?n=e(document).scrollLeft(e(document).scrollLeft()-i.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<i.scrollSensitivity&&(n=e(document).scrollLeft(e(document).scrollLeft()+i.scrollSpeed))),!1!==n&&e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)}this.positionAbs=this._convertPositionTo("absolute");var s=this.placeholder.offset().top;this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px"),this.hovering=this.hovering?this.hovering:null,this.mouseentered=!!this.mouseentered&&this.mouseentered;for(var a=this.items.length-1;a>=0;a--){var o=this.items[a],r=o.item[0],l=this._intersectsWithPointer(o);if(l&&!(r==this.currentItem[0]||this.placeholder[1==l?"next":"prev"]()[0]==r||e.contains(this.placeholder[0],r)||"semi-dynamic"==this.options.type&&e.contains(this.element[0],r))){if(this.mouseentered||(e(r).mouseenter(),this.mouseentered=!0),i.isTree&&e(r).hasClass(i.collapsedClass)&&i.expandOnHover&&!this.hovering){e(r).addClass(i.hoveringClass);var d=this;this.hovering=window.setTimeout(function(){e(r).removeClass(i.collapsedClass).addClass(i.expandedClass),d.refreshPositions(),d._trigger("expand",t,d._uiHash())},i.expandOnHover)}if(this.direction=1==l?"down":"up","pointer"!=this.options.tolerance&&!this._intersectsWithSides(o))break;e(r).mouseleave(),this.mouseentered=!1,e(r).removeClass(i.hoveringClass),this.hovering&&window.clearTimeout(this.hovering),this.hovering=null,this._rearrange(t,o),this._clearEmpty(r),this._trigger("change",t,this._uiHash());break}}var c=this.placeholder[0].parentNode.parentNode&&e(this.placeholder[0].parentNode.parentNode).closest(".ui-sortable").length?e(this.placeholder[0].parentNode.parentNode):null,u=this._getLevel(this.placeholder),h=this._getChildLevels(this.helper),p=this.placeholder[0].previousSibling?e(this.placeholder[0].previousSibling):null;if(null!=p)for(;"li"!=p[0].nodeName.toLowerCase()||p[0]==this.currentItem[0]||p[0]==this.helper[0];){if(!p[0].previousSibling){p=null;break}p=e(p[0].previousSibling)}var f=this.placeholder[0].nextSibling?e(this.placeholder[0].nextSibling):null;if(null!=f)for(;"li"!=f[0].nodeName.toLowerCase()||f[0]==this.currentItem[0]||f[0]==this.helper[0];){if(!f[0].nextSibling){f=null;break}f=e(f[0].nextSibling)}var m=document.createElement(i.listType);return this.beyondMaxLevels=0,null!=c&&null==f&&(i.rtl&&this.positionAbs.left+this.helper.outerWidth()>c.offset().left+c.outerWidth()||!i.rtl&&this.positionAbs.left<c.offset().left)?(c.after(this.placeholder[0]),i.isTree&&c.children(i.listItem).children("li:visible:not(.ui-sortable-helper)").length<1&&c.removeClass(this.options.branchClass+" "+this.options.expandedClass).addClass(this.options.leafClass),this._clearEmpty(c[0]),this._trigger("change",t,this._uiHash())):null!=p&&!p.hasClass(i.disableNestingClass)&&(p.children(i.listType).length&&p.children(i.listType).is(":visible")||!p.children(i.listType).length)&&(i.rtl&&this.positionAbs.left+this.helper.outerWidth()<p.offset().left+p.outerWidth()-i.tabSize||!i.rtl&&this.positionAbs.left>p.offset().left+i.tabSize)?(this._isAllowed(p,u,u+h+1),p.children(i.listType).length||(p[0].appendChild(m),i.isTree&&p.removeClass(i.leafClass).addClass(i.branchClass+" "+i.expandedClass)),s&&s<=p.offset().top?p.children(i.listType).prepend(this.placeholder):p.children(i.listType)[0].appendChild(this.placeholder[0]),this._trigger("change",t,this._uiHash())):this._isAllowed(c,u,u+h),this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,i){this.beyondMaxLevels&&(this.placeholder.removeClass(this.options.errorClass),this.domPosition.prev?e(this.domPosition.prev).after(this.placeholder):e(this.domPosition.parent).prepend(this.placeholder),this._trigger("revert",t,this._uiHash())),e("."+this.options.hoveringClass).mouseleave().removeClass(this.options.hoveringClass),this.mouseentered=!1,this.hovering&&window.clearTimeout(this.hovering),this.hovering=null,e.ui.sortable.prototype._mouseStop.apply(this,arguments)},_intersectsWithSides:function(t){var i=this.options.isTree?.8:.5,n=e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height*i,t.height),s=e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top-t.height*i,t.height),a=e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),o=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection();return this.floating&&r?"right"==r&&a||"left"==r&&!a:o&&("down"==o&&n||"up"==o&&s)},_clear:function(t,i){e.ui.sortable.prototype._clear.apply(this,arguments);for(var n=this.items.length-1;n>=0;n--){var s=this.items[n].item[0];this._clearEmpty(s)}},serialize:function(t){var i=e.extend({},this.options,t),n=this._getItemsAsjQuery(i&&i.connected),s=[];return e(n).each(function(){var t=(e(i.item||this).attr(i.attribute||"id")||"").match(i.expression||/(.+)[-=_](.+)/),n=(e(i.item||this).parent(i.listType).parent(i.items).attr(i.attribute||"id")||"").match(i.expression||/(.+)[-=_](.+)/);t&&s.push((i.key||t[1])+"["+(i.key&&i.expression?t[1]:t[2])+"]="+(n?i.key&&i.expression?n[1]:n[2]:i.rootID))}),!s.length&&i.key&&s.push(i.key+"="),s.join("&")},toHierarchy:function(t){function i(t){var s=(e(t).attr(n.attribute||"id")||"").match(n.expression||/(.+)[-=_](.+)/);if(s){var a={id:s[2]};return e(t).children(n.listType).children(n.items).length>0&&(a.children=[],e(t).children(n.listType).children(n.items).each(function(){var e=i(this);a.children.push(e)})),a}}var n=e.extend({},this.options,t),s=(n.startDepthCount,[]);return e(this.element).children(n.items).each(function(){var e=i(this);s.push(e)}),s},toArray:function(t){function i(t,o,r){var l,d,c=r+1;return e(t).children(n.listType).children(n.items).length>0&&(o++,e(t).children(n.listType).children(n.items).each(function(){c=i(e(this),o,c)}),o--),l=e(t).attr(n.attribute||"id").match(n.expression||/(.+)[-=_](.+)/),d=o===s+1?n.rootID:e(t).parent(n.listType).parent(n.items).attr(n.attribute||"id").match(n.expression||/(.+)[-=_](.+)/)[2],l&&a.push({item_id:l[2],parent_id:d,depth:o,left:r,right:c}),r=c+1}var n=e.extend({},this.options,t),s=n.startDepthCount||0,a=[],o=2;return a.push({item_id:n.rootID,parent_id:"none",depth:s,left:"1",right:2*(e(n.items,this.element).length+1)}),e(this.element).children(n.items).each(function(){o=i(this,s+1,o)}),a=a.sort(function(e,t){return e.left-t.left})},_clearEmpty:function(t){var i=this.options,n=e(t).children(i.listType);!n.length||n.children().length||i.doNotClear?i.isTree&&n.length&&n.children().length&&n.is(":visible")?e(t).removeClass(i.leafClass).addClass(i.branchClass+" "+i.expandedClass):i.isTree&&n.length&&n.children().length&&!n.is(":visible")&&e(t).removeClass(i.leafClass).addClass(i.branchClass+" "+i.collapsedClass):(i.isTree&&e(t).removeClass(i.branchClass+" "+i.expandedClass).addClass(i.leafClass),n.remove())},_getLevel:function(e){var t=1;if(this.options.listType)for(var i=e.closest(this.options.listType);i&&i.length>0&&!i.is(".ui-sortable");)t++,i=i.parent().closest(this.options.listType);return t},_getChildLevels:function(t,i){var n=this,s=this.options,a=0;return i=i||0,e(t).children(s.listType).children(s.items).each(function(e,t){a=Math.max(n._getChildLevels(t,i+1),a)}),i?a+1:a},_isAllowed:function(t,i,n){var s=this.options,a=!!e(this.currentItem[0].parentNode).hasClass("ui-sortable"),o=this.placeholder.closest(".ui-sortable").nestedSortable("option","maxLevels");!s.isAllowed(this.placeholder,t,this.currentItem)||s.protectRoot&&(null==t&&!a||a&&i>1)?(this.placeholder.addClass(s.errorClass),this.beyondMaxLevels=o<n&&0!=o?n-o:1):o<n&&0!=o?(this.placeholder.addClass(s.errorClass),this.beyondMaxLevels=n-o):(this.placeholder.removeClass(s.errorClass),this.beyondMaxLevels=0)}})),e.mjs.nestedSortable.prototype.options=e.extend({},e.ui.sortable.prototype.options,e.mjs.nestedSortable.prototype.options)}(jQuery),window.puJsFileLoadCounter++,objChatfnCourse=!0,$(document).ready(function(){$("body").off("click","#confirmCoursePopup .close, #confirmCoursePopup .btn-default-pop").on("click","#confirmCoursePopup .close, #confirmCoursePopup .btn-default-pop",function(){$(".mask-course-view.white-mask").hide()})}),window.puJsFileLoadCounter++;var w_popout_course;objChatfnCourse=!0;var ChatdialogueModule=function(){function e(e,t){window.getAllUsersList=e,$(".auto-suggest").data("autocomplete")&&($(".auto-suggest").autocomplete("destroy"),$(".auto-suggest").removeData("autocomplete"));var i=0;$.each(e,function(e,t){parseInt(t.node_id)>0&&i++});var n=[];if($('.global_participant_box_wrap input[name="recipient_id[]"]').each(function(e){n.push($(this).val())}),parseInt(i)>0){ind_participant=[],$.each(e,function(e,t){if(-1==n.indexOf(t.node_id)){var i="N/A",s="",a="";t.first_name&&(s=t.first_name.charAt(0)),t.last_name&&(a=t.last_name.charAt(0)),i=s+a,ind_participant.push({key:t.node_id,value:t.email_address,userFullName:t.first_name+" "+t.last_name,userProfileImage:t.profile_image,userInitialName:i.toUpperCase()})}});var s=$(".auto-suggest");s.length&&(s.autocomplete({appendTo:"#individualAutoCompleteBox",lookup:ind_participant,width:"80%",onSelect:function(e){autoCompleteOnSelect(e),ChatdialogueModule.addParticipants()},forceFixPosition:"auto",orientation:"bottom"}),s.off("keydown.custom").bind("keydown.custom",function(e){var t=$(this);e.which===$.ui.keyCode.ENTER||e.which==$.ui.keyCode.NUMPAD_ENTER?t.data("selected")?console.log("existing"):addNewUser(t.val()):t.data("selected",!1)}))}globalNewDialog=0}function t(){var t=$("body");t.on("click",".individual-get-list",function(){""==$("#is_individual_list").val()&&($.post(domainUrl+"menudashboard/getAllUsers",{},e,"json"),$("#is_individual_list").val("Y"))}),t.on("click",".course-delete-statement",function(){ChatdialogueModule.courseDeleteStatement($(this))}),t.on("click",".confirm-course-delete",function(){ChatdialogueModule.confirmCourseDelete($(this))}),t.off("click",".img-delete-statement").on("click",".img-delete-statement",function(){ChatdialogueModule.imgDeleteStatement($(this))}),t.off("click",".confirm-img-statement").on("click",".confirm-img-statement",function(){ChatdialogueModule.confirmImgStatement($(this))}),t.off("click",".letter-img-delete-statement").on("click",".letter-img-delete-statement",function(){ChatdialogueModule.letterImgDeleteStatement($(this))}),t.off("click",".confirm-letter-img-statement").on("click",".confirm-letter-img-statement",function(){ChatdialogueModule.confirmLetterImgStatement($(this))}),t.on("click",".letter-delete-statement",function(){ChatdialogueModule.letterDeleteStatement($(this))}),t.on("click",".confirm-remove-btn",function(){ChatdialogueModule.confirmRemoveBtn($(this))}),t.on("click",".letter-edit-statement",function(){ChatdialogueModule.letterEditStatement($(this))}),t.on("click","#course-dialogue-publish",function(){ChatdialogueModule.publishDialogueChat()}),t.on("click",".save_edit_dialogue",function(){ChatdialogueModule.saveEditDialogue()}),t.on("click",".save_edit_course, .edit_update_course",function(){ChatdialogueModule.saveEditCourse()}),t.on("click",".chat-edit-statement",function(){ChatdialogueModule.chatEditStatement($(this))})}function i(e){if("Letter"==e){var t=[];return $("#menudashboard #edt div.edtParagraph:visible").each(function(){t.push({statement:$(this)[0].outerHTML})}),t}return $.trim($(".course_edt_box .chat-msg:visible").val())}function n(){var e="",t="",n="",l="",d=$.trim($("#hidden_document_type_id").val($.trim($("#dropLetterExists").text())).val()),c=$(".message-wrap .msg-statement-wrap ul").find("li .statement-info").length,u=($("#blank-statement-id").val(),$("#property-statement-id").val(),{});if(c>0||"empty-statement"==$("#empty-statement").val()){n=i(d);var h=$(".existingDialogueSelCourseList.current");u.dialogue_node_id=h.data("id"),u.user_recepient_node_id=h.attr("user-id"),u.course_node_id=h.closest("div").attr("course-dialogue-instance-id"),u.course_dialogue_type="new",u.user_instance_node_id=setUserID,u.action=d,u.username=setUsername,u.isGroupMessage=5,u.message=n,u.timestamp=getTime(),u.courseStatementType=h.closest(".course-list").find(".courseboard-table tr td:last").text(),u.course_title=$(".existCourseTitle").text(),u.dialogue_title=$(".existDialogueTitle").text(),u.saveType="P";var p=h.attr("data-status");if(p="0"==p?"Draft":"Published",u.diaStatusType=p,""==n&&"Letter"!=d&&""==$.trim($("#menudashboard #edt div.edtParagraph:visible").text())&&""==$("#mode_val").val())$(".course_edt_box .chat-msg:visible").addClass("alert-text").focus(),ErrorModule.appendErrorAfter($(".course_edt_box .chat-textarea"));else if("<br>"==$("#menudashboard #edt div.edtParagraph:visible").html()&&""==$.trim($("#menudashboard #edt div.edtParagraph:visible").text())&&"Letter"==d&&""==$("#mode_val").val())ErrorModule.appendErrorAfter($(".letter-edt-wrapper").next(),{error_class:"letter-error-msg"});else if("Letter"==d)if("edit"==$("#mode_val").val()){f=[];$('.global_participant_box_wrap input[name="recipient_id[]"]').each(function(e){f.push($(this).val())}),u.type="addUpdateParticipant",u.user_recepient_node_id=f,o(u)}else u.type="appendStatementForDialogueLetterClass",u.blank_instance_node_id=$("#blank-statement-id").val(),r(u);else if("edit"==$("#mode_val").val()){var f=[];$('.global_participant_box_wrap input[name="recipient_id[]"]').each(function(e){f.push($(this).val())}),u.type="addUpdateParticipant",u.user_recepient_node_id=f,o(u)}else u.type="appendStatementForDialogueClass",u.node_instance_propertyid=$("#property-statement-id").val(),a(u)}else{t=$("#course-dialogue-type").val(),""!=$("#courseInsId").val()&&(e=$("#courseInsId").val(),t="existing");var m=$("#course-title-value").val(),g=$("#dialogue-title-value").val();if($('input[name="recipient_id[]"]').each(function(e){l+=$(this).val()+","}),""==m&&(m="Untitled"),""==g&&(g="Untitled"),s({user_recepient_node_id:l,courseInsId:e,documentType:d})){if($("#individual_user_list").removeClass("alert-text"),$("#chatTextMessage").removeClass("alert-text"),"Chat"==d||"chat"==d)d="Chat",n=$(".course_edt_box .chat-msg:visible").val();else{var v=[];$("#menudashboard #edt div.edtParagraph:visible").each(function(){v.push({statement:$(this)[0].outerHTML})}),n=v,d="Letter"}if(""!=l&&""!=n&&""!=e)type="addDialogue",isGroupMessage=3;else if(""!=l&&"Letter"!=d&&""!=n&&""==e)type="addCourseDialogueActorAndStatement",isGroupMessage=5,n=n.trim();else if(""!=l&&"Letter"==d&&""!=n&&""==e)type="addCourseDialogueActorAndStatement",isGroupMessage=5,n=n;else{type="addCourse",isGroupMessage=2;n=" has created new course "+m}var b={dialog_instance_node_id:"",user_recepient_node_id:l,course_node_id:e,saveType:"P",course_dialogue_type:t,course_title:m,dialogue_title:g,user_instance_node_id:setUserID,action:d,type:type,isGroupMessage:isGroupMessage,courseInsId:e,message:n,Coursetype:d,timestamp:getTime()};""!=l&&""!=n&&""==e?"Letter"==d?y(b):_(b):(NProgress.start(),w(b)),$("#dialogue-title-value").val(""),$('input[name="recipient_id[]"]').remove(),$(".addNiceScrollWrapper").html("")}}$(".existingSelectedCourseWrap .editor-collapsed-btn").length&&$(".existingSelectedCourseWrap .course-expand-collapsed-btn").trigger("click"),edtTagArray=[],statusUndoRedo=[]}function s(e){if(""==e.user_recepient_node_id){$(".email_info").focus(),$("#individual_user_list").addClass("alert-text");var t=$("#individual_user_list").next("span");ErrorModule.appendErrorAfter(t);var i=t.closest(".courseListedUser");return i.is(":hidden")&&(i.prev().find(".toggle-section-btn").click(),t.parent().find('input[name="individual_user_list"]').focus()),!1}if(""!=e.user_recepient_node_id&&""==e.courseInsId&&""==$("#add-new-course-value").val())return $(".expand-block-head").hide(),$(".collapsed-block-head").show(),$("#individual_user_list").removeClass("alert-text"),$("#add-new-course-value").val(""),!1;if(("Chat"==e.documentType||"chat"==e.documentType)&&""!=e.user_recepient_node_id&&""==$(".course_edt_box .chat-msg:visible").val())return $(".course_edt_box .chat-msg.alert-text").focus(),$(".course_edt_box .chat-msg:visible").addClass("alert-text"),ErrorModule.appendErrorAfter($(".course_edt_box .chat-textarea")),setTimeout(function(){$(".course_edt_box .chat-msg.alert-text").focus()},100),!1;if("Letter"==e.documentType&&""==$.trim($("#menudashboard #edt div.edtParagraph:visible").text())&&""!=e.user_recepient_node_id){var n=$(".letter-edt-wrapper .edtParagraph").text();return $(".letter-edt-wrapper").focus(),""==n&&($("#course-dialogue-cancel").hide(),ErrorModule.appendErrorAfter($(".letter-edt-wrapper").next(),{error_class:"letter-error-msg"})),!1}return!0}function a(e){var t=""!=e.filetype?e.filetype:"",i=""!=e.fileSizeByte?e.fileSizeByte:"",n=""!=e.fileTempName?e.fileTempName:"",s=""!=e.attachmentName?e.attachmentName:"";e.saveType="P",e.timestamp=getTime(),e.statement_node_id="temp_123456",e.getAttachment=t,e.fileSizeByte=i,e.fileTempName=n,e.attachmentName=s,f(e)}function o(e){NProgress.start(),$.ajax({type:"post",url:domainUrl+"menudashboard/addUpdateParticipant",data:{data:e},dataType:"json",success:function(t){var i=e.action,n=e.type;e.saveType="P",e.action=i,e.type=n,m(e)},complete:function(){$("#mode_val").val("")}})}function r(e){""!=e.filetype&&e.filetype,""!=e.fileSizeByte&&e.fileSizeByte,""!=e.fileTempName&&e.fileTempName,""!=e.attachmentName&&e.attachmentName;"Published"==e.courseStatementType&&"Published"==e.diaStatusType&&"image"!=e.action&&"attachment"!=e.action&&(e.action="appendStatementForDialogueLetterClass",e.type="appendStatementForDialogueLetterClass"),m(e);var t=$(".existingDialogueSelCourseList.current").closest(".course-list").find(".courseboard-table tr td:last");$("#menudashboard #edt div.edtParagraph:visible").html("<br>").not(":first").remove(),"Draft"==t.text()&&t.text("Published")}function l(e,t){var i=e.data("id"),n=t.data("id"),s=$("#menudashboard").find("tr.current").closest(".react-list"),a=s.closest(".course-list").find(".dialogue_list.current"),o={node_instance_propertyid:n,dialog_instance_node_id:i,message:"This message has been removed.",course_created_by:s.attr("data-course-created-by"),dialogue_created_by:a.attr("data-dialogue-created-by"),sender:setUserID,dialogue_node_id:i,username:setUsername,timestamp:getTime(),isGroupMessage:5,action:"deleteStatementMsg",type:"deleteStatementMsg",user_recepient_node_id:e.attr("user-id"),statement_node_id:n};websocketcourse.send(JSON.stringify(o))}function d(e){var t=$(".existingDialogueSelCourseList.current"),i=e.data("id"),n={blank_instance_node_id:i,dialog_instance_node_id:t.data("id"),message:"This message has been removed.",sender:setUserID,dialogue_node_id:t.data("id"),username:setUsername,timestamp:getTime(),isGroupMessage:5,action:"deleteLetterStatementMsg",type:"deleteLetterStatementMsg",user_recepient_node_id:t.attr("user-id"),statement_node_id:i};websocketcourse.send(JSON.stringify(n))}function c(e){if(e.modal("show")){var t=$(window).outerHeight()/2.2;$(".courseViewModal .modal-dialog").css("margin-top",t),$("body").removeClass("modal-open"),$("body").find(".modal-backdrop").addClass("courseCoverBackdrop")}}function u(e){NProgress.start(),$.ajax({type:"post",url:domainUrl+"menudashboard/editCourseTitle",data:{data:e},dataType:"json",success:function(e){if(e){var t=e.result.course_node_id;p(t," has renamed this course to ",4,"updateCourseTitle",e.result.user_recepient_node_id,t,setUsername,e.result.course_title,"updateCourseTitle","")}},complete:function(){$(".editExistCourseTitle").removeClass("show"),$(".editExistDialogueTitle").removeClass("show"),$(".existCourseTitle").removeClass("no-hover")}})}function h(e){NProgress.start(),$.ajax({type:"post",url:domainUrl+"menudashboard/editDialougeTitle",data:{data:e},dataType:"json",success:function(t){if(t)if("0"==e.dialogue_status)$.post(domainUrl+"menudashboard/dialogueList",{course_instance_id:e.course_node_id,user_instance_node_id:setUserID},responseDialogueListCallAction,"JSON");else{var i={message:" has renamed this dialogue to ",user_instance_node_id:setUserID,dialogue_node_id:t.result.dialog_instance_node_id,username:setUsername,timestamp:getTime(),isGroupMessage:4,action:"updateDialogTitle",user_recepient_node_id:t.result.user_recepient_node_id,course_node_id:t.result.course_node_id,dialogue_title:t.result.dialogue_title,course_title:t.result.dialogue_title,type:"updateDialogTitle",selectType:""};websocketcourse.send(JSON.stringify(i))}},complete:function(){$(".editExistCourseTitle").removeClass("show"),$(".editExistDialogueTitle").removeClass("show"),$(".existCourseTitle").removeClass("no-hover")}})}function p(e,t,i,n,s,a,o,r,l,d){var c={message:t,user_instance_node_id:setUserID,dialogue_node_id:e,username:setUsername,timestamp:getTime(),isGroupMessage:i,action:n,user_recepient_node_id:s,course_node_id:a,username:o,dialogue_title:r,course_title:r,type:l,selectType:d};websocketcourse.send(JSON.stringify(c))}function f(e){e.saveType="P",e.timestamp=getTime(),websocketcourse.send(JSON.stringify(e))}function m(e){e.saveType="P",e.timestamp=getTime(),websocketcourse.send(JSON.stringify(e))}function g(e){websocketcourse.send(JSON.stringify(e))}function v(e,t){NProgress.start(),$.ajax({type:"post",url:domainUrl+"menudashboard/saveCourseDialouge",data:t,dataType:"json",success:function(t){if(t){var i=t.result.dialog_instance_node_id,n=" added you as a recipient on "+e.dialogue_title+" dialogue under "+e.course_title+" course",s=e.user_recepient_node_id,a=t.result.course_instance_id,o=e.Coursetype;"Letter"!=o&&(o="Chat"),p(i,n,5,"addCourseDialogueActorAndStatement",s,a,setUsername,t.result.dialogue_title,"addCourseDialogueActorAndStatement",o)}}})}function b(e,t){g(e)}function _(e){v(e,{data:e,chatMessage:JSON.stringify(e.message)})}function y(e){v(e,{data:e,chatMessage:e.message})}function w(e){"addDialogue"==e.type||"addCourse"==e.type?"Letter"==e.Coursetype?b(e,{data:e}):b(e,{data:e,chatMessage:JSON.stringify(e.message)}):b(e,{data:JSON.stringify(e)})}return window.ind_participant=[],window.mydummyParticipantObj=[],$(function(){t()}),{responseIndividualParticipant:e,_init:t,publishDialogueChat:function(){n()},saveEditDialogue:function(){var e=$("#editExistDialogueHidden"),t=$("#editExistDialogue").val();if(""==t)return $("#editExistDialogue").addClass("alert-text"),$(".error-msg").show(),!1;h({dialogue_property_node_id:e.attr("property-id"),dialog_instance_node_id:e.attr("data-id"),user_recepient_node_id:e.attr("actor-id"),course_node_id:$("#editExistCourse").attr("data-id"),saveType:"P",course_dialogue_type:"existing",dialogue_title:t,user_instance_node_id:setUserID,action:"letter",type:"updateDialogTitle",isGroupMessage:4}),$("#course-dialogue-publish, #course-dialogue-draft").removeClass("inactive"),$(".course_rename_view_mode").removeClass("no-hover")},saveEditCourse:function(){var e=$("#editExistCourse").val(),t=$("#editExistCourseHidden"),i=$("#editExistDialogueHidden");if(""==e)return $("#editExistCourse").addClass("alert-text"),$(".error-msg").show(),!1;u({course_property_node_id:t.attr("property-id"),course_node_id:t.attr("data-id"),user_recepient_node_id:i.attr("actor-id"),dialogue_node_id:i.attr("data-id"),saveType:"P",course_dialogue_type:"existing",course_title:e,user_instance_node_id:setUserID,action:"letter",type:"updateCourseTitle",isGroupMessage:4})},confirmCourseDelete:function(e){l($(".existingDialogueSelCourseList.current"),$("#confirmCoursePopup").find(".confirm-course-delete"))},confirmImgStatement:function(){l($(".existingDialogueSelCourseList.current"),$("#confirmImgPopup").find(".confirm-img-statement"))},imgDeleteStatement:function(e){var t=e.data("id"),i=$("#confirmImgPopup");i.find(".confirm-img-statement").data("id",t),c(i)},letterImgDeleteStatement:function(e){var t=e.data("id"),i=$("#confirmLetterImgPopup");i.find(".confirm-letter-img-statement").data("id",t),c(i)},confirmLetterImgStatement:function(){d($(".courseViewModal").find(".confirm-letter-img-statement"))},letterDeleteStatement:function(e){var t=e.data("id"),i=$("#letterRemoveModal");i.find(".confirm-remove-btn").data("id",t),c(i)},confirmRemoveBtn:function(){d($(".courseViewModal").find(".confirm-remove-btn"))},letterEditStatement:function(e){var t=e.data("value"),i=$("#menudashboard #edt");$("#menudashboard .letter-edit-statement#edt div.edtParagraph:visible").html("<br>"),$(i).html(t),$(".course_edt_box .letter-edt-wrapper").find(".EdtChange").removeClass("EdtChange").addClass("edtParagraph"),$(i).find(".morelinkletter").remove(),$("#blank-statement-id").val(e.data("node-id")),$('div[data-statement-id="'+e.data("node-id")+'"]').closest(".single_list_wrap").removeClass("text-processed")},courseDeleteStatement:function(e){var t=e.data("id"),i=$("#confirmCoursePopup");i.find(".confirm-course-delete").data("id",t),c(i)},addParticipants:function(){var e=$("#individual_user_list");niceScrollDialogue();var t=$.trim(e.val()),i=$.trim($("#individual_user_id").val()),n=$.trim($("#individual_user_name").val()),s=$.trim($("#individual_user_initial_name").val()),a=$.trim($("#individual_user_image").val()),o=$.trim($("#is_new_user").val());o&&(a="public/img/guest-user.jpg");var r=$(".addNiceScrollWrapper");if(r.find('input[value="'+i+'"]').length)return e.val(""),!0;if(""==i)return!0;if(""!=t&&mydummyParticipantObj.length)for(var l in ind_participant)if(ind_participant[l].key==mydummyParticipantObj[0].key){ind_participant.splice(l,1);break}if(""!=t&&""!=i){var d='<span class="initials-box">'+s+"</span>";0!=a&&(d="<img src='"+a+"' />");var c="<div class='user-temp global_participant_box_wrap recRightPanel'><span class='img'>"+d+"</span><span class='name'>"+n+"</span><input data-userInitial="+s+" data-userImage="+a+" data-userEmail="+t+" data-userName='"+n+"' type='hidden' name='recipient_id[]' value="+i+" data-isnewuser="+o+"></span><span class='close-sm'><i class='icon close removeDialogueList'></i></span></div>";r.append(c),e.val(""),$("#individual_user_id").val(""),$("#individual_user_name").val(""),$("#individual_user_initial_name").val(""),$("#individual_user_image").val(""),$("#is_new_user").val(""),e.focus()}checkChatMode()},removeParticipants:function(e){var t=[];$('.global_participant_box_wrap input[name="recipient_id[]"]').each(function(e){t.push($(this).val())}),console.log(t);var i=e.closest(".recRightPanel");if($("#newCourseControl").length||!i.hasClass("react-existing-user")){var n=i.find("input").attr("data-useremail"),s=i.find("input").val(),a=i.find("input").attr("data-username"),o=i.find("input").attr("data-userImage"),r=i.find("input").attr("data-userInitial");return ind_participant.push({key:s,value:n,userFullName:a,userProfileImage:o,userInitialName:r}),ind_participant.sort(function(e,t){return e.key-t.key}),i.remove(),$("#individual_user_list").focus(),$("#individual_user_id").val(""),$("#individual_user_name").val(""),$("#individual_user_initial_name").val(""),$("#individual_user_image").val(""),!0}var l=$("#menudashboard").find("tr.current").closest(".react-list"),d=l.closest(".list-row ").find(".dialogue_list.current");NProgress.start({position:"middle"}),data={},l.attr("data-course-node-id")||(l=d),data.dialogue_node_id=d.attr("data-id"),data.dialogue_title=d.attr("data-dialogue-title"),data.dialogue_instance_id=d.attr("data-instance-id"),data.course_node_id=l.attr("data-course-node-id"),data.course_title=l.attr("data-course-title"),data.course_created_by=l.attr("data-course-created-by"),data.dialogue_created_by=d.attr("data-dialogue-created-by"),data.saveType=1==d.attr("data-dialogue-status")?"P":"D",data.user_instance_node_id=setUserID,data.removeUser=i.find("input").val(),data.user_recepient_node_id=t,data.type="removeParticipant",data.status="1";var c=window.getAllUsersList[data.removeUser];data.default_params={action:"removeActor",dialogue_node_id:data.dialogue_node_id,dialogue_instance_id:data.dialogue_instance_id,course_node_id:data.course_node_id,dialogue_title:data.dialogue_title,course_title:data.course_title,removed_user_id:data.removeUser,removed_user_name:c.first_name+" "+c.last_name,removed_by_id:setUserID,removed_by_name:setUsername},console.log(data),socket.send(JSON.stringify(data)),manageDialogueHT()},ind_participant:ind_participant,loadChatView:function(e,t){$.ajax({url:e.url,data:e.data,post:e.type?e.type:"get",success:function(e){"function"==typeof t&&t(e)},datType:"html"})},appendStatementForDialogueClass:a,appendStatementForDialogueLetterClass:r,getIconFormat:function(e){var t={docx:"doc.png",doc:"doc.png",zip:"zip.png",pdf:"pdf.png",xlsx:"xls.png",csv:"csv.png",exe:"exe.png",psd:"psd.png",txt:"notepad.png"};return e in t?t[e]:"default.png"},chatEditStatement:function(e){var t=e.data("value"),i=e.data("id"),n=$(".chat-textarea .chat-msg");$(n).val(t),$("#property-statement-id").val(i)}}}();window.puJsFileLoadCounter++;var initalNodeType=1,hitName="",hitByIns=!1,loadDataNewIns="",globalDocumentSaveStatus=0,globalTitle="",PrevFirst=0,PrevLast=0,LastClick="",lastCTRLclick="",FolderListarr=[],allInvalidFileCount=0,documentrowCount=0,documentcount=0,completestatusCount=0,globalFolderInstanceID=$("#FolderList").find("li.active").find("span").attr("data-id"),parentFolderInstanceID=$("#FolderList").find("li.active").closest(".move-parent-folder").attr("id"),enableDisablestatus=0;$(document).ready(function(){$("#course_action_menu").show(),$("body").on("click",".sub-filter",function(){$("#filter_operator").attr("value",$(this).attr("data-id")),$("#filter_type").attr("value",$(this).attr("data-filter-by")),$("#filter_field").attr("value",$(this).attr("data-filter-field"))}),$("body").on("click",".email_row",function(){var e=$(this).attr("data-id");$.post(domainUrl+$("#tempControler").val()+"/detail",{email_node_id:e},function(e){$(".email_detail_container").html(e)},"html")}),$("body").on("click",".sub-filter-type",function(){if($("#filter_operator").attr("value",$(this).attr("data-id")),$("#filter_type").attr("value",$(this).attr("data-filter-by")),$("#filter_field").attr("value",$(this).attr("data-filter-field")),"all"==$(this).attr("data-id"))var e="not_equal",t="A";else var e="equals",t=$(this).attr("data-id");var i=$("#filter_type").val(),n=$("#filter_field").val();if(""!=$.trim(t)){NProgress.start();var s=$("#temp_item_per_page").val();$.post(domainUrl+"classes/index",{page:1,order_by:"node_class_id",order:"DESC",type:i,filter_operator:e,filter_field:n,search_text:t,itemPerPage:s},responseFilter,"html")}}),$("body").on("click",".sub-filter-status",function(){if($("#filter_operator").attr("value",$(this).attr("data-id")),$("#filter_type").attr("value",$(this).attr("data-filter-by")),$("#filter_field").attr("value",$(this).attr("data-filter-field")),"all"==$(this).attr("data-id"))var e="not_equal",t="blank";else var e="begins_with",t=$(this).attr("data-id");var i=$("#filter_type").val(),n=$("#filter_field").val();if(""!=$.trim(t)){NProgress.start();var s=$("#temp_item_per_page").val();$.post(domainUrl+"classes/index",{page:1,order_by:"node_class_id",order:"DESC",type:i,filter_operator:e,filter_field:n,search_text:t,itemPerPage:s},responseFilter,"html")}}),$("body").on("click",".sub-folder-filter-status",function(){if($("#filter_operator").attr("value",$(this).attr("data-id")),$("#filter_type").attr("value",$(this).attr("data-filter-by")),$("#filter_field").attr("value",$(this).attr("data-filter-field")),"all"==$(this).attr("data-id"))var e="not_equal",t="2";else var e="equals",t=$(this).attr("data-id");$("#filter_type").val();var i=$("#filter_field").val();if(""!=$.trim(t)){NProgress.start();$("#temp_item_per_page").val();var n=$("#FolderList").find("li.active").find("span").attr("data-id");$.post(domainUrl+"documents/folderDetails",{page:1,order_by:"node_class_property_id",order:"ASC",type:"no-pagination",filter_operator:e,filter_field:i,search_text:t,mode:"Ajax",class_node_id:n},responseCallFolderDetailsAction,"html")}}),$("body").on("click",".course-sub-filter",function(){$("#course_filter_operator").attr("value",$(this).attr("data-id")),$("#course_filter_type").attr("value",$(this).attr("data-filter-by")),$("#course_filter_field").attr("value",$(this).attr("data-filter-field"))}),$("body").on("click",".sub-course-filter-status",function(){if($("#course_filter_operator").attr("value",$(this).attr("data-id")),$("#course_filter_type").attr("value",$(this).attr("data-filter-by")),"all"==$(this).attr("data-id"))var e="not_equal",t="2";else var e="equals",t=$(this).attr("data-id");var i=$("#filter_type").val();$("#filter_field").val();""!=$.trim(t)&&(NProgress.start(),$.post(domainUrl+"menudashboard/index",{setUserID:setUserID,order_by:"node_instance_id",order:"DESC",type:i,filter_operator:e,filter_field:"status",search_text:t,mode:1},responseCourseAjax,"html"))}),$("body").on("click",".search-button-box",function(){var e=$("#filter_operator").val(),t=$("#filter_type").val(),i=$("#filter_field").val(),n=$("#search-caption-text-box").val();if(""!=$.trim(n)){NProgress.start();var s=$("#temp_item_per_page").val();$.post(domainUrl+"classes/index",{page:1,order_by:"node_class_id",order:"DESC",type:t,filter_operator:e,filter_field:i,search_text:n,itemPerPage:s},responseFilter,"html")}}),$("body").on("click",".search-button-box-caption",function(){var e=$("#filter_operator").val(),t=$("#filter_type").val(),i=$("#filter_field").val(),n=$("#search-caption-text-box-caption").val();if(""!=$.trim(n)){NProgress.start();var s=$("#temp_item_per_page").val();$.post(domainUrl+"classes/index",{page:1,order_by:"node_class_id",order:"DESC",type:t,filter_operator:e,filter_field:i,search_text:n,itemPerPage:s},responseFilter,"html")}}),$("body").on("click",".search-button-box-instance_total",function(){var e=$("#filter_operator").val(),t=$("#filter_type").val(),i=$("#filter_field").val(),n=$("#search-caption-text-box-instance_total").val();if(""!=$.trim(n)){NProgress.start();var s=$("#temp_item_per_page").val();$.post(domainUrl+"classes/index",{page:1,order_by:"node_class_id",order:"DESC",type:t,filter_operator:e,filter_field:i,search_text:n,itemPerPage:s},responseFilter,"html")}}),$("body").on("click",".sub-filter-instance",function(){$("#filter_operator_instance").attr("value",$(this).attr("data-id")),$("#filter_type_instance").attr("value",$(this).attr("data-filter-by")),$("#filter_field_instance").attr("value",$(this).attr("data-filter-field"))}),$("body").on("click",".sub-filter-instance-status",function(){if($("#filter_operator_instance").attr("value",$(this).attr("data-id")),$("#filter_type_instance").attr("value",$(this).attr("data-filter-by")),$("#filter_field_instance").attr("value",$(this).attr("data-filter-field")),"all"==$(this).attr("data-id"))var e="not_equal",t="blank";else var e="begins_with",t=$(this).attr("data-id");var i=$("#filter_type_instance").val(),n=$("#filter_field_instance").val();if(""!=$.trim(t)){NProgress.start();var s=$("#node_y_class_id").val(),a=$("#temp_item_per_page_instance").val();$.post(domainUrl+"classes/getClassInstance",{page:1,order_by:"node_instance_id",order:"DESC",class_id:s,mode:i,filter_operator:e,filter_field:n,search_text:t,itemPerPage:a},responseInstanceFilter,"html")}}),$("body").on("click",".search-button-instance-box",function(){var e=$("#filter_operator_instance").val(),t=$("#filter_type_instance").val(),i=$("#filter_field_instance").val(),n=$("#search-caption-instance-text-box").val();if(""!=$.trim(n)){NProgress.start();var s=$("#node_y_class_id").val(),a=$("#temp_item_per_page_instance").val();$.post(domainUrl+"classes/getClassInstance",{page:1,order_by:"node_instance_id",order:"DESC",class_id:s,mode:t,filter_operator:e,filter_field:i,search_text:n,itemPerPage:a},responseInstanceFilter,"html")}}),$("body").on("click",".all_check",function(){1==$(".all_check").is(":checked")&&($(".single_check").each(function(){this.checked=!0}),$('.default_row_class input[type="checkbox"]').each(function(){this.checked=!0})),0==$(".all_check").is(":checked")&&($(".single_check").each(function(){this.checked=!1}),$('.default_row_class input[type="checkbox"]').each(function(){this.checked=!1}))}),$("body").on("click",".all_i_check",function(){1==$(".all_i_check").is(":checked")&&$(".single_i_check").each(function(){this.checked=!0}),0==$(".all_i_check").is(":checked")&&$(".single_i_check").each(function(){this.checked=!1})}),$("body").on("click",".ImportInstanceData_li",function(){return $("input[name=import_instance_file]").click(),!1}),$("body").on("click","#importFile",function(){NProgress.start();var e=$("#node_y_class_id").val();$("#hidden-class-id").attr("value",e);var t,i,n=new FormData(document.getElementById("import_instance_form"));return $.ajax({url:"classes/importInstanceData",type:"POST",data:n,dataType:"json",enctype:"multipart/form-data",processData:!1,contentType:!1}).done(function(e){if("error"==$.trim(e.error))$("#csvfilePopup").find(".series-content p").text("The import template you provided does not match the expected data structure. Please correct your import template and try again."),$("#csvfilePopup").modal("show");else{"0"!=$.trim(e.update)?disregardData=e.update:disregardData=e.disregard;var n=$("#node_y_class_id").val();$.post(domainUrl+"classes/getClassInstance",{class_id:n,page:1,order_by:"node_instance_id",order:"DESC",mode:"pagination"},responseGetClassInstance1,"html"),t=e.insert<=1?"record":"records",i=disregardData<=1?"record has":"records have",$("#csvfilePopup").find(".series-content p").text("You have successfully added "+e.insert+" "+t+". "+disregardData+" "+i+" been disregarded."),$("#csvfilePopup").modal("show")}NProgress.done()}),!1}),$("body").on("click",".sub-filter-node-z",function(){$("#filter_operator_node_z").attr("value",$(this).attr("data-id")),$("#filter_field_node_z").attr("value",$(this).attr("data-filter-field"))}),$("body").on("click",".search-button-box-node-z",function(){var e=$("#filter_operator_node_z").val(),t=$("#filter_field_node_z").val(),i=$("#search-caption-text-box-node-z").val();""!=$.trim(i)&&(NProgress.start(),$.post(domainUrl+"classes/classListNew",{filter_operator:e,filter_field:t,search_text:i,order_by:"node_class_id",order:"DESC",mode:"Ajax"},responseclassListNewAjax,"html"))}),$("body").on("click",".search-button-box-node-z-caption",function(){var e=$("#filter_operator_node_z").val(),t=$("#filter_field_node_z").val(),i=$("#search-caption-text-box-node-z-caption").val();""!=$.trim(i)&&(NProgress.start(),$.post(domainUrl+"classes/classListNew",{filter_operator:e,filter_field:t,search_text:i,order_by:"node_class_id",order:"DESC",mode:"Ajax"},responseclassListNewAjax,"html"))}),$("body").on("click",".node-z-searching-in-class-list-top-button",function(){var e=$(".node-z-searching-in-class-list-top-text-field").val();""!=$.trim(e)&&(NProgress.start(),$.post(domainUrl+"classes/classListNew",{filter_operator:"all",filter_field:"all",search_text:e,order_by:"node_class_id",order:"DESC",mode:"Ajax"},responseclassListNewAjax,"html"))}),$("body").on("click",".sub-filter-node-z-instance-value",function(){$("#filter_operator_node_z_instance").attr("value",$(this).attr("data-id")),$("#filter_field_node_z_instance").attr("value",$(this).attr("data-filter-field"))}),$("body").on("click",".search-button-box-node-z-node-id",function(){var e=$("#filter_operator_node_z_instance").val(),t=$("#filter_field_node_z_instance").val(),i=$("#search-caption-text-box-node-z-node-id").val();if(""!=$.trim(i)){var n=$("#intanceClassIdNozeZ").val();NProgress.start(),$.post(domainUrl+"classes/instanceListNew",{class_id:n,filter_operator:e,filter_field:t,search_text:i,order_by:"node_instance_id",order:"DESC",mode:"Ajax"},responseinstanceListNewAjax,"html")}}),$("body").on("click",".search-button-box-node-z-caption-instanceList",function(){var e=$("#filter_operator_node_z_instance").val(),t=$("#filter_field_node_z_instance").val(),i=$("#search-caption-text-box-node-z-caption-instanceList").val();if(""!=$.trim(i)){var n=$("#intanceClassIdNozeZ").val();NProgress.start(),$.post(domainUrl+"classes/instanceListNew",{class_id:n,filter_operator:e,filter_field:t,search_text:i,order_by:"node_instance_id",order:"DESC",mode:"Ajax"},responseinstanceListNewAjax,"html")}}),$("body").on("click",".node-z-searching-in-instance-list-top-button",function(){var e=$(".node-z-searching-in-instance-list-top-text-field").val();if(""!=$.trim(e)){var t=$("#intanceClassIdNozeZ").val();NProgress.start(),$.post(domainUrl+"classes/instanceListNew",{class_id:t,filter_operator:"all",filter_field:"all",search_text:e,order_by:"node_instance_id",order:"DESC",mode:"Ajax"},responseinstanceListNewAjax,"html")}}),$("body").on("click",".single_radio_check_all",function(){1==$(".single_radio_check_all").is(":checked")&&$(".single_radio_check1").each(function(){this.checked=!0}),0==$(".single_radio_check_all").is(":checked")&&$(".single_radio_check1").each(function(){this.checked=!1})}),$("body").on("click",".class_radio_data_type",function(){$("#second-class-div").find(".node-selected .hidden-node-y").val(""),$("#second-class-div").find(".node-selected .hidden-node-y-instance-property-node-id").val("")}),$("body").on("keypress",".instanceRunTab.noReload",function(e){if(13===(e.keyCode?e.keyCode:e.which))return!1}),$("body").on("click",".search-button-box-folder-value",function(){var e=$("#filter_operator").val(),t=$("#filter_type").val(),i=$("#filter_field").val(),n=$("#search-folder-text-box-value").val();""!=$.trim(n)&&(NProgress.start(),$.post(domainUrl+"documents/folderList",{page:1,order_by:"node_instance_id",order:"DESC",type:t,filter_operator:e,filter_field:i,search_text:n,mode:"Ajax"},responsePaginationFolderAjax,"html"))}),$("body").on("click",".search-button-box-folder-details",function(){var e=$("#filter_operator").val(),t=($("#filter_type").val(),$("#filter_field").val()),i=$("#search-button-box-folder-details").val();if(""!=$.trim(i)){var n=$("#FolderList").find("li.active").find("span").attr("data-id");NProgress.start(),$.post(domainUrl+"documents/folderDetails",{page:1,order_by:"node_instance_id",order:"DESC",type:"no-pagination",filter_operator:e,filter_field:t,search_text:i,mode:"Ajax",class_node_id:n},responseCallFolderDetailsAction,"html")}}),$("body").on("click",".search-button-box-course",function(){var e=$("#course_filter_operator").val(),t=$("#course_filter_type").val(),i=$("#course_filter_field").val(),n=$("#search-button-box-course").val();""!=$.trim(n)&&(NProgress.start(),$("#course-instance-list-div").html(""),$.post(domainUrl+"menudashboard/index",{setUserID:setUserID,order_by:"node_instance_id",order:"DESC",type:t,filter_operator:e,filter_field:i,search_text:n,mode:1},responseCourseAjax,"html"))}),$("body").on("click",function(e){0==$(".folder-detail").find("tr.folder-document-details").hasClass("selected-list")&&$("#delete-folder-document").addClass("inactiveLink"),"block"!=$(".bootbox").css("display")&&($(e.target).closest("table").hasClass("folder-detail")||$(e.target).closest("a").hasClass("deleteFolderDocument")||(FolderListarr=[],$(".selected-list").removeClass("selected-list"),$(".drag-folder").removeClass("fDetailMoveNotAllow"),PrevFirst=0,PrevLast=0,lastCTRLclick="",LastClick="",$("#delete-folder-document").addClass("inactiveLink")))});var e,t;$("body").on("click",".folder-detail tr",function(n){var s;if(selectedFolder_arr=[],!$(this).hasClass("no-record"))if(n.ctrlKey)$(this).hasClass("selected-list")?(FolderListarr.pop($(this).data("id")),$(this).removeClass("selected-list"),s=$(this).data("id"),$(".drag-folder#"+s).removeClass("fDetailMoveNotAllow")):($(this).addClass("selected-list"),FolderListarr.push($(this).data("id")),lastCTRLclick=$(this).index(),s=$(this).data("id"),$(".drag-folder#"+s).addClass("fDetailMoveNotAllow"));else if(n.shiftKey){$(this).addClass("selected-list");var a=$(this).index();if(0==PrevFirst&&0==PrevLast&&""==lastCTRLclick?(e=0,t=a,LastClick="above",lastCTRLclick=""):a>PrevFirst&&a<PrevLast?"below"==LastClick?(e=PrevFirst,t=a,LastClick="below",lastCTRLclick=""):(e=a,t=PrevLast,LastClick="above",lastCTRLclick=""):a<PrevFirst&&"below"==LastClick?(e=a,t=PrevFirst,LastClick="above",lastCTRLclick=""):a<PrevFirst&&"above"==LastClick?(e=a,t=PrevLast,LastClick="above",lastCTRLclick=""):a>PrevLast&&"above"==LastClick?(e=PrevLast,t=a,LastClick="below",lastCTRLclick=""):""!=lastCTRLclick?lastCTRLclick>a?(e=a,t=lastCTRLclick,LastClick="above",lastCTRLclick=""):lastCTRLclick<a&&(e=lastCTRLclick,t=a,LastClick="below",lastCTRLclick=""):(e=$(".folder-detail tr.selected-list").first().index(),t=$(".folder-detail tr.selected-list").last().index(),a<PrevFirst&&a<PrevLast?(firstHolder=e,e=t,t=firstHolder,LastClick="above",lastCTRLclick=""):a>PrevFirst&&a>PrevLast?(LastClick="below",lastCTRLclick=""):a!=PrevFirst&&a!=PrevLast||(a==PrevFirst?(e=PrevFirst,t=PrevFirst,LastClick="above",lastCTRLclick=""):(e=PrevLast,t=PrevLast,LastClick="below",lastCTRLclick=""))),-1==e||-1==t)return!1;$(".folder-detail tr").removeClass("selected-list"),$(".drag-folder").removeClass("fDetailMoveNotAllow");var o=t-e,r=e;for(FolderListarr=[],i=0;i<=o;i++)$(".folder-detail tbody tr").eq(r).addClass("selected-list"),FolderListarr.push($(".folder-detail tbody tr").eq(r).data("id")),s=$(".folder-detail tbody tr").eq(r).data("id"),$(".drag-folder#"+s).addClass("fDetailMoveNotAllow"),r++;PrevFirst=e,PrevLast=t}else $(this).hasClass("selected-list")?($(".folder-detail tr").removeClass("selected-list"),$(".drag-folder").removeClass("fDetailMoveNotAllow"),FolderListarr=[],$(this).addClass("selected-list"),FolderListarr.push($(this).data("id")),s=$(this).data("id"),$(".drag-folder#"+s).addClass("fDetailMoveNotAllow"),PrevFirst=$(this).index(),PrevLast=$(this).index(),lastCTRLclick=$(this).index()):($(".folder-detail tr").removeClass("selected-list"),$(".drag-folder").removeClass("fDetailMoveNotAllow"),(FolderListarr=[]).push($(this).data("id")),$(this).addClass("selected-list"),s=$(this).data("id"),$(".drag-folder#"+s).addClass("fDetailMoveNotAllow"),PrevFirst=$(this).index(),PrevLast=$(this).index(),lastCTRLclick=$(this).index());FolderListarr.length<1?$("#delete-folder-document").addClass("inactiveLink"):$("#delete-folder-document").removeClass("inactiveLink")}),$("body").on("click","#delete-folder-document",function(){var e=$("#FolderList").find("li.active").find("span").attr("data-id"),t=FolderListarr;if(""==FolderListarr)return bootbox.alert("Please select at-least one file or folder."),!1;bootbox.confirm({title:"Delete Message",message:"Are you sure you want to delete file or folder.",buttons:{cancel:{label:"No",className:"btn-default"},confirm:{label:"Yes",className:"btn-primary"}},callback:function(i){if(i){NProgress.start();var n=[],s=0;$(".folder-document-details").each(function(e,t){"Folder"==$(this).find("td").eq(1).find("span").html()&&n.push($(this).data("id"))}),$(n).each(function(e,t){"-1"!=jQuery.inArray(t,FolderListarr)&&++s}),n.length==s&&($("#"+e+" .left-folder-action").html(""),$("#"+e+" .folder-action").addClass("noChild").removeClass("hasChild")),$.post(domainUrl+"documents/deleteInstance",{delete_ids:t,parentFolderId:e},responseDeleteInstanceFolderDocumentProperty,"JSON"),$(FolderListarr).each(function(e,t){$("#"+t).remove()})}else FolderListarr=[],$(".folder-detail tr").removeClass("current"),$(".selected-list").removeClass("selected-list"),$(".drag-folder").removeClass("fDetailMoveNotAllow"),PrevFirst=0,PrevLast=0,lastCTRLclick="",LastClick="",$("#delete-folder-document").addClass("inactiveLink")}})}),$("body").on("click","#add-document",function(){localStorage.removeItem("resourcedata"),localStorage.removeItem("loaddocument");var e=$("li#"+parentFolderInstanceID).html();localStorage.setItem("resourcedata",e),$("#newDocumentFlyout").animate({right:"0"},300,function(){}).addClass("in"),$("#newDocumentFlyout #File").addClass("in"),$(".ref-hideTollbar").trigger("click"),$.post(domainUrl+"documents/fileHelper",{},responseFileHelper1,"html"),$(".loadder").show(),$("#document_title").val(""),globalTitle="",$("#document_action_menu").show(),$("#openCourseFlyout").animate({left:0},300).removeClass("in"),$("body").on("keyup","#document_title",function(){if($(this).val().length<51){var e=$(this).val().length;$(this).siblings(".char-limit").find(".charCount").text(e)}}),$(".charCount").text(0)}),$("body").on("keypress","#Folder_name",function(e){var t=e.keyCode?e.keyCode:e.which;$(this).val().length>0&&13==t&&$(".common_name_folder_first").trigger("click")}),$("body").on("keypress","#Folder_sub_name",function(e){var t=e.keyCode?e.keyCode:e.which;$(this).val().length>0&&""!=$.trim($(this).val())&&13==t&&$(".common_sub_folder_first").trigger("click")}),$("body").on("keypress","#Folder_root_name",function(e){var t=e.keyCode?e.keyCode:e.which;$(this).val().length>0&&""!=$.trim($(this).val())&&13==t&&$(".common_root_folder_first").trigger("click")}),$("body").on("keypress","#common_name_first",function(e){var t=e.keyCode?e.keyCode:e.which;$(this).val().length>0&&13==t&&$("#commonPopupFirst .btn").eq(0).trigger("click")}),$("body").on("click","#add-document-open",function(){0==globalDocumentSaveStatus?bootbox.confirm({title:"Exit without saving",message:"Are you sure you want to Close the document without saving your changes?",buttons:{cancel:{label:"No",className:"btn-default"},confirm:{label:"Yes",className:"btn-primary"}},callback:function(e){e&&($.post(domainUrl+"documents/folderList",{order_by:"sequence",order:"DESC",type:"no-pagination",mode:"Normal"},responseCallAction1,"html"),$("#folderList_action_menu").show(),$(".NewFolder_li").show(),$(".DeleteFolder_li").show(),$(".NewDocument_li").hide(),$(".OpenDocument_li").hide())}}):($.post(domainUrl+"documents/folderList",{order_by:"sequence",order:"DESC",type:"no-pagination",mode:"Normal"},responseCallAction1,"html"),$("#folderList_action_menu").show(),$(".NewFolder_li").show(),$(".DeleteFolder_li").show(),$(".NewDocument_li").hide(),$(".OpenDocument_li").hide())}),$("body").on("click",".addSubFolder",function(){$("#createSubFolder").modal("show"),$("#createSubFolder").on("shown.bs.modal",function(){$(this).find('input[type="text"]').focus(),$("#createSubFolder .btn").first().addClass("inactiveLink")}),$("body").on("keyup","#Folder_sub_name",function(){if($(this).val().length>0&&""!=$.trim($(this).val())?$("#createSubFolder .btn ").removeClass("inactiveLink"):$("#createSubFolder .btn").first().addClass("inactiveLink"),$(this).val().length<51){var e=$(this).val().length;$(this).siblings(".char-limit").find(".charCount").text(e)}}),$("#Folder_sub_name").val(""),$(".charCount").text(0)}),$("body").on("click","#edit-course",function(){$(".viewTopMode, #view-detail-course").addClass("hide"),$(".editTopMode, #edit-detail-course").removeClass("hide"),$("#course-publish").show(),$("#course-draft").show(),$("#course-cancel").show(),$("#edit-course").hide(),autosize.destroy(document.querySelectorAll(".courseDetailSection textarea.resizeTextarea")),$(".courseDetailSection textarea.resizeTextarea").each(function(){autosize($(this))}).on("autosize:resized",function(){$(".nano").nanoScroller()}),$("#course-title-defalut-value").focus()}),$("body").on("click","#course-cancel",function(){$(".viewTopMode").removeClass("hide"),$(".editTopMode").addClass("hide"),$(".viewTopMode, #view-detail-course").removeClass("hide"),$(".editTopMode, #edit-detail-course").addClass("hide"),$("#course-publish").hide(),$("#course-draft").hide(),$("#course-cancel").hide(),$("#edit-course").show()})});var popNotHide=!0,popNotHide=!0;window.puJsFileLoadCounter++,function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports&&"function"==typeof require?require("jquery"):jQuery)}(function(e){"use strict";function t(i,n){var s=function(){},a=this,o={ajaxSettings:{},autoSelectFirst:!1,appendTo:document.body,serviceUrl:null,lookup:null,onSelect:null,width:"auto",minChars:1,maxHeight:300,deferRequestBy:0,params:{},formatResult:t.formatResult,delimiter:null,zIndex:9999,type:"GET",noCache:!1,onSearchStart:s,onSearchComplete:s,onSearchError:s,preserveInput:!1,containerClass:"autocomplete-suggestions",tabDisabled:!1,dataType:"text",currentRequest:null,triggerSelectOnValidInput:!0,preventBadQueries:!0,lookupFilter:function(e,t,i){return-1!==e.value.toLowerCase().indexOf(i)},paramName:"query",transformResult:function(t){return"string"==typeof t?e.parseJSON(t):t},showNoSuggestionNotice:!1,noSuggestionNotice:"No results",orientation:"bottom",forceFixPosition:!1};a.element=i,a.el=e(i),a.suggestions=[],a.badQueries=[],a.selectedIndex=-1,a.currentValue=a.element.value,a.intervalId=0,a.cachedResponse={},a.onChangeInterval=null,a.onChange=null,a.isLocal=!1,a.suggestionsContainer=null,a.noSuggestionsContainer=null,a.options=e.extend({},o,n),a.classes={selected:"autocomplete-selected",suggestion:"autocomplete-suggestion"},a.hint=null,a.hintValue="",a.selection=null,a.initialize(),a.setOptions(n)}var i={escapeRegExChars:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},createNode:function(e){var t=document.createElement("div");return t.className=e,t.style.position="absolute",t.style.display="none",t}},n={ESC:27,TAB:9,RETURN:13,LEFT:37,UP:38,RIGHT:39,DOWN:40};t.utils=i,e.Autocomplete=t,t.formatResult=function(e,t){if(!t)return e.value;var n="("+i.escapeRegExChars(t)+")";return e.value.replace(new RegExp(n,"gi"),"<strong>$1</strong>").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/&lt;(\/?strong)&gt;/g,"<$1>")},t.prototype={killerFn:null,initialize:function(){var i,n=this,s="."+n.classes.suggestion,a=n.classes.selected,o=n.options;n.element.setAttribute("autocomplete","off"),n.killerFn=function(t){0===e(t.target).closest("."+n.options.containerClass).length&&(n.killSuggestions(),n.disableKillerFn())},n.noSuggestionsContainer=e('<div class="autocomplete-no-suggestion"></div>').html(this.options.noSuggestionNotice).get(0),n.suggestionsContainer=t.utils.createNode(o.containerClass),(i=e(n.suggestionsContainer)).appendTo(o.appendTo),"auto"!==o.width&&i.width(o.width),i.on("mouseover.autocomplete",s,function(){n.activate(e(this).data("index"))}),i.on("mouseout.autocomplete",function(){n.selectedIndex=-1,i.children("."+a).removeClass(a)}),i.on("click.autocomplete",s,function(){n.select(e(this).data("index"))}),n.fixPositionCapture=function(){n.visible&&n.fixPosition()},e(window).on("resize.autocomplete",n.fixPositionCapture),n.el.on("keydown.autocomplete",function(e){n.onKeyPress(e)}),n.el.on("keyup.autocomplete",function(e){n.onKeyUp(e)}),n.el.on("blur.autocomplete",function(){n.onBlur()}),n.el.on("focus.autocomplete",function(){n.onFocus()}),n.el.on("change.autocomplete",function(e){n.onKeyUp(e)}),n.el.on("input.autocomplete",function(e){n.onKeyUp(e)})},onFocus:function(){var e=this;e.fixPosition(),e.el.val().length>=e.options.minChars&&e.onValueChange()},onBlur:function(){this.enableKillerFn()},abortAjax:function(){var e=this;e.currentRequest&&(e.currentRequest.abort(),e.currentRequest=null)},setOptions:function(t){var i=this,n=i.options;e.extend(n,t),i.isLocal=e.isArray(n.lookup),i.isLocal&&(n.lookup=i.verifySuggestionsFormat(n.lookup)),n.orientation=i.validateOrientation(n.orientation,"bottom"),e(i.suggestionsContainer).css({"max-height":n.maxHeight+"px",width:n.width+"px","z-index":n.zIndex})},clearCache:function(){this.cachedResponse={},this.badQueries=[]},clear:function(){this.clearCache(),this.currentValue="",this.suggestions=[]},disable:function(){var e=this;e.disabled=!0,clearInterval(e.onChangeInterval),e.abortAjax()},enable:function(){this.disabled=!1},fixPosition:function(){var t=this,i=e(t.suggestionsContainer),n=i.parent().get(0);if(n===document.body||t.options.forceFixPosition){var s=t.options.orientation,a=i.outerHeight(),o=t.el.outerHeight(),r=t.el.offset(),l={top:r.top,left:r.left};if("auto"===s){var d=e(window).height(),c=e(window).scrollTop(),u=-c+r.top-a,h=c+d-(r.top+o+a);s=Math.max(u,h)===u?"top":"bottom"}if(l.top+="top"===s?-a:o,n!==document.body){var p,f=i.css("opacity");t.visible||i.css("opacity",0).show(),p=i.offsetParent().offset(),l.top-=p.top,l.left-=p.left,t.visible||i.css("opacity",f).hide()}"auto"===t.options.width&&(l.width=t.el.outerWidth()-2+"px"),i.css(l)}},enableKillerFn:function(){var t=this;e(document).on("click.autocomplete",t.killerFn)},disableKillerFn:function(){var t=this;e(document).off("click.autocomplete",t.killerFn)},killSuggestions:function(){var e=this;e.stopKillSuggestions(),e.intervalId=window.setInterval(function(){e.visible&&(e.el.val(e.currentValue),e.hide()),e.stopKillSuggestions()},50)},stopKillSuggestions:function(){window.clearInterval(this.intervalId)},isCursorAtEnd:function(){var e,t=this,i=t.el.val().length,n=t.element.selectionStart;return"number"==typeof n?n===i:!document.selection||((e=document.selection.createRange()).moveStart("character",-i),i===e.text.length)},onKeyPress:function(e){var t=this;if(t.disabled||t.visible||e.which!==n.DOWN||!t.currentValue){if(!t.disabled&&t.visible){switch(e.which){case n.ESC:t.el.val(t.currentValue),t.hide();break;case n.RIGHT:if(t.hint&&t.options.onHint&&t.isCursorAtEnd()){t.selectHint();break}return;case n.TAB:if(t.hint&&t.options.onHint)return void t.selectHint();if(-1===t.selectedIndex)return void t.hide();if(t.select(t.selectedIndex),!1===t.options.tabDisabled)return;break;case n.RETURN:if(-1===t.selectedIndex)return void t.hide();t.select(t.selectedIndex);break;case n.UP:t.moveUp();break;case n.DOWN:t.moveDown();break;default:return}e.stopImmediatePropagation(),e.preventDefault()}}else t.suggest()},onKeyUp:function(e){var t=this;if(!t.disabled){switch(e.which){case n.UP:case n.DOWN:return}clearInterval(t.onChangeInterval),t.currentValue!==t.el.val()&&(t.findBestHint(),t.options.deferRequestBy>0?t.onChangeInterval=setInterval(function(){t.onValueChange()},t.options.deferRequestBy):t.onValueChange())}},onValueChange:function(){var t=this,i=t.options,n=t.el.val(),s=t.getQuery(n);return t.selection&&t.currentValue!==s&&(t.selection=null,(i.onInvalidateSelection||e.noop).call(t.element)),clearInterval(t.onChangeInterval),t.currentValue=n,t.selectedIndex=-1,i.triggerSelectOnValidInput&&t.isExactMatch(s)?void t.select(0):void(s.length<i.minChars?t.hide():t.getSuggestions(s))},isExactMatch:function(e){var t=this.suggestions;return 1===t.length&&t[0].value.toLowerCase()===e.toLowerCase()},getQuery:function(t){var i,n=this.options.delimiter;return n?(i=t.split(n),e.trim(i[i.length-1])):t},getSuggestionsLocal:function(t){var i,n=this.options,s=t.toLowerCase(),a=n.lookupFilter,o=parseInt(n.lookupLimit,10);return i={suggestions:e.grep(n.lookup,function(e){return a(e,t,s)})},o&&i.suggestions.length>o&&(i.suggestions=i.suggestions.slice(0,o)),i},getSuggestions:function(t){var i,n,s,a,o=this,r=o.options,l=r.serviceUrl;if(r.params[r.paramName]=t,n=r.ignoreParams?null:r.params,!1!==r.onSearchStart.call(o.element,r.params)){if(e.isFunction(r.lookup))return void r.lookup(t,function(e){o.suggestions=e.suggestions,o.suggest(),r.onSearchComplete.call(o.element,t,e.suggestions)});o.isLocal?i=o.getSuggestionsLocal(t):(e.isFunction(l)&&(l=l.call(o.element,t)),s=l+"?"+e.param(n||{}),i=o.cachedResponse[s]),i&&e.isArray(i.suggestions)?(o.suggestions=i.suggestions,o.suggest(),r.onSearchComplete.call(o.element,t,i.suggestions)):o.isBadQuery(t)?r.onSearchComplete.call(o.element,t,[]):(o.abortAjax(),a={url:l,data:n,type:r.type,dataType:r.dataType},e.extend(a,r.ajaxSettings),o.currentRequest=e.ajax(a).done(function(e){var i;o.currentRequest=null,i=r.transformResult(e,t),o.processResponse(i,t,s),r.onSearchComplete.call(o.element,t,i.suggestions)}).fail(function(e,i,n){r.onSearchError.call(o.element,t,e,i,n)}))}},isBadQuery:function(e){if(!this.options.preventBadQueries)return!1;for(var t=this.badQueries,i=t.length;i--;)if(0===e.indexOf(t[i]))return!0;return!1},hide:function(){var t=this,i=e(t.suggestionsContainer);e.isFunction(t.options.onHide)&&t.visible&&t.options.onHide.call(t.element,i),t.visible=!1,t.selectedIndex=-1,clearInterval(t.onChangeInterval),e(t.suggestionsContainer).hide(),t.signalHint(null)},suggest:function(){if(0!==this.suggestions.length){var t,i=this,n=i.options,s=n.groupBy,a=n.formatResult,o=i.getQuery(i.currentValue),r=i.classes.suggestion,l=i.classes.selected,d=e(i.suggestionsContainer),c=e(i.noSuggestionsContainer),u=n.beforeRender,h="",p=function(e,i){var n=e.data[s];return t===n?"":'<div class="autocomplete-group"><strong>'+(t=n)+"</strong></div>"};return n.triggerSelectOnValidInput&&i.isExactMatch(o)?void i.select(0):(e.each(i.suggestions,function(e,t){s&&(h+=p(t,0)),h+='<div class="'+r+'" data-index="'+e+'">'+a(t,o)+"</div>"}),this.adjustContainerWidth(),c.detach(),d.html(h),e.isFunction(u)&&u.call(i.element,d),i.fixPosition(),d.show(),n.autoSelectFirst&&(i.selectedIndex=0,d.scrollTop(0),d.children("."+r).first().addClass(l)),i.visible=!0,void i.findBestHint())}this.options.showNoSuggestionNotice?this.noSuggestions():this.hide()},noSuggestions:function(){var t=this,i=e(t.suggestionsContainer),n=e(t.noSuggestionsContainer);this.adjustContainerWidth(),n.detach(),i.empty(),i.append(n),t.fixPosition(),i.show(),t.visible=!0},adjustContainerWidth:function(){var t,i=this,n=i.options,s=e(i.suggestionsContainer);"auto"===n.width&&(t=i.el.outerWidth()-2,s.width(t>0?t:300))},findBestHint:function(){var t=this,i=t.el.val().toLowerCase(),n=null;i&&(e.each(t.suggestions,function(e,t){var s=0===t.value.toLowerCase().indexOf(i);return s&&(n=t),!s}),t.signalHint(n))},signalHint:function(t){var i="",n=this;t&&(i=n.currentValue+t.value.substr(n.currentValue.length)),n.hintValue!==i&&(n.hintValue=i,n.hint=t,(this.options.onHint||e.noop)(i))},verifySuggestionsFormat:function(t){return t.length&&"string"==typeof t[0]?e.map(t,function(e){return{value:e,data:null}}):t},validateOrientation:function(t,i){return t=e.trim(t||"").toLowerCase(),-1===e.inArray(t,["auto","bottom","top"])&&(t=i),t},processResponse:function(e,t,i){var n=this,s=n.options;e.suggestions=n.verifySuggestionsFormat(e.suggestions),s.noCache||(n.cachedResponse[i]=e,s.preventBadQueries&&0===e.suggestions.length&&n.badQueries.push(t)),t===n.getQuery(n.currentValue)&&(n.suggestions=e.suggestions,n.suggest())},activate:function(t){var i,n=this,s=n.classes.selected,a=e(n.suggestionsContainer),o=a.find("."+n.classes.suggestion);return a.find("."+s).removeClass(s),n.selectedIndex=t,-1!==n.selectedIndex&&o.length>n.selectedIndex?(i=o.get(n.selectedIndex),e(i).addClass(s),i):null},selectHint:function(){var t=this,i=e.inArray(t.hint,t.suggestions);t.select(i)},select:function(e){var t=this;t.hide(),t.onSelect(e)},moveUp:function(){var t=this;if(-1!==t.selectedIndex)return 0===t.selectedIndex?(e(t.suggestionsContainer).children().first().removeClass(t.classes.selected),t.selectedIndex=-1,t.el.val(t.currentValue),void t.findBestHint()):void t.adjustScroll(t.selectedIndex-1)},moveDown:function(){var e=this;e.selectedIndex!==e.suggestions.length-1&&e.adjustScroll(e.selectedIndex+1)},adjustScroll:function(t){var i=this,n=i.activate(t);if(n){var s,a,o,r=e(n).outerHeight();s=n.offsetTop,o=(a=e(i.suggestionsContainer).scrollTop())+i.options.maxHeight-r,a>s?e(i.suggestionsContainer).scrollTop(s):s>o&&e(i.suggestionsContainer).scrollTop(s-i.options.maxHeight+r),i.options.preserveInput||i.el.val(i.getValue(i.suggestions[t].value)),i.signalHint(null)}},onSelect:function(t){var i=this,n=i.options.onSelect,s=i.suggestions[t];i.currentValue=i.getValue(s.value),i.currentValue===i.el.val()||i.options.preserveInput||i.el.val(i.currentValue),i.signalHint(null),i.suggestions=[],i.selection=s,e.isFunction(n)&&n.call(i.element,s)},getValue:function(e){var t,i,n=this,s=n.options.delimiter;return s?(t=n.currentValue,1===(i=t.split(s)).length?e:t.substr(0,t.length-i[i.length-1].length)+e):e},dispose:function(){var t=this;t.el.off(".autocomplete").removeData("autocomplete"),t.disableKillerFn(),e(window).off("resize.autocomplete",t.fixPositionCapture),e(t.suggestionsContainer).remove()}},e.fn.autocomplete=e.fn.devbridgeAutocomplete=function(i,n){var s="autocomplete";return 0===arguments.length?this.first().data(s):this.each(function(){var a=e(this),o=a.data(s);"string"==typeof i?o&&"function"==typeof o[i]&&o[i](n):(o&&o.dispose&&o.dispose(),o=new t(this,i),a.data(s,o))})}}),window.puJsFileLoadCounter++,function(e){function t(e,t){return function(i){return r(e.call(this,i),t)}}function i(){}function n(e){b(e),a(this,e)}function s(e){var t=p(e),i=t.year||0,n=t.month||0,s=t.week||0,a=t.day||0,o=t.hour||0,r=t.minute||0,l=t.second||0,d=t.millisecond||0;this._input=e,this._milliseconds=+d+1e3*l+6e4*r+36e5*o,this._days=+a+7*s,this._months=+n+12*i,this._data={},this._bubble()}function a(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return t.hasOwnProperty("toString")&&(e.toString=t.toString),t.hasOwnProperty("valueOf")&&(e.valueOf=t.valueOf),e}function o(e){return 0>e?Math.ceil(e):Math.floor(e)}function r(e,t){for(var i=e+"";i.length<t;)i="0"+i;return i}function l(e,t,i,n){var s,a,o=t._milliseconds,r=t._days,l=t._months;o&&e._d.setTime(+e._d+o*i),(r||l)&&(s=e.minute(),a=e.hour()),r&&e.date(e.date()+r*i),l&&e.month(e.month()+l*i),o&&!n&&J.updateOffset(e),(r||l)&&(e.minute(s),e.hour(a))}function d(e){return"[object Array]"===Object.prototype.toString.call(e)}function c(e){return"[object Date]"===Object.prototype.toString.call(e)||e instanceof Date}function u(e,t,i){var n,s=Math.min(e.length,t.length),a=Math.abs(e.length-t.length),o=0;for(n=0;s>n;n++)(i&&e[n]!==t[n]||!i&&f(e[n])!==f(t[n]))&&o++;return o+a}function h(e){if(e){var t=e.toLowerCase().replace(/(.)s$/,"$1");e=Pe[e]||Ee[t]||t}return e}function p(e){var t,i,n={};for(i in e)e.hasOwnProperty(i)&&(t=h(i))&&(n[t]=e[i]);return n}function f(e){var t=+e,i=0;return 0!==t&&isFinite(t)&&(i=t>=0?Math.floor(t):Math.ceil(t)),i}function m(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function g(e){return v(e)?366:365}function v(e){return 0==e%4&&0!=e%100||0==e%400}function b(e){var t;e._a&&-2===e._pf.overflow&&(t=e._a[ie]<0||e._a[ie]>11?ie:e._a[ne]<1||e._a[ne]>m(e._a[te],e._a[ie])?ne:e._a[se]<0||e._a[se]>23?se:e._a[ae]<0||e._a[ae]>59?ae:e._a[oe]<0||e._a[oe]>59?oe:e._a[re]<0||e._a[re]>999?re:-1,e._pf._overflowDayOfYear&&(te>t||t>ne)&&(t=ne),e._pf.overflow=t)}function _(e){e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function $(e){return null==e._isValid&&(e._isValid=!isNaN(e._d.getTime())&&e._pf.overflow<0&&!e._pf.empty&&!e._pf.invalidMonth&&!e._pf.nullInput&&!e._pf.invalidFormat&&!e._pf.userInvalidated,e._strict&&(e._isValid=e._isValid&&0===e._pf.charsLeftOver&&0===e._pf.unusedTokens.length)),e._isValid}function y(e){return e?e.toLowerCase().replace("_","-"):e}function w(e,t){return t.abbr=e,le[e]||(le[e]=new i),le[e].set(t),le[e]}function C(e){delete le[e]}function x(e){var t,i,n,s,a=0,o=function(e){if(!le[e]&&de)try{require("./lang/"+e)}catch(e){}return le[e]};if(!e)return J.fn._lang;if(!d(e)){if(i=o(e))return i;e=[e]}for(;a<e.length;){for(t=(s=y(e[a]).split("-")).length,n=(n=y(e[a+1]))?n.split("-"):null;t>0;){if(i=o(s.slice(0,t).join("-")))return i;if(n&&n.length>=t&&u(s,n,!0)>=t-1)break;t--}a++}return J.fn._lang}function k(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function T(e){var t,i,n=e.match(pe);for(t=0,i=n.length;i>t;t++)n[t]=Oe[n[t]]?Oe[n[t]]:k(n[t]);return function(s){var a="";for(t=0;i>t;t++)a+=n[t]instanceof Function?n[t].call(s,e):n[t];return a}}function N(e,t){return e.isValid()?(t=S(t,e.lang()),Ae[t]||(Ae[t]=T(t)),Ae[t](e)):e.lang().invalidDate()}function S(e,t){var i=5;for(fe.lastIndex=0;i>=0&&fe.test(e);)e=e.replace(fe,function(e){return t.longDateFormat(e)||e}),fe.lastIndex=0,i-=1;return e}function D(e,t){switch(e){case"DDDD":return ve;case"YYYY":case"GGGG":case"gggg":return be;case"YYYYY":case"GGGGG":case"ggggg":return _e;case"S":case"SS":case"SSS":case"DDD":return ge;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return ye;case"a":case"A":return x(t._l)._meridiemParse;case"X":return xe;case"Z":case"ZZ":return we;case"T":return Ce;case"SSSS":return $e;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"ww":case"W":case"WW":case"e":case"E":return me;default:return new RegExp(R(O(e.replace("\\",""))))}}function I(e){var t=((we.exec(e)||[])[0]+"").match(Se)||["-",0,0],i=60*t[1]+f(t[2]);return"+"===t[0]?-i:i}function P(e,t,i){var n,s=i._a;switch(e){case"M":case"MM":null!=t&&(s[ie]=f(t)-1);break;case"MMM":case"MMMM":null!=(n=x(i._l).monthsParse(t))?s[ie]=n:i._pf.invalidMonth=t;break;case"D":case"DD":null!=t&&(s[ne]=f(t));break;case"DDD":case"DDDD":null!=t&&(i._dayOfYear=f(t));break;case"YY":s[te]=f(t)+(f(t)>68?1900:2e3);break;case"YYYY":case"YYYYY":s[te]=f(t);break;case"a":case"A":i._isPm=x(i._l).isPM(t);break;case"H":case"HH":case"h":case"hh":s[se]=f(t);break;case"m":case"mm":s[ae]=f(t);break;case"s":case"ss":s[oe]=f(t);break;case"S":case"SS":case"SSS":case"SSSS":s[re]=f(1e3*("0."+t));break;case"X":i._d=new Date(1e3*parseFloat(t));break;case"Z":case"ZZ":i._useUTC=!0,i._tzm=I(t);break;case"w":case"ww":case"W":case"WW":case"d":case"dd":case"ddd":case"dddd":case"e":case"E":e=e.substr(0,1);case"gg":case"gggg":case"GG":case"GGGG":case"GGGGG":e=e.substr(0,2),t&&(i._w=i._w||{},i._w[e]=t)}}function E(e){var t,i,n,s,a,o,r,l,d,c,u=[];if(!e._d){for(n=M(e),e._w&&null==e._a[ne]&&null==e._a[ie]&&(a=function(t){return t?t.length<3?parseInt(t,10)>68?"19"+t:"20"+t:t:null==e._a[te]?J().weekYear():e._a[te]},null!=(o=e._w).GG||null!=o.W||null!=o.E?r=V(a(o.GG),o.W||1,o.E,4,1):(l=x(e._l),d=null!=o.d?U(o.d,l):null!=o.e?parseInt(o.e,10)+l._week.dow:0,c=parseInt(o.w,10)||1,null!=o.d&&d<l._week.dow&&c++,r=V(a(o.gg),c,d,l._week.doy,l._week.dow)),e._a[te]=r.year,e._dayOfYear=r.dayOfYear),e._dayOfYear&&(s=null==e._a[te]?n[te]:e._a[te],e._dayOfYear>g(s)&&(e._pf._overflowDayOfYear=!0),i=W(s,0,e._dayOfYear),e._a[ie]=i.getUTCMonth(),e._a[ne]=i.getUTCDate()),t=0;3>t&&null==e._a[t];++t)e._a[t]=u[t]=n[t];for(;7>t;t++)e._a[t]=u[t]=null==e._a[t]?2===t?1:0:e._a[t];u[se]+=f((e._tzm||0)/60),u[ae]+=f((e._tzm||0)%60),e._d=(e._useUTC?W:j).apply(null,u)}}function A(e){var t;e._d||(t=p(e._i),e._a=[t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond],E(e))}function M(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function L(e){e._a=[],e._pf.empty=!0;var t,i,n,s,a,o=x(e._l),r=""+e._i,l=r.length,d=0;for(n=S(e._f,o).match(pe)||[],t=0;t<n.length;t++)s=n[t],(i=(D(s,e).exec(r)||[])[0])&&((a=r.substr(0,r.indexOf(i))).length>0&&e._pf.unusedInput.push(a),r=r.slice(r.indexOf(i)+i.length),d+=i.length),Oe[s]?(i?e._pf.empty=!1:e._pf.unusedTokens.push(s),P(s,i,e)):e._strict&&!i&&e._pf.unusedTokens.push(s);e._pf.charsLeftOver=l-d,r.length>0&&e._pf.unusedInput.push(r),e._isPm&&e._a[se]<12&&(e._a[se]+=12),!1===e._isPm&&12===e._a[se]&&(e._a[se]=0),E(e),b(e)}function O(e){return e.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,i,n,s){return t||i||n||s})}function R(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function F(e){var t,i,n,s,o;if(0===e._f.length)return e._pf.invalidFormat=!0,void(e._d=new Date(NaN));for(s=0;s<e._f.length;s++)o=0,t=a({},e),_(t),t._f=e._f[s],L(t),$(t)&&(o+=t._pf.charsLeftOver,o+=10*t._pf.unusedTokens.length,t._pf.score=o,(null==n||n>o)&&(n=o,i=t));a(e,i||t)}function H(e){var t,i=e._i,n=ke.exec(i);if(n){for(e._pf.iso=!0,t=4;t>0;t--)if(n[t]){e._f=Te[t-1]+(n[6]||" ");break}for(t=0;4>t;t++)if(Ne[t][1].exec(i)){e._f+=Ne[t][0];break}we.exec(i)&&(e._f+="Z"),L(e)}else e._d=new Date(i)}function z(t){var i=t._i,n=ce.exec(i);i===e?t._d=new Date:n?t._d=new Date(+n[1]):"string"==typeof i?H(t):d(i)?(t._a=i.slice(0),E(t)):c(i)?t._d=new Date(+i):"object"==typeof i?A(t):t._d=new Date(i)}function j(e,t,i,n,s,a,o){var r=new Date(e,t,i,n,s,a,o);return 1970>e&&r.setFullYear(e),r}function W(e){var t=new Date(Date.UTC.apply(null,arguments));return 1970>e&&t.setUTCFullYear(e),t}function U(e,t){if("string"==typeof e)if(isNaN(e)){if("number"!=typeof(e=t.weekdaysParse(e)))return null}else e=parseInt(e,10);return e}function B(e,t,i,n,s){return s.relativeTime(t||1,!!i,e,n)}function q(e,t,i){var n=ee(Math.abs(e)/1e3),s=ee(n/60),a=ee(s/60),o=ee(a/24),r=ee(o/365),l=45>n&&["s",n]||1===s&&["m"]||45>s&&["mm",s]||1===a&&["h"]||22>a&&["hh",a]||1===o&&["d"]||25>=o&&["dd",o]||45>=o&&["M"]||345>o&&["MM",ee(o/30)]||1===r&&["y"]||["yy",r];return l[2]=t,l[3]=e>0,l[4]=i,B.apply({},l)}function Y(e,t,i){var n,s=i-t,a=i-e.day();return a>s&&(a-=7),s-7>a&&(a+=7),n=J(e).add("d",a),{week:Math.ceil(n.dayOfYear()/7),year:n.year()}}function V(e,t,i,n,s){var a,o,r=new Date(Date.UTC(e,0)).getUTCDay();return i=null!=i?i:s,a=s-r+(r>n?7:0),o=7*(t-1)+(i-s)+a+1,{year:o>0?e:e-1,dayOfYear:o>0?o:g(e-1)+o}}function X(e){var t=e._i,i=e._f;return void 0===e._pf&&_(e),null===t?J.invalid({nullInput:!0}):("string"==typeof t&&(e._i=t=x().preparse(t)),J.isMoment(t)?(e=a({},t),e._d=new Date(+t._d)):i?d(i)?F(e):L(e):z(e),new n(e))}function G(e,t){J.fn[e]=J.fn[e+"s"]=function(e){var i=this._isUTC?"UTC":"";return null!=e?(this._d["set"+i+t](e),J.updateOffset(this),this):this._d["get"+i+t]()}}function K(e,t){J.duration.fn["as"+e]=function(){return+this/t}}function Q(e){var t=!1,i=J;"undefined"==typeof ender&&(this.moment=e?function(){return!t&&console&&console.warn&&(t=!0,console.warn("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.")),i.apply(null,arguments)}:J)}for(var J,Z,ee=Math.round,te=0,ie=1,ne=2,se=3,ae=4,oe=5,re=6,le={},de="undefined"!=typeof module&&module.exports,ce=/^\/?Date\((\-?\d+)/i,ue=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,he=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,pe=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,fe=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,me=/\d\d?/,ge=/\d{1,3}/,ve=/\d{3}/,be=/\d{1,4}/,_e=/[+\-]?\d{1,6}/,$e=/\d+/,ye=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,we=/Z|[\+\-]\d\d:?\d\d/i,Ce=/T/i,xe=/[\+\-]?\d+(\.\d{1,3})?/,ke=/^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d:?\d\d|Z)?)?$/,Te=["YYYY-MM-DD","GGGG-[W]WW","GGGG-[W]WW-E","YYYY-DDD"],Ne=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],Se=/([\+\-]|\d\d)/gi,De="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),Ie={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},Pe={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},Ee={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},Ae={},Me="DDD w W M D d".split(" "),Le="M D H h m s w W".split(" "),Oe={M:function(){return this.month()+1},MMM:function(e){return this.lang().monthsShort(this,e)},MMMM:function(e){return this.lang().months(this,e)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(e){return this.lang().weekdaysMin(this,e)},ddd:function(e){return this.lang().weekdaysShort(this,e)},dddd:function(e){return this.lang().weekdays(this,e)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return r(this.year()%100,2)},YYYY:function(){return r(this.year(),4)},YYYYY:function(){return r(this.year(),5)},gg:function(){return r(this.weekYear()%100,2)},gggg:function(){return this.weekYear()},ggggg:function(){return r(this.weekYear(),5)},GG:function(){return r(this.isoWeekYear()%100,2)},GGGG:function(){return this.isoWeekYear()},GGGGG:function(){return r(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return f(this.milliseconds()/100)},SS:function(){return r(f(this.milliseconds()/10),2)},SSS:function(){return r(this.milliseconds(),3)},SSSS:function(){return r(this.milliseconds(),3)},Z:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+r(f(e/60),2)+":"+r(f(e)%60,2)},ZZ:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+r(f(10*e/6),4)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()}},Re=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];Me.length;)Z=Me.pop(),Oe[Z+"o"]=function(e,t){return function(i){return this.lang().ordinal(e.call(this,i),t)}}(Oe[Z],Z);for(;Le.length;)Z=Le.pop(),Oe[Z+Z]=t(Oe[Z],2);for(Oe.DDDD=t(Oe.DDD,3),a(i.prototype,{set:function(e){var t,i;for(i in e)"function"==typeof(t=e[i])?this[i]=t:this["_"+i]=t},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e){var t,i,n;for(this._monthsParse||(this._monthsParse=[]),t=0;12>t;t++)if(this._monthsParse[t]||(i=J.utc([2e3,t]),n="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[t]=new RegExp(n.replace(".",""),"i")),this._monthsParse[t].test(e))return t},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(e){return this._weekdays[e.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(e){return this._weekdaysShort[e.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(e){return this._weekdaysMin[e.day()]},weekdaysParse:function(e){var t,i,n;for(this._weekdaysParse||(this._weekdaysParse=[]),t=0;7>t;t++)if(this._weekdaysParse[t]||(i=J([2e3,1]).day(t),n="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[t]=new RegExp(n.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t},isPM:function(e){return"p"===(e+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(e,t,i){return e>11?i?"pm":"PM":i?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(e,t){var i=this._calendar[e];return"function"==typeof i?i.apply(t):i},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(e,t,i,n){var s=this._relativeTime[i];return"function"==typeof s?s(e,t,i,n):s.replace(/%d/i,e)},pastFuture:function(e,t){var i=this._relativeTime[e>0?"future":"past"];return"function"==typeof i?i(t):i.replace(/%s/i,t)},ordinal:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",preparse:function(e){return e},postformat:function(e){return e},week:function(e){return Y(e,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),(J=function(t,i,n,s){return"boolean"==typeof n&&(s=n,n=e),X({_i:t,_f:i,_l:n,_strict:s,_isUTC:!1})}).utc=function(t,i,n,s){return"boolean"==typeof n&&(s=n,n=e),X({_useUTC:!0,_isUTC:!0,_l:n,_i:t,_f:i,_strict:s}).utc()},J.unix=function(e){return J(1e3*e)},J.duration=function(e,t){var i,n,a,o=J.isDuration(e),r="number"==typeof e,l=o?e._input:r?{}:e,d=null;return r?t?l[t]=e:l.milliseconds=e:(d=ue.exec(e))?(i="-"===d[1]?-1:1,l={y:0,d:f(d[ne])*i,h:f(d[se])*i,m:f(d[ae])*i,s:f(d[oe])*i,ms:f(d[re])*i}):(d=he.exec(e))&&(i="-"===d[1]?-1:1,a=function(e){var t=e&&parseFloat(e.replace(",","."));return(isNaN(t)?0:t)*i},l={y:a(d[2]),M:a(d[3]),d:a(d[4]),h:a(d[5]),m:a(d[6]),s:a(d[7]),w:a(d[8])}),n=new s(l),o&&e.hasOwnProperty("_lang")&&(n._lang=e._lang),n},J.version="2.4.0",J.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",J.updateOffset=function(){},J.lang=function(e,t){return e?(t?w(y(e),t):null===t?(C(e),e="en"):le[e]||x(e),(J.duration.fn._lang=J.fn._lang=x(e))._abbr):J.fn._lang._abbr},J.langData=function(e){return e&&e._lang&&e._lang._abbr&&(e=e._lang._abbr),x(e)},J.isMoment=function(e){return e instanceof n},J.isDuration=function(e){return e instanceof s},Z=Re.length-1;Z>=0;--Z)!function(t){var i,n;if(0===t.indexOf("week"))i=7,n="day";else{if(0!==t.indexOf("month"))return;i=12,n="month"}J[t]=function(s,a){var o,r,l=J.fn._lang[t],d=[];if("number"==typeof s&&(a=s,s=e),r=function(e){var t=J().utc().set(n,e);return l.call(J.fn._lang,t,s||"")},null!=a)return r(a);for(o=0;i>o;o++)d.push(r(o));return d}}(Re[Z]);for(J.normalizeUnits=function(e){return h(e)},J.invalid=function(e){var t=J.utc(NaN);return null!=e?a(t._pf,e):t._pf.userInvalidated=!0,t},J.parseZone=function(e){return J(e).parseZone()},a(J.fn=n.prototype,{clone:function(){return J(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){return N(J(this).utc(),"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},isValid:function(){return $(this)},isDSTShifted:function(){return!!this._a&&(this.isValid()&&u(this._a,(this._isUTC?J.utc(this._a):J(this._a)).toArray())>0)},parsingFlags:function(){return a({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(e){var t=N(this,e||J.defaultFormat);return this.lang().postformat(t)},add:function(e,t){var i;return i="string"==typeof e?J.duration(+t,e):J.duration(e,t),l(this,i,1),this},subtract:function(e,t){var i;return i="string"==typeof e?J.duration(+t,e):J.duration(e,t),l(this,i,-1),this},diff:function(e,t,i){var n,s,a=this._isUTC?J(e).zone(this._offset||0):J(e).local(),r=6e4*(this.zone()-a.zone());return"year"===(t=h(t))||"month"===t?(n=432e5*(this.daysInMonth()+a.daysInMonth()),s=12*(this.year()-a.year())+(this.month()-a.month()),s+=(this-J(this).startOf("month")-(a-J(a).startOf("month")))/n,s-=6e4*(this.zone()-J(this).startOf("month").zone()-(a.zone()-J(a).startOf("month").zone()))/n,"year"===t&&(s/=12)):(n=this-a,s="second"===t?n/1e3:"minute"===t?n/6e4:"hour"===t?n/36e5:"day"===t?(n-r)/864e5:"week"===t?(n-r)/6048e5:n),i?s:o(s)},from:function(e,t){return J.duration(this.diff(e)).lang(this.lang()._abbr).humanize(!t)},fromNow:function(e){return this.from(J(),e)},calendar:function(){var e=this.diff(J().zone(this.zone()).startOf("day"),"days",!0),t=-6>e?"sameElse":-1>e?"lastWeek":0>e?"lastDay":1>e?"sameDay":2>e?"nextDay":7>e?"nextWeek":"sameElse";return this.format(this.lang().calendar(t,this))},isLeapYear:function(){return v(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=U(e,this.lang()),this.add({d:e-t})):t},month:function(e){var t,i=this._isUTC?"UTC":"";return null!=e?"string"==typeof e&&"number"!=typeof(e=this.lang().monthsParse(e))?this:(t=this.date(),this.date(1),this._d["set"+i+"Month"](e),this.date(Math.min(t,this.daysInMonth())),J.updateOffset(this),this):this._d["get"+i+"Month"]()},startOf:function(e){switch(e=h(e)){case"year":this.month(0);case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e?this.weekday(0):"isoWeek"===e&&this.isoWeekday(1),this},endOf:function(e){return e=h(e),this.startOf(e).add("isoWeek"===e?"week":e,1).subtract("ms",1)},isAfter:function(e,t){return t=void 0!==t?t:"millisecond",+this.clone().startOf(t)>+J(e).startOf(t)},isBefore:function(e,t){return t=void 0!==t?t:"millisecond",+this.clone().startOf(t)<+J(e).startOf(t)},isSame:function(e,t){return t=void 0!==t?t:"millisecond",+this.clone().startOf(t)==+J(e).startOf(t)},min:function(e){return e=J.apply(null,arguments),this>e?this:e},max:function(e){return(e=J.apply(null,arguments))>this?this:e},zone:function(e){var t=this._offset||0;return null==e?this._isUTC?t:this._d.getTimezoneOffset():("string"==typeof e&&(e=I(e)),Math.abs(e)<16&&(e*=60),this._offset=e,this._isUTC=!0,t!==e&&l(this,J.duration(t-e,"m"),1,!0),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(e){return e=e?J(e).zone():0,0==(this.zone()-e)%60},daysInMonth:function(){return m(this.year(),this.month())},dayOfYear:function(e){var t=ee((J(this).startOf("day")-J(this).startOf("year"))/864e5)+1;return null==e?t:this.add("d",e-t)},weekYear:function(e){var t=Y(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==e?t:this.add("y",e-t)},isoWeekYear:function(e){var t=Y(this,1,4).year;return null==e?t:this.add("y",e-t)},week:function(e){var t=this.lang().week(this);return null==e?t:this.add("d",7*(e-t))},isoWeek:function(e){var t=Y(this,1,4).week;return null==e?t:this.add("d",7*(e-t))},weekday:function(e){var t=(this.day()+7-this.lang()._week.dow)%7;return null==e?t:this.add("d",e-t)},isoWeekday:function(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)},get:function(e){return e=h(e),this[e]()},set:function(e,t){return e=h(e),"function"==typeof this[e]&&this[e](t),this},lang:function(t){return t===e?this._lang:(this._lang=x(t),this)}}),Z=0;Z<De.length;Z++)G(De[Z].toLowerCase().replace(/s$/,""),De[Z]);G("year","FullYear"),J.fn.days=J.fn.day,J.fn.months=J.fn.month,J.fn.weeks=J.fn.week,J.fn.isoWeeks=J.fn.isoWeek,J.fn.toJSON=J.fn.toISOString,a(J.duration.fn=s.prototype,{_bubble:function(){var e,t,i,n,s=this._milliseconds,a=this._days,r=this._months,l=this._data;l.milliseconds=s%1e3,e=o(s/1e3),l.seconds=e%60,t=o(e/60),l.minutes=t%60,i=o(t/60),l.hours=i%24,a+=o(i/24),l.days=a%30,r+=o(a/30),l.months=r%12,n=o(r/12),l.years=n},weeks:function(){return o(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*f(this._months/12)},humanize:function(e){var t=+this,i=q(t,!e,this.lang());return e&&(i=this.lang().pastFuture(t,i)),this.lang().postformat(i)},add:function(e,t){var i=J.duration(e,t);return this._milliseconds+=i._milliseconds,this._days+=i._days,this._months+=i._months,this._bubble(),this},subtract:function(e,t){var i=J.duration(e,t);return this._milliseconds-=i._milliseconds,this._days-=i._days,this._months-=i._months,this._bubble(),this},get:function(e){return e=h(e),this[e.toLowerCase()+"s"]()},as:function(e){return e=h(e),this["as"+e.charAt(0).toUpperCase()+e.slice(1)+"s"]()},lang:J.fn.lang,toIsoString:function(){var e=Math.abs(this.years()),t=Math.abs(this.months()),i=Math.abs(this.days()),n=Math.abs(this.hours()),s=Math.abs(this.minutes()),a=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(e?e+"Y":"")+(t?t+"M":"")+(i?i+"D":"")+(n||s||a?"T":"")+(n?n+"H":"")+(s?s+"M":"")+(a?a+"S":""):"P0D"}});for(Z in Ie)Ie.hasOwnProperty(Z)&&(K(Z,Ie[Z]),function(e){J.duration.fn[e]=function(){return this._data[e]}}(Z.toLowerCase()));K("Weeks",6048e5),J.duration.fn.asMonths=function(){return(+this-31536e6*this.years())/2592e6+12*this.years()},J.lang("en",{ordinal:function(e){var t=e%10;return e+(1===f(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),de?(module.exports=J,Q(!0)):"function"==typeof define&&define.amd?define("moment",function(t,i,n){return!0!==n.config().noGlobal&&Q(n.config().noGlobal===e),J}):Q()}.call(this),window.puJsFileLoadCounter++,jQuery(function(){$("#dialogueFlyout").on("shown.bs.tab",function(e){$(".nano").nanoScroller()}),$("body").on("click","li#dashboard-navigation.active._active span.dashboards div.menu-wrapper div.nanor div.nano-content ul.menu-items",function(){$(this).click()}),$("body").on("click",".helpnodeFlyout",function(e){if(e.preventDefault(),DialogueFlyout(),$(".user-action-wrap").addClass("stopMouseHover"),$(this).addClass("helpClass"),$(".helpnodeFlyoutmodal").hasClass("in")){setTimeout(function(){$(".helpnodeFlyoutmodal").modal("hide")},500),$(".helpnodeFlyoutmodal").removeClass("in"),$(".cancelIcon, .shareIcon, .printIcon").hide(),$(".modal-backdrop.backdrop-2").hide(),$("#dialogueFlyout").hasClass("in")&&!$(".helpnodeFlyoutmodal").hasClass("in")||$(".user-action-wrap .nextShow,.user-action-wrap .prevShow").removeClass("disabled"),$(".DialogueCancel").hide(),$(".user-action-wrap").removeClass("stopMouseHover"),$(this).removeClass("helpClass");for(var t in iconArr)$(".user-action-wrap a[data-original-title="+iconArr[t]+"]").css("display","block");iconArr=[]}else $(".helpnodeFlyoutmodal").modal("show"),$(".helpnodeFlyoutmodal").addClass("in"),$(".modal-backdrop").each(function(e,t){""==$(this).attr("class").split(" ").filter(function(e,t){return 0===e.indexOf("backdrop")}).join()?$("#dialogueFlyout").hasClass("in")?$(this).addClass("backdrop-2").hide():$(this).addClass("backdrop-2").show():$("#dialogueFlyout").hasClass("in")?$(".modal-backdrop.backdrop-2").hide():$(".modal-backdrop.backdrop-2").show()}),$(".cancelIcon, .shareIcon, .printIcon").show(),($("#dialogueFlyout").hasClass("in")||$("#helpnodeFlyout").hasClass("in"))&&($(".user-action-wrap .nextShow,.user-action-wrap .prevShow").addClass("disabled"),$(".DialogueCancel").hide()),$(".user-action-wrap").addClass("stopMouseHover"),$(this).addClass("helpClass");$(".nano").nanoScroller(),backdropHeight()}),$("body").on("click",".cancelIcon",function(){$(".user-action-wrap").removeClass("stopMouseHover"),$(".helpnodeFlyoutmodal").removeClass("in"),$(".modal-backdrop.backdrop-2").hide(),$(this).hide(),$(".shareIcon, .printIcon").hide(),!$("#dialogueFlyout").hasClass("in")||$(".helpnodeFlyoutmodal").hasClass("in")?$(".user-action-wrap .nextShow,.user-action-wrap .prevShow").removeClass("disabled"):$(".DialogueCancel").show(),closeUserActionIcon(),$(".user-img").hasClass("openChat")&&$(".close-chat").show(),$(this).parent().children("a.helpClass").removeClass("helpClass")}),$("body").on("click",".user-tab",function(){if($(".user-action-wrap a").last().removeClass("helpClass"),$("#dialogueFlyout").hasClass("in")){$(".user-action-wrap").removeClass("rightSideBg"),$(".user-action-wrap").removeClass("stopMouseHover"),$("#dialogueFlyout").removeClass("in");var e=0,t=setInterval(function(){$(".sm-user-icon").toggleClass("drop-shadow"),5==++e&&($(".sm-user-icon").hasClass("drop-shadow")&&$(".sm-user-icon").removeClass("drop-shadow"),window.clearInterval(t))},280);setTimeout(function(){$("#dialogueFlyout").modal("hide")},600),$(".DialogueCancel").hide(),$(".modal-backdrop.backdrop-1").hide(),$("#dialogueFlyout").hasClass("in")&&!$(".helpnodeFlyoutmodal").hasClass("in")||$(".user-action-wrap .nextShow,.user-action-wrap .prevShow").removeClass("disabled")}else $(".user-action-wrap").addClass("rightSideBg"),$(".user-action-wrap").addClass("stopMouseHover"),$("#dialogueFlyout").modal("show"),$("#dialogueFlyout").addClass("in"),$(".nano").nanoScroller(),$(".modal-backdrop").each(function(e,t){""==$(this).attr("class").split(" ").filter(function(e,t){return 0===e.indexOf("backdrop")}).join()?$(this).addClass("backdrop-1").show():$(".modal-backdrop.backdrop-1").show()}),$(".DialogueCancel").show(),($("#dialogueFlyout").hasClass("in")||$(".helpnodeFlyoutmodal").hasClass("in"))&&$(".user-action-wrap .nextShow,.user-action-wrap .prevShow").addClass("disabled");$(".helpnodeFlyoutmodal").hasClass("in")&&($(".helpnodeFlyoutmodal").removeClass("in"),$(".cancelIcon").hide(),$("#dialogueFlyout").hasClass("in")&&!$(".helpnodeFlyoutmodal").hasClass("in")||$(".user-action-wrap .nextShow,.user-action-wrap .prevShow").removeClass("disabled"),$(".modal-backdrop.backdrop-2").hide()),DialogueFlyout(),backdropHeight()}),$("body").on("click",'#dialogueFlyout a[data-toggle="tab"]',function(){$(".nano").nanoScroller()}),$("body").on("click",".DialogueCancel",function(){$("#dialogueFlyout").removeClass("in"),$(".modal-backdrop.backdrop-1").hide(),$(this).hide(),$("#dialogueFlyout").hasClass("in")||$(".helpnodeFlyoutmodal").hasClass("in")?$(".user-action-wrap .nextShow,.user-action-wrap .prevShow").addClass("disabled"):$(".user-action-wrap .nextShow,.user-action-wrap .prevShow").removeClass("disabled"),$(this).parent().hasClass("rightSideBg")&&($(this).parent().removeClass("rightSideBg"),$(".user-action-wrap").removeClass("stopMouseHover")),$(this).parent().children("a.helpClass").removeClass("helpClass")}),$("body").on("click",".plusIcon",function(e){$("#main_action_menu").hide(),$("#sub_class_action_menu").show(),$(".sub_class_action_menu1").show(),$("#customPopUp .child_class_ids").prop("checked",!1),$("#search-subclass").val(""),$.post(domainUrl+"classes/getNodeYClass",{node_class_id:$("#node_y_class_id").val(),childs:$("#child_ids_of_class").val()},responseGetNodeYClass,"html"),e.stopPropagation(),$(".customPopUp").modal("show"),$(".customPopUp").append('<div class="blackOverlay_subClass"></div>'),$(".modal-backdrop").addClass("backdrop-2"),$(window).width()<=1024&&$("body").addClass("fixedDialogueWindow")}),$("body").on("click",".customPopUpClose",function(){$("#main_action_menu").show(),$("#sub_class_action_menu").hide(),$(".sub_class_action_menu1").hide(),$(".customPopUp").modal("hide"),$(".customPopUp").removeClass("in"),$(".customPopUp").css("height","100%"),$(".modal-backdrop.in").removeClass("backdrop-2")}),jQuery("#search-subclass").keyup(function(){var e=$(this).val();$.post(domainUrl+"classes/getNodeYClass",{node_class_id:$("#node_y_class_id").val(),childs:$("#child_ids_of_class").val(),search_text:e},responseGetNodeYClass,"html")})});var thisObj,manageHightScroll="",selectedViewIcon;jQuery(function(){$("body").on("click",".node_rights_open_class",function(){thisObj=this;var e=$(thisObj).attr("id"),t=$(thisObj).attr("name"),i=$("#instance_property_caption"+e).val(),n=$(".nodeRightsTypeForSelection").val();selectedViewIcon=$(this).attr("data-settings"),$("#form_parti").show(),$("#save_user_parti").show(),$("#delete_user_parti").show(),manageHightScroll="add",$.post(domainUrl+"classes/getIndividualUsers",{propertyId:e,propertyName:t,instanceValue:i,mode:"add",rightsType:n},responseIndividualUsers,"html"),""==$("#is_participant_list").val()&&$.post(domainUrl+"classes/getAllUsers",{},responseParticipant,"json"),""==$("#is_rolecb_list").val()&&$.post(domainUrl+"classes/getAllRoles",{},responseRolescb,"json")}),$("body").on("click",".node_rights_open_class_view",function(){thisObj=this;var e=$(thisObj).attr("id"),t=$(thisObj).attr("name"),i=$("#instance_property_caption"+e).val(),n=$(".nodeRightsTypeForSelection").val();$("#form_parti").hide(),$("#save_user_parti").hide(),$("#delete_user_parti").hide(),manageHightScroll="view",$.post(domainUrl+"classes/getIndividualUsers",{propertyId:e,propertyName:t,instanceValue:i,mode:"view",rightsType:n},responseIndividualUsers,"html"),""==$("#is_participant_list").val()&&$.post(domainUrl+"classes/getAllUsers",{},responseParticipant,"json"),""==$("#is_rolecb_list").val()&&$.post(domainUrl+"classes/getAllRoles",{},responseRolescb,"json")}),$("body").on("click",".node_rights_close_class",function(){$("#nodeRightFlyout.node_rights_open_class").removeClass("openflyout"),$("#nodeRightFlyout.rightFlyout").animate({right:"-100%"}).removeClass("in"),$(".loadder").hide()}),$("body").on("click",".parti_c",function(){var e=0;$(".parti_c").each(function(){1==$(this).prop("checked")&&(e=parseInt(e)+1)}),parseInt(e)>0?$("#delete_user_parti").removeClass("inactive"):$("#delete_user_parti").addClass("inactive")}),$("body").on("click",".all_parti",function(){1==$(this).prop("checked")&&($(".parti_c").each(function(){$(this).prop("checked",!0)}),$("#delete_user_parti").removeClass("inactive")),0==$(this).prop("checked")&&($(".parti_c").each(function(){$(this).prop("checked",!1)}),$("#delete_user_parti").addClass("inactive"))}),$("#participant_list").autocomplete({appendTo:"#participantAutoCompleteBox",lookup:participant,width:"80%",onSelect:function(e){$("#participant_id").val(e.key),$("#participant_list").val(e.value)},forceFixPosition:"auto",orientation:"top"}),$("#rolescb_list").autocomplete({appendTo:"#participantAutoCompleteBox",lookup:rolescb,width:"80%",onSelect:function(e){$("#role_cb_id").val(e.key),$("#rolescb_list").val(e.value)},forceFixPosition:"auto",orientation:"top"})});var participant=[],rolescb=[],w_popout;objChatfn=!0;var openCrossDomain;$(document).ready(function(){miniDialogueAddTitleBar(),checkContextMenu(),$(".cancel_dialogue_title").on("click",function(e){$(".edit-rename-title-mini").addClass("hide"),$(".rename-title-mini").removeClass("hide"),$(".edit-dialog-random-title").val($(".dialog-random-title").text())});$(".nano-content").scroll(function(){})}),$("body").on("keydown",".edit-dialog-random-title",function(e){13!==(e.keyCode?e.keyCode:e.which)||e.shiftKey||($(this).siblings(".save_dialogue_title").hasClass("ref-hideTick")?$(".ref-hideTick.save_dialogue_title").trigger("click"):$(".edit-dialogue-span-box").siblings(".save_dialogue_title").trigger("click"),e.preventDefault())}),$("body").on("keydown",".save_enter_course, .save_enter_search, .save_enter_dialogue",function(e){13!==(e.keyCode?e.keyCode:e.which)||e.shiftKey||($(".add-participants-list").trigger("click"),e.preventDefault())});var bodyEle=$("body"),publishMiniDialogue="a.publish-minidialogue";bodyEle.off("click",publishMiniDialogue).on("click",publishMiniDialogue,function(){console.log($(this).data("params"))}),$("body").on("keydown",".add-new-participant",function(e){13!==(e.keyCode?e.keyCode:e.which)||e.shiftKey||(saveNewActor(),e.preventDefault())}),$("body").on("click",".suggestion_value",function(){var e=$(this);$(".add_actor").val(e.text()),$(".add_actor").data("id",e.data("id")),$(".Add-more-user").find(".suggestresult").html(""),$(".autodropdown").addClass("hide"),$(".actor_adding_class").addClass("add-participants-list")});var courseTitle=[],userList=[],userListdata=[];$("body").on("click",".suggestion_course",function(e){var t=$(this).text(),i=$(this).data("id");$(".existing-search").find(".search-existing-course").val(t),$(".existing-search").find(".search-existing-course").data("id",i),$(".existing-search").find(".suggestresult").html(""),$(".autodropdown.search_auto_drop").addClass("hide")}),$("body").on("keyup",".search-existing-course",function(){var e=$(".pu_plugin_mini_dialogue .search-existing-course").width();$(".pu_plugin_mini_dialogue .addAutoCompleteBox .autocomplete-suggestions").width(e),$(".pu_plugin_mini_dialogue .addAutoCompleteBox .autocomplete-suggestions").niceScroll({cursorcolor:"#000",cursorborder:"0",cursorborderradius:"0",cursorwidth:"2px",background:"rgba(0,0,0,.15)"})}),$("body").on("click",".pop-out",function(){w_popout=window.open(domainUrlApi+"minidialog.php?type=openWindow&uid="+setUserID+"&uname="+setUsername,"PopupWindow","width=820,height=400,scrollbars=yes,resizable=yes"),$(".mini-dialogue-flyout").stop().animate(),$(".mini-dialogue-flyout").addClass("popOutMiniDialogue").removeClass("opened"),openCrossDomain=setInterval(function(){w_popout.closed&&($(".mini-dialogue-flyout").removeClass("popOutMiniDialogue"),$(".pu_plugin_mini_chat").trigger("click"),clearInterval(openCrossDomain))},1e3)}),$("body").on("click",".pop-in",function(){window.close()}),$("body").on("click",".imranClose, .pop-out",function(e){objChatfn=!0;var t=$(".mini-dialogue-flyout").outerWidth();if(0!=$(".ref_add_new_title_bar").length){if($(".ref_add_new_title_bar").remove(),$(".panel-heading:first").addClass("panel_active"),$(".online_users:first").trigger("click"),$(".ref-min-right-dialogue .save_course_detail").hide(),$(".ref_add_right_tab").hide(),$(".ref-textarea-HT textarea").height(""),$(this).hasClass("pop-out"))return $(".mini-dialogue-flyout").css({"margin-right":-t-40}).removeClass("opened"),MiniDialogueContextMenu(),getAllDialogue(),!1;$(".mini_accordion_wrap .panel:nth-child(1) .dialog-accordion").addClass("in"),$(".mini_accordion_wrap .panel:nth-child(1) .base-container i").hasClass("fa-angle-up")&&$(".mini_accordion_wrap .panel:nth-child(1) .base-container i").removeClass("fa-angle-up").addClass("fa-angle-down"),$(".ref-min-center-dialogue .right-bar-tab.default-view-tab").show(),0!=$(".panel-heading.panel_active").siblings(".dialog-accordion").find(".online_users").length&&($(".mini-type-textarea .animate-div").removeClass("manage-opacity"),$(".tab-pane .ref-set-height").removeClass("hide"))}else{if($(".mini-dialogue-flyout .sb-search-input-text").val(""),$(this).hasClass("imranClose")){$(".popOutMiniDialogue").removeClass("popOutMiniDialogue"),$(".mini-dialogue-flyout").animate({"margin-right":-t-40}).removeClass("opened"),MiniDialogueContextMenu(),$(".mini-dialogue-flyout .sb-search").stop().animate({right:"-104%"},400),setTimeout(function(){$(".mini-dialogue-flyout .sb-search").find("input").addClass("hide")},100);$(".mini-dialogue-flyout").width();$(".tabing-section, .right-dialogue-panel").css("width","230px"),$(".ref-min-right-dialogue").css("width","60px"),$(".ref-textarea-HT textarea").height("")}else $(".mini-dialogue-flyout").css({"margin-right":-t-40}).removeClass("opened"),MiniDialogueContextMenu(),getAllDialogue();$("#chatWindows").html(""),$(".mini-type-textarea .animate-div").removeClass("manage-opacity"),$(".tab-pane .ref-set-height").removeClass("hide")}$(".course_info").data("id",""),$(".course_info").val(""),$(".dialogue_info").val(""),$(".course-new-drop .course_info").focus(),0!=$(".serch-fullWd .search-opened-mini").length&&$(".mini-dialogue-flyout .search-opened-mini").trigger("click"),MiniDialogueContextMenu();var i=$(".mini-dialogue-flyout").height()-$(".ref-min-center-dialogue .right-bar-tab:visible").outerHeight();$(".expand-collapse-box").hasClass("append-top")&&$(".mini-type-textarea").css({height:i,"border-top":"none"})}),jQuery("body").on("click",function(e){var t=$(e.target).hasClass("autocomplete-suggestion")||$(e.target).hasClass("search-existing-course"),i=$(".search-existing-course").data("id");t||void 0!=i||$(".search-existing-course").val("")}),$(".search-existing-course").on("keydown",function(e){""!=$(".search-existing-course").val()&&8!=e.which&&46!=e.which||$(".search-existing-course").removeData("id")}),jQuery("body").on("click",function(e){var t=$(e.target).hasClass("autocomplete-suggestion")||$(e.target).hasClass("user-search"),i=$(".user-search").data("id");t||void 0!=i||$(".user-search").val("")}),$(".user-search").on("keydown",function(e){""!=$(".user-search").val()&&8!=e.which&&46!=e.which||$(".user-search").removeData("id")}),$(window).on("focus",function(e){pathname=window.location.pathname;document.title}),$("body").on("keydown",".sb-search-input-text",function(e){13!==(e.keyCode?e.keyCode:e.which)||e.shiftKey||(searchDialogDetail(),e.preventDefault())}),$("body").on("click",".search-course-dialog",function(e){$(this).siblings(".dialog-accordion").find("ul .online_users:first").trigger("click"),$(".panel-heading").removeClass("panel_active"),$(this).addClass("panel_active")});var myDropzone,previewTemplate=document.getElementById("custom-preview-template").innerHTML,messageTo="";myDropzone=new Dropzone("#attachment_panel",{url:domainUrlApi+"upload.php?messageTo="+messageTo,uploadMultiple:!1,previewsContainer:"#chatWindows",clickable:"#attachment-wrap",previewTemplate:previewTemplate,addRemoveLinks:!0,dictRemoveFile:"",dictCancelUpload:"",thumbnailWidth:100,thumbnailHeight:100,maxFilesize:8,acceptedMimeTypes:".jpeg,.jpg,.png,.gif,.zip,.psd,.pdf,.doc,.docx,.xlsx,.csv,.txt",success:function(e,t){if(""!=a){var i=t.split("~");if("error"!=i[0]){if(null!=e.type.match(/image.*/))n="image";else var n="attachment";var s=randomNumberFromRange(100,40),a=$(".chat_wrapper.active .chatters").attr("data-chatter"),o=$(".chat_wrapper.active").attr("data-group"),r=$("#"+a).find(".user-node-id").data("id"),l=$(".panel-heading.panel_active").data("id"),d={type:n,message:i[0],attachmentName:e.name,sender:setUserID,messageto:a,timestamp:getTime(),isGroupMessage:o,username:setUsername,fileTempName:i[1],fileSizeByte:i[2],user_node:r,course_instance_node_id:l,random_id:s};void 0!=a&&saveNodeData(d),websocket.send(JSON.stringify(d))}else $(".panel .fileView").html(""),$("#messagePopup").modal("show")?($("body").removeClass("modal-open"),$("body").find(".modal-backdrop").addClass("mini-confirm-backdrop"),$(".mini-overlay-white-wrapper.white-overlay").removeClass("hide").addClass("show"),$("#messagePopup .modal-footer .btn").click(function(){$(".mini-overlay-white-wrapper.white-overlay").removeClass("show").addClass("hide")})):$(".mini-overlay-white-wrapper.white-overlay").removeClass("show").addClass("hide"),$("#messagePopup").find(".series-content").html(i[1])}},complete:function(e){0==this.files.length&&(console.log("completed"),setTimeout(function(){$("#miniDialogue .nano.ref-set-height").nanoScroller(),$("#miniDialogue .nano.ref-set-height").nanoScroller({scrollBottom:-50})},1e3)),$(".mini-dialogue-flyout .mini-type-textarea .append-top").length?$(".mini-dialogue-flyout .expand-collapse-box:visible").trigger("click"):($(".message").height(""),$(".message").height($(".message").prop("scrollHeight")-20))}}),firstTime=1,myDropzone.on("uploadprogress",function(e,t,i){if(firstTime){whiteCircle(e);var n=e.previewElement.querySelector("#currentTime"),s=Math.floor(Date.now()/1e3);$(n).text(ConvertToLocalTime(s)),$('.dialogue-listing-chat .dz-preview:not(":last")').length&&$('.dialogue-listing-chat .dz-preview:not(":last")').remove()}progressSim(t,e)}),myDropzone.on("success",function(e){$("#error_msg_file").length&&$("#error_msg_file").remove(),myDropzone.removeFile(e)});var paste_printScreen_case=!1,textAreaContainer;